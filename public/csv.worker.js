!function(e){function t(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var n={};return t.m=e,t.c=n,t.p="/",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){var t=e.columnKeys,n=e.table,r=e.dataType,a=_[n](r);return t.map(function(e){return e in a.defined?a.defined[e].valueGetter:function(t){return a.genericGetter(e,t)}})}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=n(18),u=r(s),c=n(3),l=r(c),f=n(13),d=n(9),h=n(16),p={columnKey:"__name",valueGetter:function(e){var t=e.name;return t}},_={metadata:function(){return{defined:o(a({},p.columnKey,p),d.systemDataColumns),genericGetter:d.getUserDefinedValue}},resistanceProfile:function(e){return{defined:a({},p.columnKey,p),genericGetter:function(t,n){var r=n.analysis.resistanceProfile;switch(e){case"profile":return(0,h.isResistant)(r,t)?1:0;case"mechanisms":var a=r.antibiotics;return'"'+a[t].mechanisms.join(",")+'"';default:return""}}}}};(0,u.default)(function(e){var t=e.table,n=e.dataType,r=e.columnKeys,a=e.rows,o=i({columnKeys:r,table:t,dataType:n});return l.default.unparse({fields:r.map(function(e){return(0,f.formatColumnKeyAsLabel)(e)}),data:a.map(function(e){return o.map(function(t){return t(e)})})})})},function(e,t){(function(e){"use strict";function n(){if("WGSA_CONFIG"in e){var t=Object.assign({},WGSA_CONFIG);return WGSA_CONFIG=void 0,t}return{}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n()}).call(t,function(){return this}())},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){for(var t=Object.keys(e),n=0,r={};n<t.length;){var a=t[n];r[a.toLowerCase()]=e[a],n+=1}return r}function i(e){return e.map(a)}function o(e){var t=h.default.parse(e,{header:!0,dynamicTyping:!1,skipEmptyLines:!0});return t.errors.length>0&&(console.error("[WGSA] Errors during CSV to JSON conversion:"),console.dir(t.errors)),t.data=i(t.data),t}function s(e){var t=e.year,n=e.month,r=e.day;return!t||n||r?t&&n&&!r?(0,p.formatMonth)(n)+" "+t:t&&n&&r?(0,p.formatDay)(r)+" "+(0,p.formatMonth)(n)+" "+t:"":t}function u(e){return{year:e.getFullYear(),month:e.getMonth()+1,day:e.getDate()}}function c(e){var t=e.assemblies;return Object.keys(t).forEach(function(e){var n=t[e];n.metadata.datetime&&(n.metadata.date=u(new Date(n.metadata.datetime)))}),e}function l(e){var t=e.date,n=(new Date).getFullYear();if(!t)return!0;var r=t.day,a=t.month,i=t.year;return!(r&&(r<1||r>31||!a||!i))&&(!(a&&(a<1||a>12||!i))&&(!i||!(i<1900||i>n)))}function f(e){var t=e.assemblies;return Object.keys(t).forEach(function(e){var n=t[e].metadata;n.geography&&(n.position=n.geography.position)}),e}Object.defineProperty(t,"__esModule",{value:!0});var d=n(3),h=r(d),p=n(15);t.default={parseCsvToJson:o,getFormattedDateString:s,fixDateFormats:c,isValid:l,fixPositions:f}},function(e,t,n){var r;/*!
		Papa Parse
		v4.1.2
		https://github.com/mholt/PapaParse
	*/
!function(a){"use strict";function i(e,t){if(t=t||{},t.worker&&w.WORKERS_SUPPORTED){var n=p();return n.userStep=t.step,n.userChunk=t.chunk,n.userComplete=t.complete,n.userError=t.error,t.step=E(t.step),t.chunk=E(t.chunk),t.complete=E(t.complete),t.error=E(t.error),delete t.worker,void n.postMessage({input:e,config:t,workerId:n.id})}var r=null;return"string"==typeof e?r=t.download?new u(t):new l(t):(a.File&&e instanceof File||e instanceof Object)&&(r=new c(t)),r.stream(e)}function o(e,t){function n(){"object"==typeof t&&("string"==typeof t.delimiter&&1==t.delimiter.length&&w.BAD_DELIMITERS.indexOf(t.delimiter)==-1&&(u=t.delimiter),("boolean"==typeof t.quotes||t.quotes instanceof Array)&&(s=t.quotes),"string"==typeof t.newline&&(c=t.newline))}function r(e){if("object"!=typeof e)return[];var t=[];for(var n in e)t.push(n);return t}function a(e,t){var n="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var r=e instanceof Array&&e.length>0,a=!(t[0]instanceof Array);if(r){for(var o=0;o<e.length;o++)o>0&&(n+=u),n+=i(e[o],o);t.length>0&&(n+=c)}for(var s=0;s<t.length;s++){for(var l=r?e.length:t[s].length,f=0;f<l;f++){f>0&&(n+=u);var d=r&&a?e[f]:f;n+=i(t[s][d],f)}s<t.length-1&&(n+=c)}return n}function i(e,t){if("undefined"==typeof e||null===e)return"";e=e.toString().replace(/"/g,'""');var n="boolean"==typeof s&&s||s instanceof Array&&s[t]||o(e,w.BAD_DELIMITERS)||e.indexOf(u)>-1||" "==e.charAt(0)||" "==e.charAt(e.length-1);return n?'"'+e+'"':e}function o(e,t){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return!0;return!1}var s=!1,u=",",c="\r\n";if(n(),"string"==typeof e&&(e=JSON.parse(e)),e instanceof Array){if(!e.length||e[0]instanceof Array)return a(null,e);if("object"==typeof e[0])return a(r(e[0]),e)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data instanceof Array&&(e.fields||(e.fields=e.data[0]instanceof Array?e.fields:r(e.data[0])),e.data[0]instanceof Array||"object"==typeof e.data[0]||(e.data=[e.data])),a(e.fields||[],e.data||[]);throw"exception: Unable to serialize unrecognized input"}function s(e){function t(e){var t=y(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new f(t),this._handle.streamer=this,this._config=t}this._handle=null,this._paused=!1,this._finished=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},t.call(this,e),this.parseChunk=function(e){if(this.isFirstChunk&&E(this._config.beforeFirstChunk)){var t=this._config.beforeFirstChunk(e);void 0!==t&&(e=t)}this.isFirstChunk=!1;var n=this._partialLine+e;this._partialLine="";var r=this._handle.parse(n,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var i=r.meta.cursor;this._finished||(this._partialLine=n.substring(i-this._baseIndex),this._baseIndex=i),r&&r.data&&(this._rowCount+=r.data.length);var o=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(T)a.postMessage({results:r,workerId:w.WORKER_ID,finished:o});else if(E(this._config.chunk)){if(this._config.chunk(r,this._handle),this._paused)return;r=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(r.data),this._completeResults.errors=this._completeResults.errors.concat(r.errors),this._completeResults.meta=r.meta),!o||!E(this._config.complete)||r&&r.meta.aborted||this._config.complete(this._completeResults),o||r&&r.meta.paused||this._nextChunk(),r}},this._sendError=function(e){E(this._config.error)?this._config.error(e):T&&this._config.error&&a.postMessage({workerId:w.WORKER_ID,error:e,finished:!1})}}function u(e){function t(e){var t=e.getResponseHeader("Content-Range");return parseInt(t.substr(t.lastIndexOf("/")+1))}e=e||{},e.chunkSize||(e.chunkSize=w.RemoteChunkSize),s.call(this,e);var n;A?this._nextChunk=function(){this._readChunk(),this._chunkLoaded()}:this._nextChunk=function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)return void this._chunkLoaded();if(n=new XMLHttpRequest,A||(n.onload=b(this._chunkLoaded,this),n.onerror=b(this._chunkError,this)),n.open("GET",this._input,!A),this._config.chunkSize){var e=this._start+this._config.chunkSize-1;n.setRequestHeader("Range","bytes="+this._start+"-"+e),n.setRequestHeader("If-None-Match","webkit-no-cache")}try{n.send()}catch(e){this._chunkError(e.message)}A&&0==n.status?this._chunkError():this._start+=this._config.chunkSize},this._chunkLoaded=function(){if(4==n.readyState){if(n.status<200||n.status>=400)return void this._chunkError();this._finished=!this._config.chunkSize||this._start>t(n),this.parseChunk(n.responseText)}},this._chunkError=function(e){var t=n.statusText||e;this._sendError(t)}}function c(e){e=e||{},e.chunkSize||(e.chunkSize=w.LocalChunkSize),s.call(this,e);var t,n,r="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,r?(t=new FileReader,t.onload=b(this._chunkLoaded,this),t.onerror=b(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var a=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,a)}var i=t.readAsText(e,this._config.encoding);r||this._chunkLoaded({target:{result:i}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function l(e){e=e||{},s.call(this,e);var t,n;this.stream=function(e){return t=e,n=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e=this._config.chunkSize,t=e?n.substr(0,e):n;return n=e?n.substr(e):"",this._finished=!n,this.parseChunk(t)}}}function f(e){function t(){if(b&&f&&(u("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+w.DefaultDelimiter+"'"),f=!1),e.skipEmptyLines)for(var t=0;t<b.data.length;t++)1==b.data[t].length&&""==b.data[t][0]&&b.data.splice(t--,1);return n()&&r(),a()}function n(){return e.header&&0==g.length}function r(){if(b){for(var e=0;n()&&e<b.data.length;e++)for(var t=0;t<b.data[e].length;t++)g.push(b.data[e][t]);b.data.splice(0,1)}}function a(){if(!b||!e.header&&!e.dynamicTyping)return b;for(var t=0;t<b.data.length;t++){for(var n={},r=0;r<b.data[t].length;r++){if(e.dynamicTyping){var a=b.data[t][r];"true"==a||"TRUE"==a?b.data[t][r]=!0:"false"==a||"FALSE"==a?b.data[t][r]=!1:b.data[t][r]=s(a)}e.header&&(r>=g.length?(n.__parsed_extra||(n.__parsed_extra=[]),n.__parsed_extra.push(b.data[t][r])):n[g[r]]=b.data[t][r])}e.header&&(b.data[t]=n,r>g.length?u("FieldMismatch","TooManyFields","Too many fields: expected "+g.length+" fields but parsed "+r,t):r<g.length&&u("FieldMismatch","TooFewFields","Too few fields: expected "+g.length+" fields but parsed "+r,t))}return e.header&&b.meta&&(b.meta.fields=g),b}function i(t){for(var n,r,a,i=[",","\t","|",";",w.RECORD_SEP,w.UNIT_SEP],o=0;o<i.length;o++){var s=i[o],u=0,c=0;a=void 0;for(var l=new d({delimiter:s,preview:10}).parse(t),f=0;f<l.data.length;f++){var h=l.data[f].length;c+=h,"undefined"!=typeof a?h>1&&(u+=Math.abs(h-a),a=h):a=h}l.data.length>0&&(c/=l.data.length),("undefined"==typeof r||u<r)&&c>1.99&&(r=u,n=s)}return e.delimiter=n,{successful:!!n,bestDelimiter:n}}function o(e){e=e.substr(0,1048576);var t=e.split("\r");if(1==t.length)return"\n";for(var n=0,r=0;r<t.length;r++)"\n"==t[r][0]&&n++;return n>=t.length/2?"\r\n":"\r"}function s(e){var t=h.test(e);return t?parseFloat(e):e}function u(e,t,n,r){b.errors.push({type:e,code:t,message:n,row:r})}var c,l,f,h=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,p=this,_=0,m=!1,v=!1,g=[],b={data:[],errors:[],meta:{}};if(E(e.step)){var S=e.step;e.step=function(r){if(b=r,n())t();else{if(t(),0==b.data.length)return;_+=r.data.length,e.preview&&_>e.preview?l.abort():S(b,p)}}}this.parse=function(n,r,a){if(e.newline||(e.newline=o(n)),f=!1,!e.delimiter){var s=i(n);s.successful?e.delimiter=s.bestDelimiter:(f=!0,e.delimiter=w.DefaultDelimiter),b.meta.delimiter=e.delimiter}var u=y(e);return e.preview&&e.header&&u.preview++,c=n,l=new d(u),b=l.parse(c,r,a),t(),m?{meta:{paused:!0}}:b||{meta:{paused:!1}}},this.paused=function(){return m},this.pause=function(){m=!0,l.abort(),c=c.substr(l.getCharIndex())},this.resume=function(){m=!1,p.streamer.parseChunk(c)},this.aborted=function(){return v},this.abort=function(){v=!0,l.abort(),b.meta.aborted=!0,E(e.complete)&&e.complete(b),c=""}}function d(e){e=e||{};var t=e.delimiter,n=e.newline,r=e.comments,a=e.step,i=e.preview,o=e.fastMode;if(("string"!=typeof t||w.BAD_DELIMITERS.indexOf(t)>-1)&&(t=","),r===t)throw"Comment character same as delimiter";r===!0?r="#":("string"!=typeof r||w.BAD_DELIMITERS.indexOf(r)>-1)&&(r=!1),"\n"!=n&&"\r"!=n&&"\r\n"!=n&&(n="\n");var s=0,u=!1;this.parse=function(e,c,l){function f(e){E.push(e),T=s}function d(t){return l?p():("undefined"==typeof t&&(t=e.substr(s)),A.push(t),s=m,f(A),b&&_(),p())}function h(t){s=t,f(A),A=[],w=e.indexOf(n,s)}function p(e){return{data:E,errors:S,meta:{delimiter:t,linebreak:n,aborted:u,truncated:!!e,cursor:T+(c||0)}}}function _(){a(p()),E=[],S=[]}if("string"!=typeof e)throw"Input must be a string";var m=e.length,v=t.length,g=n.length,y=r.length,b="function"==typeof a;s=0;var E=[],S=[],A=[],T=0;if(!e)return p();if(o||o!==!1&&e.indexOf('"')===-1){for(var O=e.split(n),C=0;C<O.length;C++){var A=O[C];if(s+=A.length,C!==O.length-1)s+=n.length;else if(l)return p();if(!r||A.substr(0,y)!=r){if(b){if(E=[],f(A.split(t)),_(),u)return p()}else f(A.split(t));if(i&&C>=i)return E=E.slice(0,i),p(!0)}}return p()}for(var R=e.indexOf(t,s),w=e.indexOf(n,s);;)if('"'!=e[s])if(r&&0===A.length&&e.substr(s,y)===r){if(w==-1)return p();s=w+g,w=e.indexOf(n,s),R=e.indexOf(t,s)}else if(R!==-1&&(R<w||w===-1))A.push(e.substring(s,R)),s=R+v,R=e.indexOf(t,s);else{if(w===-1)break;if(A.push(e.substring(s,w)),h(w+g),b&&(_(),u))return p();if(i&&E.length>=i)return p(!0)}else{var I=s;for(s++;;){var I=e.indexOf('"',I+1);if(I===-1)return l||S.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:E.length,index:s}),d();if(I===m-1){var k=e.substring(s,I).replace(/""/g,'"');return d(k)}if('"'!=e[I+1]){if(e[I+1]==t){A.push(e.substring(s,I).replace(/""/g,'"')),s=I+1+v,R=e.indexOf(t,s),w=e.indexOf(n,s);break}if(e.substr(I+1,g)===n){if(A.push(e.substring(s,I).replace(/""/g,'"')),h(I+1+g),R=e.indexOf(t,s),b&&(_(),u))return p();if(i&&E.length>=i)return p(!0);break}}else I++}}return d()},this.abort=function(){u=!0},this.getCharIndex=function(){return s}}function h(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}function p(){if(!w.WORKERS_SUPPORTED)return!1;if(!O&&null===w.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var e=w.SCRIPT_PATH||S;e+=(e.indexOf("?")!==-1?"&":"?")+"papaworker";var t=new a.Worker(e);return t.onmessage=_,t.id=R++,C[t.id]=t,t}function _(e){var t=e.data,n=C[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var a=function(){r=!0,m(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},i={abort:a,pause:v,resume:v};if(E(n.userStep)){for(var o=0;o<t.results.data.length&&(n.userStep({data:[t.results.data[o]],errors:t.results.errors,meta:t.results.meta},i),!r);o++);delete t.results}else E(n.userChunk)&&(n.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!r&&m(t.workerId,t.results)}function m(e,t){var n=C[e];E(n.userComplete)&&n.userComplete(t),n.terminate(),delete C[e]}function v(){throw"Not implemented."}function g(e){var t=e.data;if("undefined"==typeof w.WORKER_ID&&t&&(w.WORKER_ID=t.workerId),"string"==typeof t.input)a.postMessage({workerId:w.WORKER_ID,results:w.parse(t.input,t.config),finished:!0});else if(a.File&&t.input instanceof File||t.input instanceof Object){var n=w.parse(t.input,t.config);n&&a.postMessage({workerId:w.WORKER_ID,results:n,finished:!0})}}function y(e){if("object"!=typeof e)return e;var t=e instanceof Array?[]:{};for(var n in e)t[n]=y(e[n]);return t}function b(e,t){return function(){e.apply(t,arguments)}}function E(e){return"function"==typeof e}var S,A=!a.document&&!!a.postMessage,T=A&&/(\?|&)papaworker(=|&|$)/.test(a.location.search),O=!1,C={},R=0,w={};if(w.parse=i,w.unparse=o,w.RECORD_SEP=String.fromCharCode(30),w.UNIT_SEP=String.fromCharCode(31),w.BYTE_ORDER_MARK="\ufeff",w.BAD_DELIMITERS=["\r","\n",'"',w.BYTE_ORDER_MARK],w.WORKERS_SUPPORTED=!A&&!!a.Worker,w.SCRIPT_PATH=null,w.LocalChunkSize=10485760,w.RemoteChunkSize=5242880,w.DefaultDelimiter=",",w.Parser=d,w.ParserHandle=f,w.NetworkStreamer=u,w.FileStreamer=c,w.StringStreamer=l,"undefined"!=typeof e&&e.exports?e.exports=w:E(a.define)&&a.define.amd?(r=function(){return w}.call(t,n,t,e),!(void 0!==r&&(e.exports=r))):a.Papa=w,a.jQuery){var I=a.jQuery;I.fn.parse=function(e){function t(){if(0==o.length)return void(E(e.complete)&&e.complete());var t=o[0];if(E(e.before)){var a=e.before(t.file,t.inputElem);if("object"==typeof a){if("abort"==a.action)return void n("AbortError",t.file,t.inputElem,a.reason);if("skip"==a.action)return void r();"object"==typeof a.config&&(t.instanceConfig=I.extend(t.instanceConfig,a.config))}else if("skip"==a)return void r()}var i=t.instanceConfig.complete;t.instanceConfig.complete=function(e){E(i)&&i(e,t.file,t.inputElem),r()},w.parse(t.file,t.instanceConfig)}function n(t,n,r,a){E(e.error)&&e.error({name:t},n,r,a)}function r(){o.splice(0,1),t()}var i=e.config||{},o=[];return this.each(function(e){var t="INPUT"==I(this).prop("tagName").toUpperCase()&&"file"==I(this).attr("type").toLowerCase()&&a.FileReader;if(!t||!this.files||0==this.files.length)return!0;for(var n=0;n<this.files.length;n++)o.push({file:this.files[n],inputElem:this,instanceConfig:I.extend({},i)})}),t(),this}}T?a.onmessage=g:w.WORKERS_SUPPORTED&&(S=h(),document.body?document.addEventListener("DOMContentLoaded",function(){O=!0},!0):O=!0),u.prototype=Object.create(s.prototype),u.prototype.constructor=u,c.prototype=Object.create(s.prototype),c.prototype.constructor=c,l.prototype=Object.create(l.prototype),l.prototype.constructor=l}("undefined"!=typeof window?window:this)},function(e,t){"use strict";function n(e){if(!(e instanceof Blob))throw new TypeError("Must be a File or Blob");return new Promise(function(t,n){var r=new FileReader;r.onload=function(e){return t(e.target.result)},r.onerror=function(t){return n("Error reading "+e.name+": "+t.target.result)},r.readAsDataURL(e)})}function r(e){if(!(e instanceof Blob))throw new TypeError("Must be a File or Blob");return new Promise(function(t,n){var r=new FileReader;r.onload=function(e){return t(e.target.result)},r.onerror=function(t){return n("Error reading "+e.name+": "+t.target.result)},r.readAsText(e)})}function a(e){if(!(e instanceof Blob))throw new TypeError("Must be a File or Blob");return new Promise(function(t,n){var r=new FileReader;r.onload=function(e){return t(e.target.result)},r.onerror=function(t){return n("Error reading "+e.name+": "+t.target.result)},r.readAsArrayBuffer(e)})}e.exports={readAsDataURL:n,readAsText:r,readAsArrayBuffer:a}},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){return i.reduce(function(t,r){return a({},t,n({},r,e+"::"+r))},{})}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.createAsyncConstants=r;var i=["ATTEMPT","SUCCESS","FAILURE"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT=t.CGPS=void 0;var r=n(12);t.CGPS={COLOURS:{GREEN_LIGHT:"#d0e9dc",GREEN_MID:"#87c7a6",GREEN:"#48996F",PURPLE_LIGHT:"#a386bd",PURPLE_WARM:"#AC65A6",PURPLE:"#673c90",GREY:"#e5e5e5",GREY_LIGHT:"#efefef",GREY_DARK:"#ababab"}},t.DEFAULT={SHAPE:"circle",COLOUR:"#555555",DANGER_COLOUR:"#d11b1b",WARNING_COLOUR:"#d19b1b",TREE_TYPE:"rectangular",NODE_SIZE:10,LABEL_SIZE:10,LAYOUT:{MINIMUM_CONTAINER_WIDTH:150,MINIMUM_CONTAINER_HEIGHT:50},SELECTED_TREE_NODE_LABEL:"id",MAP:{CENTER:{LATITUDE:47.34452036,LONGITUDE:5.85082183}},SUPPORTED_FILE_EXTENSIONS:[".csv"].concat(r.FASTA_FILE_EXTENSIONS).join(",")}},function(e,t){"use strict";function n(e){return{type:o,payload:{name:e}}}function r(e){return{type:s,payload:{view:e}}}function a(e){return{type:u,payload:{column:e}}}function i(e,t){return{type:c,payload:{table:e,columns:t}}}Object.defineProperty(t,"__esModule",{value:!0}),t.setTable=n,t.showTableView=r,t.setLabelColumn=a,t.setColourColumns=i;var o=t.SET_TABLE="SET_TABLE",s=t.SHOW_TABLE_VIEW="SHOW_TABLE_VIEW",u=t.SET_LABEL_COLUMN="SET_LABEL_COLUMN",c=t.SET_COLOUR_COLUMNS="SET_COLOUR_COLUMNS"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getActiveAMRTable=t.getVisibleTable=t.getAMRTableName=t.getVisibleTableName=t.getMetadataTable=t.getTables=t.getTableState=void 0;var r=n(19),a=t.getTableState=function(e){var t=e.collectionViewer;return t.table},i=t.getTables=function(e){return a(e).entities},o=(t.getMetadataTable=function(e){return i(e).metadata},t.getVisibleTableName=function(e){return a(e).visible}),s=t.getAMRTableName=function(e){return a(e).activeAMR};t.getVisibleTable=(0,r.createSelector)(i,o,function(e,t){return e[t]}),t.getActiveAMRTable=(0,r.createSelector)(i,s,function(e,t){return e[t]})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return["__date"].concat(e.noPopulation?[]:["__wgsa_reference","__st"]).concat(e.noMLST?[]:["__profile"]).concat(e.ngMast?["__ng-mast","__por","__tbpb"]:[]).concat(e.genotyphi?["__genotyphi_type"]:[]).concat(["__core_matches","__%_core_families","__%_non-core","__assembly_length","__n50","__no._contigs","__non-ATCG","__GC_Content"])}function i(e){return a(e).map(function(e){return u[e]})}Object.defineProperty(t,"__esModule",{value:!0}),t.getUserDefinedValue=t.systemDataColumns=void 0,t.getSystemDataColumnProps=i;var o=n(2),s=r(o),u=t.systemDataColumns={__date:{columnKey:"__date",valueGetter:function(e){var t=e.metadata;return s.default.getFormattedDateString(t.date)}},__wgsa_reference:{columnKey:"__wgsa_reference",valueGetter:function(e){var t=e.analysis;return t.populationSubtype}},__st:{columnKey:"__st",valueGetter:function(e){var t=e.analysis;return t.st}},__profile:{columnKey:"__profile",valueGetter:function(e){var t=e.analysis;return t.mlst}},"__ng-mast":{columnKey:"__ng-mast",valueGetter:function(e){var t=e.analysis;return t.ngmast?t.ngmast.ngmast:null}},__por:{columnKey:"__por",valueGetter:function(e){var t=e.analysis;return t.ngmast?t.ngmast.por:null}},__tbpb:{columnKey:"__tbpb",valueGetter:function(e){var t=e.analysis;return t.ngmast?t.ngmast.tbpb:null}},__genotyphi_type:{columnKey:"__genotyphi_type",valueGetter:function(e){var t=e.analysis;return t.genotyphi?t.genotyphi.genotype:null}},__core_matches:{columnKey:"__core_matches",valueGetter:function(e){var t=e.analysis;return t.core?t.core.size:null}},"__%_core_families":{columnKey:"__%_core_families",valueGetter:function(e){var t=e.analysis;return t.core?t.core.percentMatched:null}},"__%_non-core":{columnKey:"__%_non-core",valueGetter:function(e){var t=e.analysis;return t.core&&t.core.percentAssemblyMatched?(100-t.core.percentAssemblyMatched).toFixed(1):null}},__assembly_length:{columnKey:"__assembly_length",valueGetter:function(e){var t=e.metadata;return t.metrics?t.metrics.totalNumberOfNucleotidesInDnaStrings:null}},__n50:{columnKey:"__n50",valueGetter:function(e){var t=e.metadata;return t.metrics?t.metrics.contigN50:null}},"__no._contigs":{columnKey:"__no._contigs",valueGetter:function(e){var t=e.metadata;return t.metrics?t.metrics.totalNumberOfContigs:null}},"__non-ATCG":{columnKey:"__non-ATCG",valueGetter:function(e){var t=e.metadata;return t.metrics?t.metrics.totalNumberOfNsInDnaStrings:null}},__GC_Content:{columnKey:"__GC_Content",valueGetter:function(e){var t=e.metadata;return t.metrics&&t.metrics.gcContent?t.metrics.gcContent+"%":null}}};t.getUserDefinedValue=function(e,t){var n=t.metadata;return n.userDefined[e]}},function(e,t,n){"use strict";function r(e){return{type:c,payload:{fastas:e}}}function a(e,t){return{type:l,payload:{name:e,progress:t}}}function i(e){return{type:f,payload:{name:e}}}function o(e){return{type:d,payload:{fasta:e}}}function s(e){return{type:h,payload:{metric:e}}}Object.defineProperty(t,"__esModule",{value:!0}),t.SHOW_METRIC=t.UNDO_REMOVE_FASTA=t.REMOVE_FASTA=t.UPDATE_FASTA_PROGRESS=t.UPLOAD_FASTA=t.ADD_FASTAS=void 0;var u=n(5),c=t.ADD_FASTAS="ADD_FASTAS",l=(t.UPLOAD_FASTA=(0,u.createAsyncConstants)("UPLOAD_FASTA"),t.UPDATE_FASTA_PROGRESS="UPDATE_FASTA_PROGRESS"),f=t.REMOVE_FASTA="REMOVE_FASTA",d=t.UNDO_REMOVE_FASTA="UNDO_REMOVE_FASTA",h=t.SHOW_METRIC="SHOW_METRIC";t.default={addFastas:r,updateFastaProgress:a,removeFasta:i,undoRemoveFasta:o,showMetric:s}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return new Promise(function(t,n){0===e.size?n(l.EMPTY_FILE):e.size>d?n(l.INVALID_FASTA_SIZE):t(e)})}function i(e){var t=e.replace(/\r/g,"");if(c.test(t))return t;throw l.INVALID_FASTA_CONTENT}function o(e){var t=e.error;return t&&!f.has(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.fastaValidationErrorSet=t.fastaValidationErrors=void 0,t.validateFastaSize=a,t.validateFastaContent=i,t.isFailedUpload=o;var s=n(1),u=r(s),c=/^(?:[>;].+(?:\n[ACGTURYKMSWBDHVN]+\*?)+\n*)+$/i,l=t.fastaValidationErrors={INVALID_FASTA_SIZE:"INVALID_FASTA_SIZE",INVALID_FASTA_CONTENT:"INVALID_FASTA_CONTENT",EMPTY_FILE:"EMPTY_FILE"},f=t.fastaValidationErrorSet=new Set(Object.keys(l)),d=1048576*u.default.maxFastaFileSize},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e)return l({},e,{assemblyName:e.displayname||e.filename,latitude:parseFloat(e.latitude),longitude:parseFloat(e.longitude)})}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.year,n=e.month,r=e.day;return t?new Date(t,parseInt(n||"1",10)-1,r||1):void 0}function o(e){return e.reduce(function(e,t){var n=t.data,r=void 0===n?{}:n;return e.concat(r)},[])}function s(e){var t=e.filter(function(e){var t=e.name;return b.test(t)}),n=e.filter(function(e){var t=e.name;return y.test(t)});return t.length?Promise.all(t.map(function(e){return(0,f.readAsText)(e).then(function(e){return _.default.parseCsvToJson(e)})})).then(function(e){return o(e)}).then(function(e){return n.map(function(t){var n=e.filter(function(e){var n=e.filename;return n===t.name})[0];return{name:t.name,file:t,metadata:a(n),date:i(n)}})}):Promise.resolve(n.map(function(e){return{name:e.name,file:e}}))}function u(e,t){var n=new window.XMLHttpRequest,r=0;return n.upload.addEventListener("progress",function(n){if(n.lengthComputable){var a=n.loaded/n.total*100,i=10*Math.floor(a/10);i>r&&(t(h.default.updateFastaProgress(e,i)),r=i)}},!1),n}function c(e,t){var n=e.file,r=e.metadata,a=void 0===r?{}:r,i=a.latitude,o=void 0===i?"":i,s=a.longitude,c=void 0===s?"":s;return(0,v.validateFastaSize)(n).then(f.readAsText).then(v.validateFastaContent).then(function(e){return $.ajax({type:"POST",url:m.API_ROOT+"/upload?latitude="+o+"&longitude="+c,contentType:"text/plain; charset=UTF-8",data:e,dataType:"json",xhr:function(){return u(n.name,t)}})})}Object.defineProperty(t,"__esModule",{value:!0}),t.FASTA_FILE_EXTENSIONS=void 0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.mapCSVsToFastas=s,t.sendToServer=c;var f=n(4),d=n(10),h=r(d),p=n(2),_=r(p),m=n(14),v=n(11),g=t.FASTA_FILE_EXTENSIONS=[".fa",".fas",".fna",".ffn",".faa",".frn",".fasta",".contig"],y=new RegExp("("+g.join("|")+")$","i"),b=/(.csv)$/i},function(e,t){"use strict";function n(e){return e.getLabel?e.getLabel():a(e.columnKey)}function r(e,t,n){var r=e[t],a=e[n];return r.metadata.assemblyName<a.metadata.assemblyName?-1:r.metadata.assemblyName>a.metadata.assemblyName?1:0}Object.defineProperty(t,"__esModule",{value:!0}),t.getColumnLabel=n,t.sortAssemblies=r;var a=(t.getCellValue=function(e,t){var n=e.valueGetter;return n(t)},t.formatColumnKeyAsLabel=function(e){return e.replace(/_?_autocolou?r$/,"").replace(/^__/,"").replace(/_/g," ").toUpperCase()})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return new Promise(function(t,n){$.ajax(e).done(function(e){return t(e)}).fail(function(e){return n(e)})})}function i(e,t,n){return a({type:"POST",url:""+v+e,contentType:"application/json; charset=UTF-8",data:JSON.stringify(t),dataType:"json",xhr:function e(){var e=new window.XMLHttpRequest;return n&&e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;n(t)}},!1),e}})}function o(e,t,n){i("/species/"+e+"/collection",t).then(function(e){return n(null,e)},function(e){return n(e)})}function s(e){return $.get(v+"/species/"+e+"/reference")}function u(e,t){return console.log("[WGSA] Getting collection "+t),$.get(v+"/species/"+e+"/collection/"+t)}function c(e,t){var n=e.speciesId,r=e.idType,a=void 0===r?"assembly":r,o=e.format;return i("/species/"+n+"/download/type/"+a+"/format/"+o,t)}function l(e,t,n){return function(){return c({speciesId:n,format:e},{idList:Array.isArray(t)?t:[t]})}}function f(e){return $.get(v+"/species/"+e+"/resistance")}function d(e,t,n){return a({type:"GET",url:v+"/species/"+e+"/collection/"+t+"/subtree/"+n})}function h(e,t,n){return $.get(v+"/species/"+e+"/collection/"+t+"/status",{cas:n})}Object.defineProperty(t,"__esModule",{value:!0}),t.API_ROOT=t.SERVER_ADDRESS=void 0,t.postJson=i,t.getCollectionId=o,t.getReferenceCollection=s,t.getCollection=u,t.requestFile=c,t.makeFileRequest=l,t.getResistanceData=f,t.getSubtree=d,t.checkCollectionStatus=h;var p=n(1),_=r(p),m=t.SERVER_ADDRESS=_.default.api?"http://"+_.default.api.address:"",v=t.API_ROOT=m+"/api"},function(e,t){"use strict";function n(e){var t=e%10,n=1===~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th";return e+n}Object.defineProperty(t,"__esModule",{value:!0}),t.formatDay=n;var r=t.months=["January","February","March","April","May","June","July","August","September","October","November","December"].map(function(e,t){return{text:e,value:t}});t.formatMonth=function(e){return r[e-1].text}},function(e,t,n){"use strict";function r(e,t){var n=e.antibiotics;return t in n&&"UNKNOWN"!==n[t].state}function a(e){return e.__isCollection?h.CGPS.COLOURS.PURPLE_LIGHT:h.CGPS.COLOURS.GREY}function i(e,t){var n=t.analysis.resistanceProfile;return n?r(n,e)?p[n.antibiotics[e].state]:_:a(t)}function o(e,t,n){var r=n.analysis.resistanceProfile;return r?r[t].indexOf(e)!==-1?p.RESISTANT:_:a(n)}function s(e,t){return new Set(Array.from(e.size?e:v).map(function(e){return e.valueGetter(t)}))}function u(e){return"antibiotics"===e?_:p.RESISTANT}function c(e,t){return function(n){var r=s(t,n);return 1===r.size?Array.from(r)[0]:u(e)}}function l(e,t){return function(n,r){var a=r(),i=(0,d.getAMRTableName)(a),o=(0,d.getActiveAMRTable)(a),s=o.activeColumns,u=t.group?t.columns.filter(function(e){return e.valueGetter&&!e.hidden}):[t];if(t.group&&u.every(function(e){return s.has(e)})){var c=!0,l=!1,h=void 0;try{for(var p,_=u[Symbol.iterator]();!(c=(p=_.next()).done);c=!0){var m=p.value;s.delete(m)}}catch(e){l=!0,h=e}finally{try{!c&&_.return&&_.return()}finally{if(l)throw h}}return void n((0,f.setColourColumns)(i,new Set(s)))}var v=e.metaKey||e.ctrlKey;if(v){var g=!0,y=!1,b=void 0;try{for(var E,S=u[Symbol.iterator]();!(g=(E=S.next()).done);g=!0){var A=E.value;t.group?s.add(A):s[s.has(A)?"delete":"add"](A)}}catch(e){y=!0,b=e}finally{try{!g&&S.return&&S.return()}finally{if(y)throw b}}return void n((0,f.setColourColumns)(i,new Set(s)))}return s.has(t)&&1===s.size?void n((0,f.setColourColumns)(i,new Set)):void n((0,f.setColourColumns)(i,new Set(u)))}}Object.defineProperty(t,"__esModule",{value:!0}),t.getColourState=t.nonResistantColour=void 0,t.isResistant=r,t.defaultColourGetter=a,t.getColour=i,t.getAdvancedColour=o,t.createColourGetter=c,t.onHeaderClick=l;var f=n(7),d=n(8),h=n(6),p={RESISTANT:h.DEFAULT.DANGER_COLOUR,INTERMEDIATE:h.DEFAULT.WARNING_COLOUR},_=t.nonResistantColour="#fff",m=Object.keys(p).reduce(function(e,t){return e.set(p[t],t)},(new Map).set(_,"UNKNOWN")),v=[{valueGetter:a}];t.getColourState=function(e){return m.get(e)}},function(e,t){function n(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}e.exports=n},function(e,t,n){"use strict";function r(e){try{return JSON.parse(e)}catch(e){return!1}}function a(e){function t(e,t,n,r){function a(t){"function"!=typeof self.postMessage?e.ports[0].postMessage(t):self.postMessage(t)}n?("undefined"!=typeof console&&"error"in console&&console.error("Worker caught an error:",n),a(JSON.stringify([t,{message:n.message}]))):a(JSON.stringify([t,null,r]))}function n(e,t){try{return{res:e(t)}}catch(e){return{err:e}}}function a(e,r,a,o){var s=n(r,o);s.err?t(e,a,s.err):i(s.res)?s.res.then(function(n){t(e,a,null,n)},function(n){t(e,a,n)}):t(e,a,null,s.res)}function o(n){var i=r(n.data);if(i){var o=i[0],s=i[1];"function"!=typeof e?t(n,o,new Error("Please pass a function into register().")):a(n,e,o,s)}}self.addEventListener("message",o)}var i=n(17);e.exports=a},function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function r(e,t){return e===t}function a(e){var t=arguments.length<=1||void 0===arguments[1]?r:arguments[1],n=null,a=null;return function(){for(var r=arguments.length,i=Array(r),o=0;o<r;o++)i[o]=arguments[o];return null!==n&&n.length===i.length&&i.every(function(e,r){return t(e,n[r])})||(a=e.apply(void 0,i)),n=i,a}}function i(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every(function(e){return"function"==typeof e})){var n=t.map(function(e){return typeof e}).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, "+("instead received the following types: ["+n+"]"))}return t}function o(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return function(){for(var t=arguments.length,a=Array(t),o=0;o<t;o++)a[o]=arguments[o];var s=0,u=a.pop(),c=i(a),l=e.apply(void 0,[function(){return s++,u.apply(void 0,arguments)}].concat(r)),f=function(e,t){for(var r=arguments.length,a=Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];var o=c.map(function(n){return n.apply(void 0,[e,t].concat(a))});return l.apply(void 0,n(o))};return f.resultFunc=u,f.recomputations=function(){return s},f.resetRecomputations=function(){return s=0},f}}function s(e){var t=arguments.length<=1||void 0===arguments[1]?u:arguments[1];if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e);return t(n.map(function(t){return e[t]}),function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(function(e,t,r){return e[n[r]]=t,e},{})})}t.__esModule=!0,t.defaultMemoize=a,t.createSelectorCreator=o,t.createStructuredSelector=s;var u=t.createSelector=o(a)}]);