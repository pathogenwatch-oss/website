(this.webpackJsonp=this.webpackJsonp||[]).push([[0],[function(e,t,n){var r=n(393),a=n(550),o=n(1);r.createClass=a,r.PropTypes=o,e.exports=r},,,,,,,,function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));n(2);var r=n(18);function a(e){return r.a.api?"".concat(r.a.api.address).concat(e):e}function o(e){return new Promise((function(t,n){$.ajax(e).done((function(e){return t(e)})).fail((function(e){return n(e)}))}))}function i(e,t,n,r){return o({type:e,url:a(t),contentType:"application/json; charset=UTF-8",data:"GET"===e?n:JSON.stringify(n),dataType:"json",headers:r})}function c(e,t,n,r,i){return o({type:e,url:a(t),contentType:n,data:r,processData:!1,dataType:"json",xhr:i?function(){var e=new window.XMLHttpRequest,t=0;return e.upload.addEventListener("progress",(function(e){if(e.lengthComputable){var n=e.loaded/e.total*100,r=10*Math.floor(n/10);r>t&&(i(r),t=r)}}),!1),e}:void 0})}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l}));var r,a=n(2),o=n.n(a),i={READY:"READY",PROCESSING:"PROCESSING",NOT_FOUND:"NOT_FOUND",FAILED:"FAILED",ABORTED:"ABORTED"},c={metadata:"metadata",typing:"typing",stats:"stats",antibiotics:"antibiotics",snps:"snps",genes:"genes",kleborateAMR:"kleborateAMR",timeline:"timeline"},l=(r={},o()(r,c.antibiotics,"Antibiotics"),o()(r,c.genes,"Genes"),o()(r,c.kleborateAMR,"Kleborate AMR"),o()(r,c.metadata,"Metadata"),o()(r,c.stats,"Stats"),o()(r,c.snps,"SNPs"),o()(r,c.timeline,"Timeline"),o()(r,c.typing,"Typing"),r)},function(e,t,n){"use strict";n(241);var r=n(136);n.d(t,"a",(function(){return r.FormattedName})),n.d(t,"c",(function(){return r.getOrganismName})),n.d(t,"d",(function(){return r.taxIdMap})),n.d(t,"b",(function(){return r.default}))},,,function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return p})),n.d(t,"e",(function(){return f}));var r=n(3),a=n(307),o=n.n(a),i=n(29),c=n(12),l=function(e){return e.viewer},s=function(e){return e.viewer.history},u=function(e){return l(e).entities.collection},d=function(e){return u(e).isClusterView},m=Object(r.createSelector)(u,(function(e){var t=e.title;return t?o()(t):null})),p=Object(r.createSelector)(u,(function(e){return{title:e.title,description:e.description,dateCreated:new Date(e.createdAt),pmid:e.pmid,owner:e.owner,access:e.access}})),f=Object(r.createSelector)(u,(function(e){return e.size<3?i.b:c.b.uiOptions.noPopulation?i.a:null}))},,function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return m}));var r=n(25),a=n.n(r),o=n(2),i=n.n(o),c=n(309);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=["ATTEMPT","SUCCESS","FAILURE"];function d(e){return u.reduce((function(t,n){return s({},t,i()({},n,"".concat(e,"::").concat(n)))}),{})}function m(e,t){return function(n,r){var o=r(),i=t(o),l=e(i),u=l.payload,d=u.promise,m=a()(u,["promise"]);return n({type:l.type,payload:s({},m,{promise:d.then((function(e){var n=r(),a=t(n);return i!==a?c.a:e}))})})}}},function(e,t,n){"use strict";(function(e){t.a=function(){if("PW_CONFIG"in e){var t=Object.assign({},PW_CONFIG);return PW_CONFIG=void 0,t}return{}}()}).call(this,n(55))},,function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return c}));var r={COLOURS:{GREEN_LIGHT:"#d0e9dc",GREEN_MID:"#87c7a6",GREEN:"#48996F",TURQUOISE:"#3c7383",PURPLE_LIGHT:"#a386bd",PURPLE_WARM:"#AC65A6",PURPLE:"#673c90",GREY:"#e5e5e5",GREY_LIGHT:"#efefef",GREY_DARK:"#ababab"}},a=[".fa",".fas",".fna",".ffn",".faa",".frn",".fasta",".genome",".contig",".dna"],o={SHAPE:"circle",COLOUR:"#555555",DANGER_COLOUR:"#d11b1b",WARNING_COLOUR:"#d19b1b",TREE_TYPE:"rectangular",NODE_SIZE:10,LABEL_SIZE:10,LAYOUT:{MINIMUM_CONTAINER_WIDTH:150,MINIMUM_CONTAINER_HEIGHT:50},SELECTED_TREE_NODE_LABEL:"id",MAP:{CENTER:{LATITUDE:47.34452036,LONGITUDE:5.85082183}}},i={LOADING:0,ERROR:1,SUCCESS:2},c={cgmlst:"cgMLST",core:"Core SNPs",genotyphi:"Genotyphi",inctyper:"Inctyper",kleborate:"Kleborate",metrics:"Stats",mlst:"MLST",mlst2:"MLST",ngmast:"NG-MAST",ngstar:"NG-STAR",paarsnp:"AMR",poppunk:"Strain",serotype:"Serotype",speciator:"Species prediction",spn_pbp_amr:"CDC AMR (PBPs)"}},,,,,,,function(e,t,n){"use strict";n.d(t,"d",(function(){return u})),n.d(t,"h",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"f",(function(){return g})),n.d(t,"c",(function(){return v})),n.d(t,"g",(function(){return b}));var r=n(2),a=n.n(r),o=n(17),i=n(38),c=n(198);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=Object(o.b)("FETCH_GENOME_SUMMARY");function d(e){return{type:u,payload:{filter:e,promise:Object(c.e)(e)}}}var m=Object(o.b)("FETCH_GENOME_LIST"),p=function(e){return null!=e};function f(e,t){var n=void 0,r=void 0;p(e)&&(n=e,p(t)&&(r=t-e+1));var a={skip:n,limit:r};return function(e,t){var n=Object(i.a)(t());return e({type:m,payload:{filter:n,options:a,promise:Object(c.b)(s({},n,{},a))}})}}var h=Object(o.b)("FETCH_GENOME_MAP");function g(){return function(e,t){var n=Object(i.a)(t());e({type:h,payload:{filter:n,promise:Object(c.c)(n)}})}}var v=Object(o.b)("FETCH_GENOME_STATS");function b(){return function(e,t){var n=Object(i.a)(t());e({type:v,payload:{filter:n,promise:Object(c.d)(n)}})}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r="COLLECTION",a="POPULATION"},,function(e,t,n){"use strict";n.d(t,"e",(function(){return g})),n.d(t,"h",(function(){return v})),n.d(t,"g",(function(){return b})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return E})),n.d(t,"d",(function(){return O})),n.d(t,"i",(function(){return C})),n.d(t,"f",(function(){return w})),n.d(t,"j",(function(){return S})),n.d(t,"a",(function(){return N})),n.d(t,"k",(function(){return P}));var r=n(3),a=n(53),o=n.n(a),i=n(87),c=n.n(i),l=n(61),s=n(153),u=n(104),d=n(38),m=n(132),p=n(8),f=n(20),h=function(e){return e.genomes.selection},g=function(e){return h(e).genomes},v=function(e){return h(e).dropdown},b=function(e){return h(e).download},y=function(e){return h(e).lastSelectedIndex},E=Object(r.createSelector)(g,d.d,(function(e,t){var n=Object.keys(e);return"bin"===t?n.filter((function(t){return e[t].binned})):n})),O=Object(r.createSelector)(g,E,(function(e,t){return t.map((function(t){return e[t]}))})),C=function(e){return O(e).length},w=Object(r.createSelector)(O,u.a,(function(e,t){return e.filter((function(e){return t.has(e.organismId)}))})),S=(Object(r.createSelector)(E,(function(e){return Object(m.c)(e.length)})),Object(r.createSelector)(E,l.a,s.c,(function(e,t,n){return 0===e.length?"UNCHECKED":t.length===n&&t.every((function(t){var n=t.id;return-1!==e.indexOf(n)}))?"CHECKED":"INDETERMINATE"})));function j(e,t,n){var r=Object(p.c)("/download/analysis/".concat(e)),a={};"serotype"===e&&(a.speciesId=n.speciesId),"mlst"===e&&(a.filename="mlst-".concat(t[0],".csv")),"mlst2"===e&&(a.filename="mlst-".concat(t[0],".csv"));var o=c.a.stringify(a);return o?"".concat(r,"?").concat(o):r}var N=Object(r.createSelector)(b,(function(e){var t=e.summary;return t?t.map((function(e){var t=new Set,n=[],r=!0,a=!1,i=void 0;try{for(var c,l=e.tasks[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var s=c.value,u=s.task,d=s.ids,m=s.sources;"paarsnp"===u?n.push({ids:d,sources:m,name:"paarsnp",label:"AMR antibiogram",link:j("paarsnp")},{ids:d,sources:m,name:"paarsnp-snps-genes",label:"AMR SNPs/genes",link:j("paarsnp-snps-genes")}):n.push({ids:d,sources:m,name:u,label:f.d[u]||u,link:j(u,m,e)});var p=!0,h=!1,g=void 0;try{for(var v,b=d[Symbol.iterator]();!(p=(v=b.next()).done);p=!0){var y=v.value;t.add(y)}}catch(e){h=!0,g=e}finally{try{p||null==b.return||b.return()}finally{if(h)throw g}}}}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return{speciesId:e.speciesId,speciesName:e.speciesName,total:e.total,ids:Array.from(t),tasks:o()(n,(function(e){return e.label.toUpperCase()}))}})):[]})),P=Object(r.createSelector)(s.a,d.d,(function(e,t){return"all"===t&&e.visible===e.total}))},,function(e,t,n){"use strict";n.d(t,"b",(function(){return h})),n.d(t,"c",(function(){return g})),n.d(t,"a",(function(){return v})),n.d(t,"f",(function(){return y})),n.d(t,"d",(function(){return E})),n.d(t,"e",(function(){return O}));var r=n(25),a=n.n(r),o=n(6),i=n.n(o),c=n(2),l=n.n(c),s=n(3),u=n(15),d=n(312),m=n(47);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=Object(s.createSelector)((function(e){return e.viewer.entities.genomes}),d.a,(function(e,t){for(var n=f({},e),r=new Set,o=0,c=Object.entries(e);o<c.length;o++){var l=i()(c[o],2),s=l[0],u=l[1];if(u.name in t&&!r.has(u.name)){var d=t[u.name],m=d.userDefined,p=a()(d,["userDefined"]);n[s]=f({},u,{},p,{userDefined:f({},u.userDefined,{},m)})}}return n})),g=Object(s.createSelector)(h,m.e,m.j,(function(e,t,n){for(var r=[],a=0,o=Object.values(e);a<o.length;a++){var i=o[a];n?i.__isCollection&&r.push(i.uuid):i.analysis&&i.analysis.core.fp.reference===t&&r.push(i.uuid)}return r})),v=Object(s.createSelector)(h,g,(function(e,t){return Array.from(t).map((function(t){return e[t]}))})),b=Object(s.createSelector)(v,u.a,(function(e,t){var n=t.isClusterView,r=!1,a=!1,o=!1,i=!0,c=!1,l=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var d=s.value;if(!r){var m=d.year,p=d.pmid,f=d.userDefined;(m||p||f&&Object.keys(f).length)&&(r=!0)}if(d.analysis&&!n&&(!a&&d.analysis.paarsnp&&(a=!0),!o&&d.analysis.kleborate&&(o=!0),r&&(n||a&&o)))break}}catch(e){c=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(c)throw l}}return{hasMetadata:r,hasAMR:!n&&a,hasKleborateAMR:!n&&o}})),y=Object(s.createSelector)(b,(function(e){return e.hasMetadata})),E=Object(s.createSelector)(b,(function(e){return e.hasAMR})),O=Object(s.createSelector)(b,(function(e){return e.hasKleborateAMR}))},function(e,t,n){"use strict";n(972);var r=n(0),a=n.n(r),o=n(122),i=n.n(o),c=function(e){var t=e.className,n=e.children,r=e.out,o=void 0!==r&&r;return a.a.createElement(i.a,{className:t,transitionName:"wgsa-fade",transitionLeave:o,transitionEnterTimeout:280,transitionLeaveTimeout:280},n)};n.d(t,"a",(function(){return c}))},,function(e,t,n){"use strict";var r=n(17),a=n(27),o=n(61),i=n(153),c=n(31),l=n(132),s=n(8);function u(e){return Object(s.a)("POST","/api/download",{ids:e})}n.d(t,"d",(function(){return d})),n.d(t,"m",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"f",(function(){return h})),n.d(t,"l",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"g",(function(){return b})),n.d(t,"a",(function(){return y})),n.d(t,"c",(function(){return O})),n.d(t,"i",(function(){return C})),n.d(t,"n",(function(){return w})),n.d(t,"k",(function(){return S})),n.d(t,"j",(function(){return j}));var d="SELECTION_DROPDOWN_OPENED";function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return{type:d,payload:e}}var p=Object(r.b)("SELECTION_FETCH_DOWNLOADS");function f(){return function(e,t){var n=Object(c.c)(t());e({type:p,payload:{promise:u(n)}})}}var h="SET_GENOME_SELECTION";function g(e){return Object(l.e)(e),{type:h,payload:{genomes:e}}}var v="CLEAR_GENOME_SELECTION";function b(){return Object(l.e)(),{type:v}}var y="APPEND_GENOME_SELECTION";function E(e,t){return Object(l.a)(e),{type:y,payload:{genomes:e,index:t}}}var O="REMOVE_GENOME_SELECTION";function C(e){return Object(l.d)(e),{type:O,payload:{genomes:e}}}function w(e,t){return function(n,r){var a=r(),o=Object(c.e)(a);e.every((function(e){return e.id in o}))?n(C(e)):n(E(e,t))}}function S(e,t){return function(n,r){for(var i=r(),c=Object(o.c)(i),l=Object(o.e)(i),s=Math.min(e,t),u=Math.max(e,t),d=u-s+1,m=[],p=s;p<=u;p++){var f=l[p];f in c&&m.push(c[f])}return m.length===d?(n(E(m)),Promise.resolve()):n(Object(a.e)(s,u)).then((function(e){return n(E(e))}))}}function j(){return function(e,t){var n=t();if("CHECKED"===Object(c.j)(n))return e(C(Object(o.a)(n))),Promise.resolve();for(var r=Object(i.c)(n),a=Object(c.e)(n),l=Object(o.e)(n),s=0,u=0;u<r;u++){if(!(l[u]in a)){s=u;break}}return e(S(s,r-1))}}},function(e,t,n){"use strict";n.d(t,"g",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"h",(function(){return O})),n.d(t,"k",(function(){return C})),n.d(t,"j",(function(){return S})),n.d(t,"e",(function(){return j})),n.d(t,"i",(function(){return N})),n.d(t,"c",(function(){return P})),n.d(t,"d",(function(){return k})),n.d(t,"b",(function(){return x})),n.d(t,"l",(function(){return _})),n.d(t,"f",(function(){return I}));var r=n(2),a=n.n(r),o=n(16),i=n.n(o),c=n(3),l=n(15),s=n(33),u=n(83),d=n(49),m=n(11);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(e){return Object(l.f)(e).table},g=function(e){return h(e).activeAMR},v=function(e){return h(e).entities},b=Object(c.createSelector)(s.a,(function(e){var t=Object(u.a)(e),n=t.leading,r=t.trailing,a=t.userDefined,o=Object(u.b)(n),c=Object(u.c)(r);return[].concat(i()(o),i()(Object(u.d)(a)),i()(c))})),y=Object(c.createSelector)(b,(function(e){return v(e).metadata.activeColumn}),(function(e,t){var n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){if(o.value.columnKey===t.columnKey)return t}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return d.e})),E=Object(c.createSelector)(v,b,y,s.f,(function(e,t,n,r){return f({},e.metadata,{active:r,activeColumn:n,columns:t})})),O=Object(c.createSelector)(v,E,(function(e,t){return f({},e,{metadata:t})})),C=Object(c.createSelector)(O,(function(e){return e.typing.active})),w=Object(c.createSelector)(s.f,C,(function(e,t){return e?m.c.metadata:t?m.c.typing:m.c.stats})),S=Object(c.createSelector)((function(e){return h(e).visible}),w,(function(e){return!Object(s.f)(e)}),(function(e,t,n){return null===e?t:e===m.c.metadata&&n?t:e})),j=Object(c.createSelector)((function(e){return h(e).activeData}),w,(function(e){return!Object(s.f)(e)}),(function(e,t,n){return null===e?t:e===m.c.metadata&&n?t:e})),N=function(e){var t=S(e);return O(e)[t]},P=Object(c.createSelector)(N,(function(e){var t=e.activeColumn,n=e.activeColumns;return new Set(t?[t.columnKey]:Array.from(n).filter((function(e){return e})).map((function(e){return e.columnKey})))})),k=Object(c.createSelector)(O,j,(function(e,t){return e[t]})),x=Object(c.createSelector)(O,g,(function(e,t){return e[t]})),_=Object(c.createSelector)(S,g,(function(e,t){return e===t})),I=Object(c.createSelector)(s.d,_,(function(e,t){if(!e)return null;var n=88;return t&&(n+=48),n}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return E})),n.d(t,"f",(function(){return O})),n.d(t,"d",(function(){return C})),n.d(t,"e",(function(){return w})),n.d(t,"g",(function(){return j})),n.d(t,"c",(function(){return N})),n.d(t,"b",(function(){return J}));var r=n(2),a=n.n(r),o=n(3),i=n(53),c=n.n(i),l=n(307),s=n.n(l),u=n(74),d=n(104),m=n(94),p=n(169),f=n(12),h=n(152),g=n(59),v=n(95);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){return u.d.getFilter(e,{stateKey:m.b})},O=function(e){return u.d.isActive(e,{stateKey:m.b})},C=function(e){return E(e).prefilter},w=Object(o.createSelector)(E,(function(e){return e.searchText||""})),S=function(e){return e.genomes.filter},j=function(e){return S(e).isOpen},N=function(e){return S(e).listFilters},P=function(e,t){return Object(o.createSelector)((function(t){return N(t)[e]}),(function(e){try{var n=new RegExp(e,"i");return function(e){return n.test(t?e[t]:e)}}catch(e){return function(){return!0}}}))},k=function(e){return e.genomes.summary},x=Object(o.createSelector)(k,(function(e){return E(e).organismId}),d.a,P("organismId","title"),(function(e,t,n,r){var a=e.organismId,o=void 0===a?{}:a;return c()(Object.keys(o).filter((function(e){return n.has(e)})).map((function(e){var n=f.d.get(e);return{value:e,active:t===e,label:n.formattedName,title:n.name,activeTitle:"Organism: ".concat(n.name),count:o[e].count}})).filter(r),"title")})),_=Object(o.createSelector)(k,(function(e){return E(e).mlst}),P("mlst"),(function(e,t,n){var r=e.mlst,a=void 0===r?{}:r,o=e.sources;return c()(Object.keys(a).filter(n).map((function(e){return{value:e,active:t===e,activeTitle:"MLST - ".concat(o.mlst,": ST ").concat(e),title:"ST ".concat(e),count:a[e].count,novel:Object(v.c)(e)}})),"novel",(function(e){return Number(e.value)}))})),I=Object(o.createSelector)(k,(function(e){return E(e).mlst2}),P("mlst2"),(function(e,t,n){var r=e.mlst2,a=void 0===r?{}:r,o=e.sources;return c()(Object.keys(a).filter(n).map((function(e){return{value:e,active:t===e,activeTitle:"MLST - ".concat(o.mlst2,": ST ").concat(e),title:"ST ".concat(e),count:a[e].count,novel:Object(v.c)(e)}})),"novel",(function(e){return Number(e.value)}))})),T=Object(o.createSelector)(k,(function(e){return E(e).speciesId}),P("speciesId","label"),(function(e,t,n){var r=e.speciesId,a=void 0===r?{}:r;return c()(Object.keys(a).map((function(e){return{value:e,label:a[e].label,count:a[e].count,active:t===e}})).filter(n),"label")})),L=Object(o.createSelector)(k,(function(e){return E(e).genusId}),P("genusId","label"),(function(e,t,n){var r=e.genusId,a=void 0===r?{}:r;return c()(Object.keys(a).map((function(e){return{value:e,label:a[e].label,count:a[e].count,active:t===e}})).filter(n),"label")})),A=Object(o.createSelector)(k,(function(e){return E(e).country}),P("country","label"),(function(e,t,n){var r=e.country,a=void 0===r?{}:r;return c()(Object.keys(a).map((function(e){return{value:e,label:Object(p.b)(e),count:a[e].count,active:t===e}})).filter(n),"label")})),D=Object(o.createSelector)(k,(function(e){return E(e).access}),(function(e,t){var n=e.access,r=void 0===n?{}:n;return c()(Object.keys(r).map((function(e){return{value:e,label:"".concat(e[0].toUpperCase()).concat(e.slice(1)),count:r[e].count,active:t===e}})),"label")})),M=Object(o.createSelector)(Object(o.createSelector)(k,(function(e){var t=e.uploadedAt,n=void 0===t?{}:t;return Object.keys(n).sort((function(e,t){return new Date(t)-new Date(e)})).map((function(e){var t=new Date(e);return{value:e,label:Object(g.b)(t)}}))})),k,(function(e){return E(e).uploadedAt}),P("uploadedAt","label"),(function(e,t,n,r){var a=t.uploadedAt,o=void 0===a?{}:a;return e.filter(r).map((function(e){return y({},e,{count:o[e.value].count,active:n===e.value})}))})),R=Object(o.createSelector)(k,(function(e){return E(e).resistance}),P("resistance"),(function(e,t,n){var r=e.resistance,a=void 0===r?{}:r;return c()(Object.keys(a).filter(n).map((function(e){return{value:e,count:a[e].count,active:t===e}})),"value")})),F=Object(o.createSelector)(k,(function(e){return E(e).subspecies}),P("subspecies"),(function(e,t,n){var r=e.subspecies,a=void 0===r?{}:r;return c()(Object.keys(a).filter(n).map((function(e){return{value:e,count:a[e].count,active:t===e}})),"value")})),z=Object(o.createSelector)((function(e){return k(e).speciesId}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e);return 1===t.length?Object(h.b)(e[t[0]].label):"serotype"})),G=Object(o.createSelector)(k,(function(e){return E(e).serotype}),P("serotype"),z,(function(e,t,n,r){var a=e.serotype,o=void 0===a?{}:a;return c()(Object.keys(o).filter(n).map((function(e){return{value:e,count:o[e].count,active:t===e,activeTitle:"".concat(r[0].toUpperCase()).concat(r.slice(1),": ").concat(e)}})),"value")})),U=Object(o.createSelector)(k,(function(e){return E(e).strain}),P("strain"),(function(e,t,n){var r=e.strain,a=void 0===r?{}:r;return c()(Object.keys(a).filter(n).map((function(e){return{value:e,label:"GPSC ".concat(e),count:a[e].count,active:t===e}})),(function(e){return Number(e.value)}))})),B=Object(o.createSelector)(k,(function(e){return E(e).ngmast}),P("ngmast"),(function(e,t,n){var r=e.ngmast,a=void 0===r?{}:r;return c()(Object.keys(a).filter(n).map((function(e){return{value:e,active:t===e,activeTitle:"NG-MAST: ST ".concat(e),count:a[e].count,title:"ST ".concat(e)}})),"value")})),H=Object(o.createSelector)(k,(function(e){return E(e).ngstar}),P("ngstar"),(function(e,t,n){var r=e.ngstar,a=void 0===r?{}:r;return c()(Object.keys(a).filter(n).map((function(e){return{value:e,active:t===e,activeTitle:"NG-STAR: ST ".concat(e),count:a[e].count,novel:Object(v.c)(e),title:"ST ".concat(e)}})),"novel",(function(e){return Number(e.value)}))})),V=Object(o.createSelector)(k,(function(e){return E(e).genotype}),P("genotype"),(function(e,t,n){var r=e.genotype,a=void 0===r?{}:r;return c()(Object.keys(a).filter(n).map((function(e){return{value:e,active:t===e,count:a[e].count}})),"value")})),K=Object(o.createSelector)(Object(o.createSelector)(k,(function(e){var t=e.reference,n=void 0===t?{}:t;return Object.keys(n).sort()})),k,(function(e){return E(e).reference}),P("reference"),(function(e,t,n,r){var a=t.reference,o=void 0===a?{}:a;return e.filter(r).map((function(e){return{value:e,active:n===e,count:o[e].count}}))})),q=Object(o.createSelector)(k,(function(e){return E(e).klocus}),P("klocus"),(function(e,t,n){var r=e.klocus,a=void 0===r?{}:r;return c()(Object.keys(a).filter(n).map((function(e){return{value:e,active:t===e,count:a[e].count}})),"value")})),W=Object(o.createSelector)(k,(function(e){return E(e).minDate}),(function(e){return E(e).maxDate}),(function(e,t,n){var r=e.date,a=void 0===r?{}:r;return a.min&&a.max?{bounds:[a.min,a.max],values:[t,n]}:null})),Y="(untitled collection)",Z=function(e,t){return e.title===Y&&t.title!==Y?1:e.title!==Y&&t.title===Y?-1:e.title>t.title?1:e.title<t.title?-1:0},X=Object(o.createSelector)(k,(function(e){var t=e.collection,n=void 0===t?{}:t;return Object.keys(n).map((function(e){var t=n[e].label||Y;return{value:e,label:t,title:s()(t)}})).sort(Z)})),Q=Object(o.createSelector)(X,k,(function(e){return E(e).collection}),P("collection","title"),(function(e,t,n,r){var a=t.collection,o=void 0===a?{}:a;return e.filter(r).map((function(e){return y({},e,{activeTitle:"Collection: ".concat(e.title),active:n===e.value,count:o[e.value].count})}))})),J=Object(o.createSelector)(k,D,Q,A,W,V,L,q,I,_,B,H,x,K,R,G,T,U,F,M,(function(e){for(var t=e.loading,n=e.sources,r=void 0===n?{}:n,a=e.visible,o=arguments.length,i=new Array(o>1?o-1:0),c=1;c<o;c++)i[c-1]=arguments[c];var l=i[0],s=i[1],u=i[2],d=i[3],m=i[4],p=i[5],f=i[6],h=i[7],g=i[8],v=i[9],b=i[10],y=i[11],E=i[12],O=i[13],C=i[14],w=i[15],S=i[16],j=i[17],N=i[18];return{loading:t,sources:r,visible:a,access:l,collection:s,country:u,date:d,genotype:m,genusId:p,klocus:f,mlst:g,mlst2:h,ngmast:v,ngstar:b,organismId:y,reference:E,resistance:O,serotype:C,speciesId:w,strain:S,subspecies:j,uploadedAt:N}}))},,,function(e,t,n){"use strict";var r=n(17),a=n(2),o=n.n(a),i=n(8),c=n(173);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){return console.log("[Pathogenwatch] Getting collection ".concat(e)),Object(i.a)("GET","/api/collection/".concat(e)).then((function(e){var t=e.collection||e;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{genomes:Object(c.a)(t.genomes)})}))}n(331);var u=n(12);n.d(t,"a",(function(){return d})),n.d(t,"d",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"b",(function(){return h})),n.d(t,"e",(function(){return g}));var d=Object(r.b)("FETCH_COLLECTION");function m(e){return{type:d,payload:{promise:s(e).then((function(e){return u.b.current=e.organismId,e}))}}}var p="UPDATE_COLLECTION_PROGRESS";function f(e){return{type:p,payload:e}}var h="RESET_COLLECTION_VIEW";function g(){return{type:h}}Object(r.b)("COLLECTION_FETCH_POSITION")},function(e,t,n){"use strict";n.d(t,"g",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"i",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"l",(function(){return d})),n.d(t,"k",(function(){return m})),n.d(t,"h",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"j",(function(){return v})),n.d(t,"b",(function(){return b}));var r=n(3),a=n(335),o=n(63),i=function(e){return e.upload.progress.files},c=function(e){return i(e).queue.pending},l=function(e){return i(e).queue.processing},s=function(e){return i(e).entities},u=(Object(r.createSelector)(s,(function(e){return Object.values(e)})),Object(r.createSelector)(c,l,(function(e,t){return e.length+t.size}))),d=Object(r.createSelector)(l,(function(e){return e.size>0})),m=Object(r.createSelector)(u,(function(e){return e>0})),p=function(e){return i(e).status},f=Object(r.createSelector)(p,(function(e){for(var t={},n=Object.values(e),r=0,a=n;r<a.length;r++){var i=a[r];t[i]=(t[i]||0)+1}return{total:n.length,completed:t[o.a.SUCCESS]||0,errored:t[o.a.ERROR]||0,pending:t[o.a.PENDING]||0}})),h=Object(r.createSelector)(f,(function(e){return e.completed})),g=Object(r.createSelector)(f,(function(e){return e.errored})),v=Object(r.createSelector)((function(e){return i(e).entities}),(function(e){return i(e).errors}),(function(e,t){for(var n=[],r=0,o=Object.keys(t);r<o.length;r++){var i=o[r];t[i]instanceof a.a&&n.push({filename:Object.keys(e[i])[0],error:t[i]})}return n})),b=Object(r.createSelector)((function(e){return i(e).errors}),v,(function(e,t){return Object.keys(e).length-t.length}))},function(e,t,n){"use strict";t.a={DELAY:64,FONT_SIZE:14,HALO_WIDTH:4,MAX_FONT_SIZE:64,MAX_NODE_SIZE:64,MIN_FONT_SIZE:1,MIN_NODE_SIZE:1,NODE_BORDER_STYLE:"rgba(0, 0, 0, 0.54)",NODE_BORDER_WIDTH:1,NODE_RADIUS:7,NODE_SIZE:14,FONT:'"Roboto", "Helvetica", "Arial", sans-serif'}},function(e,t,n){"use strict";n.d(t,"l",(function(){return r})),n.d(t,"h",(function(){return a})),n.d(t,"m",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"r",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"k",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"p",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"n",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"o",(function(){return h})),n.d(t,"e",(function(){return g})),n.d(t,"s",(function(){return v})),n.d(t,"d",(function(){return b})),n.d(t,"q",(function(){return y})),n.d(t,"j",(function(){return E})),n.d(t,"u",(function(){return O})),n.d(t,"i",(function(){return C})),n.d(t,"t",(function(){return w}));function r(e){return{type:"SEARCH_DROPDOWN_VISIBILITY",payload:e}}var a="SEARCH_TEXT_CHANGED";function o(e){return{type:a,payload:e}}var i="SEARCH_CATEGORY_SELECTED";function c(e){return{type:i,payload:{category:e}}}var l="SEARCH_TERM_ADDED";function s(e){return{type:l,payload:e}}var u="SEARCH_TERM_REMOVED";function d(e,t){return{type:u,payload:{term:e,intersection:t}}}var m="SEARCH_CURSOR_MOVED";function p(e){return{type:m,payload:{delta:e}}}var f="SEARCH_INTERSECTION_MOVED";function h(e){return{type:f,payload:{delta:e}}}var g="SEARCH_SORT_SELECTED";function v(e){return{type:g,payload:e}}var b="SEARCH_OPERATOR_SELECTED";function y(e){return{type:b,payload:e}}var E="SEARCH_TOGGLE_MODE";function O(){return{type:E}}var C="SEARCH_TOGGLE_EXACT_MATCH";function w(e){return{type:C,payload:e}}},,,function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"i",(function(){return d})),n.d(t,"j",(function(){return m})),n.d(t,"b",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"g",(function(){return g})),n.d(t,"f",(function(){return v})),n.d(t,"c",(function(){return b}));var r=n(6),a=n.n(r),o=n(3),i=n(313),c=n(15),l=n(116),s=function(e){return Object(c.f)(e).tree},u=function(e){return s(e).visible},d=function(e){return s(e).loading},m=Object(o.createSelector)(u,(function(e){return l.b.has(e)})),p=function(e){return s(e).titles},f=Object(o.createSelector)(u,p,(function(e,t){return t[e]||l.a[e]||""})),h=Object(o.createSelector)((function(e){return s(e).libmicroreact}),(function(e){for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var o=a()(r[n],2),i=o[0],c=o[1].current;t[i]=c}return t})),g=Object(o.createSelector)(u,h,(function(e,t){return e in t?t[e]:Object(i.a)(void 0,{})})),v=Object(o.createSelector)((function(e){return g(e).subtreeIds}),(function(e){return null===e?[]:e})),b=Object(o.createSelector)((function(e){return g(e).ids}),(function(e){return null!==e?e:[]}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"g",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return d}));var r=n(17),a=n(195),o=Object(r.b)("UPLOAD_ADD_GENOMES");function i(e,t){return{type:o,payload:{genomes:e,uploadedAt:t,promise:a.d(e,t).then((function(t){var n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;c.id in t&&(c.id=t[c.id])}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return t}))}}}function c(e){return{type:"UPLOAD_ERROR_MESSAGE",payload:e}}var l=Object(r.b)("UPLOAD_FETCH_ASSEMBLER_USAGE");function s(e){return{type:l,payload:{promise:a.c(e)}}}var u="UPLOAD_SETTING_CHANGED";function d(e,t){return{type:u,payload:{setting:e,value:t}}}},function(e,t,n){"use strict";var r=n(2),a=n.n(r),o=n(0),i=n.n(o),c=n(139),l=n(20),s=function(e){var t=e.url,n=e.name;return i.a.createElement("a",{href:t,download:"".concat(n,".fa"),target:"_blank",rel:"noopener",title:"Download genome",className:"wgsa-download-button mdl-button mdl-button--icon"},i.a.createElement(c.a,{color:l.b.COLOURS.PURPLE,label:".fa"}))},u=function(e){var t=e.action,n=e.title,r=e.ids,a=e.children;return i.a.createElement("form",{action:t,method:"POST",target:"_blank",style:{display:"inline"}},i.a.createElement("button",{title:n,className:"wgsa-download-button mdl-button mdl-button--icon"},a),i.a.createElement("input",{type:"hidden",name:"ids",value:r}))},d=l.b.COLOURS,m=function(e){var t=e.url,n=e.ids;return i.a.createElement(u,{action:t,title:"Download genomes",ids:n},i.a.createElement(c.a,{isArchive:!0,color:d.PURPLE}))},p=n(8),f=function(e){var t=e.uuid,n=e.id,r=e.name;return i.a.createElement("a",{href:Object(p.c)("/download/collection/".concat(t,"/annotations?ids=").concat(n)),download:"".concat(r,".gff"),target:"_blank",rel:"noopener",title:"Download annotations",className:"wgsa-download-button mdl-button mdl-button--icon"},i.a.createElement(c.a,{color:l.b.COLOURS.GREEN,label:".gff"}))},h=l.b.COLOURS,g=function(e){var t=e.uuid,n=e.ids,r=e.filename;return i.a.createElement(u,{action:Object(p.c)("/download/collection/".concat(t,"/annotations?filename=").concat(r)),title:"Download annotations",ids:n},i.a.createElement(c.a,{isArchive:!0,color:h.GREEN}))},v=n(80),b=n(11),y=n(12);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"b",(function(){return C})),n.d(t,"a",(function(){return w})),n.d(t,"d",(function(){return S})),n.d(t,"f",(function(){return j})),n.d(t,"c",(function(){return N})),n.d(t,"e",(function(){return k}));var C=new Set([b.c.metadata,b.c.typing,b.c.stats]),w=new Set([b.c.antibiotics,b.c.snps,b.c.genes,b.c.kleborateAMR]),S={columnKey:"__spacer_l",system:!0,getHeaderContent:function(){},fixed:!0,fixedWidth:1,flexGrow:1,getCellContents:function(){}},j={columnKey:"__spacer_r",system:!0,getHeaderContent:function(){},fixedWidth:24,flexGrow:1,getCellContents:function(){}},N={columnKey:"__downloads",system:!0,fixed:!0,headerClasses:"wgsa-table-cell--skinny",getHeaderContent:function(e){var t=e.collection,n=e.archiveDownloads,r=n.ids,a=n.filenames,o=t.uuid;return t.isClusterView?i.a.createElement("span",{className:"wgsa-table-downloads",onClick:function(e){return e.stopPropagation()}},i.a.createElement(m,{url:Object(p.c)("/download/genome/fasta?filename=".concat(a.genome)),ids:r})):i.a.createElement("span",{className:"wgsa-table-downloads",onClick:function(e){return e.stopPropagation()}},i.a.createElement(m,{url:Object(p.c)("/download/collection/".concat(o,"/fastas?filename=").concat(a.genome)),ids:r}),i.a.createElement(g,{uuid:o,ids:r,filename:a.annotation}))},cellClasses:"wgsa-table-cell--skinny",flexGrow:0,getCellContents:function(e,t){var n=e.collection,r=t.id,a=t._id,o=void 0===a?r:a,c=t.name,l=n.uuid;return n.isClusterView?i.a.createElement("span",{className:"wgsa-table-downloads",onClick:function(e){return e.stopPropagation()}},i.a.createElement(s,{url:Object(p.c)("/download/genome/".concat(o,"/fasta")),name:c})):i.a.createElement("span",{className:"wgsa-table-downloads",onClick:function(e){return e.stopPropagation()}},i.a.createElement(s,{url:Object(p.c)("/download/collection/".concat(l,"/fastas?ids=").concat(o)),name:c}),i.a.createElement(f,{uuid:l,id:r||o,name:c}))},addState:function(e){var t=e.collection,n=e.genomes;return O({},this,{collection:t,width:t.isClusterView?44:68,archiveDownloads:{ids:n.map((function(e){return e.id||e._id})),filenames:{genome:Object(v.a)(t,"genomes.zip"),annotation:Object(v.a)(t,"annotations.zip")}}})}},P={color:l.b.COLOURS.PURPLE};var k=O({},{columnKey:"__name",valueGetter:function(e){return e.name}},{fixed:!0,getCellContents:function(e,t){var n=e.valueGetter;return i.a.createElement("div",{className:"wgsa-genome-name-cell"},function(e,t){var n=t(e);return e.__isCollection?i.a.createElement("strong",{style:P},n):e.__isReference||e.reference?i.a.createElement("strong",null,n):i.a.createElement("span",null,n)}(t,n),i.a.createElement("div",{onClick:function(e){return e.stopPropagation()}},t.__isPublic&&t.collectionId?i.a.createElement("a",{className:"mdl-button mdl-button--icon",href:"/".concat(y.b.nickname,"/collection/").concat(t.collectionId),title:"View original collection",target:"_blank",rel:"noopener"},i.a.createElement("i",{className:"material-icons"},"open_in_new")):null))}})},function(e,t,n){"use strict";var r=n(2),a=n.n(r),o=n(87),i=n.n(o),c=n(240),l=n(0),s=n.n(l),u=n(4),d=s.a.createClass({displayName:"LocationListener",propTypes:{query:s.a.PropTypes.object,onChange:s.a.PropTypes.func.isRequired},componentDidUpdate:function(e){e.query!==this.props.query&&this.props.onChange(this.props.query)},render:function(){return null}});var m=Object(u.a)((function(e){return{query:e.location.query}}),(function(e,t){var n=t.update;return{onChange:function(t){return e(n(t))}}}))(d),p=n(386),f=n(5),h=n.n(f);function g(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!!e&&(n?t===e:0===e.indexOf(t))}var v=Object(u.a)((function(e){return{activePathname:e.location.pathname}}))((function(e){var t=e.className,n=e.icon,r=e.to,a=e.activeOnIndexOnly,o=e.activePathname,i=e.external,c=e.badge,l=void 0===c?null:c,u=e.children;return i?s.a.createElement("a",{href:r,target:"_blank",rel:"noopener",className:h()("mdl-navigation__link",t)},n&&s.a.createElement("i",{className:"material-icons"},n),s.a.createElement("span",null,u)):s.a.createElement(p.a,{className:h()("mdl-navigation__link",t,{"mdl-navigation__link--active":g(o,r,a)}),to:r},"string"==typeof n?s.a.createElement("i",{className:"material-icons"},n):n,s.a.createElement("span",{className:"wgsa-nav-label"},u),null!==l&&s.a.createElement("span",{className:"wgsa-nav-badge pw-pill-purple"},l))}));function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";c.b.push({pathname:location.pathname,search:e.length?"?".concat(e.replace(/%20/g,"+")):""})}function E(e){var t=i.a.parse(location.search);y(i.a.stringify(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{},Object.keys(e).reduce((function(n,r){var a=e[r];return n[r]=a===t[r]?void 0:a,n}),{}))))}function O(){y()}n.d(t,"f",(function(){return E})),n.d(t,"c",(function(){return O})),n.d(t,"a",(function(){return C})),n.d(t,"e",(function(){return w})),n.d(t,"b",(function(){return m})),n.d(t,"d",(function(){return v}));var C="LOCATION_CHANGE";function w(e){return{type:C,payload:{location:e}}}},function(e,t,n){"use strict";var r=n(17),a=n(8),o=n(18);function i(e,t,n,r,o){return Object(a.a)("POST","/api/genome/".concat(e,"/clusters/edges"),{scheme:t,version:n,threshold:Number(r),sts:o})}n.d(t,"c",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"g",(function(){return m})),n.d(t,"f",(function(){return p})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return h})),n.d(t,"p",(function(){return g})),n.d(t,"j",(function(){return v})),n.d(t,"k",(function(){return b})),n.d(t,"l",(function(){return y})),n.d(t,"n",(function(){return O})),n.d(t,"o",(function(){return C})),n.d(t,"m",(function(){return w}));var c=Object(r.b)("REQUEST_BUILD_CLUSTERS"),l="SET_CLUSTERING_PROGRESS",s=Object(r.b)("FETCH_CLUSTERS"),u=Object(r.b)("FETCH_CLUSTER_EDGES"),d=Object(r.b)("RUN_CLUSTER_LAYOUT"),m="SET_CLUSTER_THRESHOLD",p="SET_CLUSTER_GENOME",f="SKIP_LAYOUT";function h(e){return{type:c,payload:{promise:(t=e,Object(a.a)("POST","/api/genome/".concat(t,"/clusters"),{clientId:o.a.clientId})),genomeId:e}};var t}function g(e){return{type:l,payload:e}}function v(e){return{type:s,payload:{promise:(t=e,Object(a.a)("GET","/api/genome/".concat(t,"/clusters"))),genomeId:e}};var t}function b(e,t,n,r,a){return{type:u,payload:{promise:i(e,t,n,r,a),genomeId:e,threshold:r,sts:a,scheme:t,version:n}}}function y(e){return{type:m,payload:e}}function E(e){var t={},n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value,l=c.x,s=c.y;t[c.id]={x:l,y:s}}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return t}function O(){return{type:d.ATTEMPT,payload:{}}}function C(e){return{type:d.SUCCESS,payload:{result:{coordinates:e}}}}function w(e){return{type:f,payload:E(e)}}},function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(5),i=n.n(o);t.a=a.a.createClass({displayName:"Spinner.react",componentDidMount:function(){componentHandler.upgradeElement(this.refs.spinner)},render:function(){return a.a.createElement("div",{ref:"spinner",className:i()("mdl-spinner mdl-js-spinner is-active",{"mdl-spinner--single-colour":this.props.singleColour})})}})},,function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"g",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return s})),n.d(t,"h",(function(){return u}));var r="SET_TABLE";function a(e){return{type:r,payload:{name:e}}}var o="SET_LABEL_COLUMN";function i(e,t){return{type:o,payload:{table:e,column:t}}}var c="SET_COLOUR_COLUMNS";function l(e,t){return{type:c,payload:{table:e,columns:t}}}var s="AMR_TOGGLE_MULTI";function u(){return{type:s}}},,,,,function(e,t,n){"use strict";n.d(t,"e",(function(){return f})),n.d(t,"c",(function(){return g})),n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return y})),n.d(t,"d",(function(){return E}));var r=n(496),a=n.n(r),o=n(497),i=n.n(o),c=n(245),l=n.n(c),s=n(384),u=n.n(s),d=n(498),m=n.n(d),p=/^[0-9]{4}$/;var f=["January","February","March","April","May","June","July","August","September","October","November","December"].map((function(e,t){return{text:e,value:t}})),h=function(e){return f[e-1].text};function g(e){if(!function(e){var t=e.year,n=e.month,r=e.day;return!(!t||r&&!n)&&((!r||r>=1&&r<=31)&&(!n||n>=1&&n<=12)&&p.test(t))}(e))return"";var t,n,r=e.year,a=e.month,o=e.day;return r&&a&&o?"".concat((t=o,n=t%10,t+(1==~~(t%100/10)?"th":1===n?"st":2===n?"nd":3===n?"rd":"th"))," ").concat(h(a)," ").concat(r):r&&a?"".concat(h(a)," ").concat(r):r}function v(e){return e?a()(e)?"Today, ".concat(l()(e,"HH:mm")):i()(e)?"Yesterday, ".concat(l()(e,"HH:mm")):l()(e,"D MMMM, HH:mm"):null}var b=new Date("0001-01-01T00:00:00Z");function y(e){return u()(e,b)}function E(e){return m()(b,e)}},function(e,t,n){"use strict";var r=n(22),a=n.n(r),o=n(23),i=n.n(o),c=n(19),l=n.n(c),s=n(21),u=n.n(s),d=n(24),m=n.n(d),p=n(0),f=n.n(p),h=n(4),g=n(224),v=function(e){function t(){return a()(this,t),l()(this,u()(t).apply(this,arguments))}return m()(t,e),i()(t,[{key:"componentWillMount",value:function(){this.updateTitle()}},{key:"componentDidUpdate",value:function(){this.updateTitle()}},{key:"updateTitle",value:function(){var e=this.props.children||this.props.title,t=g.b[this.props.brandingId];document.title="".concat(t," | ").concat(e)}},{key:"render",value:function(){return null}}]),t}(f.a.Component);t.a=Object(h.a)((function(e){return{brandingId:e.branding.id}}))(v)},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i})),n.d(t,"g",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"f",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return d}));var r=n(3),a=function(e){return e.genomes},o=function(e){return a(e).entities},i=Object(r.createSelector)(o,(function(e){return Object.keys(e).map((function(t){return e[t]}))})),c=(Object(r.createSelector)(i,(function(e){return e.map((function(e){return e.id}))})),function(e){return i(e).length}),l=function(e){return a(e).waiting},s=function(e){return a(e).status},u=i,d=function(e){return a(e).indices}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={VISIBILITY:"VISIBILITY",TREE:"TREE",MAP:"MAP"}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(98);n.d(t,"b",(function(){return r.a}));var a={PENDING:0,QUEUED:1,UPLOADING:2,COMPRESSING:3,ERROR:4,SUCCESS:5}},function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"d",(function(){return h})),n.d(t,"a",(function(){return g})),n.d(t,"e",(function(){return v})),n.d(t,"b",(function(){return b})),n.d(t,"i",(function(){return y})),n.d(t,"g",(function(){return E})),n.d(t,"f",(function(){return O})),n.d(t,"h",(function(){return C}));var r=n(2),a=n.n(r),o=n(3),i=n(131),c=n(108),l=n(67),s=n(42),u=n(238);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=function(e){return e.upload.progress},f=function(e){return p(e)._.view},h=function(e){return p(e)._.uploadedAt},g=Object(o.createSelector)((function(e,t){return Object(l.e)(e)[t]}),(function(e,t){return Object(s.i)(e)[t]}),(function(e,t){return Object(u.a)(e)[t]}),(function(e,t){return Object(s.h)(e)[t]}),(function(e,t,n,r){return m({},e,{files:Object.values(t),recovery:n,status:r})})),v=Object(o.createSelector)(s.e,l.e,s.i,s.h,(function(e,t,n,r){return Array.from(e).map((function(e){return m({},t[e],{files:Object.values(n[e]),status:r[e]})}))})),b=Object(o.createSelector)(c.d,i.a,(function(e,t){for(var n={pending:0,done:0,total:0},r={pending:0,done:0,total:0},a=0,o=0,i=Object.values(t);o<i.length;o++)for(var c=i[o],l=0,s=Object.keys(c);l<s.length;l++){var u=s[l],d=null===c[u];!1===c[u]&&a++,"speciator"===u&&(n.total++,d&&n.pending++),r.total++,d&&r.pending++}return n.done=n.total-n.pending,r.done=r.total-r.pending,{assembly:e,speciation:n,analyses:r,errors:a}})),y=Object(o.createSelector)(l.a,b,(function(e,t){var n=t.speciation;return n.total>0&&n.done===e})),E=Object(o.createSelector)(b,(function(e){var t=e.analyses;return t.total>0&&t.done===t.total})),O=Object(o.createSelector)(b,(function(e){return e.errors>0})),C=Object(o.createSelector)(l.a,s.k,l.f,c.f,(function(e,t,n,r){return!(e>0)||!t&&(!!n&&!r)}))},function(e,t,n){"use strict";n.d(t,"h",(function(){return o})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"g",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"c",(function(){return m})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return f}));var r=n(20),a={RESISTANT:r.c.DANGER_COLOUR,INDUCIBLE:"#E68D44",INTERMEDIATE:r.c.WARNING_COLOUR},o="#fff",i=Object.keys(a).reduce((function(e,t){return e.set(a[t],t)}),new Map([[o,"UNKNOWN"]])),c=function(e){return i.get(e)};function l(e){return a[e]||a.RESISTANT}function s(e,t){var n=e.antibiotics;return t in n&&n[t].state in a}function u(e,t,n){var r=e.analysis.paarsnp;return!!r&&-1!==r[t].indexOf(n)}function d(e){return e&&e.__isCollection?r.b.COLOURS.PURPLE_LIGHT:r.b.COLOURS.GREY}function m(e,t){var n=t.analysis.paarsnp;return n?s(n,e)?l(n.antibiotics[e].state):o:d(t)}function p(e,t,n){var r=e.key,i=e.effect;return n.analysis.paarsnp?u(n,t,r)?a[i]||a.RESISTANT:o:d(n)}function f(e,t){return function(n){var r=function(e,t){var n=[];if(e.size){var r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value;n.push(l.valueGetter(t))}}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}}else n.push(d(t));return new Set(n)}(e.activeColumns,n);if(1===r.size)return Array.from(r)[0];if(t&&r.has(o))return o;r.delete(o);var i=Array.from(r);return 1===i.length?i[0]:a.RESISTANT}}},,function(e,t,n){"use strict";n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"f",(function(){return m}));var r=n(3),a=n(42),o=n(63),i=function(e){return e.upload.progress.genomes},c=Object(r.createSelector)(i,(function(e){return Object.keys(e).map((function(t){return e[t]}))})),l=Object(r.createSelector)(c,(function(e){return e.length})),s=Object(r.createSelector)(c,a.h,(function(e,t){var n=0,r=!0,a=!1,i=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var s=c.value;s.type===o.b.READS&&t[s.id]===o.a.ERROR&&n++}}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return n})),u=Object(r.createSelector)(c,(function(e){var t=0,n=0,r=!0,a=!1,i=void 0;try{for(var c,l=e[Symbol.iterator]();!(r=(c=l.next()).done);r=!0){var s=c.value;s.type===o.b.ASSEMBLY&&n++,s.type===o.b.READS&&t++}}catch(e){a=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw i}}return{reads:t,assemblies:n}})),d=(Object(r.createSelector)(u,(function(e){return e.assemblies})),Object(r.createSelector)(u,(function(e){return e.reads}))),m=function(e){return d(e)>0}},function(e,t,n){"use strict";var r=n(2),a=n.n(r),o=n(17),i=n(42),c=n(64),l=n(112),s=n(278),u=n(171),d=n(335),m=n(525),p=n.n(m);n(18);function f(e){return p()().compress(e)}var h=n(239),g=n(98);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return y})),n.d(t,"d",(function(){return E})),n.d(t,"c",(function(){return S})),n.d(t,"e",(function(){return j}));var b="GENOME_UPLOAD_PROGRESS";var y=Object(o.b)("COMPRESS_GENOME");var E=Object(o.b)("UPLOAD_GENOME");function O(e,t){return function(n){var r=e.id,o=e.metadata;return n({type:E,payload:{id:r,promise:s.b(e,t,(function(e){return n(function(e,t){return{type:b,payload:{id:e,progress:t}}}(r,e))})).then((function(e){return o?s.a(e.id,o).then((function(t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{},t)})):e}))}})}}function C(e,t,n){return function(e){return Promise.resolve(e.files[0].handle).then(u.readAsText).then(d.b)}(n).then((function(r){return Object(l.b)(t(),"compression")?e((a=n.id,{type:y,payload:{id:a,promise:f(r)}})):r;var a})).then((function(t){return e(O(n,t))}))}function w(e,t,n){var r=t(),a=Object(c.d)(r),o=r.auth.token;return Object(h.c)(n,{token:o,uploadedAt:a},e)}var S=Object(o.b)("PROCESS_GENOME");function j(){return function(e,t){if(!i.l(t())){var n=Object(l.b)(t(),"individual"),r=1;!function a(){var o=t(),l=i.g(o),s=i.e(o);if(l.length&&s.size<r){var u=l[0],d=Object(c.a)(o,u);d.type===g.a.ASSEMBLY&&(r=n?1:5),e({type:S,payload:{id:u,promise:d.type===g.a.READS?w(e,t,d):C(e,t,d)}}).then(a).catch(a),a()}}()}}}},,,function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d}));var r=n(3),a=n(47),o=n(116),i=function(e){return Object(a.d)(e).entities},c=function(e){return Object.keys(i(e)).length>0},l=Object(r.createSelector)(a.d,(function(e){var t=e.visible,n=e.entities;return t?n[t]:null})),s=(Object(r.createSelector)(l,(function(e){return!!e.newick})),Object(r.createSelector)(i,(function(e){return Object.keys(e).filter((function(e){return!o.b.has(e)}))}))),u=(Object(r.createSelector)((function(e){return Object(a.d)(e).selectedInternalNode}),(function(e){return e.trees[e.active]})),Object(r.createSelector)(i,(function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){if("READY"!==e[n[t]].status)return!1}return!0}))),d=Object(r.createSelector)(a.b,i,(function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=Object.keys(e).sort()[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value;l in t&&"READY"===t[l].status&&n.push([l,e[l]])}}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}))},function(e,t,n){"use strict";n(954);var r=n(0),a=n.n(r),o=n(4),i=n(122),c=n.n(i),l=a.a.createClass({displayName:"ToastContainer",componentDidUpdate:function(e){if(this.timeout&&clearTimeout(this.timeout),!e.visible||this.props.visible){this.props.action&&this.refs.actionButton?this.refs.actionButton.focus():this.refs.closeButton&&this.refs.closeButton.focus();var t=this.props,n=t.autohide,r=void 0===n||n,a=t.onCloseButtonClick;r&&(this.timeout=setTimeout(a,5e3))}},render:function(){var e=this.props,t=e.visible,n=e.message,r=e.action,o=e.onCloseButtonClick,i=e.closeButton,l=void 0===i||i;return a.a.createElement(c.a,{className:"wgsa-toast-container",transitionName:"wgsa-toast",transitionEnterTimeout:280,transitionLeaveTimeout:280},t&&a.a.createElement("aside",{className:"wgsa-toast",key:n},a.a.createElement("span",{className:"wgsa-toast__message"},n),r&&a.a.createElement("button",{ref:"actionButton",onClick:function(){r.onClick(),o()},className:"wgsa-toast__action mdl-button"},r.label),l&&a.a.createElement("button",{ref:"closeButton",onClick:o,className:"wgsa-toast__dismiss mdl-button mdl-button--icon"},a.a.createElement("i",{className:"material-icons"},"close"))))}});var s=Object(o.a)((function(e){return e.toast}),(function(e){return{onCloseButtonClick:function(){return e(d())}}}))(l);n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return s}));function u(e){return{type:"TOAST_SHOW",payload:e}}function d(){return{type:"TOAST_HIDE"}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return l})),n.d(t,"h",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"g",(function(){return d}));var r=n(62),a="ACTIVATE_FILTER";function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.a.VISIBILITY;return{type:a,payload:{ids:new Set(e),key:t}}}var i="APPEND_TO_FILTER";var c="REMOVE_FROM_FILTER";var l="RESET_FILTER";function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.a.VISIBILITY;return{type:l,payload:{key:e}}}var u="CLEAR_FILTERS";function d(){return{type:u,payload:{}}}},function(e,t,n){"use strict";n(984);var r=n(151),a=n(167),o=n(0),i=n.n(o),c=n(4),l=n(5),s=n.n(l),u=n(3),d=Object(u.createSelector)(a.getFilter,(function(e){return e.sort})),m=function(e,t){var n=d(e,t);return n&&0===n.indexOf(t.sortKey)},p=Object(u.createSelector)(d,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"-"!==e.slice(-1)})),f=function(e){var t=e.className,n=e.onClick,r=e.children,a=e.active,o=e.sortOrder;return i.a.createElement("button",{onClick:function(e){e.preventDefault(),n(!a||!o)},className:s()(t,{active:a})},r,a&&i.a.createElement("i",{className:"material-icons"},o?"arrow_drop_up":"arrow_drop_down"))};f.propTypes={stateKey:i.a.PropTypes.string.isRequired,sortKey:i.a.PropTypes.string.isRequired,sortOrder:i.a.PropTypes.bool,onClick:i.a.PropTypes.func};var h=Object(c.a)((function(e,t){return{active:m(e,t),sortOrder:p(e,t)}}),(function(e,t){var n=t.sortKey,r=t.update;return{onClick:function(t){e(r({sort:"".concat(n).concat(t?"":"-")}))}}}))(f);n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return a.isActive}))},,,function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l}));var r=n(6),a=n.n(r),o=n(59);n.d(t,"b",(function(){return o.c}));var i=function(e,t){var n=t.userDefined;return n?n[e]:void 0};function c(e){return e.label?e.label:e.getLabel?e.getLabel():e.columnKey.replace(/_?_autocolou?r$/,"").replace(/^__/,"").replace(/_/g," ").toUpperCase()}function l(e,t,n){if(t){if(!e[0].group)return e[0].flexGrow=1,void(e[0].width=null);var r=a()(e[0].columns,3),o=r[0],i=r[1],c=r[2],l=i.width+c.width,s=function e(t){return t.reduce((function(t,n){return n.group?t+e(n.columns):n.hidden?t:n.width?t+n.width:n.fixedWidth?t+n.fixedWidth+(n.cellPadding||0):t}),0)}(e.slice(1))+l;Math.max(t-s,0)/2+l<n+8?(o.flexGrow=0,o.width=n-l+8):(o.flexGrow=1,o.width=null)}}},function(e,t,n){"use strict";n.d(t,"h",(function(){return l})),n.d(t,"c",(function(){return s})),n.d(t,"g",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"f",(function(){return p})),n.d(t,"b",(function(){return f})),n.d(t,"e",(function(){return h}));var r=n(94),a=n(74),o=n(27),i=n(17),c=n(38);function l(e){return a.b.update(r.b,e)}function s(){return Object(i.a)(o.h,c.a)}function u(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n){n(t?l(e):a.b.setFilter(r.b,e));var i=Object.keys(e);1===i.length&&"sort"===i[0]?n(Object(o.e)()):n(s())}}function d(){return function(e,t){e(a.b.clear(r.b));var n=Object(c.a)(t());return e(Object(o.h)(n))}}var m="GENOMES_FILTER_OPENED";function p(){return{type:m}}var f="GENOMES_FILTER_SUMMARY_LIST";function h(e,t){return{type:f,payload:{filterKey:e,text:t}}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l}));var r="SET_HIGHLIGHT";function a(e,t){return{type:r,payload:{ids:e,append:t}}}var o="REMOVE_FROM_HIGHLIGHT";function i(e){return{type:o,payload:{ids:e}}}var c="CLEAR_HIGHLIGHT";function l(){return{type:c,payload:{}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(8),a=n(12);encodeURIComponent,Object(r.c)("/download/file");function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.isClusterView?"pathogenwatch-".concat(t):["pathogenwatch",a.b.nickname,e.uuid,t].join("-")}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"f",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d})),n.d(t,"e",(function(){return m}));var r=n(2),a=n.n(r);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(){return localforage.getItem("offline-collections").then((function(e){return e||[]})).then((function(e){return e.map((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{token:e.token||e.slug})}))}))}function c(e){return localforage.setItem("offline-collections",e)}function l(e){return i().then((function(t){return t.concat({token:e.token,size:e.size,title:e.title,description:e.description,createdAt:e.createdAt,organismId:e.organismId})})).then(c)}function s(){return"caches"in window&&"serviceWorker"in navigator}function u(){return!navigator.onLine}function d(e){return"wgsa-collection-".concat(e)}function m(e){return Promise.all([i().then((function(t){return t.filter((function(t){return t.token!==e}))})).then(c),caches.delete(d(e))])}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l}));var r=n(17),a=n(274),o=Object(r.b)("FETCH_COLLECTION_SUMMARY");function i(e){return{type:o,payload:{promise:a.c(e)}}}var c=Object(r.b)("FETCH_COLLECTIONS");function l(e){return{type:c,payload:{promise:a.b(e)}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"c",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"e",(function(){return d}));var r=n(77),a=n(49),o=n(97);function i(e){var t=new Set,n=new Set,r=new Set;return e.forEach((function(e){e.userDefined&&Object.keys(e.userDefined).filter((function(e){return e.length&&!/__colou?r$/.test(e)})).forEach((function(e){return n.add(e)})),e.year&&t.add("__date"),e.pmid&&r.add("__pmid")})),{leading:t,userDefined:n,trailing:r}}function c(e){return Array.from(e).map((function(e){return{columnKey:e,valueGetter:function(t){return Object(r.c)(e,t)}}}))}function l(e){return[a.d,a.c,a.e].concat(Array.from(e).map((function(e){return o.a[e]})))}function s(e){return Array.from(e).map((function(e){return o.a[e]})).concat([a.f])}var u={};function d(){u={}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"f",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"c",(function(){return f})),n.d(t,"g",(function(){return h}));var r=n(3),a=n(53),o=n.n(a),i=n(74),c=n(12),l=n(162),s=function(e){return i.d.getFilter(e,{stateKey:l.b})},u=function(e){return i.d.isActive(e,{stateKey:l.b})},d=function(e){return s(e).prefilter},m=function(e){return s(e).sort},p=Object(r.createSelector)(s,(function(e){return e.searchText||""})),f=Object(r.createSelector)((function(e){return e.collections.summary}),s,(function(e,t){var n=e.loading,r=e.visible,a=e.organismId,i=e.access,l=void 0===i?{}:i,s=e.publicationYear,u=e.createdAt;return{loading:n,visible:r,organism:o()(Object.keys(a).map((function(e){var n=c.d.get(e);return{value:e,label:n.formattedName,title:n.name,count:a[e].count,active:t.organismId===e}})),"title"),access:o()(Object.keys(l).map((function(e){return{value:e,label:"".concat(e[0].toUpperCase()).concat(e.slice(1)),count:l[e].count,active:t.access===e}})),"label"),publicationYear:o()(Object.keys(s).map((function(e){return{value:e,label:e,count:s[e].count,active:t.publicationYear===e}})),"label"),date:u.min&&u.max?{bounds:[u.min,u.max],values:[t.minDate,t.maxDate]}:null}})),h=function(e){return(t=e,t.collections.filter).isOpen;var t}},,,,function(e,t,n){"use strict";n.r(t),n.d(t,"MAP_STORE_BOUNDS",(function(){return r})),n.d(t,"storeBounds",(function(){return a})),n.d(t,"MAP_LASSO_CHANGE",(function(){return o})),n.d(t,"changeLassoPath",(function(){return i})),n.d(t,"MAP_VIEW_BY_COUNTRY",(function(){return c})),n.d(t,"viewByCountry",(function(){return l})),n.d(t,"MAP_MARKER_SIZE_CHANGED",(function(){return s})),n.d(t,"markerSizeChanged",(function(){return u}));var r="MAP_STORE_BOUNDS";function a(e,t){return{type:r,payload:{stateKey:e,bounds:t}}}var o="MAP_LASSO_CHANGE";function i(e,t){return{type:o,payload:{stateKey:e,path:t}}}var c="MAP_VIEW_BY_COUNTRY";function l(e,t){return{type:c,payload:{stateKey:e,active:t}}}var s="MAP_MARKER_SIZE_CHANGED";function u(e,t){return{type:s,payload:{stateKey:e,size:t}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l}));var r=n(17),a=n(195),o=Object(r.b)("UPLOAD_FETCH_GENOMES");function i(e){return{type:o,payload:{uploadedAt:e,promise:a.a(e)}}}var c="UPLOAD_RESET";function l(){return{type:c}}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r=function(e){return 40===e.length};function a(e,t){return e.map((function(e){var n=e.hits;return n.length?n.map((function(e){return t&&r(e)?"(".concat(e.slice(0,t),")"):e})).join(","):"?"})).join("_")}},function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return u}));var r=n(17),a=n(330),o="SET_TREE";function i(e){return{type:o,payload:{name:e}}}var c=Object(r.b)("FETCH_TREE");function l(e,t){return{type:c,payload:{stateKey:e,promise:t}}}var s=Object(r.b)("FETCH_TREE_POSITION");function u(e,t){return{type:s,payload:{stateKey:e,promise:a.a(t)}}}},,function(e,t,n){"use strict";var r=n(285),a=n(6),o=n.n(a),i=n(2),c=n.n(i),l=n(0),s=n.n(l),u=n(4),d=n(50),m=n(341),p=n(177),f=n(337),h=n(95),g=n(26),v=n.n(g),b=n(25),y=n.n(b),E=n(296),O=function(e){var t=e.autoSelect,n=void 0===t||t,r=e.disabled,a=void 0!==r&&r,o=e.listFilterActive,i=e.summary,c=e.children,l=y()(e,["autoSelect","disabled","listFilterActive","summary","children"]);return s.a.createElement(E.a,v()({},l,{autoSelect:n&&!o,disabled:a&&!o,summary:i}),0===i.length&&o?s.a.createElement("p",null,"No matches"):c)},C=n(38),w=n(78);var S=Object(u.a)((function(e,t){var n=t.filterKey;return{value:Object(C.c)(e)[n]}}),(function(e,t){var n=t.filterKey,r=t.summary;return{onChange:function(t){return e(Object(w.e)(n,t.target.value))},onSubmit:function(t){t.preventDefault(),1===r.length&&e(Object(w.g)(c()({},n,r[0].value)))}}}))((function(e){var t=e.filterKey,n=e.heading,r=e.isOpen,a=e.onChange,o=e.onSubmit,i=e.value,c=s.a.createRef();s.a.useEffect((function(){componentHandler.upgradeElement(c.current.parentElement)}),[]),s.a.useEffect((function(){var e=c.current;r?(e.parentElement.MaterialTextfield.checkDirty(),e.focus()):(e.value=null,e.parentElement.MaterialTextfield.checkDirty())}),[r]);var l="".concat(t,"-filter");return s.a.createElement("form",{action:"#",onClick:r?function(e){return e.stopPropagation()}:null,onSubmit:o,autoComplete:"off",autoCorrect:"off"},s.a.createElement("div",{className:"mdl-textfield mdl-js-textfield"},s.a.createElement("input",{className:"mdl-textfield__input",readOnly:!r,id:l,onChange:a,onFocus:function(){i&&i.length&&c.current.setSelectionRange(i.length,i.length)},ref:c,tabIndex:r?void 0:"-1",title:n,type:"text",value:i}),s.a.createElement("label",{className:"mdl-textfield__label",htmlFor:l},n)))}));var j=Object(u.a)((function(e,t){var n=t.filterKey,r=Object(C.c)(e);return{listFilterActive:r[n]&&r[n].length}}))((function(e){return s.a.createElement(O,v()({},e,{headerComponent:S}))})),N=n(170),P=n(74);var k=["subspecies","serotype","strain","mlst","mlst2","ngmast","ngstar","genotype","reference"],x=k.concat(["speciesId","klocus","collection"]),_=k.concat(["klocus"]);var I=Object(u.a)((function(e){return{filterState:C.a(e,{stateKey:r.b}),filterSummary:C.b(e,{stateKey:r.b}),isActive:P.d.isActive(e,{stateKey:r.b}),isOpen:C.g(e),listFilters:C.c(e),prefilter:C.d(e),textValue:C.e(e)}}),(function(e){return{clearFilter:function(){return e(w.d())},updateFilterValue:function(t,n){return e(w.h(c()({},t,n)))},applyFilter:function(){return e(w.c())},updateFilter:function(t,n){return e(w.g(c()({},t,n)))},clearDependants:function(t,n){return function(r,a){for(var i=c()({},r,a),l=0,s=Object.entries(t);l<s.length;l++){var u=o()(s[l],2),d=u[0],m=u[1];n.includes(d)&&(i[d]=m)}e(w.g(i))}}}}))((function(e){var t,n=e.applyFilter,r=e.clearFilter,a=e.filterSummary,o=e.filterState,i=e.isActive,c=e.prefilter,l=e.textValue,u=e.updateFilter,g=e.updateFilterValue,v=e.clearDependants;return s.a.createElement(m.a,{active:i,clear:r,prefilter:c,summary:a,textOnChange:function(e){return g("searchText",e)},textOnChangeEffect:n,textValue:l,updateFilter:u},s.a.createElement(j,{autoSelect:!1,disabled:!a.organismId.length,disabledText:"No supported organisms in current filter.",filterKey:"organismId",heading:"Supported organism",hidden:!a.visible,icon:"bug_report",updateFilter:v(o,x)}),s.a.createElement(j,{filterKey:"collection",heading:"Collection",icon:"collections",renderLabel:function(e){var t=e.label;return s.a.createElement(N.a,null,t)},updateFilter:v(o,_)}),s.a.createElement(j,{filterKey:"genusId",heading:"Genus",icon:"bug_report",hidden:o.organismId,renderLabel:function(e){var t=e.label;return s.a.createElement("em",null,t)},updateFilter:v(o,x)}),s.a.createElement(j,{disabled:!a.speciesId.length,disabledText:"Select a genus to filter by species.",filterKey:"speciesId",heading:"Species",hidden:!a.genusId.length||o.organismId,icon:"bug_report",renderLabel:function(e){var t=e.label;return s.a.createElement("em",null,t)},updateFilter:v(o,k)}),s.a.createElement(j,{filterKey:"subspecies",heading:"Subspecies",hidden:o.organismId,icon:"bug_report",renderLabel:function(e){var t=e.value;return s.a.createElement(s.a.Fragment,null,"subsp. ",s.a.createElement("em",null,t))},updateFilter:v(o,["serotype"])}),s.a.createElement(j,{filterKey:"serotype",heading:(t=o.genusId,"590"===t?"Serovar":"Serotype"),hidden:o.organismId,icon:"bug_report",renderLabel:function(e){var t=e.value;return"ser. ".concat(t)}}),s.a.createElement(j,{filterKey:"strain",heading:"Strain",icon:"scatter_plot"}),s.a.createElement(j,{filterKey:"mlst",heading:"MLST - ".concat(a.sources.mlst),icon:"label",renderLabel:function(e){var t=e.active,n=e.value;return s.a.createElement(s.a.Fragment,null,t&&(a.mlst2.length?"".concat(a.sources.mlst,":"):"MLST:")," ST ",s.a.createElement(h.b,{id:n}))}}),s.a.createElement(j,{filterKey:"mlst2",heading:"MLST - ".concat(a.sources.mlst2),icon:"label",renderLabel:function(e){var t=e.active,n=e.value;return s.a.createElement(s.a.Fragment,null,t&&(a.mlst.length?"".concat(a.sources.mlst2,":"):"MLST:")," ST ",s.a.createElement(h.b,{id:n}))}}),s.a.createElement(j,{filterKey:"ngstar",heading:"NG-STAR",icon:"label",renderLabel:function(e){var t=e.active,n=e.value;return s.a.createElement(s.a.Fragment,null,t?"NG-STAR: ST":"ST"," ",s.a.createElement(h.b,{id:n}))}}),s.a.createElement(j,{filterKey:"ngmast",heading:"NG-MAST",icon:"label",renderLabel:function(e){var t=e.active,n=e.value;return s.a.createElement(s.a.Fragment,null,t?"NG-MAST: ST":"ST"," ",s.a.createElement(h.b,{id:n}))}}),s.a.createElement(j,{filterKey:"genotype",heading:"Genotype",icon:"label",renderLabel:function(e){var t=e.value;return e.active?"Genotype ".concat(t):t}}),s.a.createElement(j,{filterKey:"klocus",heading:"K Locus",icon:"label"}),s.a.createElement(j,{filterKey:"reference",heading:"PW Reference",icon:"book"}),s.a.createElement(j,{filterKey:"resistance",heading:"Resistance",icon:"local_pharmacy"}),s.a.createElement(j,{filterKey:"country",heading:"Country",icon:"language"}),s.a.createElement(f.a,{summary:a.date}),s.a.createElement(p.a,{filterKey:"access",headerComponent:function(e){var t=e.heading;return s.a.createElement("span",null,t)},heading:"Access",icon:"person"}),s.a.createElement(j,{autoSelect:1===a.access.length,filterKey:"uploadedAt",heading:"Uploaded at",icon:"cloud_upload"}),s.a.createElement(d.b,{update:u}))}));n.d(t,"b",(function(){return r.b})),n.d(t,"a",(function(){return I}))},function(e,t,n){"use strict";n(982);var r=n(222);n.d(t,"b",(function(){return r.a}));var a=n(297);n.d(t,"a",(function(){return a.a}));n(223);var o=n(91);n.d(t,"c",(function(){return o.b}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(0),a=n.n(r),o=n(222),i=n(223),c=n(91),l=n(77),s=n(83),u={__date:{columnKey:"__date",valueGetter:function(e){return Object(l.b)(e)}},__pmid:{columnKey:"__pmid",valueGetter:function(e){return e.pmid},getCellContents:function(e,t){var n=(0,e.valueGetter)(t);return n?a.a.createElement("a",{href:"http://www.ncbi.nlm.nih.gov/pubmed/".concat(n),target:"_blank",rel:"noopener",title:"View publication",style:{color:"#369"},onClick:function(e){return e.stopPropagation()}},n):null}},__reference:{columnKey:"__reference",valueGetter:function(e){var t=e.analysis;return t.core&&t.core.fp?t.core.fp.reference:null}},__mlst:{columnKey:"__mlst",label:"ST",get displayName(){return s.f.mlst?"MLST ST (".concat(s.f.mlst,")"):"MLST ST"},valueGetter:function(e){var t=e.analysis;if(!t.mlst)return null;var n=t.mlst.st;return Object(c.b)(n)?"*".concat(n.slice(0,4)):n},display:function(e){var t=e.analysis;return t.mlst?a.a.createElement(o.a,{id:t.mlst.st}):null}},__mlst_profile:{columnKey:"__mlst_profile",label:"PROFILE",get displayName(){return s.f.mlst?"MLST PROFILE (".concat(s.f.mlst,")"):"MLST PROFILE"},valueGetter:function(e){var t=e.analysis;return t.mlst?Object(c.a)(t.mlst.alleles,4):null},display:function(e){var t=e.analysis;return t.mlst?a.a.createElement(i.a,{alleles:t.mlst.alleles}):null}},__mlst2:{columnKey:"__mlst2",label:"ST",get displayName(){return s.f.mlst2?"MLST ST (".concat(s.f.mlst2,")"):"MLST ST"},valueGetter:function(e){var t=e.analysis;if(!t.mlst2)return null;var n=t.mlst2.st;return Object(c.b)(n)?"*".concat(n.slice(0,4)):n},display:function(e){var t=e.analysis;return t.mlst2?a.a.createElement(o.a,{id:t.mlst2.st}):null}},__mlst2_profile:{columnKey:"__mlst2_profile",label:"PROFILE",get displayName(){return s.f.mlst2?"MLST PROFILE (".concat(s.f.mlst2,")"):"MLST PROFILE"},valueGetter:function(e){var t=e.analysis;return t.mlst2?Object(c.a)(t.mlst2.alleles,4):null},display:function(e){var t=e.analysis;return t.mlst2?a.a.createElement(i.a,{alleles:t.mlst2.alleles}):null}},__ngstar:{columnKey:"__ngstar",label:"TYPE",get displayName(){return"NG-STAR TYPE"},valueGetter:function(e){var t=e.analysis;if(!t.ngstar)return null;var n=t.ngstar.st;return Object(c.b)(n)?"*".concat(n.slice(0,4)):n},display:function(e){var t=e.analysis;return t.ngstar?a.a.createElement(o.a,{id:t.ngstar.st}):null}},__ngstar_profile:{columnKey:"__ngstar_profile",label:"PROFILE",get displayName(){return"NG-STAR PROFILE"},valueGetter:function(e){var t=e.analysis;return t.ngstar?Object(c.a)(t.ngstar.alleles,4):null},display:function(e){var t=e.analysis;return t.ngstar?a.a.createElement(i.a,{alleles:t.ngstar.alleles}):null}},__inc_types:{columnKey:"__inc_types",displayName:"Inc Types",valueGetter:function(e){var t=e.analysis;return t.inctyper?0===Object.keys(t.inctyper).length&&t.inctyper.constructor===Object?null:Object.values(t.inctyper["Inc Matches"].reduce((function(e,t){return e.hasOwnProperty(t.Contig)||(e[t.Contig]=[]),e[t.Contig].push(t),e}),{})).map((function(e){return e.map((function(e){return"gram_negative"===t.inctyper.Library?e["Inc Match"].replace(/_\d+$/,""):e.Group})).sort().join("/")})).sort().join("; "):null}},__Virulence_Score:{columnKey:"__Virulence_Score",displayName:"Virulence Score",label:"Virulence Score",valueGetter:function(e){var t=e.analysis;return t.kleborate?"".concat(t.kleborate.virulence_score):null}},__K_locus:{columnKey:"__K_locus",displayName:"K LOCUS (wzi)",label:"K LOCUS (wzi)",valueGetter:function(e){var t=e.analysis;return t.kleborate?"".concat(t.kleborate.K_locus," (").concat(t.kleborate.wzi,")"):null}},__O_locus:{columnKey:"__O_locus",valueGetter:function(e){var t=e.analysis;return t.kleborate?t.kleborate.O_locus:null}},__Aerobactin:{columnKey:"__Aerobactin",displayName:"AEROBACTIN (AbST)",label:"AEROBACTIN (AbST)",valueGetter:function(e){var t=e.analysis;return t.kleborate?"-"===t.kleborate.Aerobactin?null:"".concat(t.kleborate.Aerobactin," (").concat(t.kleborate.AbST,")"):null}},__Colibactin:{columnKey:"__Colibactin",displayName:"COLIBACTIN (CbST)",label:"COLIBACTIN (CbST)",valueGetter:function(e){var t=e.analysis;return t.kleborate?"-"===t.kleborate.Colibactin?null:"".concat(t.kleborate.Colibactin," (").concat(t.kleborate.CbST,")"):null}},__Salmochelin:{columnKey:"__Salmochelin",displayName:"SALMOCHELIN (SmST)",label:"SALMOCHELIN (SmST)",valueGetter:function(e){var t=e.analysis;return t.kleborate?"-"===t.kleborate.Salmochelin?null:"".concat(t.kleborate.Salmochelin," (").concat(t.kleborate.SmST,")"):null}},__Yersiniabactin:{columnKey:"__Yersiniabactin",displayName:"YERSINIABACTIN (YbST)",label:"YERSINIABACTIN (YbST)",valueGetter:function(e){var t=e.analysis;return t.kleborate?"-"===t.kleborate.Yersiniabactin?null:"".concat(t.kleborate.Yersiniabactin," (").concat(t.kleborate.YbST,")"):null}},__rmpA:{columnKey:"__rmpA",displayName:"rmpA",valueGetter:function(e){var t=e.analysis;return t.kleborate?"-"===t.kleborate.rmpA?null:t.kleborate.rmpA:null}},__rmpA2:{columnKey:"__rmpA2",displayName:"rmpA2",valueGetter:function(e){var t=e.analysis;return t.kleborate?"-"===t.kleborate.rmpA2?null:t.kleborate.rmpA2:null}},"__ng-mast":{columnKey:"__ng-mast",displayName:"NG-MAST TYPE",valueGetter:function(e){var t=e.analysis;return t.ngmast?t.ngmast.ngmast:null}},__por:{columnKey:"__por",displayName:"NG-MAST POR",valueGetter:function(e){var t=e.analysis;return t.ngmast?t.ngmast.por:null}},__tbpb:{columnKey:"__tbpb",displayName:"NG-MAST TBQB",valueGetter:function(e){var t=e.analysis;return t.ngmast?t.ngmast.tbpb:null}},__genotyphi_type:{columnKey:"__genotyphi_type",label:"GENOTYPE",displayName:"GENOTYPHI GENOTYPE",valueGetter:function(e){var t=e.analysis;return t.genotyphi?t.genotyphi.genotype:null}},__genotyphi_snps:{columnKey:"__genotyphi_snps",label:"SNPs",valueGetter:function(e){var t=e.analysis;return t.genotyphi?t.genotyphi.snps:null}},__genotyphi_snps_called:{columnKey:"__genotyphi_snps_called",label:"SNPs CALLED",displayName:"GENOTYPHI SNPs CALLED",valueGetter:function(e){var t=e.analysis;return t.genotyphi?t.genotyphi.foundLoci:null},numeric:!0},__core_matches:{columnKey:"__core_matches",valueGetter:function(e){var t=e.analysis;return t.core&&t.core.summary?t.core.summary.kernelSize:null},numeric:!0},"__%_core_families":{columnKey:"__%_core_families",valueGetter:function(e){var t=e.analysis;return t.core&&t.core.summary?t.core.summary.percentKernelMatched:null},numeric:!0},"__%_non-core":{columnKey:"__%_non-core",valueGetter:function(e){var t=e.analysis.core,n=void 0===t?{}:t;return n.summary&&n.summary.percentAssemblyMatched?(100-n.summary.percentAssemblyMatched).toFixed(1):null},numeric:!0},__genome_length:{columnKey:"__genome_length",valueGetter:function(e){var t=e.analysis;return t.metrics?t.metrics.length:null},numeric:!0},__n50:{columnKey:"__n50",valueGetter:function(e){var t=e.analysis;return t.metrics?t.metrics.N50:null},numeric:!0},"__no._contigs":{columnKey:"__no._contigs",valueGetter:function(e){var t=e.analysis;return t.metrics?t.metrics.contigs:null},numeric:!0},"__non-ATCG":{columnKey:"__non-ATCG",valueGetter:function(e){var t=e.analysis;return t.metrics?t.metrics.nonATCG:null},numeric:!0},"__%_GC_Content":{columnKey:"__%_GC_Content",label:"% GC CONTENT",valueGetter:function(e){var t=e.analysis;return t.metrics?t.metrics.gcContent:null},numeric:!0}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r={RECOVERY:1,PROGRESS:2},a={READS:"reads",ASSEMBLY:"assembly"}},function(e,t,n){"use strict";n(988);var r=n(0),a=n.n(r),o=n(5),i=n.n(o),c=n(308);var l=function(e){var t=e.className,n=e.children,r=e.tooltip,o=e.title,l=e.icon,s=e.fadeOverflow;return a.a.createElement("div",{className:i()(t,"wgsa-card-metadata",{"wgsa-overflow-fade":s}),title:r},function(e,t){return e?"wgsa_genome"===e?a.a.createElement(c.a,{title:t,viewBox:"4 4 60 60"}):a.a.createElement("i",{title:t,className:"material-icons"},e):null}(l,o),n)},s=function(e){var t=e.className,n=e.children;return a.a.createElement("article",{className:i()("wgsa-card",t)},n)};n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={UNSAVED:0,SAVING:1,SAVED:2,ERRORED:3}},,,,function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n(6),a=n.n(r),o=n(3),i=function(e){return e.summary},c=Object(o.createSelector)(i,(function(e){for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var o=a()(r[n],2),i=o[0],c=o[1];t[i]=Number(c).toLocaleString()}return t})),l=function(e){var t=e.summary;return new Set(t.deployedOrganisms)}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return s}));var r=n(3),a={center:[0,0],zoom:1};function o(e,t){var n=t.stateKey;return e.maps[n]||{}}var i=Object(r.createSelector)(o,(function(e){var t=e.bounds;return void 0===t?a:t})),c=Object(r.createSelector)(o,(function(e){return e.lassoPath})),l=Object(r.createSelector)(o,(function(e){var t=e.viewByCountry;return void 0!==t&&t})),s=Object(r.createSelector)(o,(function(e){var t=e.markerSize;return void 0===t?1:t}))},,function(e,t,n){"use strict";n.d(t,"f",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"g",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"a",(function(){return g})),n.d(t,"e",(function(){return v})),n.d(t,"h",(function(){return b}));var r=n(6),a=n.n(r),o=n(3),i=n(67),c=n(20),l=function(e){return e.upload.progress.assembly},s=function(e){return l(e).status},u=function(e){return l(e).loaded},d=function(e){return s(e).pending},m=Object(o.createSelector)(i.d,s,(function(e){return l(e).tick}),(function(e,t){var n=e.reads,r=e.assemblies,a=t.runningSince,o=void 0===a?[]:a,i=t.failed,l=void 0===i?0:i,s=t.complete,u=void 0===s?0:s,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();if(0===n)return null;var m=n+r,p=0,f=!0,h=!1,g=void 0;try{for(var v,b=o[Symbol.iterator]();!(f=(v=b.next()).done);f=!0){var y=v.value,E=d-1e3*y;p+=E/18e5*(100/m)}}catch(e){h=!0,g=e}finally{try{f||null==b.return||b.return()}finally{if(h)throw g}}var O=o.length>0?Math.max(Math.min(99,p),1):0,C=(u+r)/m*100,w=l/m*100,S=O*((100-C-w)/100),j=100-C-w-S;return{label:"Assembly progress",data:[C,w,S,j],backgroundColor:["#3c7383",c.c.DANGER_COLOUR,"#ac65a6","rgba(0, 0, 0, .14)"],labels:["Assembled","Failed","Assembling","Remaining"],tooltips:["".concat(u+r," / ").concat(m,", ").concat(C.toFixed(1),"%"),"".concat(l," / ").concat(m),"".concat(o.length," / ").concat(m,", ").concat(O.toFixed(1),"%"),"".concat(m-o.length-l-u," / ").concat(m)],parents:[],total:100}})),p=Object(o.createSelector)(s,(function(e){var t=e.runningSince;return(void 0===t?[]:t).length>0})),f=Object(o.createSelector)(i.c,s,(function(e,t){var n=t.complete,r=void 0===n?0:n,a=t.failed,o=void 0===a?0:a;return{total:e,complete:r,failed:o,done:r+o,pending:e-o-r}})),h=Object(o.createSelector)(f,i.b,(function(e,t){return e.pending-t>0})),g=Object(o.createSelector)((function(e){return l(e).errors}),i.e,(function(e,t){for(var n=[],r=0,o=Object.entries(e);r<o.length;r++){var i=a()(o[r],2),c=i[0],l=i[1];c in t&&!l.includes("quality")&&n.push({name:t[c].name,message:l})}return n})),v=Object(o.createSelector)(g,(function(e){return e.length})),b=Object(o.createSelector)(h,s,v,(function(e,t,n){var r=t.failed,a=void 0===r?0:r;return!!e||a>0&&n<a}))},function(e,t,n){"use strict";n.d(t,"f",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"d",(function(){return p}));var r=n(162),a=n(74),o=n(82),i=n(84),c=n(17);function l(e){return a.b.update(r.b,e)}function s(){return Object(c.a)(o.d,i.b)}function u(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function(n){n(t?l(e):a.b.setFilter(r.b,e)),n(s())}}function d(){return function(e,t){e(a.b.clear(r.b));var n=Object(i.b)(t());e(Object(o.d)(n))}}var m="COLLECTIONS_FILTER_OPENED";function p(){return{type:m}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"d",(function(){return c}));var r={iterationsPerRender:100,worker:!0,barnesHutOptimize:!1},a={edgeColor:"default",labelColor:"node",labelThreshold:0,hideEdgesOnMove:!0},o=1e3,i=10,c=50},function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=3)}([function(e,t,n){e.exports=n(1),e.exports.parse_nhx=n(2)},function(e,t){e.exports.parse_newick=function(e){for(var t=[],n={},r=e.split(/\s*(;|\(|\)|,|:)\s*/),a=0;a<r.length;a++){var o=r[a];switch(o){case"(":var i={};n.children=[i],t.push(n),n=i;break;case",":i={},t[t.length-1].children.push(i),n=i;break;case")":n=t.pop();break;case":":break;default:var c=r[a-1];")"==c||"("==c||","==c?n.name=o:":"==c&&(n.branch_length=parseFloat(o))}}return n},e.exports.parse_json=function(e){return function e(t){var n="";if(t.hasOwnProperty("children")){var r=[];t.children.forEach((function(t){var n=e(t);r.push(n)}));var a=r.join();t.hasOwnProperty("name")&&(n="("+a+")"+t.name),t.hasOwnProperty("branch_length")&&(n=n+":"+t.branch_length)}else{var o="";t.hasOwnProperty("name")&&(o=t.name),t.hasOwnProperty("branch_length")&&(o=o+":"+t.branch_length),n+=o}return n}(e)+";"}},function(e,t){e.exports=parse_nhx=function(e){for(var t=[],n={},r=e.split(/\s*(;|\(|\)|\[|\]|,|:|=)\s*/),a=0;a<r.length;a++){var o=r[a];switch(o){case"(":var i={};n.children=[i],t.push(n),n=i;break;case",":i={},t[t.length-1].children.push(i),n=i;break;case")":n=t.pop();break;case":":break;default:var c=r[a-1];if(")"==c||"("==c||","==c)n.name=o;else if(":"==c)isNaN(o)||(n.branch_length=parseFloat(o));else if("="==c)switch(r[a-2]){case"D":n.duplication=o;break;case"G":n.gene_id=o;break;case"T":n.taxon_id=o}}}return n}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"Angles",(function(){return a})),n.d(r,"TreeTypes",(function(){return o})),n.d(r,"EmptyArray",(function(){return i}));var a={Degrees0:0,Degrees45:.25*Math.PI,Degrees90:.5*Math.PI,Degrees180:Math.PI,Degrees270:1.5*Math.PI,Degrees360:2*Math.PI},o={Radial:"rd",Rectangular:"rc",Circular:"cr",Diagonal:"dg",Hierarchical:"hr"},i=[],c={alignLabels:!1,branchScale:null,collapsedIds:i,fillStyle:"#222",fontFamily:"serif",fontSize:16,fontWeight:"normal",haloRadius:12,haloStyle:"#3C7383",haloWidth:4,highlightedId:null,highlightedStyle:"#3C7383",internalNodeStyle:{shape:"none"},labelThreshold:8,leafNodeStyle:{shape:"circle"},lineWidth:1,nodeSize:14,nodesPowRatio:.5,padding:32,renderInternalLabels:!1,renderLabels:!0,renderLeafLabels:!0,rootId:null,rotatedIds:i,selectableInternalNodes:!0,selectableLeafNodes:!0,selectedIds:i,showLabels:!1,showNodes:!0,stepScale:8,strokeStyle:"#222",styleLeafLabels:!1,styleNodeLines:!1,styles:{},type:o.Rectangular,zoomFactor:3};function l(e,t){var n=this[e];this[e]=function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t.call(this,n.bind(this),r)}}var s=function(e,t){var n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;if("function"!=typeof c)throw new Error("Invalid plugin provided.");c.call(e,e,l.bind(e),c.options)}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}},u=function(e,t,n){var r=e.state.zoomFactor;return 0===n?t:Math.pow(10,Math.log(t)/Math.log(10)+n*r*.01)},d=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(n){var r=e.indexOf(t);if(-1===r)return e.concat(t);var a=e.concat();return a.splice(r,1),a}return[t]},m={rd:{alignableLabels:!1,branchScalingAxis:"xy",drawLine:function(e,t,n){e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(n.parent.x,n.parent.y),e.ctx.stroke(),e.ctx.closePath()},getBranchScale:function(e){var t=function(e){return Math.min(e.ctx.canvas.width,e.ctx.canvas.height)}(e)/2,n=e.getVirtualTree(),r=n.rootNode.totalLeafLength-n.rootNode.branchLength;return r>0?t/r:r<0?t*r:0},getNodeAtPoint:function(e,t,n,r){for(var a=e.layout(),o=a.rootNode,i=a.postorderTraversal,c=o.postIndex-o.totalNodes+1;c<=o.postIndex;c++){var l=i[c];if(l.parent&&(l.x>l.parent.x?t<l.x&&t>l.parent.x:t<l.parent.x&&t>l.x))if(isNaN(l.slope)){if(l.y>l.parent.y?n<l.y&&n>l.parent.y:n<l.parent.y&&n>l.y)return l}else if(n>l.slope*t+l.intercept-r&&n<l.slope*t+l.intercept+r)return l}return null},layoutNodes:function(e,t){for(var n=0,r=t.rootNode,o=r.postIndex-r.totalNodes+1;o<=r.postIndex;o++){var i=t.postorderTraversal[o];if(i.isLeaf)i.angle=n*(a.Degrees360/r.visibleLeaves);else{var c=0,l=!0,s=!1,u=void 0;try{for(var d,m=i.children[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var p=d.value;c+=p.angle*p.totalLeaves}}catch(e){s=!0,u=e}finally{try{l||null==m.return||m.return()}finally{if(s)throw u}}i.angle=c/i.totalLeaves}(i.isLeaf&&!i.isHidden||i.isCollapsed&&!i.isHidden)&&(n+=1)}for(var f=r.preIndex;f<r.preIndex+r.totalNodes;f++){var h=t.preorderTraversal[f],g=h.branchLength*e.state.branchScale;h.x=(h!==r?h.parent.x:0)+g*Math.cos(h.angle),h.y=(h!==r?h.parent.y:0)+g*Math.sin(h.angle),h!==r&&(h.slope=(h.parent.y-h.y)/(h.parent.x-h.x),h.intercept=h.y-h.slope*h.x)}}},rc:{alignableLabels:!0,branchScalingAxis:"x",drawLine:function(e,t,n){n!==t.rootNode&&(e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(n.parent.x,n.y),e.ctx.lineTo(n.parent.x,n.parent.y),e.ctx.stroke(),e.ctx.closePath())},getBranchScale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.state.stepScale,n=e.getVirtualTree(),r=n.rootNode.totalLeaves*t,a=e.ctx.canvas.width/e.ctx.canvas.height*r,o=n.rootNode.totalLeafLength-n.rootNode.branchLength;return 0===o&&e.error(501),a/o},getNodeAtPoint:function(e,t,n,r){for(var a=e.layout(),o=a.rootNode,i=a.postorderTraversal,c=o.postIndex-o.totalNodes+1;c<=o.postIndex;c++){var l=i[c];if(l.parent&&(t<l.x+r&&t>l.parent.x-r&&n<l.y+r&&n>l.y-r||t<l.parent.x+r&&t>l.parent.x-r&&(n<l.parent.y?n>l.y-r:n<l.y+r)))return l}return null},mainAxis:"x",layoutNodes:function(e,t){for(var n=0,r=t.rootNode,o=r.postIndex-r.totalNodes+1;o<=r.postIndex;o++){var i=t.postorderTraversal[o];if(i.angle=a.Degrees0,i.x=i.distanceFromRoot*e.state.branchScale,i.isLeaf)i.y=n*e.state.stepScale;else if(i.isCollapsed)i.y=n*e.state.stepScale;else{var c=i.children[0].y,l=i.children[i.children.length-1].y;i.y=(l+c)/2}(i.isLeaf&&!i.isHidden||i.isCollapsed&&!i.isHidden)&&(n+=1)}},stepScalingAxis:"y"},cr:{alignableLabels:!0,branchScalingAxis:"xy",drawLine:function(e,t,n){var r=t.rootNode,a=n.parent.distanceFromRoot-r.distanceFromRoot;if(e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(a*e.state.branchScale*Math.cos(n.angle),a*e.state.branchScale*Math.sin(n.angle)),e.ctx.stroke(),e.ctx.closePath(),n.children&&n.children.length&&!n.isCollapsed){var o=n.children[0].angle,i=n.children[n.children.length-1].angle,c=Math.abs(n.distanceFromRoot-r.distanceFromRoot);e.ctx.beginPath(),e.ctx.arc(0,0,c*e.state.branchScale,o,i,i<o),e.ctx.stroke(),e.ctx.closePath()}},getBranchScale:function(e){var t=function(e){return Math.min(e.ctx.canvas.width,e.ctx.canvas.height)}(e)/2,n=e.getVirtualTree().rootNode;return n.totalLeafLength>0?t/n.totalLeafLength:n.totalLeafLength<0?t*n.totalLeafLength:0},getNodeAtPoint:function(e,t,n,r){for(var a=e.layout(),o=a.rootNode,i=a.postorderTraversal,c=o.postIndex-o.totalNodes+1;c<=o.postIndex;c++){var l=i[c];if(l.parent){var s=l.parent.distanceFromRoot-o.distanceFromRoot,u=s*e.state.branchScale*Math.cos(l.angle);if(l.x>u?t<l.x&&t>u:t<u&&t>l.x)if(isNaN(l.slope)){var d=s*e.state.branchScale*Math.sin(l.angle);if(l.y>d?n<l.y&&n>d:n<d&&n>l.y)return l}else if(n>l.slope*t+l.intercept-r&&n<l.slope*t+l.intercept+r)return l}}return null},layoutNodes:function(e,t){for(var n=0,r=t.rootNode,o=r.postIndex-r.totalNodes+1;o<=r.postIndex;o++){var i=t.postorderTraversal[o];if(i.isLeaf)i.angle=n*(a.Degrees360/t.rootNode.visibleLeaves);else{var c=i.children[0].angle,l=i.children[i.children.length-1].angle;i.angle=(l+c)/2}var s=(i.distanceFromRoot-t.rootNode.distanceFromRoot)*e.state.branchScale;i.x=s*Math.cos(i.angle),i.y=s*Math.sin(i.angle),(i.isLeaf&&!i.isHidden||i.isCollapsed&&!i.isHidden)&&(n+=1),i.parent&&(i.slope=Math.tan(i.angle),i.intercept=i.y-i.slope*i.x)}}},dg:{alignableLabels:!1,getBranchScale:function(e){var t=e.getVirtualTree().rootNode,n=e.ctx.canvas.width-2*e.state.padding;return t.totalLeafLength>0?n/t.totalLeafLength:t.totalLeafLength<0?n*t.totalLeafLength:0},getNodeAtPoint:function(e,t,n,r){for(var a=e.getVirtualTree(),o=a.rootNode,i=a.postorderTraversal,c=o.postIndex-o.totalNodes+1;c<=o.postIndex;c++){var l=i[c];if(l&&l.parent&&t<l.x&&t>l.parent.x&&n>l.slope*t+l.intercept-r&&n<l.slope*t+l.intercept+r)return l}return null},drawLine:function(e,t,n){n!==t.rootNode&&(e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(n.parent.x,n.parent.y),e.ctx.stroke(),e.ctx.closePath())},layoutNodes:function(e,t){for(var n=0,r=t.rootNode,o=r.postIndex-r.totalNodes+1;o<=r.postIndex;o++){var i=t.postorderTraversal[o];if(i.angle=a.Degrees0,i.x=(t.rootNode.visibleLeaves-i.visibleLeaves)*e.state.stepScale/2,i.isLeaf)i.y=n*e.state.stepScale;else if(i.isCollapsed)i.y=n*e.state.stepScale;else{var c=i.children[0].y,l=(i.visibleLeaves-i.children[0].visibleLeaves)*e.state.stepScale;i.y=c+l/2}i.isLeaf&&n++}for(var s=r.preIndex;s<r.preIndex+r.totalNodes;s++){var u=t.preorderTraversal[s];u.parent&&(u.slope=(u.parent.y-u.y)/(u.parent.x-u.x),u.intercept=u.y-u.slope*u.x)}},mainAxis:"x",stepScalingAxis:"y"},hr:{alignableLabels:!0,drawLine:function(e,t,n){n!==t.rootNode&&(e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(n.x,n.parent.y),e.ctx.lineTo(n.parent.x,n.parent.y),e.ctx.stroke(),e.ctx.closePath())},branchScalingAxis:"y",getBranchScale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.state.stepScale,n=e.getVirtualTree(),r=n.rootNode.totalLeaves*t,a=e.ctx.canvas.height/e.ctx.canvas.width*r,o=n.rootNode.totalLeafLength-n.rootNode.branchLength;return 0===o&&e.error(501),a/o},getNodeAtPoint:function(e,t,n,r){for(var a=e.layout(),o=a.rootNode,i=a.preorderTraversal,c=o.preIndex;c<o.preIndex+o.totalNodes;c++){var l=i[c];if(l.parent&&(t<l.x+r&&t>l.x-r&&n<l.y+r&&n>l.parent.y-r||n<l.parent.y+r&&n>l.parent.y-r&&(t<l.parent.x?t>l.x-r:t<l.x+r)))return l}return null},mainAxis:"y",layoutNodes:function(e,t){for(var n=0,r=t.rootNode,o=r.postIndex-r.totalNodes+1;o<=r.postIndex;o++){var i=t.postorderTraversal[o];if(i.angle=a.Degrees90,i.y=i.distanceFromRoot*e.state.branchScale,i.isLeaf)i.x=-1*n*e.state.stepScale;else if(i.isCollapsed)i.x=n*e.state.stepScale;else{var c=i.children[0].x,l=i.children[i.children.length-1].x;i.x=(l+c)/2}(i.isLeaf&&!i.isHidden||i.isCollapsed&&!i.isHidden)&&(n+=1)}},stepScalingAxis:"x"}},p=function(e){return{minScale:e/2,maxScale:Math.max(e,16)}},f=function(e){var t=e.getBounds(!1),n=e.getDrawingArea(),r=t.maxX-t.minX,a=t.maxY-t.minY,o=Math.max(.333*n.width,n.right-n.left-e.state.nodeSize),i=Math.max(.333*n.height,n.bottom-n.top-e.state.nodeSize),c=o/r,l=i/a,s=Math.min(c,l),u=e.state.padding+Math.max(e.state.nodeSize,e.state.fontSize)/2,d=-1*t.minX*s,f=-1*t.minY*s;c>l?(d+=u+(o-r*s)/2,f+=u):c<l?(d+=u,f+=u+(i-a*s)/2):(d+=u,f+=u),void 0===m[e.state.type].mainAxis&&(d+=(n.width-o)/2-u,f+=(n.height-i)/2-u);var h=p(s);return{offsetX:d,offsetY:f,scale:s,minScale:h.minScale,maxScale:h.maxScale}},h=function(e,t,n){var r=d(e.state.collapsedIds,t);return e.chain((function(){return{collapsedIds:r}}),n?f:null)},g=function(e,t){return t/e.state.scale},v={},b=function(e){e.setState(f(e))};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function C(e){for(var t=[],n=[e];n.length;){var r=n.shift();t.push(r),Array.isArray(r.children)&&n.unshift.apply(n,O(r.children))}return t}function w(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(e){for(var t=[],n=[e];n.length;){var r=n.pop();Array.isArray(r.children)&&n.push.apply(n,w(r.children)),t.push(r)}return t.reverse()}var j=n(0),N=function(e){var t=e;"string"==typeof e&&(t={type:"newick",data:e});var n=t,r=n.type,a=n.data,o=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(n,["type","data"]),i=null;if("newick"===r||void 0===r)i=j.parse_newick(a);else{if("biojs"!==r)throw new Error("Source type is not supported: ".concat(r));i=a}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.trimQuotes,r=void 0===n||n,a=S(e),o=C(e),i=a.every((function(e){return 0===(e.branchLength||e.branch_length||0)}));if(i){e.branchLength=0;for(var c=0;c<o.length;c++){var l=o[c];if(l.children){var s=!0,u=!1,d=void 0;try{for(var m,p=l.children[Symbol.iterator]();!(s=(m=p.next()).done);s=!0){var f=m.value;f.branchLength=l.branchLength+1}}catch(e){u=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}}}}for(var h=0;h<a.length;h++){var g=a[h];if(g.postIndex=h,g.isLeaf=!Array.isArray(g.children),g.branchLength=Math.abs(g.branchLength||g.branch_length||0),delete g.branch_length,g.isLeaf&&"string"==typeof g.name&&(g.id=r?g.name.trim().replace(/^['"]|['"]$/g,""):g.name,delete g.name),g.totalNodes=1,g.totalLeaves=1,g.totalLeafLength=g.branchLength,!g.isLeaf){g.totalNodes=1,g.totalLeaves=0;var v=0,b=!0,y=!1,E=void 0;try{for(var O,w=g.children[Symbol.iterator]();!(b=(O=w.next()).done);b=!0){var j=O.value;g.totalNodes+=j.totalNodes,g.totalLeaves+=j.totalLeaves,j.totalLeafLength>v&&(v=j.totalLeafLength),j.parent=g}}catch(e){y=!0,E=e}finally{try{b||null==w.return||w.return()}finally{if(y)throw E}}g.totalLeafLength=g.branchLength+v,g.longestLeaf=v}}for(var N={},P=[],k=0;k<o.length;k++){var x=o[k];x.preIndex=k,x.id||(x.id=k.toString()),N[x.id]=x,x.distanceFromRoot=(x.parent?x.parent.distanceFromRoot:0)+x.branchLength,x.isLeaf&&P.push(x),x.visibleLeaves=x.totalLeaves}return{nodeById:N,rootNode:e,leafNodes:P,postorderTraversal:a,preorderTraversal:o}}(i,o)};function P(e){var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||1;return(window.devicePixelRatio||1)/t}function k(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function x(e,t,n){var r=[],a=!0,o=!1,i=void 0;try{for(var c,l=n.children[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var s=c.value,u=e.splice(t,s.totalNodes);r.push(u)}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}for(var d=0,m=r;d<m.length;d++){var p=m[d];e.splice.apply(e,[t,0].concat(k(p)))}}var _=function(e,t,n){var r=t.preorderTraversal,a=t.postorderTraversal;x(r,r.indexOf(n)+1,n);for(var o=0;o<r.length;o++)r[o].preIndex=o;x(a,a.indexOf(n)-n.totalNodes+1,n);for(var i=0;i<a.length;i++)a[i].postIndex=i;n.children.reverse()};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e){var t=S(e),n=[],r=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value;if(l.isLeaf)n.push("".concat(l.id,":").concat(l.branchLength));else if(l!==e){var s=n.splice(n.length-l.children.length,l.children.length);n.push("(".concat(s.join(","),"):").concat(l.branchLength))}}}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return"(".concat(n.join(","),");")}var A=function(e){return{branchScale:m[e.state.type].getBranchScale(e,c.stepScale)}},D=function(e){return{stepScale:c.stepScale}},M=function(e){return e.chain(D,A,f)},R=function(e){return{collapsedIds:i}},F=function(e,t,n){return e.pixelRatio=P(e.ctx),{size:{width:t,height:n}}},z=function(e,t,n){var r=d(e.state.rotatedIds,t);return e.chain((function(){return{rotatedIds:r}}),n?f:null)},G=function(e){return{minScale:f(e).minScale}},U=function(e,t,n){var r=n.x,a=n.y,o=e.state.offsetX,i=e.state.offsetY;if(n){var c=m[e.state.type].branchScalingAxis,l=t/e.state.branchScale;if("x"===c||"xy"===c){var s=e.state.offsetX;o=s+(r-((r-s)*l+s))}if("y"===c||"xy"===c){var u=e.state.offsetY;i=u+(a-((a-u)*l+u))}}return e.chain((function(){return{branchScale:t,offsetX:o,offsetY:i}}),G)};function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var V=function(e){return{rootId:c.rootId}},K=function(e){return{rotatedIds:i}},q=function(e,t,n){var r=n.x,a=n.y,o=e.state.offsetX,i=e.state.offsetY,c=t/e.state.stepScale;if(n){var l=m[e.state.type].stepScalingAxis;if("x"===l||"xy"===l){var s=e.state.offsetX;o=s+(r-((r-s)*c+s))}if("y"===l||"xy"===l){var u=e.state.offsetY;i=u+(a-((a-u)*c+u))}}return e.chain((function(){return{stepScale:t,offsetX:o,offsetY:i}}),G)};function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0,o=a.x,i=a.y,c=e.state.offsetX+t,l=e.state.offsetY+n;if(0===r)return{offsetX:c,offsetY:l};var s=u(e,e.state.scale,r),d=e.state.scale;return{offsetX:-1*((-1*c+o)/d*s-o),offsetY:-1*((-1*l+i)/d*s-i),scale:s}},Z={cache:function(e,t){return e._.cache[t]||(e._.cache[t]=new Map)},chain:function(e){for(var t={},n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var o=0,i=r;o<i.length;o++){var c=i[o];if("function"==typeof c){var l=c(e);Object.assign(t,l),Object.assign(e.state,l)}}return t},changeBranchScale:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getCentrePoint();e.setBranchScale(u(e,e.state.branchScale,t),n)},changeScale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getCentrePoint();e.transform(0,0,t,n)},changeStepScale:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getCentrePoint();e.setStepScale(u(e,e.state.stepScale,t),n)},collapseNode:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.refit,a=void 0!==r&&r,o=e.getNodeById(t);o&&e.setState(h(e,o.id,a))},destroy:function(e){},drawHighlight:function(e,t){var n=e.ctx,r=e.state,o=e._,i=o.actualNodeSize,l=o.actualHaloWidth;n.lineWidth=l,n.strokeWidth=l,n.strokeStyle=r.haloStyle;var s=i/2,u=g(e,c.nodeSize/2),d=t.isLeaf?r.leafNodeStyle:r.internalNodeStyle,m=(r.styles[t.id]||d).shape,p="none"===(void 0===m?d.shape:m)?1.5*l:s+u+Math.floor(s/u/2);n.beginPath(),n.arc(t.x,t.y,p,0,a.Degrees360,!1),n.closePath(),n.stroke()},drawNode:function(e,t,n){var r=e.ctx,o=e.state;r.translate(n.x,n.y),r.rotate(n.angle);var i=(o.styles?o.styles[n.id]:void 0)||v,c=n.isLeaf?o.leafNodeStyle:o.internalNodeStyle;r.fillStyle=i.fillStyle||o.fillStyle||c.fillStyle,r.strokeStyle=e.state.strokeStyle;var l=e._.actualNodeSize,s=e._.actualNodeSize/2;if(e._.renderShapes){var u=(i?i.shape:void 0)||c.shape;e.drawNodeShape(n,u,l)}if((e.state.showLabels||e._.renderLabels)&&(n.isLeaf&&o.renderLeafLabels||!n.isLeaf&&o.renderInternalLabels)){var d=n.isLeaf&&o.alignLabels&&!1!==m[o.type].alignableLabels?o.branchScale*(t.rootNode.longestLeaf-n.distanceFromRoot):0;if(d>0&&e.state.lineWidth*e.state.scale>1){var p=e.ctx.lineWidth;e.ctx.lineWidth=e.ctx.lineWidth/4,e.ctx.strokeWidth=e.ctx.lineWidth,r.beginPath(),r.moveTo(s,0),r.lineTo(s+d,0),r.stroke(),r.closePath(),e.ctx.lineWidth=p,e.ctx.strokeWidth=e.ctx.lineWidth}var f=(n.isLeaf?2:0)*s+d,h=n.angle>a.Degrees90&&n.angle<a.Degrees270;h&&r.rotate(a.Degrees180),r.textAlign=h?"right":"left";var g=r.font;i.fontStyle&&(r.font="".concat(i.fontStyle," ").concat(e._.actualFontSize,"px ").concat(e.state.fontFamily)),!1===o.styleLeafLabels&&(r.fillStyle=i.labelFillStyle||o.fillStyle||c.fillStyle),r.fillText(e.getLabel(n),h?-f:f,0),r.font=g,h&&r.rotate(-a.Degrees180)}r.rotate(-n.angle),r.translate(-n.x,-n.y)},drawNodeShape:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r/2,i=e.ctx;if(i.beginPath(),"dot"===n)i.arc(0,0,2*i.lineWidth,a.Degrees0,a.Degrees360);else if("circle"===n)i.arc(0,0,o,a.Degrees0,a.Degrees360);else if("square"===n)i.rect(-o,-o,r,r);else if("triangle"===n)i.moveTo(0,-o),i.lineTo(o,o),i.lineTo(-o,o),i.lineTo(0,-o);else if("star"===n){var c=Math.PI/5,l=Math.PI/2*3;i.moveTo(0,-o);for(var s=0;s<5;s++)i.lineTo(Math.cos(l)*o,Math.sin(l)*o),l+=c,i.lineTo(Math.cos(l)*o*.5,Math.sin(l)*o*.5),l+=c;i.lineTo(0,-o)}i.fill(),i.stroke(),i.closePath()},exportPNG:function(e){return e.ctx.canvas.toDataURL()},fitInPanel:b,getBounds:function(e){for(var t=e.state,n=e.layout(),r=Number.MAX_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER,l=t.type===o.Circular&&t.alignLabels,s=n.rootNode,u=s.preIndex;u<s.preIndex+s.totalNodes;u++){var d=n.preorderTraversal[u],m=d.x,p=d.x,f=d.y,h=d.y;if(d.isLeaf){var g=0;l&&(g+=t.branchScale*(n.rootNode.totalLeafLength-d.distanceFromRoot)),p+=g*Math.cos(d.angle),h+=g*Math.sin(d.angle)}m<r&&(r=m),p<r&&(r=p),m>i&&(i=m),p>i&&(i=p),f<a&&(a=f),h<a&&(a=h),f>c&&(c=f),h>c&&(c=h),d.isCollapsed&&(u+=d.totalNodes-1)}return{minX:r,maxX:i,minY:a,maxY:c}},getCentrePoint:function(e){return{x:e.ctx.canvas.width/2/e.pixelRatio,y:e.ctx.canvas.height/2/e.pixelRatio}},getDrawingArea:function(e){var t=e.state.size.width,n=e.state.size.height,r=e.state.padding;return{width:t,height:n,left:r,top:r,right:t-r,bottom:n-r}},getInitialState:function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c,{},t)},getLabel:function(e,t){var n=e.state.styles;return t.id in n&&n[t.id].label||t.label||t.id},getLeafIds:function(e,t){for(var n=e.getVirtualTree(),r=e.getNodeById(t||n.rootNode),a=[],o=r.preIndex;o<r.preIndex+r.totalNodes;o++)n.preorderTraversal[o].isLeaf&&a.push(n.preorderTraversal[o].id);return a},getLeafLabels:function(e,t){for(var n=e.getVirtualTree(),r=e.getNodeById(t||n.rootNode),a=[],o=r.preIndex;o<r.preIndex+r.totalNodes;o++){var i=n.preorderTraversal[o];i.isLeaf&&a.push(e.getLabel(i))}return a},getNewick:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.layout(),a=t?e.getNodeById(t):r.rootNode,o=n.excludeCollapsed,i=void 0===o||o,c=[],l=a.postIndex-a.totalNodes+1;l<a.postIndex;l++){var s=r.postorderTraversal[l];if(s.isLeaf)c.push("".concat(e.getLabel(s),":").concat(s.branchLength));else{var u=c.splice(c.length-s.children.length,s.children.length);i&&s.isCollapsed?c.push("[".concat(s.totalLeaves," hidden ").concat(1===s.totalLeaves?"leaf":"leaves","]:").concat(s.branchLength)):c.push("(".concat(u.join(","),"):").concat(s.branchLength))}}return"(".concat(c.join(","),");")},getNodeAtPoint:function(e,t,n){for(var r=e._.actualNodeSize/2+g(e,3),a=e.layout(),o=a.rootNode,i=o.preIndex;i<o.preIndex+o.totalNodes;i++){var c=a.preorderTraversal[i];if(!c.isHidden&&t>c.x-r&&t<c.x+r&&n>c.y-r&&n<c.y+r)return c}var l=m[e.state.type];return l.getNodeAtPoint?l.getNodeAtPoint(e,t,n,r):null},getNodeById:function(e,t){var n=e.getVirtualTree();if("string"==typeof t){var r=n.nodeById[t];return r||e.error("Cannot find node of ID=",t),r}var a=n.nodeById[t.id];return a&&a===t||e.error("Node not found",t),a},getNodeLabels:function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value,s=e.getNodeById(l);s&&s.isLeaf&&n.push(e.getLabel(s))}}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n},getVirtualTree:function(e){var t=e.state,n=void 0===t?{}:t,r=e.cache("virtual");if(r.get("source")!==n.source){var a=performance.now(),o=N(n.source),i=o.nodeById,c=o.rootNode,l=o.leafNodes,s=o.postorderTraversal,u=o.preorderTraversal;e.nodes={nodeById:i,rootNode:c,leafNodes:l,postorderTraversal:s,preorderTraversal:u,source:n.source,originalSource:n.source.original||n.source};var d=performance.now();e.log("parsing virtual tree took ",d-a," milliseconds."),e._.cache={},r=e.cache("virtual")}if((r.get("rootId")||null)!==e.state.rootId){var m=e.nodes.nodeById[e.state.rootId]||e.nodes.preorderTraversal[0],p=[];m.distanceFromRoot=0;for(var f=m.preIndex+1;f<m.preIndex+m.totalNodes;f++){var h=e.nodes.preorderTraversal[f];h.distanceFromRoot=h.parent.distanceFromRoot+h.branchLength,h.isLeaf&&p.push(h)}e.nodes.leafNodes=p,e.nodes.rootNode=m}return r.set("source",n.source),r.set("rootId",e.state.rootId),e.nodes},highlightNode:function(e,t){var n="string"==typeof t?e.getNodeById(t):t,r=n&&!n.isHidden?n.id:null;e._.highlightedId!==r&&(e._.highlightedId=r,e.render())},init:function(e,t){e.state=e.getInitialState(t),e.pixelRatio=P(e.ctx)},layout:function(e){var t=e.state,n=e.getVirtualTree(),r=e.cache("layout");if(isNaN(n.maxLabelWidth)||r.get("styles")!==t.styles){var a="",o=!0,i=!1,c=void 0;try{for(var l,s=n.leafNodes[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value,d=e.getLabel(u);d.length>a.length&&(a=d)}}catch(e){i=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}n.maxLabelWidth=e.measureTextWidth(a)}if(r.get("rotatedIds")!==t.rotatedIds){var p=new Set(t.rotatedIds);if(r.get("rotatedIds")){var f=!0,h=!1,g=void 0;try{for(var v,b=r.get("rotatedIds")[Symbol.iterator]();!(f=(v=b.next()).done);f=!0){var y=v.value,E=n.nodeById[y];p.has(E.id)||(_(0,n,E),E.isInverted=!1)}}catch(e){h=!0,g=e}finally{try{f||null==b.return||b.return()}finally{if(h)throw g}}}var O=!0,C=!1,w=void 0;try{for(var S,j=t.rotatedIds[Symbol.iterator]();!(O=(S=j.next()).done);O=!0){var N=S.value,P=n.nodeById[N];P.isInverted||(_(0,n,P),P.isInverted=!0)}}catch(e){C=!0,w=e}finally{try{O||null==j.return||j.return()}finally{if(C)throw w}}}if(r.get("collapsedIds")!==t.collapsedIds){for(var k=new Set(t.collapsedIds),x=0;x<n.postorderTraversal.length;x++){var I=n.preorderTraversal[x];I.isCollapsed=k.has(I.id),I.parent&&(I.parent.isCollapsed||I.parent.isHidden)?I.isHidden=!0:I.isHidden=!1}for(var T=0;T<n.postorderTraversal.length;T++){var L=n.postorderTraversal[T];if(L.isLeaf)L.visibleLeaves=1;else if(L.isCollapsed)L.visibleLeaves=1;else{L.visibleLeaves=0;var A=!0,D=!1,M=void 0;try{for(var R,F=L.children[Symbol.iterator]();!(A=(R=F.next()).done);A=!0){var z=R.value;L.visibleLeaves+=z.visibleLeaves}}catch(e){D=!0,M=e}finally{try{A||null==F.return||F.return()}finally{if(D)throw M}}}}}if(r.get("branchScale")!==t.branchScale||r.get("collapsedIds")!==t.collapsedIds||r.get("rootId")!==t.rootId||r.get("rotatedIds")!==t.rotatedIds||r.get("stepScale")!==t.stepScale||r.get("type")!==t.type){var G=performance.now();m[t.type].layoutNodes(e,n);var U=performance.now();e.log("layout nodes took ",U-G," milliseconds.")}return r.set("branchScale",t.branchScale),r.set("collapsedIds",t.collapsedIds),r.set("rootId",t.rootId),r.set("rotatedIds",t.rotatedIds),r.set("stepScale",t.stepScale),r.set("type",t.type),r.set("styles",t.styles),n},measureTextWidth:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.state.fontWeight,r=e.ctx.font;e.ctx.font="".concat(n," ").concat(e.state.fontSize,"px ").concat(e.state.fontFamily);var a=e.ctx.measureText(t);return e.ctx.font=r,Math.ceil(a.width+e.state.fontSize)},mergeState:function(e,t){e.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.state,{},t)},postRender:function(e,t){for(var n=e.state,r=t.rootNode.preIndex;r<t.rootNode.preIndex+t.rootNode.totalNodes;r++){var a=t.preorderTraversal[r];-1===n.selectedIds.indexOf(a.id)&&a.id!==e._.highlightedId||e.drawHighlight(a),a.isCollapsed&&(r+=a.totalNodes-1)}e.ctx.restore(),e.ctx.canvas.title="",e.ctx.canvas.style&&(e.ctx.canvas.style.cursor=e._.highlightedId?"pointer":"")},preRender:function(e,t){e.ctx.save(),e.ctx.clearRect(0,0,e.ctx.canvas.width,e.ctx.canvas.height),e._.actualMaxLabelWidth=g(e,t.maxLabelWidth),e._.actualFontSize=g(e,e.state.fontSize),e._.actualNodeSize=g(e,e.state.nodeSize),e._.actualHaloRadius=g(e,Math.max(.75*e.state.nodeSize,e.state.haloRadius)),e._.actualHaloWidth=g(e,e.state.haloWidth),e._.renderShapes=e.state.showNodes,e._.renderLabels=e.state.showLabels||e.state.stepScale*e.state.scale>=e.state.labelThreshold,e.ctx.textBaseline="middle",e.ctx.font="".concat(e._.actualFontSize,"px ").concat(e.state.fontFamily),e.ctx.lineWidth=g(e,e.state.lineWidth),e.ctx.strokeWidth=e.ctx.lineWidth,e.ctx.translate(e.state.offsetX*e.pixelRatio,e.state.offsetY*e.pixelRatio),e.ctx.scale(e.state.scale*e.pixelRatio,e.state.scale*e.pixelRatio)},render:function(e){e.resizeCanvas();var t=e.layout(),n=performance.now();if(e.preRender(t),e.state.styleNodeLines){var r=!0,a=!1,o=void 0;try{for(var i,c=t.postorderTraversal[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value;if(l.isLeaf){var s=e.state.styles?e.state.styles[l.id]:void 0;l.strokeStyle=(s?s.strokeStyle:void 0)||e.state.strokeStyle}else{l.strokeStyle=l.children[0].strokeStyle;var u=!0,d=!1,p=void 0;try{for(var f,h=l.children[Symbol.iterator]();!(u=(f=h.next()).done);u=!0)if(f.value.strokeStyle!==l.strokeStyle){l.strokeStyle=e.state.strokeStyle;break}}catch(e){d=!0,p=e}finally{try{u||null==h.return||h.return()}finally{if(d)throw p}}}}}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}}for(var g=t.rootNode.preIndex,v=t.rootNode.preIndex+t.rootNode.totalNodes,b=g;b<v;b++){var y=t.preorderTraversal[b];y!==t.rootNode&&(y.id===e._.highlightedId?e.ctx.strokeStyle=e.state.highlightedStyle:e.state.styleNodeLines?e.ctx.strokeStyle=y.strokeStyle:e.ctx.strokeStyle=e.state.strokeStyle,m[e.state.type].drawLine(e,t,y),y.isCollapsed&&(b+=y.totalNodes-1))}for(var E=g;E<v;E++){var O=t.preorderTraversal[E];e.drawNode(t,O),O.isCollapsed&&(E+=O.totalNodes-1)}e.postRender(t);var C=performance.now();e.log("render took ",C-n," milliseconds.")},rerootNode:function(e,t){var n=e.getNodeById(t),r=e.layout();if(n.parent){var a={branchLength:0,children:[]};!function e(t,n,r,a){var o={branchLength:a.branchLength,children:[],parent:r};r.children.push(o);var i=!0,c=!1,l=void 0;try{for(var s,u=a.parent.children[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var d=s.value;d!==a&&o.children.push(d)}}catch(e){c=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(c)throw l}}a.parent.parent&&a.parent!==n.rootNode&&e(t,n,o,a.parent)}(e,r,a,n),a.children.push(n);var o={type:"newick",original:e.state.source,data:L(a)};e.setSource(o)}},reset:function(e,t){e.setState(M(e))},resetCollapsedNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.refit,r=void 0!==n&&n;return e.setState(e.chain(R,r?b:null))},resize:function(e,t,n){e.setState(F(e,t,n))},resizeCanvas:function(e){var t=e.state.size,n=t.width,r=t.height;e.ctx.canvas.style&&(e.ctx.canvas.style.width="".concat(n,"px"),e.ctx.canvas.style.height="".concat(r,"px"),e.ctx.canvas.width=n*e.pixelRatio,e.ctx.canvas.height=r*e.pixelRatio)},rotateNode:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.refit,a=void 0!==r&&r,o=e.getNodeById(t);o&&e.setState(z(e,o.id,a))},selectLeafNodes:function(e,t,n){t&&Array.isArray(t)&&e.setState(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n){var r=new Set(e.state.selectedIds),a=!0,o=!1,c=void 0;try{for(var l,s=t[Symbol.iterator]();!(a=(l=s.next()).done);a=!0){var u=l.value;r.add(u)}}catch(e){o=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(o)throw c}}return{selectedIds:Array.from(r)}}return{selectedIds:t.length?t:i}}(e,t,n))},selectNode:function(e,t,n){var r=t?e.getNodeById(t):null;if(r&&r.isLeaf)e.setState(function(e,t,n){return{selectedIds:d(e.state.selectedIds,t,n)}}(e,r.id,n));else if(r){var a=r&&!r.isHidden?e.getLeafIds(r):i;e.setState(function(e,t,n){if(n){var r=new Set(e.state.selectedIds),a=!0,o=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var s=c.value;r.add(s)}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}return{selectedIds:Array.from(r)}}return{selectedIds:t}}(e,a,n))}else e.setState({selectedIds:i})},setBranchScale:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getCentrePoint(),r=m[e.state.type].branchScalingAxis;r&&t>0&&e.setState(U(e,t,n))},setFontSize:function(e,t){"number"==typeof t?e.setState({fontSize:t}):e.error("Invalid font size value, expected number, got ",B(t))},setNodeSize:function(e,t){"number"==typeof t?e.setState({nodeSize:t}):e.error("Invalid node size value, expected number, got ",H(t))},setRoot:function(e,t){var n=null;null!==t&&(n=e.getNodeById(t)),e.setState(function(e,t){return e.chain((function(){return{rootId:t}}),M)}(e,n?n.id:null))},setScale:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getCentrePoint();if(!(t<=0)){if(n){var r=t/e.state.scale,a=e.state.offsetX;e.state.offsetX=a+(n.x-((n.x-a)*r+a));var o=e.state.offsetY;e.state.offsetY=o+(n.y-((n.y-o)*r+o))}e.state.scale=t,e.render()}},setSource:function(e,t){e.setState(function(e,t){return e.chain((function(){return{source:t}}),V,R,K,M)}(e,t))},setState:function(e,t){t&&(e.mergeState(t),e.render())},setStepScale:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getCentrePoint(),r=m[e.state.type].stepScalingAxis;r&&t>0&&e.setState(q(e,t,n))},setStyles:function(e,t){"object"===W(t)?e.setState({styles:t}):e.error("Invalid node styles, expected object, got ",W(t))},setTreeType:function(e,t){e.setState(function(e,t){return e.chain((function(){return{type:t}}),M)}(e,t))},toggleAlignLeafLabels:function(e){e.setState({alignLabels:!e.state.alignLabels})},toggleLeafLabels:function(e){e.setState({renderLeafLabels:!e.state.renderLeafLabels})},transform:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.getCentrePoint();0===t&&0===n&&0===r||e.setState(Y(e,t,n,r,a))},trigger:function(e,t,n){var r=e["on".concat(t)];"function"==typeof r&&r.apply(e,n)}},X=function(e){e.error=console.error,e.log=function(){};for(var t=0,n=Object.keys(Z);t<n.length;t++){var r=n[t];e[r]=Z[r].bind(null,e)}};function Q(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{x:(t-e.state.offsetX)/e.state.scale,y:(n-e.state.offsetY)/e.state.scale}}function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee=function(e,t,n,r){var a=e.startPoint,o=e.centrePoint,i=e.endPoint,c=r-2*t,l=(n-2*t)/(i.x-a.x),s=c/(i.y-a.y),u=Math.min(l,s);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({offsetX:n/2-o.x*u,offsetY:r/2-o.y*u,scale:u},p(u))};function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=function(e,t,n){var r=e.state.size;if(r.width===t&&r.height===n)return{};var a=function(e){var t=e.getDrawingArea(),n=t.width,r=t.height,a=e.getBounds(),o=a.minX,i=a.maxX,c=a.minY,l=a.maxY,s=Q(e,e.state.padding,e.state.padding),u=Q(e,n-e.state.padding,r-e.state.padding),d=Q(e,n/2,r/2);return{startPoint:{x:Math.max(s.x,o),y:Math.max(s.y,c)},endPoint:{x:Math.min(u.x,i),y:Math.min(u.y,l)},centrePoint:d}}(e);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},F(e,t,n),{},ee(a,e.state.padding,t,n))},ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={canvas:e,ctx:e.getContext("2d"),state:{},_:{cache:{}}};if(X(r),n.length&&s(r,n),r.init(t),t.source){var a=r.ctx.canvas,o=a.width,i=a.height;r.setState(r.chain((function(){return r.state.size?re(r,o,i):F(r,o,i)}),(function(){return{source:t.source}}),(function(){return r.state.rootId?{rootId:r.state.rootId}:V()}),(function(){return r.state.collapsedIds?{collapsedIds:r.state.collapsedIds}:R()}),(function(){return r.state.rotatedIds?{rotatedIds:r.state.rotatedIds}:K()}),(function(){return r.state.stepScale?{stepScale:r.state.stepScale}:D()}),(function(){return r.state.branchScale?{branchScale:r.state.branchScale}:A(r)}),(function(){var e=f(r),t=e.offsetX,n=e.offsetY,a=e.scale,o=e.minScale,i=e.maxScale;return{offsetX:r.state.offsetX||t,offsetY:r.state.offsetY||n,scale:r.state.scale||a,minScale:r.state.minScale||o,maxScale:r.state.maxScale||i}})))}return r},oe={appendToArray:d,getPixelRatio:P,mapPoint:Q,mapScalar:g,restoreViewport:ee,unmapPoint:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{x:t*e.state.scale+e.state.offsetX,y:n*e.state.scale+e.state.offsetY}},unmapScalar:function(e,t){return t*e.state.scale}};n.d(t,"constants",(function(){return r})),n.d(t,"defaults",(function(){return c})),n.d(t,"createTree",(function(){return ae})),n.d(t,"methods",(function(){return Z})),n.d(t,"types",(function(){return m})),n.d(t,"utils",(function(){return oe})),t.default={constants:r,defaults:c,createTree:ae,methods:Z,types:m,utils:oe}}])},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c}));var r=n(3),a=function(e){return e.upload},o=function(e){return a(e).usage},i=function(e,t){return a(e).settings[t]},c=Object(r.createSelector)((function(e){return a(e).previous.uploads}),(function(e){return e&&!!e.length&&e.some((function(e){return e.total!==e.complete}))}))},,function(e,t,n){"use strict";var r=n(6),a=n.n(r);function o(e){if("#"===e[0])return function(e){var t=parseInt(e.slice(1),16);return{r:t>>16,g:t>>8&255,b:255&t}}(e);if(e.startsWith("rgba"))return function(e){var t=e.slice(5).slice(0,-1).split(","),n=a()(t,4),r=n[0],o=n[1],i=n[2],c=n[3];return{r:parseInt(r,10),g:parseInt(o,10),b:parseInt(i,10),a:parseInt(c,10)}}(e);throw new Error("Colour format not supported")}function i(e,t){var n=e;return(n+=t)>255?n=255:n<0&&(n=0),n}function c(e,t){var n=Math.round(2.55*t),r=o(e),a=r.r,c=r.g,l=r.b;a=i(a,n),c=i(c,n),l=i(l,n);var s=r.a;return void 0!==s?"rgba(".concat(a,", ").concat(c,", ").concat(l,", ").concat(s,")"):"#".concat((l|c<<8|a<<16).toString(16))}function l(e,t){var n=o(e),r=n.r,a=n.g,i=n.b;return"rgba(".concat(r,", ").concat(a,", ").concat(i,", ").concat(t,")")}n.d(t,"a",(function(){return u}));var s={primaryColour:"",primaryColourTint:"",primaryColourShade:"",primaryColourAlpha:"",primaryColourAlphaLight:"",primaryColourAlphaMedium:"",primaryColourAlphaDark:""};t.b=s;function u(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=a()(n[t],2),o=r[0],i=r[1];s[o]=i,"primaryColour"===o&&(s.primaryColourTint=c(i,10),s.primaryColourShade=c(i,-10),s.primaryColourAlpha=l(i,.14),s.primaryColourAlphaLight=l(i,.14),s.primaryColourAlphaMedium=l(i,.54),s.primaryColourAlphaDark=l(i,.87)),"primaryColourAlpha"===o&&(s.primaryColourAlphaLight=i),"primaryColourAlphaLight"===o&&(s.primaryColourAlpha=i)}var u=document.querySelector("#libmr-theme")||document.createElement("style");u.id="libmr-theme",u.type="text/css",u.innerHTML="\n  :root {\n    --libmr-primary-colour: ".concat(s.primaryColour,";\n    --libmr-primary-colour-tint: ").concat(s.primaryColourTint,";\n    --libmr-primary-colour-shade: ").concat(s.primaryColourShade,";\n    --libmr-primary-colour-alpha: ").concat(s.primaryColourAlphaLight,";\n    --libmr-primary-colour-alpha-light: ").concat(s.primaryColourAlphaLight,";\n    --libmr-primary-colour-alpha-medium: ").concat(s.primaryColourAlphaMedium,";\n    --libmr-primary-colour-alpha-dark: ").concat(s.primaryColourAlphaDark,";\n  }\n"),document.head.appendChild(u)}},function(e,t,n){"use strict";var r=n(17),a=n(8);function o(e){return Object(a.a)("GET","/api/genome/".concat(e))}n.d(t,"b",(function(){return i})),n.d(t,"d",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return s}));var i=Object(r.b)("SHOW_GENOME_REPORT");function c(e,t){return{type:i,payload:{name:t,genomeId:e,promise:o(e)}}}var l="CLOSE_GENOME_REPORT";function s(){return{type:l}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return s}));var r,a=n(2),o=n.n(a),i=n(29),c=n(20),l=new Set([i.b,i.a]),s=(r={},o()(r,i.b,"Population"),o()(r,i.a,"Collection"),r);c.c.COLOUR,c.b.COLOURS.PURPLE,c.b.COLOURS.PURPLE},function(e,t,n){"use strict";var r={};n.r(r),n.d(r,"name",(function(){return rr})),n.d(r,"buildColumns",(function(){return ar}));var a={};n.r(a),n.d(a,"name",(function(){return ir})),n.d(a,"buildColumns",(function(){return cr}));var o={};n.r(o),n.d(o,"name",(function(){return sr})),n.d(o,"buildColumns",(function(){return ur}));var i=n(46),c=n(524),l=n(309),s=n(2),u=n.n(s),d=n(179),m=n(252);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=Object(i.c)({activity:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case m.a.ATTEMPT:return d.a.LOADING;case m.a.FAILURE:return d.a.ERROR;case m.a.SUCCESS:return r.result.map((function(e){return f({},e,{formattedDate:new Date(e.date).toLocaleString()})}));default:return e}}}),g=n(201);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var y={token:null,pending:!1};var E={id:n(224).a[1]},O=n(30),C=n.n(O),w=n(51),S=n(115),j=n(41),N=n(247),P=n(110);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _={allSchemeSts:[],edgeMatrix:null,index:{lambda:null,pi:null},indexOfSelectedInAll:null,nodeCoordinates:null,nodes:null,progress:null,scheme:null,selectedGenomeId:null,skipMessage:null,status:"INITIAL_STATUS",taskId:null,threshold:null,triedBuilding:!1,version:null};function I(e,t,n){for(var r=function(r){var a=Object(N.a)(r,e,t),o=a[n];if(a.filter((function(e){return e===o})).length>P.b)return{v:r-1}},a=1;a<=P.c;a++){var o=r(a);if("object"===C()(o))return o.v}return P.c}var T=n(109);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D={isOpen:!0},M=n(82),R=n(164);function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e){return e.reduce((function(e,t){return e[t.id]=z({},t,{createdAt:new Date(t.createdAt)}),e}),{})}var U={total:0,organismId:{},type:{},createdAt:{},publicationYear:{}};var B=Object(i.c)({entities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case M.b.SUCCESS:var a=r.result.collections;return G(a);case M.a.SUCCESS:return G(r.result);case M.b.FAILURE:case M.a.FAILURE:return{};default:return e}},filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case T.a:return A({},e,{isOpen:!e.isOpen});default:return e}},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R.a.LOADING,t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case M.a.ATTEMPT:case M.b.ATTEMPT:return R.a.LOADING;case M.a.SUCCESS:case M.b.SUCCESS:return R.a.SUCCESS;case M.a.FAILURE:case M.b.FAILURE:return R.a.ERROR;default:return e}},summary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case M.b.ATTEMPT:return z({},e,{loading:!0});case M.b.SUCCESS:return z({},e,{loading:!1},r.result.summary);default:return e}}}),H=n(17),V=(n(72),n(8),Object(H.b)("REQUEST_DOWNLOAD"));var K=n(199);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Y(e,t,n){var r=t.format,a=t.stateKey,o=e[r]||{};return W({},e,u()({},r,W({},o,u()({},a,n))))}var Z=n(151);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.query;return 1===Object.keys(n).length&&n.prefilter?Q({},n):Q({},e,{},Object.keys(n).reduce((function(t,r){var a=n[r];return t[r]=a===e[r]?void 0:a,t}),{}))}var $=n(27);function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne={total:0,visible:0,loading:!1},re=n(78),ae=n(94);function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce={isOpen:!0,listFilters:{}},le=n(36),se=n(150),ue=n(20);function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe={dropdown:null,genomes:{},download:{status:null,summary:null},lastSelectedIndex:null},fe=function(e,t){var n=t.id,r=t.name,a=t.organismId,o=t.binned;return e[n]={id:n,name:r,organismId:a,binned:o},e},he=function(e,t){return delete e[t.id],e},ge=n(333);function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ye={entities:[],metric:"length",filter:null};function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ce={title:"",description:"",pmid:""},we=n(184),Se=n(88);function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pe={markers:[],filter:null,popup:{open:!1,genomes:[]}},ke=n(50);function xe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie={name:null,genome:null,status:null},Te=n(182),Le=n(183);function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Me=Object(i.c)({filter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case re.a:return ie({},e,{isOpen:!e.isOpen});case re.b:return ie({},e,{listFilters:ie({},e.listFilters,u()({},r.filterKey,r.text))});case Z.UPDATE_FILTER:case Z.SET_FILTER:return r.stateKey===ae.b?ie({},e,{listFilters:{}}):e;default:return e}},entities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case $.a.SUCCESS:var a=r.filter.prefilter;return r.result.reduce((function(e,t){return"bin"===a&&(t.binned=!0),e[t.id]=t,e}),De({},e));case $.d.SUCCESS:var o=r.filter.prefilter;return r.result.genomes.reduce((function(e,t){return"bin"===o&&(t.binned=!0),e[t.id]=t,e}),{});case"SEND_METADATA_UPDATE::SUCCESS":var i=r.data,c=r.result.computedData,l={},s=!0,u=!1,d=void 0;try{for(var m,p=i[Symbol.iterator]();!(s=(m=p.next()).done);s=!0){var f=m.value,h=f.id,g=f.name;h in e&&(l[h]=De({},e[h],{name:g,country:c[h].country,date:c[h].date}))}}catch(e){u=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}return Object.keys(l).length?De({},e,{},l):e;default:return e}},indices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case $.d.SUCCESS:return r.result.genomes.reduce((function(e,t,n){return e[n]=t.id,e}),{});case $.a.ATTEMPT:for(var a=r.options,o=a.skip,i=void 0===o?0:o,c=a.limit,l=void 0===c?0:c,s=De({},e),u=i;u<i+l;u++)s[u]=e[u]||!0;return s;case $.a.FAILURE:for(var d=r.options,m=d.skip,p=void 0===m?0:m,f=d.limit,h=void 0===f?0:f,g=De({},e),v=p;v<p+h;v++)g[v]=void 0;return g;case $.a.SUCCESS:var b=r.options.skip,y=void 0===b?0:b;return r.result.reduce((function(e,t,n){return e[n+y]=t.id,e}),De({},e));default:return e}},collectionMetadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ce,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case se.a:return Oe({},e,{},r);default:return e}},stats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case $.c.SUCCESS:return be({},e,{entities:r.result,filter:r.filter});case ge.a:return be({},e,{metric:r.metric});default:return e}},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case $.d.ATTEMPT:case $.b.ATTEMPT:case $.c.ATTEMPT:return Le.a.LOADING;case $.d.FAILURE:case $.b.FAILURE:case $.c.FAILURE:return Le.a.ERROR;case $.d.SUCCESS:case $.b.SUCCESS:case $.c.SUCCESS:return Le.a.OK;default:return e}},selection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case le.a:return me({},e,{genomes:r.genomes.reduce(fe,me({},e.genomes)),lastSelectedIndex:"number"==typeof r.index?r.index:e.lastSelectedIndex});case le.c:return me({},e,{genomes:r.genomes.reduce(he,me({},e.genomes))});case le.f:return me({},e,{genomes:r.genomes.reduce(fe,{})});case le.d:return me({},e,{dropdown:r===e.dropdown?null:r});case $.a.SUCCESS:case $.a.ERROR:case se.b.SUCCESS:return me({},e,{dropdown:null});case le.b:return pe;case le.e.ATTEMPT:return me({},e,{download:me({},e.download,{status:ue.e.LOADING})});case le.e.FAILURE:return me({},e,{download:me({},e.download,{status:ue.e.ERROR})});case le.e.SUCCESS:return me({},e,{download:me({},e.download,{status:ue.e.SUCCESS,summary:r.result})});case $.d.ATTEMPT:return me({},e,{lastSelectedIndex:null});case"SEND_METADATA_UPDATE::SUCCESS":var a=r.data,o={},i=!0,c=!1,l=void 0;try{for(var s,u=a[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var d=s.value,m=d.id,p=d.name;m in e.genomes&&e.genomes[m].name!==p&&(o[m]=me({},e.genomes[m],{name:p}))}}catch(e){c=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(c)throw l}}return Object.keys(o).length?me({},e,{genomes:me({},e.genomes,{},o)}):e;default:return e}},summary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case $.d.ATTEMPT:return te({},e,{loading:!0});case $.d.SUCCESS:return te({loading:!1},r.result.summary);default:return e}},waiting:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case Te.a.ATTEMPT:return!0;case Te.a.SUCCESS:case Te.a.FAILURE:return!1;default:return e}},map:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pe,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case $.b.ATTEMPT:case we.a:return Ne({},e,{popup:Pe.popup});case $.b.SUCCESS:return Ne({},e,{markers:r.result,filter:r.filter});case we.b.ATTEMPT:return Ne({},e,{popup:{open:!0,genomes:[]}});case we.b.SUCCESS:return Ne({},e,{popup:Ne({},e.popup,{genomes:r.result})});case Se.MAP_LASSO_CHANGE:return r.path?e:Ne({},e,{popup:Pe.popup});default:return e}},report:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case S.b.ATTEMPT:return _e({},Ie,{name:r.name,status:"LOADING"});case S.b.SUCCESS:var a=r.result;return _e({},e,{genome:a,status:"READY"});case S.b.FAILURE:return{genome:null,status:"ERROR"};case S.a:case $.a.ATTEMPT:case ke.a:return _e({},Ie);default:return e}}}),Re=n(193);function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ge={asideVisible:!0,userDrawerVisible:!1};function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e){var t=e.pathname;return"/"===t?"home":t.split("/")[1]}var Ve=n(73);function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var We=n(142),Ye=n(246);function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Qe={status:Ye.a.LOADING,collections:[]},Je=n(197);function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tt={supportedOrganisms:[],allSpecies:[]};function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var at={visible:!1,message:null,action:null},ot=n(130);function it(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?it(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):it(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var lt={all:"allGenomes",user:"userGenomes",bin:"binnedGenomes"},st=n(25),ut=n.n(st),dt=n(248),mt=n(173),pt=n(11),ft=n(12);function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vt={id:null,genomeIds:new Set},bt=n(92);function yt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yt(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ot(e,t){return e.reduce((function(e,n){return e[n.uuid]=Et({},n,u()({},"__".concat(t),!0)),e}),{})}var Ct=n(315);var wt,St=Object(i.c)({menuOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"SET_MENU_ACTIVE":return void 0!==r.active?r.active:e;default:return e}}}),jt=n(16),Nt=n.n(jt),Pt=n(62);function kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _t=new Set,It=(wt={},u()(wt,Pt.a.VISIBILITY,{ids:_t,active:!1}),u()(wt,Pt.a.TREE,{ids:_t,active:!1}),u()(wt,Pt.a.MAP,{ids:_t,active:!1}),wt),Tt=n(79);function Lt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lt(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dt=new Set,Mt={ids:Dt},Rt=n(120);function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gt={entries:[],current:null},Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Rt.b:return zt({},e,{entries:[t.payload.image].concat(Nt()(e.entries)),current:0});case Rt.c:return zt({},e,{current:t.payload.index});case Rt.a:return zt({},e,{current:e.entries.length-1});default:return e}};function Bt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vt=n(156);function Kt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wt=n(100),Yt=n(275),Zt={status:Wt.a.UNSAVED},Xt=n(44),Qt=n(119),Jt=n(143);function $t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function en(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$t(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$t(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tn={advanced:!1,exact:!1,category:null,cursor:0,currentIntersection:0,intersections:[],recent:new Set,sort:Jt.b.FREQ_DESC,text:""};function nn(e,t){for(var n=new Set,r=0,a=[].concat(Nt()(t),Nt()(e.recent));r<a.length;r++){var o=a[r];if(n.add(o),3===n.size)break}return n}function rn(e,t){if(!t||e.advanced)return e;var n=t.value.label;return n.length?en({},e,{text:n,intersections:[[t]]}):en({},e,{text:tn.text,intersections:tn.intersections})}var an=n(328);function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ln={isExpanded:!1},sn=n(54),un=n(37),dn=n(49);function mn(e,t){return function(e,n){var r=n(),a=Object(un.j)(r),o=Object(un.h)(r)[a].activeColumn;e(Object(sn.f)(a,o===t?dn.e:t))}}function pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pn(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hn={name:pt.c.metadata,activeColumn:dn.e,onHeaderClick:mn},gn=n(97),vn=n(83);function bn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bn(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var En={name:pt.c.typing,activeColumn:dn.e,columns:[],onHeaderClick:mn},On={group:!0,system:!0,fixed:!0,columnKey:"leadingSystemGroup",getHeaderContent:function(){},columns:[dn.d,dn.c,dn.e]},Cn={group:!0,system:!0,columnKey:"trailingSystemGroup",getHeaderContent:function(){},columns:[dn.f]},wn={columnKey:"reference",group:!0,columns:["__reference"],getHeaderContent:function(){}},Sn={group:!0,columnKey:"mlst",columns:["__mlst","__mlst_profile"],get label(){return"MLST - ".concat(vn.f.mlst)}},jn={group:!0,columnKey:"mlst2",columns:["__mlst2","__mlst2_profile"],get label(){return"MLST - ".concat(vn.f.mlst2)}},Nn={group:!0,columnKey:"ng-Mast",columns:["__ng-mast","__por","__tbpb"]},Pn={group:!0,columnKey:"ng-star",columns:["__ngstar","__ngstar_profile"]},kn={group:!0,columnKey:"genotyphi",columns:["__genotyphi_type","__genotyphi_snps_called"]},xn={group:!0,columnKey:"inctyper",columns:["__inc_types"]},_n={group:!0,columnKey:"kleborate",columns:["__K_locus","__O_locus","__Virulence_Score","__Aerobactin","__Colibactin","__Salmochelin","__Yersiniabactin","__rmpA","__rmpA2"]};function In(e){var t=e.columns;return yn({},ut()(e,["columns"]),{noAction:!0,headerClasses:"wgsa-table-header--unstyled",columns:t.map((function(e){return gn.a[e]}))})}function Tn(e,t,n){return[e.isClusterView||t.noPopulation?null:wn,t.noMLST?null:Sn,n?jn:null,t.ngMast?Pn:null,t.ngMast?Nn:null,t.genotyphi?kn:null,t.inctyper?xn:null,t.kleborate?_n:null].filter((function(e){return e})).map(In)}function Ln(e){var t=e.noPopulation,n=e.noMLST,r=e.ngMast,a=e.genotyphi;return!(t&&n&&!r&&!a)}function An(e){var t=e.genomes;Object(vn.e)();var n=new Set(["mlst","mlst2"]),r=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value.analysis,s=!0,u=!1,d=void 0;try{for(var m,p=n[Symbol.iterator]();!(s=(m=p.next()).done);s=!0){var f=m.value;f in l&&(vn.f[f]=l[f].source,n.delete(f))}}catch(e){u=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}if(l.mlst2)return!0}}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return!1}function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Rn=[gn.a.__core_matches,gn.a["__%_core_families"],gn.a["__%_non-core"]],Fn={name:pt.c.stats,activeColumn:dn.e,columns:[],onHeaderClick:mn},zn=n(0),Gn=n.n(zn),Un=n(191),Bn=n(65),Hn=n(172);function Vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qn={group:!0,system:!0,fixed:!0,columnKey:"system",getHeaderContent:function(){},columns:[dn.d,dn.c,Kn({},dn.e,{flexGrow:0,headerClasses:"wgsa-table-header--unstyled",onHeaderClick:function(){}})]},Wn={group:!0,system:!0,columnKey:"spacer",getHeaderContent:function(){},columns:[Kn({},dn.f,{cellClasses:"wgsa-table-cell--resistance"})]};function Yn(e,t){return-1===e.indexOf(t)}function Zn(e,t,n){var r=e.key,a=e.displayName,o=e.label,i=e.effect;return{addState:function(e){var n=e.genomes;return n.length?(this.hidden=n.every((function(e){var n=e.analysis;return!n.paarsnp||Yn(n.paarsnp[t],r)})),this.width=this.getWidth()+12,this):this},columnKey:r,displayName:a,label:o,cellClasses:"wgsa-table-cell--resistance",flexGrow:0,getWidth:function(){return Object(Hn.b)(o,!0)},getCellContents:function(e,n){return Bn.f(n,t,r)?Gn.a.createElement("i",{className:"material-icons wgsa-resistance-icon",style:{color:Bn.e(i)}},"lens"):null},headerClasses:"wgsa-table-header--expanded",hidden:n.every((function(e){return Yn(e[t],r)})),valueGetter:function(n){return Bn.b(e,t,n)},onHeaderClick:Un.onHeaderClick}}function Xn(e){return e.reduce((function(e,t){var n=t.analysis;return n.paarsnp?(e.push(n.paarsnp),e):e}),[])}var Qn={activeColumns:new Set,columns:[]};function Jn(e){var t=e.name,n=e.buildColumns;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qn,r=arguments.length>1?arguments[1]:void 0,a=r.type,o=r.payload;switch(a){case j.a.SUCCESS:var i=o.result,c=i.genomes,l=i.organism,s=i.status,u=i.isClusterView;if(s!==pt.a.READY||u)return e;var d=Xn(c),m=n(l.resistance,d);return Kn({},e,{columns:m.length&&m[0].group?[qn].concat(Nt()(m),[Wn]):[].concat(Nt()(qn.columns),Nt()(m),Nt()(Wn.columns))});case sn.b:return Kn({},e,{activeColumns:o.table===t?o.columns:e.activeColumns});default:return e}}}function $n(e){var t=e.key,n=e.displayName;if(n)return n;var r=(ft.b.current.amrOptions||{}).customLabels;return(void 0===r?{}:r)[t]||t}var er=n(191).onHeaderClick,tr=navigator&&navigator.platform&&navigator.platform.toUpperCase().indexOf("MAC")>=0?"Cmd":"Ctrl";function nr(e){var t=e.key,n=e.fullName||t;return{columnKey:t,headerClasses:"wgsa-table-header--expanded",headerTitle:"".concat(n?"".concat(n," - "):"").concat(tr," + click to select multiple"),cellClasses:"wgsa-table-cell--resistance",cellPadding:16,flexGrow:0,label:$n(e),addState:function(){return this.width=48,this},getCellContents:function(e,t){var n=t.analysis;if(!n.paarsnp)return null;var r=n.paarsnp.antibiotics;if(Bn.g(n.paarsnp,e.columnKey)){var a=r[e.columnKey].state;return Gn.a.createElement("i",{className:"material-icons wgsa-resistance-icon wgsa-amr--".concat(a.toLowerCase())},"lens")}return null},valueGetter:function(e){return Bn.c(t,e)},onHeaderClick:er}}var rr=pt.c.antibiotics;function ar(e){var t=e.antibiotics,n=(ft.b.current.amrOptions||{}).hiddenColumns,r=void 0===n?new Set:n;return t.filter((function(e){var t=e.key;return!r.has(t)})).map(nr)}var or=n(191).onHeaderClick,ir=pt.c.snps;function cr(e,t){var n=e.snp,r=void 0===n?{}:n;return e.antibiotics.reduce((function(e,n){var a=n.key,o=n.fullName;return a in r&&e.push({group:!0,columnKey:"snp_".concat(a),label:$n(n),onHeaderClick:or,headerClasses:"wgsa-table-header--expanded",headerTitle:o,columns:Object.keys(r[a]).sort().reduce((function(e,n){return e.concat({cellClasses:"wgsa-table-cell--resistance",columnKey:n,fixedWidth:Object(Hn.b)(n,!0)+8,flexGrow:0,getCellContents:function(){},getLabel:function(){return"".concat(n,"_")},addState:function(e){var t=e.genomes;return t.length?(this.hidden=r[a][n].every((function(e){var r=e.snpName;return t.every((function(e){var t=e.analysis;return t.paarsnp&&-1===t.paarsnp.snp.indexOf("".concat(n,"_").concat(r))}))})),this):this},headerClasses:"wgsa-table-header--unstyled wgsa-table-header--expanded"},r[a][n].map((function(e){var r=e.snpName,a=e.effect,o="".concat(n,"_").concat(r);return Zn({key:o,displayName:o,label:r,effect:a},"snp",t)})))}),[])}),e}),[])}var lr=n(191).onHeaderClick;var sr=pt.c.genes;function ur(e,t){var n=e.paar,r=void 0===n?{}:n,a=e.antibiotics;return function(e){var t=(ft.b.current.amrOptions||{}).paarOverrides,n=void 0===t?[]:t,r=!0,a=!1,o=void 0;try{for(var i,c=function(){var t=i.value,n=t.gene,r=t.from,a=t.to;if(!(r in e))return"continue";var o=e[r].find((function(e){return e.element===n}));if(!o)return"continue";var c=new Set(e[r]);c.delete(o),e[r]=Array.from(c),e[a]=e[a].concat(o)},l=n[Symbol.iterator]();!(r=(i=l.next()).done);r=!0)c()}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}(r),a.reduce((function(e,n){var a=n.key,o=n.fullName;return a in r&&e.push({group:!0,columnKey:"paar_".concat(a),label:$n(n),headerClasses:"wgsa-table-header--expanded",headerTitle:o,onHeaderClick:lr,columns:r[a].map((function(e){var n=e.element;return Zn({key:n,label:n,effect:e.effect},"paar",t)}))}),e}),[])}function dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pr=pt.c.kleborateAMR,fr=[{field:"AGly",name:"Aminoglycosides",key:"AGS",type:"Aminoglycosides"},{field:"Col",name:"Colistin",key:"CST",type:"Colistin"},{field:"Fcyn",name:"Fosfomycin",key:"FOF",type:"Phosphonic Acid"},{field:"Flq",name:"Fluoroquinolones",key:"FLQ",type:"Fluoroquinolones"},{field:"Gly",name:"Glycopeptides",key:"GPA",type:"Glycopeptides"},{field:"MLS",name:"Macrolides",key:"MAC",type:"Macrolides"},{field:"Ntmdz",name:"Nitroimidazoles",key:"NIM",type:"Nitroimidazoles"},{field:"Phe",name:"Phenicols",key:"PHE",type:"Phenicols"},{field:"Rif",name:"Rifampicin",key:"RIF",type:"Rifamycin"},{field:"Sul",name:"Sulfonamides",key:"SMX",type:"Sulfonamides"},{field:"Tet",name:"Tetracycline",key:"TCY",type:"Tetracyclines"},{field:"Tmt",name:"Trimethoprim",key:"TMP",type:"Diaminopyrimidine"},{field:"Bla",name:"Beta-lactams",key:"BLA",type:"Beta-Lactams"},{field:"Bla_Carb",name:"Carbapenems",key:"CBP",type:"Carbapenems"},{field:"Bla_ESBL",name:"ESBLs",key:"EBL",type:"Extended Spectrum Beta-Lactams"},{field:"Bla_ESBL_inhR",name:"ESBL Inhibitors",key:"EBI",type:"ESBL Inhibitors"},{field:"Bla_broad",name:"Broad-Spectrum Cephalosporins",key:"CEP",type:"Broad-Spectrum Cephalosporins"},{field:"Bla_broad_inhR",name:"BSBL Inhibitors",key:"BBI",type:"Broad-Spectrum Beta-Lactam Inhibitors"}];function hr(e,t){return e.analysis.kleborate&&e.analysis.kleborate[t]&&"-"!==e.analysis.kleborate[t]}var gr=Bn.e("RESISTANT"),vr=navigator&&navigator.platform&&navigator.platform.toUpperCase().indexOf("MAC")>=0?"Cmd":"Ctrl";function br(){var e=[],t=!0,n=!1,r=void 0;try{for(var a,o=function(){var t=a.value;e.push({columnKey:"kleborate_".concat(t.field),addState:function(e){return e.genomes.length?(this.width=this.getWidth()+16,this):this},headerClasses:"wgsa-table-header--expanded",headerTitle:"".concat(t.name," - ").concat(vr," + click to select multiple"),cellClasses:"wgsa-table-cell--resistance",cellPadding:16,label:t.field,getWidth:function(){return Object(Hn.b)(t.field,!0)},getCellContents:function(e,n){return hr(n,t.field)?Gn.a.createElement("i",{className:"material-icons wgsa-resistance-icon",style:{color:gr},title:n.analysis.kleborate[t.field]},"lens"):null},valueGetter:function(e){return hr(e,t.field)?gr:Bn.h},onHeaderClick:Un.onHeaderClick})},i=fr[Symbol.iterator]();!(t=(a=i.next()).done);t=!0)o()}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}return e}var yr={activeColumns:new Set,columns:[]};var Er=Jn(r),Or=Jn(a),Cr=Jn(o),wr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yr,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case j.a.SUCCESS:var a=r.result,o=(a.genomes,a.status),i=a.isClusterView;return o!==pt.a.READY||i||!ft.b.uiOptions.kleborate?e:mr({},e,{columns:[].concat(Nt()(qn.columns),Nt()(br()),Nt()(Wn.columns))});case sn.b:return mr({},e,{activeColumns:r.table===pr?r.columns:e.activeColumns});default:return e}};var Sr=Object(i.c)({entities:Object(i.c)({metadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:hn,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case sn.c:return r.table!==pt.c.metadata?e:fn({},e,{activeColumn:r.column});default:return e}},typing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:En,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case j.a.SUCCESS:var a=Ln(ft.b.uiOptions);if(!a)return yn({},e,{active:a});var o=An(r.result);return yn({},e,{active:a,columns:[On].concat(Nt()(Tn(r.result,ft.b.uiOptions,o)),[Cn])});case sn.c:return r.table!==pt.c.typing?e:yn({},e,{activeColumn:r.column});default:return e}},stats:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fn,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case j.a.SUCCESS:return Mn({},e,{columns:[dn.d,dn.c,dn.e].concat(Nt()(r.result.isClusterView?[]:Rn),[gn.a.__genome_length,gn.a.__n50,gn.a["__no._contigs"],gn.a["__non-ATCG"],gn.a["__%_GC_Content"],dn.f])});case sn.c:return r.table!==pt.c.stats?e:Mn({},e,{activeColumn:r.column});default:return e}},antibiotics:Er,snps:Or,genes:Cr,kleborateAMR:wr}),visible:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case sn.d:return r.name;case Vt.a:return pt.c.metadata;case Vt.b:return e===pt.c.metadata?null:e;default:return e}},activeAMR:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt.c.antibiotics,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case sn.d:return dn.a.has(r.name)?r.name:e;default:return e}},activeData:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case sn.d:return dn.b.has(r.name)?r.name:e;default:return e}},multi:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case sn.a:return!e;default:return e}}}),jr=n(125);function Nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var kr={bounds:null,nodeSize:14,speed:"1",unit:"day",viewport:null},xr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case jr.a:return Pr({},e,{bounds:t.payload});case jr.b:return Pr({},e,{nodeSize:t.payload});case jr.c:return Pr({},e,{speed:t.payload});case jr.d:return Pr({},e,{unit:t.payload,bounds:kr.bounds});case jr.e:return Pr({},e,{viewport:t.payload});default:return e}},_r=n(329);function Ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ir(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Lr=Object(i.c)({libmicroreact:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case Ve.c:return Tr({},e,{bounds:null});default:return xr(e,t)}},visible:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case _r.a:return!0;case sn.d:return!1;default:return e}}});n(277);function Ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ar(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ar(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mr=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e(void 0,{});return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{snapshots:[],current:t},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(r.type){case Rt.b:return zt({},n,{snapshots:[n.current].concat(Nt()(n.snapshots))});case Rt.c:return zt({},n,{current:n.snapshots[r.payload.index]});case Rt.a:return zt({},n,{current:n.snapshots[n.snapshots.length-1]});default:return zt({},n,{current:e(n.current,r)})}}}(n(313).a),Rr=n(116),Fr=n(29);function zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ur=Object(i.c)({entities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case j.a.SUCCESS:var a=r.result,o=a.organism,i=void 0===o?{}:o,c=a.subtrees,l=a.tree,s=Gr({},e,{},c.reduce((function(e,t){return e[t.name]=Gr({status:"PENDING",progress:0,lastStatus:0},t),e}),{}));return l&&(s[Fr.a]=Gr({status:"PENDING",progress:0,lastStatus:0},l,{name:Fr.a})),i.tree&&(s[Fr.b]={name:Fr.b,status:"READY",leafIds:i.references.map((function(e){return e.uuid})),newick:i.tree}),s;case bt.b.SUCCESS:return Gr({},e,u()({},r.stateKey,Gr({},e[r.stateKey],{position:r.result.position})));case j.c:if("tree"===r.task){var d=e[Fr.a];if(r.status&&r.timestamp>=d.lastStatus)return Gr({},e,u()({},Fr.a,Gr({},d,{status:r.status,progress:0,lastStatus:r.timestamp})));if(r.progress&&r.progress>d.progress)return Gr({},e,u()({},Fr.a,Gr({},d,{status:"IN PROGRESS",progress:Math.floor(r.progress)})))}if("subtree"===r.task){if(!(r.name in e))return e;var m=e[r.name];if(r.status&&r.timestamp>=m.lastStatus)return Gr({},e,u()({},r.name,Gr({},m,{status:r.status,lastStatus:r.timestamp,size:r.size,populationSize:r.populationSize})));if(r.progress&&r.progress>m.progress)return Gr({},e,u()({},r.name,Gr({},m,{progress:Math.floor(r.progress)})))}return e;case bt.a.SUCCESS:return Gr({},e,u()({},r.stateKey,Gr({},e[r.stateKey],{name:r.stateKey,status:r.result.status,newick:r.result.newick})));default:return e}},lastSubtree:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case bt.c:return Rr.b.has(r.name)?e:r.name;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type;switch(n){case bt.a.ATTEMPT:return!0;case bt.a.FAILURE:case bt.a.SUCCESS:return!1;default:return e}},libmicroreact:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.stateKey){var n=e[t.stateKey];return Dr({},e,u()({},t.stateKey,Mr(n,t)))}return e},titles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case j.a.SUCCESS:var a=r.result,o=a.organism,i=void 0===o?{}:o,c=a.subtrees,l={},s=!0,u=!1,d=void 0;try{for(var m,p=function(){var e=m.value,t=i.references.find((function(t){return t.uuid===e.name}));t&&(l[e.name]=t.name)},f=c[Symbol.iterator]();!(s=(m=f.next()).done);s=!0)p()}catch(e){u=!0,d=e}finally{try{s||null==f.return||f.return()}finally{if(u)throw d}}return l;default:return e}},visible:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case j.a.SUCCESS:var a=r.result.tree;return a?"READY"===a.status?Fr.a:e:Fr.b;case bt.c:return r.name;default:return e}}}),Br=n(161);function Hr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Vr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hr(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Kr={lassoActive:!1,lassoPath:null},qr=Object(i.c)({entities:Object(i.c)({genomes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case j.a.SUCCESS:var a=r.result,o=a.genomes,i=void 0===o?[]:o,c=a.organism,l=void 0===c?{}:c,s=l.references,u=void 0===s?[]:s;return Et({},e,{},Ot(i,"isCollection"),{},Ot(u,"isReference"));case bt.a.SUCCESS:var d=r.result.genomes;return d?Et({},e,{},Ot(d,"isPublic")):e;default:return e}},collection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vt,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Te.a.SUCCESS:var a=r.result,o=r.organismId,i=r.metadata;return ft.b.current=o,gt({},e,{token:a.token,organismId:o,metadata:i});case j.a.FAILURE:return gt({},e,{status:pt.a.NOT_FOUND});case j.a.SUCCESS:var c=r.result,l=c.genomes,s=void 0===l?[]:l,u=ut()(c,["genomes"]);return ft.b.current=u.organismId,gt({},e,{genomeIds:new Set(Object(mt.b)(s).map((function(e){return e.uuid}))),access:u.access,createdAt:u.createdAt,description:u.description,size:u.size,organismId:u.organismId,owner:u.owner,pmid:u.pmid,progress:u.progress,status:pt.a.READY,title:u.title,token:u.token,uuid:u.uuid,isClusterView:u.isClusterView||!1,genomeId:r.genomeId});case dt.a.ATTEMPT:return gt({},e,{access_status:"LOADING",access:r.access});case dt.a.SUCCESS:return gt({},e,{access_status:"OK"});case dt.a.FAILURE:return gt({},e,{access_status:"ERROR"});default:return e}}}),aboutCollectionOpen:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Ct.a:return r.isOpen;default:return e}},clusterView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kr,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Br.b:return Vr({},e,{lassoActive:!e.lassoActive,lassoPath:Kr.lassoPath});case Br.a:return Vr({},e,{lassoPath:r,lassoActive:null!==r});case Ve.c:return Vr({},e,{lassoPath:Kr.lassoPath,lassoActive:Kr.lassoActive});default:return e}},downloads:St,filter:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,n=arguments.length>1?arguments[1]:void 0,r=n.type,a=n.payload,o=void 0===a?{}:a,i=o||{},c=i.ids;switch(r){case j.a.SUCCESS:var l;return xt({},t,(l={},u()(l,Pt.a.VISIBILITY,{ids:_t,active:!1}),u()(l,Pt.a.TREE,{ids:_t,active:!1}),u()(l,Pt.a.MAP,{ids:_t,active:!1}),l));case Ve.a:return xt({},t,u()({},o.key,xt({},t[o.key],{ids:c,active:!0})));case Ve.b:var s=t[o.key];return xt({},t,u()({},o.key,xt({},s,{ids:new Set([].concat(Nt()(s.ids),Nt()(c))),active:!0})));case Ve.d:var d=t[o.key],m=Array.from(d.ids).filter((function(e){return!c.has(e)}));return m.length?xt({},t,u()({},o.key,xt({},d,{ids:new Set(m),active:!0}))):xt({},t,u()({},o.key,xt({},d,{ids:_t,active:!1})));case Ve.e:return xt({},t,u()({},o.key,xt({},t[o.key],{ids:_t,active:!1})));case Ve.c:return xt({},t,(e={},u()(e,Pt.a.VISIBILITY,xt({},t[Pt.a.VISIBILITY],{ids:_t,active:!1})),u()(e,Pt.a.TREE,{ids:_t,active:!1}),u()(e,Pt.a.MAP,{ids:_t,active:!1}),e));default:return t}},highlight:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mt,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload,a=void 0===r?{}:r,o=a||{},i=o.ids;switch(n){case Tt.c:return At({},e,{ids:a.append?new Set([].concat(Nt()(e.ids),Nt()(i))):new Set(i)});case Tt.b:var c=Array.from(e.ids).filter((function(e){return!i.has(e)}));return c.length?At({},e,{ids:new Set(c)}):At({},e,{ids:Dt});case Tt.a:return At({},e,{ids:Dt});default:return e}},history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(t.stateKey){var n=e[t.stateKey];return Ht({},e,u()({},t.stateKey,Ut(n,t)))}return e},metadata:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Vt.a:var a=qt({},e),o=!0,i=!1,c=void 0;try{for(var l,s=r[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;u.name in a||(a[u.name]=u)}}catch(e){i=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}return a;case Vt.b:return{};default:return e}},offline:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zt,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Yt.a:return{status:r.status};default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Xt.j:return en({},e,{advanced:!e.advanced,text:""});case Xt.i:return en({},rn(e,r),{exact:!e.exact});case Xt.h:return en({},e,{text:r,cursor:0});case Xt.a:var a=e.intersections,o=e.currentIntersection,i=r.category,c=a[o]||[],l=o;return i&&Object(Qt.c)(i,c)&&(l=a.length),en({},e,{category:r.category,currentIntersection:l,text:"",cursor:0});case Xt.f:if(!e.advanced)return rn(e,r);var s=e.currentIntersection,u=Array.from(e.intersections),d=u[s]||[];return d.some((function(e){return e.key===r.key}))?e:(u[s]=d.concat(r),en({},e,{category:null,cursor:0,intersections:u,recent:nn(e,[r]),text:""}));case Xt.g:var m=r.term,p=r.intersection,f=Array.from(e.intersections),h=Array.from(f[p]);1===h.length?f.splice(p,1):(h.splice(h.indexOf(m),1),f[p]=h);var g=e.currentIntersection in f?e.currentIntersection:Math.max(0,f.length-1);return en({},e,{cursor:0,currentIntersection:g,intersections:f,recent:nn(e,[m]),text:""});case Xt.c:var v=e.intersections,b=e.currentIntersection,y=b+r.delta;return y<0||y>v.length?e:en({},e,{currentIntersection:y});case Xt.b:return en({},e,{cursor:Math.max(0,e.cursor+r.delta)});case Xt.e:return en({},e,{sort:r});case Xt.d:return r===e.currentIntersection?e:en({},e,{currentIntersection:r});case Ve.c:return en({},tn,{recent:e.recent,exact:e.exact,advanced:e.advanced});default:return e}},summary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ln,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case an.a:return cn({},e,{isExpanded:r});default:return e}},table:Sr,timeline:Lr,tree:Ur}),Wr=qr(void 0,{}),Yr=n(48),Zr=n(89),Xr=n(98),Qr=n(159);function Jr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ea={entities:{},lastMessageReceived:null,position:null,selectedOrganism:null},ta=n(160);function na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var aa={loaded:!1,status:{},tick:void 0,errors:{}},oa=n(334);function ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ia(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ia(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var la={showing:!1},sa=n(68);function ua(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ua(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ua(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ma={processing:new Set,pending:[]},pa=n(6),fa=n.n(pa);function ha(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ga(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ha(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ha(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function va(e,t,n){var r=t.id,a=t.filename;if(!(r in e))return e;var o=e[r];return ga({},e,u()({},r,ga({},o,u()({},a,ga({},o[a],{},n)))))}var ba=n(63);function ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ya(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ya(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oa(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wa=Object(i.c)({entities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Yr.a.SUCCESS:var a={},o=!0,i=!1,c=void 0;try{for(var l,s=r.genomes[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value,d={},m=!0,p=!1,f=void 0;try{for(var h,g=u.files[Symbol.iterator]();!(m=(h=g.next()).done);m=!0){var v=h.value;d[v.name]={error:null,handle:v,name:v.name,progress:0}}}catch(e){p=!0,f=e}finally{try{m||null==g.return||g.return()}finally{if(p)throw f}}a[u.id]=d}}catch(e){i=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}return a;case"UPLOAD_READS_PROGRESS":return va(e,r,{stage:r.stage,progress:r.progress});case sa.b:if(!(r.id in e))return e;var b=Object.keys(e[r.id]),y=fa()(b,1),E=y[0];return va(e,ga({},r,{filename:E}),{progress:r.progress});case sa.d.FAILURE:case sa.c.FAILURE:if(!(r.id in e))return e;var O=Object.keys(e[r.id]),C=fa()(O,1),w=C[0];return va(e,ga({},r,{filename:w}),{error:r.error});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case sa.c.FAILURE:return Ca({},e,u()({},r.id,r.error));default:return e}},queue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Yr.a.SUCCESS:var a=[],o=!0,i=!1,c=void 0;try{for(var l,s=r.genomes[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;a.push(u.id)}}catch(e){i=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}return da({},ma,{pending:a});case sa.c.ATTEMPT:return da({},e,{pending:e.pending.slice(1),processing:new Set([].concat(Nt()(e.processing),[r.id]))});case sa.c.SUCCESS:case sa.c.FAILURE:var d=new Set(e.processing);return d.delete(r.id),da({},e,{processing:d});default:return e}},status:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Yr.a.SUCCESS:var a={},o=!0,i=!1,c=void 0;try{for(var l,s=r.genomes[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var d=l.value;a[d.id]=ba.a.PENDING}}catch(e){i=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}return a;case Zr.a.SUCCESS:var m=Ea({},e),p=!0,f=!1,h=void 0;try{for(var g,v=r.result.genomes[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var b=g.value;b.id in m||(m[b.id]=b.files?ba.a.PENDING:ba.a.SUCCESS)}}catch(e){f=!0,h=e}finally{try{p||null==v.return||v.return()}finally{if(f)throw h}}return m;case sa.c.ATTEMPT:return Ea({},e,u()({},r.id,ba.a.QUEUED));case sa.a.ATTEMPT:return Ea({},e,u()({},r.id,ba.a.COMPRESSING));case sa.d.ATTEMPT:return Ea({},e,u()({},r.id,ba.a.UPLOADING));case sa.d.FAILURE:case sa.c.FAILURE:return Ea({},e,u()({},r.id,ba.a.ERROR));case sa.d.SUCCESS:case sa.c.SUCCESS:return Ea({},e,u()({},r.id,ba.a.SUCCESS));default:return e}}});function Sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ja(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ka={filenameToGenomeId:{},pendingFiles:[],fileIds:{}};function xa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xa(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ia={uploadedAt:null,view:null};var Ta=Object(i.c)({_:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ia,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Yr.a.SUCCESS:return _a({},e,{view:Xr.b.PROGRESS,uploadedAt:r.uploadedAt||e.uploadedAt});case Zr.a.SUCCESS:if(e.uploadedAt===r.uploadedAt)return e;var a=r.result,o=!1,i=!0,c=!1,l=void 0;try{for(var s,u=a.genomes[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var d=s.value;if(d.files){o=!0;break}}}catch(e){c=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(c)throw l}}return _a({},e,{uploadedAt:r.uploadedAt,view:o?Xr.b.RECOVERY:Xr.b.PROGRESS});default:return e}},analysis:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ea,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Qr.a:var a=r.genomeId,o=r.results,i=e.entities,c=i[a]||{},l=$r({},c),s=!0,d=!1,m=void 0;try{for(var p,f=o[Symbol.iterator]();!(s=(p=f.next()).done);s=!0){var h=p.value,g=h.task,v=h.version,b=h.result,y=h.error;l[g]=!y&&v,b&&(l[g]=b)}}catch(e){d=!0,m=e}finally{try{s||null==f.return||f.return()}finally{if(d)throw m}}return $r({},e,{entities:$r({},i,u()({},a,l)),lastMessageReceived:new Date,position:0});case Qr.c:return $r({},e,{selectedOrganism:r.organismId});case Qr.b.SUCCESS:return $r({},e,{position:r.result.position});case Zr.a.SUCCESS:var E={},O=r.result,C=O.genomes,w=O.position,S=!0,j=!1,N=void 0;try{for(var P,k=C[Symbol.iterator]();!(S=(P=k.next()).done);S=!0){var x=P.value,_=x.analysis,I=ut()(x,["analysis"]),T={};if(I.pending){var L=!0,A=!1,D=void 0;try{for(var M,R=I.pending[Symbol.iterator]();!(L=(M=R.next()).done);L=!0){var F=M.value;T[F]=null}}catch(e){A=!0,D=e}finally{try{L||null==R.return||R.return()}finally{if(A)throw D}}}if(I.errored){var z=!0,G=!1,U=void 0;try{for(var B,H=I.errored[Symbol.iterator]();!(z=(B=H.next()).done);z=!0){var V=B.value;T[V]=!1}}catch(e){G=!0,U=e}finally{try{z||null==H.return||H.return()}finally{if(G)throw U}}}E[I.id]=$r({},_,{},T)}}catch(e){j=!0,N=e}finally{try{S||null==k.return||k.return()}finally{if(j)throw N}}return $r({},e,{position:w,entities:E});case Yr.a.SUCCESS:var K={},q=!0,W=!1,Y=void 0;try{for(var Z,X=r.genomes[Symbol.iterator]();!(q=(Z=X.next()).done);q=!0){var Q=Z.value;K[Q.id]={}}}catch(e){W=!0,Y=e}finally{try{q||null==X.return||X.return()}finally{if(W)throw Y}}return $r({},e,{entities:K});default:return e}},assembly:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:aa,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case ta.b:return ra({},e,{loaded:!0,status:r});case ta.c:return ra({},e,{tick:r});case ta.a:return ra({},e,{errors:ra({},e.errors,u()({},r.id,r.error))});case Zr.a.SUCCESS:var a={},o=!0,i=!1,c=void 0;try{for(var l,s=r.result.genomes[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var d=l.value;d.assembler&&d.assembler.error&&(a[d.id]=d.assembler.error)}}catch(e){i=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}return ra({},e,{errors:a});case Yr.a.SUCCESS:return ra({},e,{loaded:!0});default:return e}},errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:la,t=arguments.length>1?arguments[1]:void 0,n=t.type;t.payload;switch(n){case oa.a:return ca({},e,{showing:!e.showing});default:return e}},files:wa,genomes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Yr.a.SUCCESS:var a=ja({},e),o=!0,i=!1,c=void 0;try{for(var l,s=r.genomes[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;a[u.id]={id:u.id,name:u.name,type:u.type}}}catch(e){i=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}return a;case Zr.a.SUCCESS:var d={},m=!0,p=!1,f=void 0;try{for(var h,g=r.result.genomes[Symbol.iterator]();!(m=(h=g.next()).done);m=!0){var v=h.value;d[v.id]=ja({id:v.id,name:v.name,type:v.type},e[v.id])}}catch(e){p=!0,f=e}finally{try{m||null==g.return||g.return()}finally{if(p)throw f}}return d;default:return e}},recovery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Zr.a.ATTEMPT:return ka;case Zr.a.SUCCESS:var a={},o=[],i=r.result.genomes,c=!0,l=!1,s=void 0;try{for(var u,d=i[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var m=u.value;if(m.files){o.push(m.files.sort());var p=!0,f=!1,h=void 0;try{for(var g,v=m.files[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var b=g.value;a[b]=m.id}}catch(e){f=!0,h=e}finally{try{p||null==v.return||v.return()}finally{if(f)throw h}}}}}catch(e){l=!0,s=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw s}}return Pa({},e,{pendingFiles:o,filenameToGenomeId:a});case Yr.a.SUCCESS:var y={},E=!0,O=!1,C=void 0;try{for(var w,S=r.genomes[Symbol.iterator]();!(E=(w=S.next()).done);E=!0){var j=w.value;j.recovery&&(y[j.id]=j.recovery)}}catch(e){O=!0,C=e}finally{try{E||null==S.return||S.return()}finally{if(O)throw C}}return Pa({},e,{fileIds:y});default:return e}}}),La=Ta(void 0,{}),Aa=n(180);function Da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ma(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Da(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Da(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ra={loading:!1,error:!1,uploads:[]};function Fa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fa(Object(n),!0).forEach((function(t){u()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ga=Object(i.c)({progress:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:La,t=arguments.length>1?arguments[1]:void 0;return t.type===Zr.b?La:Ta(e,t)},previous:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ra,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Aa.a.ATTEMPT:return Ma({},e,{loading:!0});case Aa.a.FAILURE:return Ma({},e,{loading:!1,error:!0});case Aa.a.SUCCESS:return Ma({},e,{loading:!1,uploads:r.result});default:return e}},errorMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPLOAD_ERROR_MESSAGE":return t.payload;default:return e}},usage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Yr.b.SUCCESS:return t.payload.result;default:return e}},settings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{compression:!1,individual:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Yr.c:return za({},e,u()({},r.setting,r.value));default:return e}}}),Ua=Object(i.c)({account:h,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,n=t.payload,r=t.type;switch(r){case g.a.ATTEMPT:return b({},e,{pending:!0});case g.a.SUCCESS:return b({},e,{token:n.result.token,pending:!1});case g.a.FAILURE:return{pending:!1};default:return e}},branding:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CHANGE_BRANDING":return{id:t.payload};default:return e}},clustering:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case w.c.ATTEMPT:return x({},e,{status:"BUILDING_CLUSTERS",progress:0,triedBuilding:!0,taskId:null});case w.c.FAILURE:return r.genomeId!==e.selectedGenomeId||"BUILDING_CLUSTERS"!==e.status?e:x({},e,{status:"FAILED_BUILDING_CLUSTERS"});case w.c.SUCCESS:return r.genomeId!==e.selectedGenomeId||"BUILDING_CLUSTERS"!==e.status?e:x({},e,{taskId:r.result.taskId});case w.e:return"BUILDING_CLUSTERS"===e.status?"READY"===r.status?x({},e,{progress:100,status:"BUILT_CLUSTERS"}):"IN PROGRESS"===r.status?x({},e,{progress:e.progress<r.progress?r.progress:e.progress}):x({},e,{status:"FAILED_BUILDING_CLUSTERS"}):e;case w.a.ATTEMPT:return x({},e,{status:"FETCHING_CLUSTERS"});case w.a.FAILURE:return r.genomeId!==e.selectedGenomeId||"FETCHING_CLUSTERS"!==e.status?e:x({},e,{status:"FAILED_FETCHING_CLUSTERS"});case w.a.SUCCESS:if(r.genomeId!==e.selectedGenomeId||"FETCHING_CLUSTERS"!==e.status)return e;var a=r.result,o=void 0===a?{}:a,i=o.nodes,c=o.sts,l=o.genomeIdx,s=o.scheme,u=o.version,d=o.clusterIndex,m=d.pi,p=d.lambda;return x({},e,{status:"FETCHED_CLUSTERS",nodes:i,index:{pi:m,lambda:p},allSchemeSts:c,indexOfSelectedInAll:l,scheme:s,version:u,threshold:e.threshold||I(m,p,l)});case w.b.ATTEMPT:return x({},e,{status:"FETCHING_EDGES"});case w.b.FAILURE:return"FETCHING_EDGES"!==e.status||e.selectedGenomeId!==r.genomeId||e.threshold!==r.threshold?e:x({},e,{status:"FAILED_FETCHING_EDGES"});case w.b.SUCCESS:return"FETCHING_EDGES"!==e.status||e.selectedGenomeId!==r.genomeId||e.threshold!==r.threshold?e:x({},e,{edgeMatrix:r.result.edges,status:"FETCHED_EDGES"});case w.d.ATTEMPT:return x({},e,{nodeCoordinates:null,status:"RUNNING_LAYOUT"});case w.d.SUCCESS:return r.result.skip?e:x({},e,{status:"COMPLETED_LAYOUT",nodeCoordinates:r.result.coordinates});case j.a.ATTEMPT:case w.g:var f="number"==typeof r?r:Number(r.threshold),h="number"==typeof r?e.selectedGenomeId:r.genomeId;return f===e.threshold?e:x({},e,{threshold:f,status:e.nodes?"FETCHED_CLUSTERS":"INITIAL_STATUS",edgeMatrix:null,nodeCoordinates:null,selectedGenomeId:h});case w.h:return x({},e,{status:"COMPLETED_LAYOUT",nodeCoordinates:r});case S.b.ATTEMPT:return x({},_,{selectedGenomeId:r.genomeId});case w.f:return r===e.selectedGenomeId?e:x({},_,{selectedGenomeId:r});default:return e}},collections:B,downloads:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case V.ATTEMPT:return Y(e,r,{status:K.a.LOADING});case V.FAILURE:return Y(e,r,{status:K.a.ERROR});case V.SUCCESS:return Y(e,r,{status:K.a.SUCCESS,result:r.result});default:return e}},filters:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Z.UPDATE_FILTER:return Q({},e,u()({},r.stateKey,J(e[r.stateKey],r)));case Z.SET_FILTER:return Q({},e,u()({},r.stateKey,Q({},r.query)));case Z.CLEAR_FILTER:var a=e[r.stateKey].prefilter;return Q({},e,u()({},r.stateKey,{prefilter:a}));default:return e}},header:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Re.a:return ze({},e,{userDrawerVisible:!1,asideVisible:r.isOpen});case Re.b:return ze({},e,{asideVisible:!1,userDrawerVisible:r.isOpen});default:return e}},genomes:Me,location:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"LOCATION_CHANGE":var a=r.location;return Be({slug:He(r.location)},a);default:return e}},maps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Se.MAP_STORE_BOUNDS:return qe({},e,u()({},r.stateKey,qe({},e[r.stateKey],{bounds:r.bounds})));case Se.MAP_LASSO_CHANGE:return qe({},e,u()({},r.stateKey,qe({},e[r.stateKey],{lassoPath:r.path})));case Se.MAP_VIEW_BY_COUNTRY:return qe({},e,u()({},r.stateKey,qe({},e[r.stateKey],{viewByCountry:r.active})));case Se.MAP_MARKER_SIZE_CHANGED:return qe({},e,u()({},r.stateKey,qe({},e[r.stateKey],{markerSize:r.size})));case"SET_GENOME_SELECTION":return r.genomes.length?e:Object.keys(e).reduce((function(t,n){var r=e[n];return t[n]=0===n.indexOf("GENOME")?qe({},r,{lassoPath:null}):r,t}),{});case Ve.c:return qe({},e,{COLLECTION:{}});default:return e}},offline:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case We.a.ATTEMPT:return Xe({},e,{status:Ye.a.LOADING});case We.a.SUCCESS:case We.b.SUCCESS:return{status:Ye.a.SUCCESS,collections:r.result.map((function(e){return Xe({},e,{createdAt:new Date(e.createdAt)})}))};default:return e}},organisms:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case Je.a.ATTEMPT:return et({},e,{loading:!0});case Je.a.SUCCESS:return et({loading:!1},r.result);default:return e}},toast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:at,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case"TOAST_SHOW":return rt({visible:!0},r);case"TOAST_HIDE":return at;default:return e}},summary:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loaded:!1},t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.payload;switch(n){case ot.a.ATTEMPT:return{loaded:!1};case ot.a.SUCCESS:return ct({},e,{loaded:!0},r.result);case $.d.SUCCESS:var a=r.filter,o=void 0===a?{}:a,i=r.result,c=lt[o.prefilter||"all"];return ct({},e,u()({},c,i.summary.total));case We.b.SUCCESS:return ct({},e,{offlineCollections:e.offlineCollections>0?e.offlineCollections-1:0});default:return e}},upload:Ga,viewer:function(e,t){return t.type===j.b?Wr:qr(e,t)}}),Ba=[l.b,c.a],Ha=Object(i.d)(i.a.apply(void 0,Ba),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e})(i.e)(Ua);t.a=Ha},,function(e,t,n){"use strict";n.d(t,"i",(function(){return i})),n.d(t,"f",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"b",(function(){return s})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"e",(function(){return p})),n.d(t,"j",(function(){return f})),n.d(t,"a",(function(){return h})),n.d(t,"c",(function(){return g}));var r=n(77),a=n(11),o=n(65);function i(e,t,n){var a=[],o=new Set,c=!0,l=!1,s=void 0;try{for(var u,d=e[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var m=u.value;if(m.group){var p=i(m.columns,t,n),f=!0,h=!1,g=void 0;try{for(var v,b=p[Symbol.iterator]();!(f=(v=b.next()).done);f=!0){var y=v.value;o.has(y.key)||(a.push(y),o.add(y.key))}}catch(e){h=!0,g=e}finally{try{f||null==b.return||b.return()}finally{if(h)throw g}}}else{var E=m.columnKey;if("__name"!==E&&m.valueGetter&&!m.hidden&&!o.has(E)){var O=m.displayName||Object(r.a)(m);n&&!n.test(O)||(a.push({label:O,tableName:t,key:E,numeric:m.numeric}),o.add(E))}}}}catch(e){l=!0,s=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw s}}return a}function c(e,t){return t&&!t.test("NAME")?null:{tableName:e,label:"NAME",key:"__name"}}function l(e,t){var n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;if(c.columnKey===t)return c;if(c.group){var s=l(c.columns,t);if(s)return s}}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return null}function s(e,t){return{key:"".concat(e.key,"_").concat(t.key),category:e,value:t}}function u(e,t){return t===a.c.antibiotics?Object(o.d)(e):t===a.c.snps||t===a.c.genes||t===a.c.kleborateAMR?e===o.h?"ABSENT":"PRESENT":String(e)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n=e.replace("?","\\?");return t?new RegExp("^".concat(n,"$"),"i"):new RegExp(n,"i")}catch(e){return null}}var m={"=":function(e,t){return e===t},">":function(e,t){return t>e},">=":function(e,t){return t>=e},"<":function(e,t){return t<e},"<=":function(e,t){return t<=e}};function p(e){var t,n=e.replace(" ","");if("<"===n[0]||">"===n[0]?(t=n[0],"="===n[1]&&(t+="=")):"="===n[0]&&(t="="),!t)return null;var r=n.slice(t.length);if(isNaN(r))return null;if(!r.length)return{test:function(){return!0}};var a=m[t].bind(null,Number(r));return{test:function(e){return a(Number(e))}}}var f={FREQ_DESC:function(e,t){return t.ids.length-e.ids.length},FREQ_ASC:function(e,t){return e.ids.length-t.ids.length},VALUE_DESC:function(e,t){return e.label>t.label?-1:e.label<t.label?1:0},VALUE_ASC:function(e,t){return e.label>t.label?1:e.label<t.label?-1:0}};function h(e,t,n,a,o){var i,c=t.activeColumn,l={tableName:e,label:c.displayName||Object(r.a)(c),key:c.columnKey,numeric:c.numeric},u=[];c.numeric&&(i=p(a)),i||(i=d(a,o));var m=!0,f=!1,h=void 0;try{for(var g,v=n[Symbol.iterator]();!(m=(g=v.next()).done);m=!0){var b=g.value,y=c.valueGetter(b);i&&i.test(y)&&u.push(b.uuid)}}catch(e){f=!0,h=e}finally{try{m||null==v.return||v.return()}finally{if(f)throw h}}return s(l,{key:o?a:"contains",label:a,ids:u})}function g(e,t){return t.some((function(t){return!t.value.isExpression&&t.category.key===e.key}))}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"e",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"f",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l}));var r="LIBMR HISTORY SNAPSHOT";function a(e){return{type:r,payload:{image:e}}}var o="LIBMR HISTORY TRAVEL";function i(e){return{type:o,payload:{index:e}}}var c="LIBMR HISTORY REVERT";function l(){return{type:c}}},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"h",(function(){return l})),n.d(t,"d",(function(){return s})),n.d(t,"i",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"j",(function(){return m}));var r="LIBMR TIMELINE BOUNDS",a=function(e){return{type:r,payload:e||null}},o="LIBMR TIMELINE NODE SIZE",i=function(e){return{type:o,payload:e}},c="LIBMR TIMELINE SPEED",l=function(e){return{type:c,payload:e}},s="LIBMR TIMELINE UNIT",u=function(e){return{type:s,payload:e}},d="LIBMR TIMELINE VIEWPORT",m=function(e){return{type:d,payload:e}}},,,,,function(e,t,n){"use strict";var r=n(2),a=n.n(r),o=n(6),i=n.n(o),c=n(17),l=n(8);var s=n(81);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var d=Object(c.b)("FETCH_SUMMARY");function m(){return{type:d,payload:{promise:Promise.all([Object(l.a)("GET","/api/summary"),Object(s.b)()]).then((function(e){var t=i()(e,2);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t[0],{offlineCollections:t[1].length})}))}}}},function(e,t,n){"use strict";var r=n(6),a=n.n(r),o=n(2),i=n.n(o),c=n(3),l=n(53),s=n.n(l),u=n(108),d=n(67),m=["#834B96","#B668A6","#756E94","#97B5BE","#92A3B8","#E8E0EE","#BFABCF","#CFC1DB","#9070AC","#A389BB","#8968A7","#9D81B6"];function p(e,t){var n=!1,r=e;"#"===r[0]&&(r=r.slice(1),n=!0);var a=parseInt(r,16),o=(a>>16)+t;o>255?o=255:o<0&&(o=0);var i=(a>>8&255)+t;i>255?i=255:i<0&&(i=0);var c=(255&a)+t;return c>255?c=255:c<0&&(c=0),(n?"#":"")+(c|i<<8|o<<16).toString(16)}var f=m.map((function(e){return p(e,-20)})),h=m.map((function(e){return p(e,20)}));function g(e){return h[f.indexOf(e)]}var v=n(12),b=n(20);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n.d(t,"d",(function(){return C})),n.d(t,"c",(function(){return w})),n.d(t,"a",(function(){return S})),n.d(t,"e",(function(){return P})),n.d(t,"f",(function(){return k})),n.d(t,"b",(function(){return I}));var O=function(e){return e.upload.progress.analysis},C=function(e){return O(e).selectedOrganism},w=function(e){return O(e).position},S=Object(c.createSelector)(O,(function(e){return Object.keys(e.entities).map((function(t){return e.entities[t]}))}));function j(e){var t={},n={},r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)for(var l=i.value,s=0,u=Object.keys(l);s<u.length;s++){var d=u[s];if(d in t||(t[d]={total:0,errors:0}),null!==l[d]&&t[d].total++,!1===l[d]&&t[d].errors++,"mlst"===d&&l.mlst){var m=l.mlst.st;n[m]=(n[m]||0)+1}l[d]&&l[d].source&&(t[d].source=l[d].source)}}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return t.mlst&&(t.mlst.sequenceTypes=Object.keys(n).map((function(e){return{label:"ST ".concat(e),total:n[e]}})),t.mlst.errors&&t.mlst.sequenceTypes.push({label:"Error",total:t.mlst.errors,colour:b.c.DANGER_COLOUR})),t}var N=Object(c.createSelector)(d.f,S,(function(e,t){var n={},r=0,a=0,o=!0,i=!1,c=void 0;try{for(var l,s=t[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;if("speciator"in u&&null!==u.speciator)if(!1===u.speciator)a++;else{var d=u.speciator.organismId;n[d]=(n[d]||[]).concat(u)}else r++}}catch(e){i=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}for(var m,p,h=(m=new Map,p=0,function(e){if(!m.has(e)){var t=f[p++%f.length];m.set(e,t)}return m.get(e)}),g=[],y=0,E=Object.keys(n);y<E.length;y++){var O=E[y],C=n[O],w=Object(v.c)(O,C[0].speciator.organismName),S=h(w);g.push({key:O,label:w,colour:S,total:C.length,analyses:j(C)})}return!r||e&&!g.length||g.push({key:"pending",label:"Pending",total:r,colour:"#ccc"}),a&&g.push({key:"error",label:"Error",total:a,colour:b.c.DANGER_COLOUR}),g})),P=Object(c.createSelector)(N,(function(e){return e.map((function(e){if(e.analyses){var t=Object.keys(e.analyses).map((function(t){return E({key:t,label:b.d[t]},e.analyses[t])}));return E({},e,{analyses:s()(t,(function(e){return"".concat(e.label.toUpperCase(),"-").concat(e.key)}))})}return e}))})),k=Object(c.createSelector)(P,(function(e){return!!e.length&&"pending"!==e[0].key}));function x(e){var t=e.match(/^(.)\S* (..).*$/);if(t){var n=a()(t,3),r=n[1],o=n[2];return"".concat(r,". ").concat(o,".")}return e}var _=Object(c.createSelector)(N,(function(e){var t={label:"Organism",data:[],backgroundColor:[],labels:[],organismIds:[],shortLabels:[],total:0},n={label:"Sequence Type",data:[],backgroundColor:[],labels:[],parents:[],total:0,tooltips:[]},r=0,a=!0,o=!1,i=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var s=c.value,u=s.label,d=s.colour,m=s.total,p=s.key,f=s.analyses,h=void 0===f?{}:f;t.data.push(m),t.backgroundColor.push(d),t.labels.push(u),t.shortLabels.push(x(u)),t.organismIds.push(p),t.total+=m;var v=m,b=h.mlst,y=(void 0===b?{}:b).sequenceTypes,E=void 0===y?[]:y,O=!0,C=!1,w=void 0;try{for(var S,j=E[Symbol.iterator]();!(O=(S=j.next()).done);O=!0){var N=S.value;n.data.push(N.total),n.backgroundColor.push(N.colour||g(d)),n.labels.push(N.label),n.parents.push(r),n.tooltips.push("".concat(N.total," / ").concat(m,", ").concat((N.total/m*100).toFixed(1),"%")),v-=N.total}}catch(e){C=!0,w=e}finally{try{O||null==j.return||j.return()}finally{if(C)throw w}}v>0&&(n.data.push(v),n.backgroundColor.push("#fefefe"),n.labels.push("Unknown ST"),n.parents.push(r)),r++}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}return{organisms:t,sts:n}})),I=Object(c.createSelector)(u.b,_,(function(e,t){var n=t.organisms,r=t.sts,a=[];return e&&a.unshift(e),n.data.length&&a.unshift(n),r.data.length&&a.unshift(r),a}))},function(e,t,n){"use strict";n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return l})),n.d(t,"d",(function(){return s}));var r=n(18),a="selected-genomes";function o(e){var t;return e>(void 0===(t=r.a.pagination)?{max:2500}:t).max}function i(){return localforage.getItem(a).then((function(e){return Object.values(e||{})}))}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={},n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var l=i.value,s=l.id,u=l.name,d=l.organismId,m=l.binned;t[s]={id:s,name:u,organismId:d,binned:m}}}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return localforage.setItem(a,t)}function l(e){return localforage.getItem(a).then((function(t){var n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var l=i.value,s=l.id,u=l.name,d=l.organismId,m=l.binned;t[s]={id:s,name:u,organismId:d,binned:m}}}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return localforage.setItem(a,t)}))}function s(e){return localforage.getItem(a).then((function(t){var n=!0,r=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){delete t[i.value.id]}}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return localforage.setItem(a,t)}))}},function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return s}));var r=n(3),a=n(31),o=n(61),i=Object(r.createSelector)(a.f,(function(e){return e.reduce((function(e,t){return e[t.organismId]=e[t.organismId]||[],e[t.organismId].push(t),e}),{})})),c=Object(r.createSelector)(o.h,i,(function(e,t){return!e&&1===Object.keys(t).length})),l=Object(r.createSelector)(i,(function(e){var t=Object.keys(e)[0];return{organismId:t,numGenomes:e[t].length}})),s=function(e){return e.genomes.collectionMetadata}},,,function(e,t,n){"use strict";n.r(t),n.d(t,"isSupported",(function(){return s})),n.d(t,"taxIdMap",(function(){return m})),n.d(t,"getOrganismName",(function(){return f}));var r=n(2),a=n.n(r),o=n(287);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"FormattedName",(function(){return o.default}));var c=n(416),l=new Set(c.map((function(e){return e.id}))),s=function(e){var t=e.organismId;return l.has(t)},u=c.reduce((function(e,t){var r=t.id,o=t.nickname;return e[o]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:r,nickname:o},n(650)("./".concat(o)).default),e}),{}),d=Object.keys(u).map((function(e){return u[e]})),m=new Map(d.map((function(e){return[e.id,e]}))),p={};function f(e,t){return m.has(e)?m.get(e).name:t}t.default={get list(){return d},get current(){return p},set current(e){p=m.get(e)||{}},get:function(e){return u[e]},get id(){return p.id},get formattedName(){return p.formattedName},get nickname(){return p.nickname},get uiOptions(){return p.uiOptions||{}},get maxGenomeSize(){return p.maxGenomeSize||Math.pow(10,10)},get gcRange(){return p.gcRange||{}}}},,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(52),i=n(20),c=n(199),l={color:i.c.DANGER_COLOUR};t.a=function(e){var t=e.status,n=e.color,r=e.label,i=e.isArchive;return a.a.createElement("div",{className:"wgsa-download-icon"},t===c.a.LOADING?a.a.createElement(o.a,null):a.a.createElement("div",null,a.a.createElement("i",{className:"wgsa-button-icon material-icons",style:t===c.a.ERROR?l:{color:n}},i?"archive":"insert_drive_file"),r?a.a.createElement("span",{className:"wgsa-download-label"},r):null))}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l}));var r=n(17),a=n(81),o=Object(r.b)("OFFLINE_LOAD_COLLECTIONS");function i(){return{type:o,payload:{promise:Object(a.b)()}}}var c=Object(r.b)("OFFLINE_REMOVE_COLLECTION");function l(e){return{type:c,payload:{promise:Object(a.e)(e).then(a.b)}}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a}));var r={FREQ_DESC:"FREQ_DESC",FREQ_ASC:"FREQ_ASC",VALUE_DESC:"VALUE_DESC",VALUE_ASC:"VALUE_ASC"},a={BASIC:0,ADVANCED:1}},,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"d",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return p}));var r=n(2),a=n.n(r),o=n(31),i=n(133),c=n(17),l=n(72),s=n(332),u=Object(c.b)("CREATE_COLLECTION");function d(){return function(e,t){var n=t(),r=Object(i.c)(n).organismId,a=Object(o.f)(n),c=Object(i.b)(n);return e(function(e,t,n){return{type:u,payload:{organismId:e,metadata:n,promise:Object(s.a)(t,e,n)}}}(r,a,c)).catch((function(){return e(Object(l.c)({message:"Your collection could not be created at this time, please try again later."}))}))}}var m="CHANGE_COLLECTION_METADATA";function p(e,t){return{type:m,payload:a()({},e,t)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"UPDATE_FILTER",(function(){return a})),n.d(t,"SET_FILTER",(function(){return o})),n.d(t,"CLEAR_FILTER",(function(){return i})),n.d(t,"updateFilter",(function(){return c})),n.d(t,"setFilter",(function(){return l})),n.d(t,"clearFilter",(function(){return s})),n.d(t,"update",(function(){return u})),n.d(t,"clear",(function(){return d}));var r=n(50),a="UPDATE_FILTER",o="SET_FILTER",i="CLEAR_FILTER";function c(e,t){return{type:a,payload:{stateKey:e,query:t}}}function l(e,t){return{type:o,payload:{stateKey:e,query:t}}}function s(e){return{type:i,payload:{stateKey:e}}}function u(e,t){return function(n){n(c(e,t)),delete t.prefilter,Object(r.f)(t)}}function d(e){return function(t){t(s(e)),Object(r.c)()}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return i}));var r=n(0),a=n.n(r),o=new Set(["Salmonella enterica","Salmonella bongori"]);function i(e){return o.has(e)?"serovar":"serotype"}t.a=function(e){return a.a.createElement("span",{title:(t=e,n=t.speciesName,r=t.subspecies,o=t.serotype,c=i(n),n&&r&&o?"".concat(n," subspecies ").concat(r," ").concat(c," ").concat(o):n&&o?"".concat(n," ").concat(c," ").concat(o):n)},function(e){var t=e.speciesName,n=e.subspecies,r=e.serotype,o=e.abbreviated,c=i(t);return"Salmonella enterica"===t&&r?a.a.createElement(a.a.Fragment,null,a.a.createElement("em",null,"Salmonella")," ",r):t&&n&&r?a.a.createElement(a.a.Fragment,null,a.a.createElement("em",null,t)," ",o?"subsp.":"subspecies"," ",a.a.createElement("em",null,n)," ",o?"ser.":c," ",r):t&&r?a.a.createElement(a.a.Fragment,null,a.a.createElement("em",null,t)," ",o?"ser.":c," ",a.a.createElement("strong",null,r)):a.a.createElement("em",null,t)}(e));var t,n,r,o,c}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(3),a=function(e){return e.genomes.summary},o=function(e){return a(e).visible},i=function(e){return a(e).total};Object(r.createSelector)(o,i,(function(e,t){return e===t}))},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"d",(function(){return i}));var r="VIEWER_ADD_PRIVATE_METADATA";function a(e){return{type:r,payload:e}}var o="VIEWER_CLEAR_PRIVATE_METADATA";function i(){return{type:o}}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return s})),n.d(t,"f",(function(){return u}));var r=n(17),a=n(331),o="UPLOAD_ANALYSIS_RECEIVED";function i(e){return{type:o,payload:e}}var c=Object(r.b)("UPLOAD_FETCH_POSITION");function l(e){return{type:c,payload:{uploadedAt:e,promise:a.a(e)}}}var s="UPLOAD_ORGANISM_SELECTED";function u(e){return{type:s,payload:{organismId:e}}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return c})),n.d(t,"d",(function(){return l}));var r="ASSEMBLY_PROGRESS_TICK";function a(){return{type:r,payload:Date.now()}}var o="ASSEMBLY_PIPELINE_STATUS";function i(e){return{type:o,payload:e}}var c="ASSEMBLY_PIPELINE_ERROR";function l(e){return{type:c,payload:e}}},function(e,t,n){"use strict";var r=n(2),a=n.n(r),o=n(8),i=n(173);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t){return console.log("[Pathogenwatch] Fetching cluster for genome ".concat(e)),Object(o.a)("GET","/api/clustering/".concat(e,"?threshold=").concat(t)).then((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{genomes:Object(i.a)(e.genomes)})}))}var s=n(41);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t){return{type:s.a,payload:{isClusterView:!0,genomeId:e,threshold:t,promise:l(e,t).then((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{isClusterView:!0})}))}}}n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return m})),n.d(t,"e",(function(){return p})),n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return h}));var m="CLUSTER_TOGGLE_LASSO_ACTIVE";function p(){return{type:m,payload:{}}}var f="CLUSTER_SET_LASSO_PATH";function h(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:f,payload:e}}},function(e,t,n){"use strict";var r=n(84),a=n(285),o=n(2),i=n.n(o),c=n(0),l=n.n(c),s=n(4),u=n(50),d=n(341),m=n(177),p=n(337),f=n(74),h=n(109);var g=Object(s.a)((function(e){return{active:f.c(e,{stateKey:a.a}),searchText:Object(r.e)(e),filterSummary:Object(r.c)(e),prefilter:Object(r.d)(e)}}),(function(e){return{clearFilter:function(){return e(h.c())},updateFilterValue:function(t,n){return e(h.f(i()({},t,n)))},applyFilter:function(){return e(h.b())},updateFilter:function(t,n){return e(h.e(i()({},t,n)))}}}))((function(e){var t=e.active,n=e.searchText,r=e.filterSummary,a=e.updateFilterValue,o=e.applyFilter,i=e.updateFilter,c=e.clearFilter,s=e.prefilter;return l.a.createElement(d.a,{active:t,clear:c,prefilter:s,summary:r,textValue:n,textOnChange:function(e){return a("searchText",e)},textOnChangeEffect:o,updateFilter:i},l.a.createElement(m.a,{filterKey:"organismId",heading:"Organism",icon:"bug_report",summary:r.organism}),l.a.createElement(m.a,{className:"capitalised",filterKey:"access",heading:"Access",icon:"person"}),l.a.createElement(p.a,{summary:r.date}),l.a.createElement(m.a,{filterKey:"publicationYear",heading:"Publication Year",icon:"chrome_reader_mode"}),l.a.createElement(u.b,{update:i}))}));n.d(t,"b",(function(){return a.a})),n.d(t,"a",(function(){return g}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={LOADING:0,SUCCESS:1,ERROR:2}},,,function(e,t,n){"use strict";n.r(t),n.d(t,"getFilter",(function(){return a})),n.d(t,"isActive",(function(){return o}));var r=n(3);function a(e,t){var n=t.stateKey;return e.filters[n]||{}}var o=Object(r.createSelector)(a,(function(e){return Object.keys(e).some((function(t){return"prefilter"!==t&&e[t]}))}))},,function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return c}));var r=n(6),a=n.n(r),o=n(648);function i(e){return e&&e.toLowerCase()in o&&a()(o[e.toLowerCase()],1)[0]||e}function c(e){if(e){var t=a()(o[e.toLowerCase()],3),n=t[0],r=t[1],i=t[2];if(n)return[r,i]}return e}},function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(225),i=n.n(o),c={Paragraph:function(e){return a.a.createElement("span",null,e.children)}};t.a=function(e){var t=e.className,n=e.tag,r=e.children;return a.a.createElement(i.a,{className:t,containerTagName:n,source:r,renderers:c})}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(77),a=document.createElement("canvas").getContext("2d");function o(e,t){return a.font=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal";return"".concat(e,' 13px "Roboto", "Helvetica", "Arial", sans-serif')}(t?"bold":"normal"),a.measureText(e.slice(0,100)).width}function i(e,t){var n=t.genomes;if(e.fixedWidth)return e;var a=e.cellPadding,i=void 0===a?24:a,c=o(Object(r.a)(e),!0)+i,l="",s=!1,u=e.valueGetter,d=e.getTextToMeasure,m=void 0===d?u:d,p=!0,f=!1,h=void 0;try{for(var g,v=n[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var b=g.value,y=m(b);null!=y&&((y=String(y)).length>l.length&&(l=y,s="__name"===e.columnKey&&(b.__isCollection||b.__isReference)))}}catch(e){f=!0,h=e}finally{try{p||null==v.return||v.return()}finally{if(f)throw h}}return e.width=l.length?Math.max(e.getMinWidth?e.getMinWidth():e.minWidth||0,c,o(l,s)+i):c,e}},function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n(2),a=n.n(r);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return e.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}))}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){var t=i({},e.analysis);if(t.paarsnp&&Array.isArray(t.paarsnp.antibiotics)){var n=t.paarsnp.antibiotics,r=void 0===n?[]:n;t.paarsnp=i({},t.paarsnp,{antibiotics:r.reduce((function(e,t){return e[t.name]=t,e}),{})})}return i({},e,{uuid:e.uuid||e.id||e._id,analysis:t,position:e.position||{latitude:e.latitude,longitude:e.longitude}})}))}},,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(499),i=n(26),c=n.n(i),l=n(4),s=n(279),u=n(339),d=n(52),m=n(34),p=n(142),f=n(81),h=a.a.createClass({displayName:"RemoveOfflineCollection",getInitialState:function(){return{confirming:!1}},warn:function(){this.setState({confirming:!0})},cancel:function(){this.setState({confirming:!1})},render:function(){var e=this.props,t=e.onConfirm,n=e.disabled;return a.a.createElement(m.a,null,this.state.confirming?a.a.createElement("div",{key:"confirm",className:"wgsa-confirm-action"},a.a.createElement("p",null,"This cannot be undone."),a.a.createElement("button",{className:"mdl-button wgsa-button--text",onClick:this.cancel},"Cancel"),a.a.createElement("button",{className:"mdl-button wgsa-button--text mdl-button--primary",onClick:t},"Confirm")):a.a.createElement("button",{key:"action",className:"mdl-button wgsa-button--text",onClick:this.warn,disabled:n,title:n?"Remove this collection when you are online again 🙂":"Requires confirmation"},"Remove"))}});var g=Object(l.a)(null,(function(e,t){var n=t.token;return{onConfirm:function(){return e(Object(p.d)(n))},disabled:Object(f.c)()}}))(h),v=function(e){return e.offline};function b(e){return v(e).status}function y(e){return v(e).collections}var E=n(246),O=n(60),C=function(){return a.a.createElement("div",{className:"wgsa-page wgsa-compact-page"},a.a.createElement("h1",null,"Offline Mode"),a.a.createElement("p",null,"Offline mode allows you to save specific collections for use even when you lose network connectivity."),a.a.createElement("h2",null,"How to Save Collections"),a.a.createElement("p",null,a.a.createElement("img",{src:"/images/save-for-offline.png"})),a.a.createElement("p",null,"When viewing a collection, click on the ",a.a.createElement("i",{className:"material-icons"},"info")," icon in header bar, revealing the ",a.a.createElement("strong",null,"Save for Offline Use")," button. Click this button, allow the page to refresh and your collection should be available offline, hurrah!"),a.a.createElement("p",null,"Saved collections are listed on this page when you need them."))},w=function(){return a.a.createElement("div",{className:"wgsa-page wgsa-compact-page"},a.a.createElement("h1",null,"Oh no!"),a.a.createElement("p",null,"Unfortunately your browser does not support Offline Mode."),a.a.createElement("p",null,"We're super sorry. 😞"))},S=function(){return Object(f.d)()?a.a.createElement(C,null):a.a.createElement(w,null)},j=function(e){return a.a.createElement(u.a,c()({},e,{footerLink:a.a.createElement(g,{token:e.item.token})}))},N=function(e){var t=e.collections;return a.a.createElement("div",{className:"wgsa-page"},a.a.createElement("h1",null,"Saved Collections"),Object(f.c)()?null:a.a.createElement("p",null,"These collections will be available when you are offline."),a.a.createElement(s.a,{items:t,template:j,keyProp:"token"}))},P=a.a.createClass({displayName:"Offline",componentDidMount:function(){this.props.loadCollections()},renderContent:function(){var e=this.props,t=e.status,n=e.collections;return t===E.a.LOADING?a.a.createElement("div",{className:"wgsa-page"},a.a.createElement(d.a,null),";"):n.length?a.a.createElement(N,{collections:n}):a.a.createElement(S,null)},render:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(O.a,null,"Offline"),this.renderContent())}});var k=Object(l.a)((function(e){return{status:b(e),collections:y(e)}}),(function(e){return{loadCollections:function(){return e(Object(p.c)())}}}))(P);n.d(t,"b",(function(){return f.c}));t.a=a.a.createElement(o.a,{path:"/offline",component:k})},function(e,t,n){"use strict";n(976);var r=n(296);n.d(t,"a",(function(){return r.a}))},,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={LOADING:0,LOADED:1,ERROR:2}},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var r=n(17),a=n(195),o=Object(r.b)("FETCH_UPLOADS");function i(){return{type:o,payload:{promise:Object(a.b)()}}}},,function(e,t,n){"use strict";n(1107);var r=n(150),a=n(0),o=n.n(a),i=n(4),c=n(99),l=n(133),s=n(36),u=n(12),d=n(240),m=o.a.createClass({displayName:"CreateCollectionForm",componentDidMount:function(){componentHandler.upgradeElements(Array.from(this.formElements)),this.firstInput.focus()},addToFormElements:function(e){this.firstInput||(this.firstInput=e.querySelector("input")),this.formElements.has(e)||this.formElements.add(e)},formElements:new Set,firstInput:null,render:function(){var e=this.props,t=e.metadata,n=t.title,r=t.description,a=t.pmid,i=e.canCreateCollection,l=this.props.collectionSummary,s=l.organismId,d=l.numGenomes;return s?o.a.createElement("form",{className:"wgsa-create-collection-form",onSubmit:this.props.onSubmit},o.a.createElement("span",{className:"wgsa-card-metadata-inliner wgsa-collection-summary"},o.a.createElement(c.a,{title:"Size",icon:"wgsa_genome"},o.a.createElement("span",null,d," Genome",1===d?"":"s")),o.a.createElement(c.a,{title:"Organism",icon:"bug_report"},u.d.get(s).formattedName)),o.a.createElement("div",{ref:this.addToFormElements,className:"mdl-textfield mdl-js-textfield mdl-textfield--floating-label"},o.a.createElement("input",{className:"mdl-textfield__input",type:"text",id:"collection-title",value:n,onChange:this.props.onFormChange,disabled:!i}),o.a.createElement("label",{className:"mdl-textfield__label",htmlFor:"collection-title"},"Title")),o.a.createElement("div",{ref:this.addToFormElements,className:"mdl-textfield mdl-js-textfield mdl-textfield--floating-label"},o.a.createElement("textarea",{className:"mdl-textfield__input",type:"text",rows:"3",id:"collection-description",value:r,onChange:this.props.onFormChange,disabled:!i}),o.a.createElement("label",{className:"mdl-textfield__label",htmlFor:"collection-description"},"Description")),o.a.createElement("div",{ref:this.addToFormElements,className:"mdl-textfield mdl-js-textfield mdl-textfield--floating-label mdl-textfield--small"},o.a.createElement("input",{className:"mdl-textfield__input",type:"text",id:"collection-pmid",value:a,onChange:this.props.onFormChange,disabled:!i,pattern:"[0-9]*"}),o.a.createElement("label",{className:"mdl-textfield__label",htmlFor:"collection-pmid"},"PMID")),o.a.createElement("footer",null,o.a.createElement("button",{className:"mdl-button mdl-js-button mdl-button--raised mdl-button--colored",disabled:!i},"Create Now"))):null}});var p=Object(i.a)((function(e){return{canCreateCollection:l.a(e),collectionSummary:l.c(e),metadata:l.b(e)}}),(function(e){return{onSubmit:function(t){t.preventDefault(),e(Object(r.d)()).then((function(t){var n=t.token;n?(e(Object(s.g)()),d.b.push("/collection/".concat(n))):console.error("Failed to create collection")}))},onFormChange:function(t){var n=t.target;return e(Object(r.c)(n.id.split("collection-")[1],n.value))}}}))(m),f=n(6),h=n.n(f),g=n(34),v=n(332),b="LOADING",y="NOT_READY",E="VERIFIED",O="ERROR",C="FAILED_TO_VERIFY",w=["Hang on in there","Stay strong","You can do this"];var S=o.a.createClass({displayName:"Verifier",getInitialState:function(){return{status:b,failed:!1}},componentDidMount:function(){var e=this;this.verify(1e3),this.interval=setInterval((function(){return e.verify(2e3)}),1e4)},componentDidUpdate:function(e,t){var n=E,r=O,a=this.state.status;t.status!==n&&a===n&&clearInterval(this.interval),a===r&&clearInterval(this.interval)},componentWillUnmount:function(){this.interval&&clearInterval(this.interval)},verify:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2e3;this.setState({status:b}),Promise.all([v.b(this.props.genomes,this.props.organismId).then((function(){return{status:E}})).catch((function(e){return 400===e.status?e.responseJSON||{}:{status:C}})),new Promise((function(e){return setTimeout(e,t)}))]).then((function(t){var n=h()(t,1)[0];return e.setState(n)}))},renderStatus:function(){return this.state.status===y?o.a.createElement("div",null,o.a.createElement("p",null,"Core analysis incomplete, ",this.state.pending," result",1===this.state.pending?"":"s"," to go."),o.a.createElement("p",null,w[Math.floor(Math.random()*w.length)],". 😓")):this.state.status===O?o.a.createElement("div",null,o.a.createElement("p",null,"Core analysis could not be completed for this selection."),o.a.createElement("p",null,"Please resubmit your genomes and try again.")):this.state.status===C?o.a.createElement("p",null,"Something went wrong 😞"):o.a.createElement("p",{className:"wgsa-blink"},"Verifying core analysis...")},render:function(){return this.state.status===E?this.props.children:o.a.createElement(g.a,{className:"wgsa-collection-verify",out:!1},o.a.cloneElement(this.renderStatus(),{key:this.state.status}))}}),j=n(104),N=function(e){var t=e.deployedOrganisms;return o.a.createElement("div",{className:"wgsa-create-collection-message"},o.a.createElement("p",null,"To create a collection, please select genomes identified as one of the following organisms:"),o.a.createElement("ul",{className:"wgsa-supported-organism-list"},Array.from(t).map((function(e){return o.a.createElement("li",{key:e},o.a.createElement(u.a,{fullName:!0,organismId:e}))}))))},P=function(e){var t=e.organismId,n=e.deficit;return o.a.createElement("div",{className:"wgsa-create-collection-message"},o.a.createElement("p",null,"Population search is not currently supported for ",o.a.createElement("strong",null,o.a.createElement(u.a,{organismId:t})),"."),o.a.createElement("p",null,"At least 3 genomes are required to produce a tree for collections without population search."),o.a.createElement("p",null,"Please select ",o.a.createElement("strong",null,n," more genome",1===n?"":"s"),"."))},k=function(e){var t=e.summary,n=e.onClick;return o.a.createElement("div",{className:"wgsa-create-collection-message"},o.a.createElement("p",null,"To create a collection, please select ",o.a.createElement("strong",null,"one organism")," below:"),o.a.createElement("p",null,Object.keys(t).map((function(e){return o.a.createElement("button",{key:e,className:"mdl-chip mdl-chip--contact wgsa-inline-chip",onClick:function(){return n(t[e])}},o.a.createElement("span",{className:"mdl-chip__contact"},t[e].length),o.a.createElement("span",{className:"mdl-chip__text"},o.a.createElement(u.a,{organismId:e})))}))))};var x=Object(i.a)((function(e){return{selectedGenomeSummary:Object(l.d)(e),deployedOrganisms:Object(j.a)(e)}}),(function(e){return{onClick:function(t){return e(Object(s.l)(t))}}}))((function(e){var t=e.selectedGenomeSummary,n=e.deployedOrganisms,r=e.onClick,a=Object.keys(t);if(0===a.length)return o.a.createElement(N,{deployedOrganisms:n});if(1===a.length){var i=a[0],c=t[i],l=c.length,s=u.d.get(i).uiOptions;return(void 0===s?{}:s).noPopulation&&l<3?o.a.createElement(P,{organismId:i,deficit:3-l}):o.a.createElement(S,{organismId:i,genomes:c},o.a.createElement(p,null))}return o.a.createElement(k,{summary:t,onClick:r})}));n.d(t,"a",(function(){return r.b})),n.d(t,"b",(function(){return x}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={LOADING:0,ERROR:1,OK:2}},function(e,t,n){"use strict";var r=n(17),a=n(200),o=n(88),i=n(87),c=n(8);function l(e,t){var n=Object(i.stringify)(t);return Object(c.a)("POST","/api/genome/at-locations?".concat(n),{coordinates:e})}var s=n(38);n.d(t,"b",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return f}));var u=Object(r.b)("SHOW_MARKER_POPUP");function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t,n){var r=n(),a=Object(s.a)(r);t({type:u,payload:{promise:l(e,a)}})}}var m="CLOSE_MARKER_POPUP";function p(){return{type:m}}function f(e,t){return function(n,r){n(Object(o.changeLassoPath)(e,t));var i=r();t&&n(d(Object(a.e)(i,{stateKey:e}),t))}}},,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"onHeaderClick",(function(){return o}));var r=n(54),a=n(37);function o(e,t){return function(n,o){var i=o(),c=Object(a.a)(i),l=Object(a.b)(i).activeColumns,s=t.group?t.columns.filter((function(e){return e.valueGetter&&!e.hidden})):[t],u=t.group&&s.some((function(e){return!l.has(e)}));if(e.metaKey||e.ctrlKey){var d=!0,m=!1,p=void 0;try{for(var f,h=s[Symbol.iterator]();!(d=(f=h.next()).done);d=!0){var g=f.value;t.group&&u?l.add(g):l[l.has(g)?"delete":"add"](g)}}catch(e){m=!0,p=e}finally{try{d||null==h.return||h.return()}finally{if(m)throw p}}n(Object(r.e)(c,new Set(l)))}else!function(e,t){return t.size&&t.size===e.length&&Array.from(t).every((function(t){return-1!==e.indexOf(t)}))}(s,l)?n(Object(r.e)(c,new Set(s))):n(Object(r.e)(c,new Set))}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o}));var r="HEADER_TOGGLE_ASIDE";var a="HEADER_TOGGLE_USER_DRAWER";function o(e){return{type:a,payload:{isOpen:e}}}},,function(e,t,n){"use strict";n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return d})),n.d(t,"c",(function(){return m}));var r=n(2),a=n.n(r),o=n(8),i=n(18);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){return Object(o.a)("PUT","/api/genome?uploadedAt=".concat(t),e.map((function(e){return{id:e.id,type:e.type,files:e.files.map((function(e){return e.name})),metadata:l({name:e.name},e.metadata)}})))}function u(e){return Object(o.a)("GET","/api/upload/".concat(e))}function d(){return Object(o.a)("GET","/api/upload")}function m(e){return fetch("".concat(i.a.assemblerAddress,"/api/account"),{headers:{Authorization:"Bearer ".concat(e)}}).then((function(e){if(200===e.status)return e.json();throw new Error(e.statusText)}))}},,function(e,t,n){"use strict";var r=n(17),a=n(8);n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var o=Object(r.b)("FETCH_SPECIES_SUMMARY");function i(){return{type:o,payload:{promise:Object(a.a)("GET","/api/organism/summary")}}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return l}));var r=n(8);function a(e){return Object(r.a)("GET","/api/genome",e)}function o(e){return Object(r.a)("GET","/api/genome/map",e)}function i(e){return Object(r.a)("GET","/api/genome/stats",e)}function c(e){return Object(r.a)("GET","/api/genome/summary",e)}function l(e,t){return Object(r.a)("POST","/api/genome/bin",{status:t,ids:e})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={NOT_GENERATED:0,LOADING:1,ERROR:2,SUCCESS:3}},function(e,t,n){"use strict";n.d(t,"b",(function(){return d})),n.d(t,"a",(function(){return m})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return f})),n.d(t,"e",(function(){return h}));var r=n(6),a=n.n(r),o=n(53),i=n.n(o),c=n(3),l=n(61),s=n(106),u=n(327),d=function(e){return Object(l.b)(e).map.markers},m=function(e){return Object(l.b)(e).map.filter},p=function(e){return Object(l.b)(e).map.popup},f=Object(c.createSelector)(p,(function(e){var t=[],n=!0,r=!1,a=void 0;try{for(var o,c=e.genomes[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var l=o.value,s=l.genomes,u=l.organismId,d=l.speciesName,m=l.subspecies,p=l.serotype,f=!0,h=!1,g=void 0;try{for(var v,b=s[Symbol.iterator]();!(f=(v=b.next()).done);f=!0){var y=v.value,E=y.id,O=y.name;t.push({id:E,name:O,organismId:u,speciesName:d,subspecies:m,serotype:p})}}catch(e){h=!0,g=e}finally{try{f||null==b.return||b.return()}finally{if(h)throw g}}}}catch(e){r=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}return i()(t,"name")})),h=Object(c.createSelector)(d,s.b,(function(e,t){return t?e.reduce((function(e,n){var r=n.position,o=a()(r,2),i=o[0],c=o[1];return i&&c&&Object(u.contains)(t,{lat:i,lng:c})?(e.push(r),e):e}),[]):[]}))},function(e,t,n){"use strict";var r=n(17),a=n(8);n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var o=Object(r.b)("GET_AUTH_TOKEN");function i(){return{type:o,payload:{promise:Object(a.a)("GET","/auth/token")}}}},,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(91);t.a=a.a.createClass({displayName:"ST.react",componentDidMount:function(){var e=this.props.id;Object(o.b)(e)&&window&&window.Clipboard&&(this.clipboard=new window.Clipboard(this.el,{text:function(){return e}}))},render:function(){var e=this,t=this.props.id;if(Object(o.b)(t)){var n=t.substr(0,4);return a.a.createElement("span",{ref:function(t){e.el=t},className:"wgsa-mlst-st is-novel",title:"Novel ST: ".concat(t,"\n(Click to copy)"),onClick:function(e){return e.stopPropagation()}},n)}return a.a.createElement("span",{className:"wgsa-mlst-st"},t)}})},function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(297);t.a=function(e){var t=e.alleles,n=void 0===t?[]:t;return a.a.createElement("span",{className:"wgsa-mlst-profile"},n.map((function(e){var t=e.gene,n=e.hits;return a.a.createElement("span",{key:t,className:"wgsa-mlst-profile-section"},n.length?n.map((function(e){return a.a.createElement(o.a,{key:e,id:e,showNovelHash:!0})})):a.a.createElement("span",{title:"Not found"},"?"))})))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=["WGSA","Pathogenwatch","PathogenDotWatch"],a={WGSA:"WGSA",Pathogenwatch:"Pathogenwatch",PathogenDotWatch:"Pathogenwatch"}},,function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=function(e){var t=e.className,n=e.pmid,r=e.children,o=void 0===r?"PubMed":r;return n?a.a.createElement("a",{className:t,href:"http://www.ncbi.nlm.nih.gov/pubmed/".concat(n),target:"_blank",rel:"noopener",title:"PMID ".concat(n)},o):null}},function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(170);t.a=function(e){var t=e.className,n=e.level,r=void 0===n?"1":n,i=e.children;return a.a.createElement(o.a,{className:t,tag:"h".concat(r)},i)}},,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return i}));var r=function(e){return e.upload.progress.recovery},a=function(e){return r(e).pendingFiles},o=function(e){return r(e).filenameToGenomeId},i=function(e){return r(e).fileIds}},function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return E}));var r=n(2),a=n.n(r),o=n(526),i=n.n(o),c=n(527),l=n.n(c),s=n(278),u=n(18);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p=u.a.origin,f=void 0===p?window.location.origin:p,h=u.a.clientId;function g(e,t,n,r){return fetch("".concat(u.a.assemblerAddress).concat(t),{method:e,mode:"cors",headers:m({},n,{"Content-Type":"application/json"}),body:JSON.stringify(r)})}function v(e,t,n,r){return{type:"UPLOAD_READS_PROGRESS",payload:{stage:e,id:t,filename:n,progress:r}}}function b(e,t,n){var r=t.token,a=t.uploadedAt,o=l()();o.onmessage=function(t){var r=t.data;r.progress&&n(v("IDENTIFY",e.id,r.file,r.progress))};var c={Authorization:"Bearer ".concat(r)},d=new i.a({target:"".concat(u.a.assemblerAddress,"/chunks"),simultaneousUploads:5,generateUniqueIdentifier:function(e){return o.hash(e)},headers:c});return d.on("chunkingProgress",(function(t,r){n(v("PREPARE",e.id,t.fileName,100*r))})),d.on("chunkingComplete",(function(t){n(v("PREPARE",e.id,t.fileName,100))})),d.on("fileProgress",(function(t){n(v("UPLOAD",e.id,t.fileName,100*t.progress()))})),new Promise((function(t,n){var r=!1;d.on("error",(function(e,t){n({message:e,file:t})})),d.on("complete",(function(){var o=[Object(s.c)(e.id)];r||o.push(g("PATCH","/api/pipelines",c,{session:a,genomeId:e.id,status:"READS_UPLOADED"}).then((function(e){200!==e.status&&n({message:e.statusText})}))),Promise.all(o).then(t).catch(n)})),d.on("filesAdded",(function(t){if(e.recovery){var o=!0,i=!1,l=void 0;try{for(var s,u=e.recovery[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var m=s.value.fileId,p=null,v=!0,b=!1,y=void 0;try{for(var E,O=t[Symbol.iterator]();!(v=(E=O.next()).done);v=!0){var C=E.value;if(C.uniqueIdentifier===m){p=null;break}p=C.fileName}}catch(e){b=!0,y=e}finally{try{v||null==O.return||O.return()}finally{if(b)throw y}}if(p)return void n({message:"".concat(p," does not match the original file, please try again.")})}}catch(e){i=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw l}}d.upload()}else g("POST","/api/pipelines",c,{session:a,genomeId:e.id,callback:"".concat(f,"/api/genome/").concat(e.id,"/assembly?clientId=").concat(h),progress:{channel:"".concat(h,"-assembly"),topic:a},files:t.map((function(e){return{filename:e.fileName,fileId:e.uniqueIdentifier,totalChunks:e.chunks.length}}))}).then((function(e){304===e.status?(r=!0,d.fire("complete")):201!==e.status?n({message:e.statusText}):d.upload()})).catch((function(e){return n({message:e.message})}))})),d.addFiles(e.files.map((function(e){return e.handle})))}))}function y(e,t){return new Promise((function(n,r){return g("GET","/api/sessions/".concat(e),{Authorization:"Bearer ".concat(t)}).then((function(e){200===e.status?n(e.json()):404===e.status?r({type:"NOT_FOUND"}):r({message:e.statusText})}))}))}function E(e,t){return new Promise((function(n,r){return g("GET","/api/sessions/".concat(e,"/progress"),{Authorization:"Bearer ".concat(t)}).then((function(e){200===e.status?n(e.json()):r({message:e.statusText})}))}))}},function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(918),i=n(499),c=n(487),l=n.n(c),s=(n(948),n(950),n(952),n(4)),u=n(5),d=n.n(u),m=n(72),p=(n(956),n(16)),f=n.n(p),h=n(490),g=n.n(h),v=(n(968),n(970),n(26)),b=n.n(v),y=n(25),E=n.n(y),O=n(34),C=a.a.createClass({displayName:"Overlay.react",propTypes:{visible:a.a.PropTypes.bool.isRequired,hide:a.a.PropTypes.func,children:a.a.PropTypes.node},componentDidMount:function(){window.addEventListener("keydown",this.closeMenuOnEsc)},componentWillUnmount:function(){window.removeEventListener("keydown",this.closeMenuOnEsc)},closeMenuOnEsc:function(e){this.props.visible&&27===e.keyCode&&this.props.hide()},render:function(){var e=this.props,t=e.visible,n=e.children,r=e.hide,o=e.className,i=E()(e,["visible","children","hide","className"]);return a.a.createElement(O.a,{out:!0},t&&a.a.createElement("div",b()({onClick:r,className:d()(o,"wgsa-overlay",{"wgsa-overlay--no-content":!n})},i),n))}}),w=a.a.createClass({displayName:"Component.react",propTypes:{actions:a.a.PropTypes.array,children:a.a.PropTypes.node,onClose:a.a.PropTypes.func,title:a.a.PropTypes.node},getDefaultProps:function(){return{actions:[]}},render:function(){return a.a.createElement("div",{className:d()("wgsa-modal-container",this.props.containerClassName)},a.a.createElement(C,{visible:this.props.isOpen,hide:this.props.onClose},a.a.createElement("aside",{className:d()("wgsa-modal",this.props.className)},a.a.createElement("header",{onClick:function(e){return e.stopPropagation()}},this.props.title,a.a.createElement("div",{className:"wgsa-modal-actions"},this.props.actions,a.a.createElement("button",{className:"mdl-button mdl-button--icon",title:"Close",onClick:this.props.onClose},a.a.createElement("i",{className:"material-icons"},"close")))),a.a.cloneElement(this.props.children,{onClick:function(e){return e.stopPropagation()}}))))}}),S=n(306),j=n(94),N=n(167),P=n(27),k=n(130),x=n(36),_=n(198);function I(e,t,n){return{action:{label:"Undo",onClick:n},message:a.a.createElement("span",null,a.a.createElement("strong",null,e," genome",1===e?"":"s")," ",t?"restored from":"moved to"," bin.")}}function T(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(r,a){var o=Object(N.getFilter)(a(),{stateKey:j.b}),i=function(){return r(T(e,!t,!1))};return Object(_.a)(e.map((function(e){return e.id})),t).then((function(a){var c=a.binned;return 0===c?Promise.resolve():(r(Object(x.i)(e)),Promise.all([r(Object(P.e)()),r(Object(P.h)(o)),r(Object(k.b)())]).then((function(){return n&&r(Object(m.c)(I(c,!t,i)))})))})).catch((function(){return r(Object(m.c)({message:"Something went wrong, please try again later."}))}))}}var A=Object(s.a)(null,(function(e,t){var n=t.genome;return{moveToBin:function(){return e(T([n],!0))},restoreFromBin:function(){return e(T([n],!1))}}}))((function(e){var t=e.genome,n=void 0===t?{}:t,r=E()(e,["genome"]);return"me"!==n.owner?null:a.a.createElement(S.a,b()({item:n},r))})),D=n(139),M=n(20),R=n(8);function F(e){for(var t in M.a)if(-1!==e.indexOf(t))return e;return"".concat(e,".fasta")}var z=function(e){var t=e.id,n=e.name;return a.a.createElement("a",{href:Object(R.c)("/download/genome/".concat(t,"/fasta")),download:F(n),target:"_blank",rel:"noopener",title:"Download genome",className:"wgsa-download-button mdl-button mdl-button--icon"},a.a.createElement(D.a,{color:M.b.COLOURS.PURPLE,label:".fa"}))},G=n(52),U=n(6),B=n.n(U),H=function(e){var t=e.complete,n=e.placeholder,r=e.children,o=e.wait,i=void 0===o?280:o,c=a.a.useState(t),l=B()(c,2),s=l[0],u=l[1];return a.a.useEffect((function(){setTimeout((function(){return u(!0)}),i)}),[]),a.a.createElement(O.a,null,t&&s?a.a.cloneElement(r,{key:"loaded"}):a.a.cloneElement(n,{key:"loading"}))},V=n(152),K=n(226),q=n(59),W=n(169),Y=n(224);var Z=Object(s.a)((function(e){return{brandingId:e.branding.id}}))((function(e){var t=e.brandingId;return Y.b[t]})),X={WGSA:"/images/WGSA.FINAL.svg",Pathogenwatch:"/images/pathogenwatch-saira-semicondensed.svg",PathogenDotWatch:"/images/pathogen-dot-watch-saira-caps.svg"};var Q=Object(s.a)((function(e){return{brandingId:e.branding.id}}))((function(e){var t=e.className,n=e.brandingId;return a.a.createElement("img",{className:t,src:X[n]})})),J={WGSA:"/images/WGSA.Icon.FINAL.svg",Pathogenwatch:"/images/pathogenwatch-icon.svg",PathogenDotWatch:"/images/pathogenwatch-icon.svg"};var $=Object(s.a)((function(e){return{brandingId:e.branding.id}}))((function(e){var t=e.className,n=e.brandingId;return a.a.createElement("img",{className:t,src:J[n]})})),ee=n(60),te=function(e){var t=e.analysis,n=t.speciator,r=t.serotype,o=void 0===r?{}:r;return n?"28901"===n.speciesId?a.a.createElement(V.a,{abbreviated:!0,speciesName:n.speciesName,subspecies:o.subspecies,serotype:o.value}):a.a.createElement(V.a,{speciesName:n.speciesName}):a.a.createElement("em",null,"Species prediction pending")},ne=function(e){var t=e.genome,n=t.analysis,r=void 0===n?{}:n,o=t.country,i=t.pmid,c=Object(q.c)(t);return a.a.createElement("div",{className:"wgsa-genome-report-summary"},a.a.createElement("header",null,a.a.createElement("h1",{title:t.name,className:"h2"},t.name),a.a.createElement(Q,null)),a.a.createElement("p",{className:"h6 pw-genome-report-summary-subtitle"},a.a.createElement(te,{analysis:r})),(c||o||i)&&a.a.createElement("dl",null,o&&a.a.createElement("div",{className:"pw-genome-report-metadata inline"},a.a.createElement("dt",null,"Country"),a.a.createElement("dd",null,Object(W.b)(o))),c&&a.a.createElement("div",{className:"pw-genome-report-metadata inline"},a.a.createElement("dt",null,"Date"),a.a.createElement("dd",null,c)),i&&a.a.createElement("div",{className:"pw-genome-report-metadata inline"},a.a.createElement("dt",null,"PMID"),a.a.createElement("dd",null,a.a.createElement(K.a,{pmid:i},i)))))},re=n(30),ae=n.n(re);var oe=function(e){var t,n=e.label,r=e.children,o=e.inline,i=e.className;return""!==(t=r)&&null!=t?a.a.createElement("div",{className:d()("pw-genome-report-metadata",i,{inline:o})},a.a.createElement("dt",null,n),a.a.createElement("dd",null,function(e){return a.a.isValidElement(e)?e:Array.isArray(e)?a.a.createElement("em",null,"Array"):"object"===ae()(e)?a.a.createElement("em",null,"Object"):e}(r))):null},ie=a.a.createClass({displayName:"VersionSwitcher",getInitialState:function(){var e=this.props,t=e.genome,n=e.taskName;return{version:t.analysis[n].__v}},getVersions:function(){var e=this,t=this.props,n=t.genome,r=t.taskName,o=n.tasks,i=void 0===o?[]:o,c=[],l=!0,s=!1,u=void 0;try{for(var m,p=function(){var t=m.value,n=t.task,o=t.version;if(n!==r)return"continue";c.push(a.a.createElement("button",{key:o,className:d()("wgsa-analysis-version",{"is-active":o===e.state.version}),onClick:function(){return e.setState({version:o})}},o))},f=i[Symbol.iterator]();!(l=(m=f.next()).done);l=!0)p()}catch(e){s=!0,u=e}finally{try{l||null==f.return||f.return()}finally{if(s)throw u}}return c},render:function(){var e=this.props,t=e.genome,n=e.taskName,r=this.props.component,o=this.getVersions(t,n);return a.a.createElement(a.a.Fragment,null,o.length>0&&a.a.createElement("aside",{className:"wgsa-genome-detail-version"},"Version: ",o),a.a.createElement(r,{result:t.analysis[n],genome:t}))}}),ce=function(e){var t=e.genome.userDefined,n=void 0===t?{}:t;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Metadata"),a.a.createElement("dl",{className:"grid"},Object.keys(n).map((function(e){return a.a.createElement(oe,{key:e,label:e},n[e])}))))},le=n(386),se=(n(994),n(22)),ue=n.n(se),de=n(23),me=n.n(de),pe=n(19),fe=n.n(pe),he=n(21),ge=n.n(he),ve=n(24),be=n.n(ve),ye=n(18),Ee=ye.a.pusher||{},Oe=Ee.key,Ce=Ee.cluster,we=null;function Se(e,t,n){return null===we&&(console.log("[Pusher] Connecting"),we=new Pusher(Oe,{cluster:Ce,encrypted:!0})),console.log("[Pusher] Subscribing to",e,t),we.subscribe(e).bind(t,n)}function je(e){console.log("[Pusher] Unsubscribing from",e),null!==we&&(we.unsubscribe(e),0===we.allChannels().length&&(console.log("[Pusher] Disconnecting"),we.disconnect(),we=null))}var Ne=a.a.createClass({displayName:"Notify.react",componentWillMount:function(){this.subscribe()},componentDidUpdate:function(){this.isSubscribed||this.subscribe()},componentWillUnmount:function(){var e=this.props.room,t=void 0===e?ye.a.clientId:e;t&&this.isSubscribed&&je(t)},isSubscribed:!1,subscribe:function(){var e=this.props,t=e.room,n=void 0===t?ye.a.clientId:t,r=e.topic,a=e.onMessage;n&&(Se(n,r,a),this.isSubscribed=!0)},render:function(){return this.props.children}}),Pe=a.a.createClass({displayName:"Poller.react",componentDidMount:function(){this.interval=setInterval(this.props.fn,1e3*this.props.interval),this.props.fn()},componentWillUnmount:function(){clearInterval(this.interval)},render:function(){return this.props.children||null}}),ke=(n(996),function(e){function t(e){var n;return ue()(this,t),(n=fe()(this,ge()(t).call(this,e))).state={},n}return be()(t,e),me()(t,[{key:"render",value:function(){var e=this.props.radius-this.props.strokeWidth/2,t=2*this.props.radius,n=2*this.props.radius,r="0 0 ".concat(t," ").concat(n),o=e*Math.PI*2,i=o-o*this.props.percentage/100;return a.a.createElement("svg",{className:"CircularProgress ".concat(this.props.percentage>=100?"CircularProgress-success":"").trim(),width:2*this.props.radius,height:2*this.props.radius,viewBox:r},a.a.createElement("circle",{className:"CircularProgress-Bg",cx:this.props.radius,cy:this.props.radius,r:e,strokeWidth:"".concat(this.props.strokeWidth,"px")}),a.a.createElement("circle",{className:"CircularProgress-Fg",cx:this.props.radius,cy:this.props.radius,r:e,stroke:this.props.colour||"#673c90",strokeWidth:"".concat(this.props.strokeWidth,"px"),style:{strokeDasharray:o,strokeDashoffset:i}}),a.a.createElement("text",{className:"CircularProgress-Text",x:this.props.radius,y:this.props.radius,dy:".4em",textAnchor:"middle"},"".concat(this.props.percentage.toFixed(this.props.decimalPlaces),"%")))}}]),t}(a.a.Component));ke.propTypes={decimalPlaces:a.a.PropTypes.number,percentage:a.a.PropTypes.number,radius:a.a.PropTypes.number,strokeWidth:a.a.PropTypes.number},ke.defaultProps={decimalPlaces:0,percentage:50,radius:50,strokeWidth:1};var xe=n(3),_e=n(247),Ie=n(110),Te={0:"#673c90",1:"#b199c7","-1":"#9eb8c0"},Le={0:"#9a6fc3",1:"#e3dbeb"};Le[-1]="#dae4e7";var Ae=function(e){return e.clustering||{}},De=function(e){return Ae(e).index||{}},Me=function(e){return Ae(e).selectedGenomeId},Re=function(e){return Ae(e).status},Fe=function(e){return Ae(e).threshold},ze=function(e){return Ae(e).triedBuilding},Ge=function(e){return Ae(e).edgeMatrix},Ue=function(e){return Ae(e).progress},Be=function(e){return Ae(e).allSchemeSts},He=function(e){return Ae(e).indexOfSelectedInAll},Ve=function(e){return Ae(e).taskId},Ke=function(e){return Ae(e).scheme},qe=function(e){return Ae(e).version},We=function(e){return Ae(e).nodes},Ye=Object(xe.createSelector)(Ge,(function(e){return(e||[]).filter((function(e){return 1===e})).length})),Ze=(Object(xe.createSelector)(Ye,(function(e){return e>0})),Object(xe.createSelector)(Fe,De,(function(e,t){var n=t.pi,r=t.lambda;if(0!==(n||[]).length)return Object(_e.a)(e,n,r)}))),Xe=Object(xe.createSelector)(He,Be,Ze,(function(e,t,n){if(n)return t.filter((function(t,r){return n[r]===n[e]}))})),Qe=Object(xe.createSelector)(Xe,We,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.map((function(e){return t[e]}))})),Je=Object(xe.createSelector)(Xe,(function(e){return(e||[]).length})),$e=Object(xe.createSelector)(He,Ze,Be,Xe,(function(e,t,n,r){if(t){var a=n[e];return r.indexOf(a)}})),et=Object(xe.createSelector)(He,Ze,Qe,(function(e,t,n){if(t){for(var r=[],a=0;a<n.length;a++){var o=n[a].ids;r.push(o)}return r}})),tt=Object(xe.createSelector)(Qe,(function(e){if(e)return e.map((function(e){return 0===e.ids.length?"Unnamed":1===e.ids.length?e.label:2===e.ids.length?"".concat(e.label," and one other"):"".concat(e.label," and ").concat(e.ids.length-1," others")}))})),nt=Object(xe.createSelector)(Ge,$e,(function(e,t){if(e){for(var n=[],r=0,a=0;r<e.length;a++){var o={neighbours:[],explored:!1,degrees:3};n.push(o);for(var i=0;i<a;i++){var c=n[i];e[r]&&(o.neighbours.push(c),c.neighbours.push(o)),r++}}for(var l=[n[t]],s=0;s<3;s++){var u=[],d=!0,m=!1,p=void 0;try{for(var h,g=l[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var v=h.value;v.explored||(u=[].concat(f()(u),f()(v.neighbours)),v.degrees=s,v.explored=!0)}}catch(e){m=!0,p=e}finally{try{d||null==g.return||g.return()}finally{if(m)throw p}}l=u}return n.map((function(e){return e.degrees}))}})),rt=Object(xe.createSelector)(nt,(function(e){return e?e.map((function(e){return Te[e]||Te[-1]})):void 0})),at=Object(xe.createSelector)(et,(function(e){return e?(t=e.map((function(e){return Math.pow(e.length,.3)})),n=Math.max.apply(Math,f()(t)),r=Math.min.apply(Math,f()(t)),0===(a=n-r)?t.map((function(){return.5})):t.map((function(e){return.5+(e-r)/a}))):void 0;var t,n,r,a})),ot=Object(xe.createSelector)(nt,(function(e){if(e){for(var t=[],n=1;n<e.length;n++)for(var r=0;r<n;r++){var a=Math.min(e[n],e[r]);t.push(a)}return t}})),it=Object(xe.createSelector)(ot,(function(e){return e?e.map((function(e){return Le[e]||Le[-1]})):void 0})),ct=f()(Array(Ie.d+1)).map((function(e,t){return t})),lt=function(){return ct},st=Object(xe.createSelector)(Be,We,(function(e,t){return t?e.map((function(e){return t[e].ids.length})):void 0})),ut=Object(xe.createSelector)(He,lt,De,st,(function(e,t,n,r){var a=n.pi,o=n.lambda;if(a)return t.map((function(t){for(var n=Object(_e.a)(t,a,o),i=n[e],c=0,l=0;l<r.length;l++)n[l]===i&&(c+=r[l]);return c}))})),dt=Object(xe.createSelector)(He,lt,De,(function(e,t,n){var r=n.pi,a=n.lambda;if(r)return t.map((function(t){var n=Object(_e.a)(t,r,a),o=n[e],i=0,c=!0,l=!1,s=void 0;try{for(var u,d=n[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){u.value===o&&i++}}catch(e){l=!0,s=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw s}}return i}))})),mt=Object(xe.createSelector)(lt,Fe,ut,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(t in e)return n[e.indexOf(t)]})),pt="#ccc",ft="#b199c7",ht="#673c90",gt=Object(xe.createSelector)(dt,Fe,(function(e,t){if(e){for(var n=[],r=[],a=0;a<e.length;a++){e[a]>Ie.b?(n.push(pt),r.push(pt)):(n.push(a===t?ht:ft),r.push(ht))}return{status:n,hover:r}}}));var vt=Object(xe.createSelector)(Re,Xe,We,$e,tt,at,rt,nt,(function(e){return Ae(e).nodeCoordinates||[]}),Ge,it,ot,(function(e,t,n,r,a,o,i,c,l,s,u,d){var m=[],p=[];if(!t)return{nodes:m,edges:p};var f=t.length;if(0===f)return{nodes:[],edges:[]};if(1===f){var h=t[0];return{nodes:[{label:a[0],_label:a[0],color:Te[0],genomeIds:n[h].ids,id:h,size:1,style:{colour:Te[0],shape:"circle"},zIndex:0,x:0,y:0}],edges:[]}}if(!s)return{nodes:m,edges:p};for(var g=0,v=0;v<f;v++){var b="COMPLETED_LAYOUT"===e&&v===r,y=t[v];m.push({label:b?a[v]:void 0,color:b?i[v]:void 0,hoverLabel:b?void 0:a[v],id:y,genomeIds:n[y].ids,size:o[v],style:{colour:i[v],shape:"circle"},zIndex:c[v],x:y in l?l[y].x:Math.cos(2*v*Math.PI/f),y:y in l?l[y].y:Math.sin(2*v*Math.PI/f)});for(var E=0;E<v;E++)s[g]&&p.push({id:"e".concat(g),source:t[E],target:t[v],style:{colour:u[g]},zIndex:d[g]}),g++}return m.sort((function(e,t){return t.zIndex-e.zIndex})),p.sort((function(e,t){return t.zIndex-e.zIndex})),{nodes:m,edges:p}})),bt=n(51),yt=function(e){function t(){var e;return ue()(this,t),(e=fe()(this,ge()(t).call(this))).getQueuePosition=function(){e.props.taskId&&Object(R.a)("GET","/api/genome/".concat(e.props.genomeId,"/clusters/position"),{taskId:e.props.taskId}).then((function(t){var n=t.position;return e.setState({position:n})})).catch((function(t){console.error(t),e.props.updateProgress({status:"FAILED"})}))},e.renderQueuePosition=function(){var t=e.state.position;return null===t?"Awaiting Queue Position":0===t?"Awaiting Progress":"Queue Position: ".concat(t)},e.state={position:null},e}return be()(t,e),me()(t,[{key:"render",value:function(){var e=this,t=this.props.taskId;return a.a.createElement(Ne,{room:t,topic:"clustering",onMessage:this.props.updateProgress},a.a.createElement("div",{className:"pw-cluster-content pw-cluster-progress"},this.props.progress>0?a.a.createElement(a.a.Fragment,null,a.a.createElement(ke,{percentage:this.props.progress,radius:"64",strokeWidth:"12",decimalPlaces:1}),a.a.createElement("p",{className:"wgsa-blink"},a.a.createElement("strong",null,"Running"))):a.a.createElement(a.a.Fragment,null,t&&a.a.createElement(Pe,{interval:10,fn:function(){return e.getQueuePosition()}}),a.a.createElement("strong",null,"Job Queued"),a.a.createElement("p",{className:"wgsa-blink"},this.renderQueuePosition()))))}}]),t}(a.a.Component);var Et=Object(s.a)((function(e){return{genomeId:Me(e),progress:Ue(e),taskId:Ve(e)}}),(function(e){return{updateProgress:function(t){return e(Object(bt.p)(t))}}}))(yt),Ot=n(2),Ct=n.n(Ot);function wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var St=Object(s.a)((function(e){return{genomeId:Me(e)}}),null,(function(e,t,n){var r=e.genomeId,a=t.dispatch;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wt(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{onClick:function(){return a(Object(bt.i)(r))}})}))((function(e){var t=e.onClick,n=e.children,r=e.primary;return a.a.createElement("button",{className:d()("mdl-button mdl-button--raised",{"mdl-button--colored":r}),onClick:t},n)})),jt=function(){return a.a.createElement("div",{className:"pw-cluster-content"},a.a.createElement("p",null,"Clusters have not been calculated for this genome."),a.a.createElement(St,{primary:!0},"Run Clustering"))},Nt=function(){return a.a.createElement("div",{className:"pw-cluster-content"},a.a.createElement("p",null,"Something went wrong 😞"),a.a.createElement(St,null,"Try Again"))},Pt=a.a.createClass({displayName:"Clustering",componentDidMount:function(){this.update()},componentDidUpdate:function(e){this.update(e)},update:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.props;"INITIAL_STATUS"===t.status&&"INITIAL_STATUS"!==e.status?t.fetch(this.props.selectedGenomeId):"BUILT_CLUSTERS"===t.status&&"BUILT_CLUSTERS"!==e.status?t.fetch(this.props.selectedGenomeId):"FETCHED_CLUSTERS"===t.status&&"FETCHED_CLUSTERS"!==e.status&&(t.numberOfNodesInCluster>1?t.fetchEdgeMatrix(t):t.skipLayout(this.props.graph.nodes))},render:function(){switch(this.props.status){case"INITIAL_STATUS":return a.a.createElement(jt,null);case"FETCHING_CLUSTERS":return a.a.createElement("div",{className:"pw-cluster-content"},a.a.createElement("p",{className:"wgsa-blink"},"Checking Status"));case"BUILDING_CLUSTERS":case"BUILT_CLUSTERS":return a.a.createElement(Et,null);case"FETCHED_CLUSTERS":case"FETCHING_EDGES":case"FETCHED_EDGES":case"RUNNING_LAYOUT":case"COMPLETED_LAYOUT":case"SKIP_NETWORK":return this.props.children;case"FAILED_FETCHING_CLUSTERS":return this.props.triedBuilding?a.a.createElement(Nt,null):a.a.createElement(jt,null);case"FAILED_BUILDING_CLUSTERS":case"FAILED_FETCHING_EDGES":default:return a.a.createElement(Nt,null)}}});var kt=Object(s.a)((function(e){return{clusterSts:Xe(e),graph:vt(e),numberOfNodesInCluster:Je(e),selectedGenomeId:Me(e),status:Re(e),threshold:Fe(e),triedBuilding:ze(e),scheme:Ke(e),version:qe(e)}}),(function(e){return{build:function(t){return e(bt.i(t))},fetch:function(t){return e(bt.j(t))},fetchEdgeMatrix:function(t){var n=t.selectedGenomeId,r=t.scheme,a=t.version,o=t.threshold,i=t.clusterSts;return e(bt.k(n,r,a,o,i))},skipLayout:function(t){return e(bt.m(t))}}}))(Pt),xt=(n(998),n(1)),_t=n.n(xt),It=(n(1e3),n(1004),n(501)),Tt=n.n(It),Lt=n(242),At={down:"top",up:"bottom"};function Dt(e,t,n){var r=e.top,a=void 0===r?0:r,o=e.height,i=void 0===o?0:o;return{maxHeight:"up"===n?"".concat(a-40,"px"):"calc(100vh - ".concat(a+i+40,"px)"),transformOrigin:"".concat(At[n]," ").concat(t)}}var Mt=function(e){function t(e){var n;return ue()(this,t),(n=fe()(this,ge()(t).call(this,e))).handleOutClick=function(e){var t=n.buttonRef.current;t&&t.contains(e.target)||n.props.toggle()},n.handleKeyUp=function(e){27===e.keyCode&&n.props.toggle()},n.buttonRef=a.a.createRef(),n}return be()(t,e),me()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.align,r=void 0===n?"left":n,o=t.button,i=t.caret,c=void 0!==i&&i,l=t.children,s=t.className,u=t.direction,m=void 0===u?"down":u,p=t.header,f=t.open,h=void 0!==f&&f,g=t.style,v=t.toggle,b=t.toggleOnClick,y=void 0===b||b,E=this.el?this.el.getBoundingClientRect():{},O=E.height,C=void 0===O?0:O;return a.a.createElement("div",{className:d()("libmr-Menu",{open:h,caret:c},s),onKeyUp:h?function(t){return e.handleKeyUp(t)}:null,ref:function(t){e.el=t},style:g,tabIndex:"-1"},a.a.cloneElement(o,{ref:this.buttonRef,onClick:v}),a.a.createElement(Tt.a,{className:"libmr-RelativePortal",component:"div",right:"right"===r?0:void 0,bottom:"up"===m?C:void 0,onOutClick:h?function(t){return e.handleOutClick(t)}:null},a.a.createElement(Lt.a,{visible:h,removeOnLeave:!0,motionName:"libmr"},(function(e){return a.a.createElement("div",{className:d()("libmr-Menu-element",r,m,{caret:c},s,e.className),style:Dt(E,r,m),tabIndex:"-1"},p,a.a.createElement("div",{className:"libmr-Menu-content",onClick:y?v:null},l))}))))}}]),t}(a.a.Component);Mt.propTypes={active:_t.a.bool,align:_t.a.oneOf(["left","right"]),button:_t.a.node,caret:_t.a.bool,children:_t.a.node,className:_t.a.string,direction:_t.a.oneOf(["up","down"]),header:_t.a.node,open:_t.a.bool,style:_t.a.object,toggle:_t.a.func,toggleOnClick:_t.a.bool};var Rt=Mt;function Ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var zt=function(e){return function(t){var n=a.a.useState(!1),r=B()(n,2),o=r[0],i=r[1];return a.a.createElement(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ft(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{open:o,toggle:function(){return i(!o)}}))}},Gt=(n(1007),a.a.forwardRef((function(e,t){var n=e.children,r=e.className,o=e.onClick,i=e.title;return a.a.createElement("button",{className:d()("mdc-icon-button",r),onClick:o,ref:t,title:i},n)})));Gt.propTypes={children:_t.a.node,className:_t.a.string,onClick:_t.a.func,title:_t.a.string};var Ut=Gt,Bt=(n(1010),a.a.forwardRef((function(e,t){var n=e.active,r=e.children,o=e.className,i=e.clear,c=e.direction,l=void 0===c?"down":c,s=e.label,u=void 0===s?r:s,m=e.onClick,p=e.open,f=e.title;return a.a.createElement("span",{ref:t,role:"button",className:d()("libmr-MenuButton",{active:n,open:p},o),onClick:m,title:f},"string"==typeof u?a.a.createElement("span",null,u):u,n&&i?a.a.createElement("button",{className:"libmr-MenuButton-clear",onClick:i},a.a.createElement("i",{className:"material-icons",onClick:i},"cancel")):a.a.createElement("i",{className:"material-icons"},"arrow_drop_",l))})));Bt.propTypes={active:_t.a.bool,children:_t.a.node,className:_t.a.string,clear:_t.a.func,direction:_t.a.oneOf(["down","up"]),label:_t.a.node,onClick:_t.a.func,open:_t.a.bool,title:_t.a.string};var Ht=Bt,Vt=(n(1012),function(e){return a.a.createElement(Lt.a,{visible:e.in,removeOnLeave:!0,motionName:"libmr-Fade"},(function(t){return a.a.cloneElement(e.children,{className:d()(e.children.props.className,t.className)})}))});Vt.propTypes={children:_t.a.element,in:_t.a.bool};var Kt=Vt,qt=function(e){function t(){var e,n,r;ue()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return fe()(r,(n=r=fe()(this,(e=ge()(t)).call.apply(e,[this].concat(o))),r.state={isActive:!1},n))}return be()(t,e),me()(t,[{key:"componentDidUpdate",value:function(e,t){this.state.isActive!==t.isActive&&(this.state.isActive?this.searchInput.focus():this.props.value&&this.props.onChange())}},{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Ut,{onClick:function(){return e.setState({isActive:!e.state.isActive})}},a.a.createElement("i",{className:"material-icons"},"search")),a.a.createElement(Kt,{in:this.state.isActive},a.a.createElement("input",{className:"libmr-search-input",type:"text",placeholder:"Search",value:this.props.value,onChange:function(t){return e.props.onChange(t.target.value)},ref:function(t){e.searchInput=t}})))}}]),t}(a.a.Component);function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}qt.displayName="Search",qt.propTypes={value:_t.a.string,onChange:_t.a.func};var Yt=function(e){function t(){var e,n,r;ue()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return fe()(r,(n=r=fe()(this,(e=ge()(t)).call.apply(e,[this].concat(o))),r.handleClear=function(e){r.props.open||e.stopPropagation(),r.props.clear()},n))}return be()(t,e),me()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.active,r=t.className,o=t.header,i=void 0===o||o,c=t.open,l=t.search,s=t.size,u=void 0===s?"standard":s,m=t.summary,p=t.title,f=t.toggle,h=t.toggleOnClick,g=void 0!==h&&h,v="active"in this.props?n:!!m;return a.a.createElement(Rt,b()({},this.props,{active:v,className:d()("libmr-ControlsMenu",r,u,{active:v}),header:i&&a.a.createElement("header",null,a.a.createElement("h3",null,p),l&&a.a.createElement(qt,l),a.a.createElement(Ut,{onClick:f},a.a.createElement("i",{className:"material-icons"},"close"))),button:a.a.createElement(Ht,{title:p,open:c,active:v,label:m||p,clear:v?function(t){return e.handleClear(t)}:null}),toggleOnClick:g}))}}]),t}(a.a.Component);Yt.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Rt.propTypes,{clear:_t.a.func,header:_t.a.bool,search:_t.a.shape({value:_t.a.string,onChange:_t.a.func}),size:_t.a.oneOf(["standard","narrow"]),summary:_t.a.node,title:_t.a.string});var Zt=zt(Yt),Xt=(n(1014),n(192)),Qt=n.n(Xt),Jt=n(502),$t=n.n(Jt),en=function(e){var t=e.id,n=E()(e,["id"]);return a.a.createElement(Qt.a,{className:d()("libmr-ToggleSwitch",n.className,{"is-checked":n.isChecked}),id:t},a.a.createElement("label",null,n.label),a.a.createElement($t.a,{checked:n.isChecked,onChange:function(){return n.onChange(!n.isChecked)}}))};en.propTypes={className:_t.a.string,id:_t.a.string,isChecked:_t.a.bool,label:_t.a.node,onChange:_t.a.func};var tn=en;n(1018);function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var an=function(e){var t=e.id,n=E()(e,["id"]);return a.a.createElement("div",{className:d()("libmr-Slider",n.className),style:rn({"--min":n.min,"--max":n.max,"--val":n.value},n.style)},a.a.createElement("label",{htmlFor:t},n.label,": ",n.displayValue||n.value,n.unit),a.a.createElement("input",{id:t,type:"range",min:n.min,max:n.max,value:n.value,onChange:function(e){return n.onChange(parseInt(e.target.value,10))}}),a.a.createElement("span",{className:"libmr-Slider-focus-ring"}))};an.propTypes={className:_t.a.string,displayValue:_t.a.number,id:_t.a.string.isRequired,label:_t.a.node.isRequired,max:_t.a.number.isRequired,min:_t.a.number.isRequired,onChange:_t.a.func.isRequired,unit:_t.a.string,style:_t.a.object,value:_t.a.number.isRequired};var on=an,cn=function(e){function t(){var e,n,r;ue()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return fe()(r,(n=r=fe()(this,(e=ge()(t)).call.apply(e,[this].concat(o))),r.state={isOpen:!1},n))}return be()(t,e),me()(t,[{key:"render",value:function(){var e=this,t=this.props;return a.a.createElement(Zt,{className:"mr-menu mr-tree-styles-menu",open:this.state.isOpen,title:"Nodes & Labels",toggle:function(){return e.setState({isOpen:!e.state.isOpen})}},a.a.createElement(on,{label:"Node Size",onChange:t.onNodeSizeChange,min:t.minNodeSize,max:t.maxNodeSize,value:t.nodeSize}),a.a.createElement(on,{label:"Label Size",onChange:t.onLabelSizeChange,min:t.minLabelSize,max:t.maxLabelSize,value:t.labelSize}),a.a.createElement("hr",null),a.a.createElement(tn,{className:"mr-toggle-switch",label:"Show Nodes",isChecked:t.showNodes,onChange:function(e){return t.onShowNodesChange(e)}}),a.a.createElement(tn,{className:"mr-toggle-switch",label:"Show Labels",isChecked:t.showLabels,onChange:function(e){return t.onShowLabelsChange(e)}}))}}]),t}(a.a.Component);cn.displayName="NetworkControlsMenu",cn.propTypes={labelSize:_t.a.number.isRequired,maxLabelSize:_t.a.number.isRequired,maxNodeSize:_t.a.number.isRequired,minLabelSize:_t.a.number.isRequired,minNodeSize:_t.a.number.isRequired,nodeSize:_t.a.number.isRequired,onLabelSizeChange:_t.a.func.isRequired,onNodeSizeChange:_t.a.func.isRequired,onShowLabelsChange:_t.a.func,onShowNodesChange:_t.a.func,showLabels:_t.a.bool,showNodes:_t.a.bool};var ln=n(503),sn=n.n(ln);n(1020),n(1022);function un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var dn=function(e){var t=e.className,n=e.active,r=E()(e,["className","active"]);return a.a.createElement(Ut,b()({},r,{className:d()("libmr-ControlsButton",{active:n},t)}))};dn.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?un(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Ut.props,{active:_t.a.bool});var mn=dn,pn=(n(1024),function(e){var t=e.children,n=e.className,r=e.onZoomIn,o=e.onZoomOut;return a.a.createElement("div",{className:d()("libmr-ZoomControls",n),draggable:"false"},a.a.createElement("div",{className:"libmr-ZoomControls-button",title:"Zoom in",onClick:r},a.a.createElement("i",{className:"libmr-ZoomControls-icon material-icons"},"zoom_in")),a.a.createElement("div",{className:"libmr-ZoomControls-divider"}),t?a.a.createElement(a.a.Fragment,null,t,a.a.createElement("div",{className:"libmr-ZoomControls-divider"})):null,a.a.createElement("div",{className:"libmr-ZoomControls-button",title:"Zoom out",onClick:o},a.a.createElement("i",{className:"libmr-ZoomControls-icon material-icons"},"zoom_out")))});pn.propTypes={className:_t.a.string,children:_t.a.node,onZoomIn:_t.a.func.isRequired,onZoomOut:_t.a.func.isRequired};var fn=pn,hn=function(e){return a.a.createElement("div",{className:d()("libmr-Panel",e.className),style:e.style},e.children,a.a.createElement(mn,{className:"libmr-Panel-controls-toggler",active:e.controlsVisible,title:e.controlsVisible?"Hide controls":"Show controls",onClick:function(){return e.onControlsVisibleChange(!e.controlsVisible)}},a.a.createElement("i",{className:"material-icons"},"tune")),a.a.createElement(Kt,{in:e.controlsVisible},a.a.createElement("div",{className:"libmr-Panel-primary-controls"},e.primaryControls)),a.a.createElement(Kt,{in:e.controlsVisible},a.a.createElement("div",{className:"libmr-Panel-secondary-controls"},e.secondaryControls)),!0===e.zoomControls&&a.a.createElement(Kt,{in:e.controlsVisible},a.a.createElement(fn,{onZoomIn:function(){return e.onZoomChange(1)},onZoomOut:function(){return e.onZoomChange(-1)}})),a.a.isValidElement(e.zoomControls)&&a.a.createElement(Kt,{in:e.controlsVisible},e.zoomControls))};hn.propTypes={className:_t.a.string,controlsVisible:_t.a.bool,style:_t.a.object,children:_t.a.node,primaryControls:_t.a.node,secondaryControls:_t.a.node,zoomControls:_t.a.oneOfType([_t.a.bool,_t.a.node]),onZoomChange:_t.a.func,onControlsVisibleChange:_t.a.func},hn.defaultProps={zoomControls:!0};var gn=hn,vn=function(e){var t=a.a.useState(!1),n=B()(t,2),r=n[0],o=n[1];return a.a.createElement(gn,b()({},e,{controlsVisible:r,onControlsVisibleChange:o}))},bn=function(e){return a.a.createElement(mn,{active:e.active,title:e.title||(e.active?"Disable lasso filter":"Activate lasso filter"),onClick:e.onClick},a.a.createElement("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("g",{opacity:"0.375"},a.a.createElement("path",{d:"M3.67997 3.667L3.80397 2.67472L2.32031 2.48932L2.71554 3.93133L3.67997 3.667ZM7.69982 18.3337L6.73539 18.598L6.9941 19.5419L7.94335 19.3036L7.69982 18.3337ZM18.3202 15.667L18.5637 16.6369L19.1078 16.5003L19.2748 15.9647L18.3202 15.667ZM14.474 4.00805L3.80397 2.67472L3.55598 4.65928L14.226 5.99262L14.474 4.00805ZM2.71554 3.93133L6.73539 18.598L8.66425 18.0693L4.6444 3.40267L2.71554 3.93133ZM7.94335 19.3036L18.5637 16.6369L18.0767 14.6971L7.45629 17.3638L7.94335 19.3036ZM19.2748 15.9647L21.9547 7.37215L20.0454 6.77667L17.3656 15.3693L19.2748 15.9647Z",fill:"black"})),a.a.createElement("path",{d:"M3.6799 6.33333C5.15997 6.33333 6.3598 5.13943 6.3598 3.66667C6.3598 2.19391 5.15997 1 3.6799 1C2.19983 1 1 2.19391 1 3.66667C1 5.13943 2.19983 6.33333 3.6799 6.33333Z",fill:"black"}),a.a.createElement("path",{d:"M14.3499 7.66634C15.83 7.66634 17.0298 6.47244 17.0298 4.99968C17.0298 3.52692 15.83 2.33301 14.3499 2.33301C12.8698 2.33301 11.67 3.52692 11.67 4.99968C11.67 6.47244 12.8698 7.66634 14.3499 7.66634Z",fill:"black"}),a.a.createElement("path",{d:"M7.69992 21.0003C9.17999 21.0003 10.3798 19.8064 10.3798 18.3337C10.3798 16.8609 9.17999 15.667 7.69992 15.667C6.21985 15.667 5.02002 16.8609 5.02002 18.3337C5.02002 19.8064 6.21985 21.0003 7.69992 21.0003Z",fill:"black"}),a.a.createElement("path",{d:"M18.3199 18.3333C19.8 18.3333 20.9998 17.1394 20.9998 15.6667C20.9998 14.1939 19.8 13 18.3199 13C16.8398 13 15.64 14.1939 15.64 15.6667C15.64 17.1394 16.8398 18.3333 18.3199 18.3333Z",fill:"black"})))};bn.propTypes=mn.propTypes;var yn=bn,En=n(114),On=function(e,t){for(var n=e.x,r=e.y,a=!1,o=0,i=t.length-1;o<t.length;i=o++){var c=t[o].x,l=t[o].y,s=t[i].x,u=t[i].y;l>r!=u>r&&n<(s-c)*(r-l)/(u-l)+c&&(a=!a)}return a};function Cn(e,t,n){var r=Object.assign({clearBeforeDraw:!1,dotsStyle:"#383838",isActive:!1,lineWidth:2,path:null,pointFillStyle:"#ffffff",pointSize:14,pointStrokeStyle:"#000000",strokeStyle:En.b.primaryColour,draw:function(){var e=t.getContext("2d");r.clearBeforeDraw&&e.clearRect(0,0,t.width,t.height);var n=r.internalPath||r.path;if(r.isActive&&Array.isArray(n)&&n.length>0){e.strokeStyle=r.strokeStyle,e.lineWidth=1*r.lineWidth,e.beginPath();var a=r.translateToCanvas(n);!function(e,t){e.moveTo(t[0].x,t[0].y);for(var n=1;n<t.length;n++)e.lineTo(t[n].x,t[n].y);e.stroke()}(e,a),e.lineWidth=1,e.fillStyle=r.pointFillStyle,e.strokeStyle=r.pointStrokeStyle,function(e,t,n,r){for(var a=0;a<t.length-(r?1:0);a++)e.fillRect(t[a].x-n,t[a].y-n,2*n,2*n),e.strokeRect(t[a].x-n+e.lineWidth,t[a].y-n+e.lineWidth,2*n-e.lineWidth,2*n-e.lineWidth)}(e,a,1*r.pointSize/2,!!r.path),e.closePath()}},destroy:function(){e.removeEventListener("mousedown",i),e.removeEventListener("mouseup",c)},isPointInside:function(e,t){return On(e,t||r.path)},onPathChange:function(e){r.setPath(e),r.draw()},onRedrawRequested:function(){r.draw(),r.updateCanvas()},setActive:function(e){r.isActive=e,r.updateCanvas()},setPath:function(e){r.path=e,r.internalPath=null,r.updateCanvas()},translateToCanvas:function(e){return e},translateFromCanvas:function(e,t){return{x:e,y:t}},updateCanvas:function(){r.isActive?Array.isArray(r.path)?(e.style.cursor=null,e.title="Click outside the path to clear"):(e.style.cursor="crosshair",e.title="Click to draw points"):(e.style.cursor=null,e.title="",r.internalPath&&(r.internalPath=null))}},n),a=null,o=null,i=function(e){a=e.offsetX,o=e.offsetY},c=function(e){Math.abs(a-e.offsetX)<5&&Math.abs(o-e.offsetY)<5&&function(e){if(r.isActive){var t=r.translateFromCanvas(e.offsetX,e.offsetY);if(Array.isArray(r.path))On(t,r.path)||r.onPathChange(null);else{if(r.internalPath||(r.internalPath=[]),r.internalPath.length>0){var n=r.pointSize,a=r.translateFromCanvas(e.offsetX-n,e.offsetY-n),o=r.translateFromCanvas(e.offsetX+n,e.offsetY+n);if(o.x>=r.internalPath[0].x&&a.x<=r.internalPath[0].x&&o.y>=r.internalPath[0].y&&a.y<=r.internalPath[0].y){var i=r.internalPath;return i.push(i[0]),r.internalPath=null,void r.onPathChange(i)}}r.internalPath.push(t),r.onRedrawRequested&&r.onRedrawRequested()}}}(e),a=null,o=null};return e.addEventListener("mousedown",i,!1),e.addEventListener("mouseup",c,!1),r.updateCanvas(),r}var wn=function(e,t){var n=e.renderers[0],r=n.domElements.mouse;n.initDOM("canvas","lasso");var a=n.domElements.lasso;r.parentElement.insertBefore(a,r);var o=n.width,i=n.height;n.width=0,n.height=0,n.resize(o,i);var c=Cn(r,a,{clearBeforeDraw:!0,isActive:t.isActive,path:t.path,onPathChange:t.onPathChange,translateToCanvas:function(t){return function(e,t){var n=Math.cos(e.camera.angle)/e.camera.ratio,r=Math.sin(e.camera.angle)/e.camera.ratio,a=(e.renderers[0].width||0)/2-e.camera.x*n-e.camera.y*r,o=(e.renderers[0].height||0)/2-e.camera.y*n+e.camera.x*r,i=sigma.utils.getBoundaries(e.graph,"",!0),c=i.minX,l=i.minY,s=i.maxX,u=i.maxY,d=e.renderers[0].width,m=e.renderers[0].height,p="outside"===e.settings("scalingMode")?Math.max(d/Math.max(s-c,1),m/Math.max(u-l,1)):Math.min(d/Math.max(s-c,1),m/Math.max(u-l,1)),f=(e.settings("rescaleIgnoreSize")?0:(e.settings("maxNodeSize")||i.sizeMax)/p)+(e.settings("sideMargin")||0);return s+=f,c-=f,u+=f,l-=f,p="outside"===e.settings("scalingMode")?Math.max(d/Math.max(s-c,1),m/Math.max(u-l,1)):Math.min(d/Math.max(s-c,1),m/Math.max(u-l,1)),t.map((function(e){var t=(e.x-(s+c)/2)*p,i=(e.y-(u+l)/2)*p;return{x:t*n+i*r+a,y:i*n+t*r+o}}))}(e,t)},translateFromCanvas:function(t,n){return function(e,t,n){var r=Math.cos(e.camera.angle)/e.camera.ratio,a=Math.sin(e.camera.angle)/e.camera.ratio,o=(t-((e.renderers[0].width||0)/2-e.camera.x*r-e.camera.y*a))/r,i=(n-((e.renderers[0].height||0)/2-e.camera.y*r+e.camera.x*a))/r,c=sigma.utils.getBoundaries(e.graph,"",!0),l=c.minX,s=c.minY,u=c.maxX,d=c.maxY,m=e.renderers[0].width,p=e.renderers[0].height,f="outside"===e.settings("scalingMode")?Math.max(m/Math.max(u-l,1),p/Math.max(d-s,1)):Math.min(m/Math.max(u-l,1),p/Math.max(d-s,1)),h=(e.settings("rescaleIgnoreSize")?0:(e.settings("maxNodeSize")||c.sizeMax)/f)+(e.settings("sideMargin")||0);return u+=h,l-=h,d+=h,s-=h,{x:o/(f="outside"===e.settings("scalingMode")?Math.max(m/Math.max(u-l,1),p/Math.max(d-s,1)):Math.min(m/Math.max(u-l,1),p/Math.max(d-s,1)))+(u+l)/2,y:i/f+(d+s)/2}}(e,t,n)},onRedrawRequested:function(){c.draw(),c.updateCanvas()}});return e.renderers[0].bind("render",c.draw),c},Sn=n(504),jn=n.n(Sn),Nn=["scene","mouse","lasso"];var Pn=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/,kn={ad:"🇦🇩",ae:"🇦🇪",af:"🇦🇫",ag:"🇦🇬",ai:"🇦🇮",al:"🇦🇱",am:"🇦🇲",ao:"🇦🇴",aq:"🇦🇶",ar:"🇦🇷",as:"🇦🇸",at:"🇦🇹",au:"🇦🇺",aw:"🇦🇼",ax:"🇦🇽",az:"🇦🇿",ba:"🇧🇦",bb:"🇧🇧",bd:"🇧🇩",be:"🇧🇪",bf:"🇧🇫",bg:"🇧🇬",bh:"🇧🇭",bi:"🇧🇮",bj:"🇧🇯",bl:"🇧🇱",bm:"🇧🇲",bn:"🇧🇳",bo:"🇧🇴",bq:"🇧🇶",br:"🇧🇷",bs:"🇧🇸",bt:"🇧🇹",bv:"🇧🇻",bw:"🇧🇼",by:"🇧🇾",bz:"🇧🇿",ca:"🇨🇦",cc:"🇨🇨",cd:"🇨🇩",cf:"🇨🇫",cg:"🇨🇬",ch:"🇨🇭",ci:"🇨🇮",ck:"🇨🇰",cl:"🇨🇱",cm:"🇨🇲",cn:"🇨🇳",co:"🇨🇴",cr:"🇨🇷",cu:"🇨🇺",cv:"🇨🇻",cw:"🇨🇼",cx:"🇨🇽",cy:"🇨🇾",cz:"🇨🇿",de:"🇩🇪",dj:"🇩🇯",dk:"🇩🇰",dm:"🇩🇲",do:"🇩🇴",dz:"🇩🇿",ec:"🇪🇨",ee:"🇪🇪",eg:"🇪🇬",eh:"🇪🇭",er:"🇪🇷",es:"🇪🇸",et:"🇪🇹",eu:"🇪🇺",fi:"🇫🇮",fj:"🇫🇯",fk:"🇫🇰",fm:"🇫🇲",fo:"🇫🇴",fr:"🇫🇷",ga:"🇬🇦",gb:"🇬🇧",gd:"🇬🇩",ge:"🇬🇪",gf:"🇬🇫",gg:"🇬🇬",gh:"🇬🇭",gi:"🇬🇮",gl:"🇬🇱",gm:"🇬🇲",gn:"🇬🇳",gp:"🇬🇵",gq:"🇬🇶",gr:"🇬🇷",gs:"🇬🇸",gt:"🇬🇹",gu:"🇬🇺",gw:"🇬🇼",gy:"🇬🇾",hk:"🇭🇰",hm:"🇭🇲",hn:"🇭🇳",hr:"🇭🇷",ht:"🇭🇹",hu:"🇭🇺",id:"🇮🇩",ie:"🇮🇪",il:"🇮🇱",im:"🇮🇲",in:"🇮🇳",io:"🇮🇴",iq:"🇮🇶",ir:"🇮🇷",is:"🇮🇸",it:"🇮🇹",je:"🇯🇪",jm:"🇯🇲",jo:"🇯🇴",jp:"🇯🇵",ke:"🇰🇪",kg:"🇰🇬",kh:"🇰🇭",ki:"🇰🇮",km:"🇰🇲",kn:"🇰🇳",kp:"🇰🇵",kr:"🇰🇷",kw:"🇰🇼",ky:"🇰🇾",kz:"🇰🇿",la:"🇱🇦",lb:"🇱🇧",lc:"🇱🇨",li:"🇱🇮",lk:"🇱🇰",lr:"🇱🇷",ls:"🇱🇸",lt:"🇱🇹",lu:"🇱🇺",lv:"🇱🇻",ly:"🇱🇾",ma:"🇲🇦",mc:"🇲🇨",md:"🇲🇩",me:"🇲🇪",mf:"🇲🇫",mg:"🇲🇬",mh:"🇲🇭",mk:"🇲🇰",ml:"🇲🇱",mm:"🇲🇲",mn:"🇲🇳",mo:"🇲🇴",mp:"🇲🇵",mq:"🇲🇶",mr:"🇲🇷",ms:"🇲🇸",mt:"🇲🇹",mu:"🇲🇺",mv:"🇲🇻",mw:"🇲🇼",mx:"🇲🇽",my:"🇲🇾",mz:"🇲🇿",na:"🇳🇦",nc:"🇳🇨",ne:"🇳🇪",nf:"🇳🇫",ng:"🇳🇬",ni:"🇳🇮",nl:"🇳🇱",no:"🇳🇴",np:"🇳🇵",nr:"🇳🇷",nu:"🇳🇺",nz:"🇳🇿",om:"🇴🇲",pa:"🇵🇦",pe:"🇵🇪",pf:"🇵🇫",pg:"🇵🇬",ph:"🇵🇭",pk:"🇵🇰",pl:"🇵🇱",pm:"🇵🇲",pn:"🇵🇳",pr:"🇵🇷",ps:"🇵🇸",pt:"🇵🇹",pw:"🇵🇼",py:"🇵🇾",qa:"🇶🇦",re:"🇷🇪",ro:"🇷🇴",rs:"🇷🇸",ru:"🇷🇺",rw:"🇷🇼",sa:"🇸🇦",sb:"🇸🇧",sc:"🇸🇨",sd:"🇸🇩",se:"🇸🇪",sg:"🇸🇬",sh:"🇸🇭",si:"🇸🇮",sj:"🇸🇯",sk:"🇸🇰",sl:"🇸🇱",sm:"🇸🇲",sn:"🇸🇳",so:"🇸🇴",sr:"🇸🇷",ss:"🇸🇸",st:"🇸🇹",sv:"🇸🇻",sx:"🇸🇽",sy:"🇸🇾",sz:"🇸🇿",tc:"🇹🇨",td:"🇹🇩",tf:"🇹🇫",tg:"🇹🇬",th:"🇹🇭",tj:"🇹🇯",tk:"🇹🇰",tl:"🇹🇱",tm:"🇹🇲",tn:"🇹🇳",to:"🇹🇴",tr:"🇹🇷",tt:"🇹🇹",tv:"🇹🇻",tw:"🇹🇼",tz:"🇹🇿",ua:"🇺🇦",ug:"🇺🇬",um:"🇺🇲",us:"🇺🇸",uy:"🇺🇾",uz:"🇺🇿",va:"🇻🇦",vc:"🇻🇨",ve:"🇻🇪",vg:"🇻🇬",vi:"🇻🇮",vn:"🇻🇳",vu:"🇻🇺",wf:"🇼🇫",ws:"🇼🇸",ye:"🇾🇪",yt:"🇾🇹",za:"🇿🇦",zm:"🇿🇲",zw:"🇿🇼"},xn=n(43),_n=function(e,t,n,r,a){e.strokeStyle=a;var o=e.lineWidth;e.lineWidth=xn.a.HALO_WIDTH,e.beginPath(),e.arc(t,n,r+xn.a.NODE_RADIUS+Math.floor(r/xn.a.NODE_RADIUS/2),0,2*Math.PI,!1),e.closePath(),e.stroke(),e.lineWidth=o},In={Degrees0:0,Degrees90:.5*Math.PI,Degrees180:Math.PI,Degrees270:1.5*Math.PI,Degrees360:2*Math.PI},Tn=document.createElement("canvas");Tn.width=14,Tn.height=14;var Ln=Tn.getContext("2d");Ln.lineWidth=1,Ln.strokeStyle=xn.a.COLOUR_DARK;var An=document.createElement("canvas");An.width=4,An.height=4;An.getContext("2d");var Dn=document.createElement("canvas").getContext("2d");function Mn(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,o=r,i=.5*o,c=Math.PI/a,l=Math.PI/2*3;e.moveTo(t,n-o);for(var s=0;s<a;s++)e.lineTo(t+Math.cos(l)*o,n+Math.sin(l)*o),l+=c,e.lineTo(t+Math.cos(l)*i,n+Math.sin(l)*i),l+=c;e.lineTo(t,n-o)}function Rn(e,t,n,r,a){e.moveTo(t+r*Math.cos(0),n+r*Math.sin(0));for(var o=1;o<=a;o+=1)e.lineTo(t+r*Math.cos(2*o*Math.PI/a),n+r*Math.sin(2*o*Math.PI/a))}Dn.font='14px "Roboto", "Helvetica", "Arial", sans-serif';var Fn=function(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"circle",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#bababa",i=arguments.length>6?arguments[6]:void 0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:xn.a.NODE_BORDER_WIDTH,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:xn.a.NODE_BORDER_STYLE;if(!(r<=0||"none"===a)){if(e.fillStyle=o,a in kn){var s=e.font;e.font="".concat(2*r,"px Segoe UI Emoji"),e.textAlign="center",e.textBaseline="top",e.fillText(kn[a],t,n-r/2),e.font=s}else Pn.test(a)?(e.font="".concat(2*r,"px Segoe UI Emoji"),e.textAlign="center",e.textBaseline="top",e.fillText(a,t,n-r/2)):(e.beginPath(),"dot"===a?e.arc(t,n,2*e.lineWidth,In.Degrees0,In.Degrees360):"circle"===a?e.arc(t,n,r,In.Degrees0,In.Degrees360):"square"===a?e.rect(t-r,n-r,2*r,2*r):"triangle"===a?(e.moveTo(t,n-r),e.lineTo(t+r,n+r),e.lineTo(t-r,n+r),e.lineTo(t,n-r)):"star"===a?Mn(e,t,n,r,5):"hexastar"===a?Mn(e,t,n,r,6):"heptastar"===a?Mn(e,t,n,r,7):"octastar"===a?Mn(e,t,n,r,8):"pentagon"===a?Rn(e,t,n,r,5):"hexagon"===a?Rn(e,t,n,r,6):"heptagon"===a?Rn(e,t,n,r,7):"octagon"===a?Rn(e,t,n,r,8):console.error("Invalid shape",a),e.fill(),c>0&&(e.strokeStyle=l,e.lineWidth=c,e.stroke()),e.closePath());i&&_n(e,t,n,r,i)}};function zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}sigma.canvas.nodes.def=function(e,t,n){var r=n("_camera");if(r&&!1!==e.isActive){var a=Math.pow(r.ratio,n("nodesPowRatio")),o=e[n("rendererSizeKey")]*a;o&&Fn(t,e[n("rendererXKey")],e[n("rendererYKey")],o,e.style.shape,e.style.colour,e.isHighlighted?En.b.primaryColour:null)}},sigma.canvas.edges.def=function(e,t,n,r,a){if(a("_camera")&&!1!==t.isActive&&!1!==n.isActive){switch(r.strokeStyle=e.style.colour||a("defaultEdgeColor"),r.lineWidth=e.style.width||1,e.style.line){case"dashed":r.setLineDash([4,8]);break;case"dotted":r.setLineDash([1,2]);break;case"solid":default:r.setLineDash([])}r.beginPath(),r.moveTo(t[a("rendererXKey")],t[a("rendererYKey")]),r.lineTo(n[a("rendererXKey")],n[a("rendererYKey")]),r.stroke(),r.setLineDash([]);var o=t[a("rendererSizeKey")];e.style.label&&o>=a("labelThreshold")&&(r.fillStyle=r.strokeStyle,r.textAlign="center",r.textBaseline="middle",r.fillText(e.style.label,Math.round((t[a("rendererXKey")]+n[a("rendererXKey")])/2),Math.round((t[a("rendererYKey")]+n[a("rendererYKey")])/2)),r.textAlign="start",r.textBaseline="alphabetic")}};var Un=function(e){function t(){return ue()(this,t),fe()(this,ge()(t).apply(this,arguments))}return be()(t,e),me()(t,[{key:"componentDidMount",value:function(){var e=this;this.sigmaInst=new sigma({graph:this.props.graph,renderer:{container:this.el,type:"canvas"},settings:Gn({defaultEdgeColor:this.props.edgeColour,defaultLabelSize:this.props.labelSize,defaultNodeColour:this.props.labelSize,drawLabels:this.props.showLabels,drawNodes:this.props.showNodes,font:this.props.fontFamily,maxNodeSize:this.props.nodeSize/2,minNodeSize:this.props.minNodeSize,nodeColor:this.props.nodeColour,sideMargin:1},this.props.settings)});var t=this.sigmaInst.renderers[0].camera.quadtree.area;this.sigmaInst.renderers[0].camera.quadtree.area=function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=t.apply(e.sigmaInst.renderers[0].camera.quadtree,r);return o.sort((function(e,t){return e.isHighlighted&&!t.isHighlighted?1:!e.isHighlighted&&t.isHighlighted?-1:0}))},this.props.draggableNodes&&sigma.plugins.dragNodes(this.sigmaInst,this.sigmaInst.renderers[0]),this.sigmaInst.initalZoomRatio=this.sigmaInst.settings("zoomingRatio"),this.props.onViewportChange&&this.sigmaInst.camera.bind("coordinatesUpdated",sn()((function(){return e.props.onViewportChange(e.saveViewport())}),200)),this.props.onNodeSelect&&(this.sigmaInst.bind("clickNodes",(function(t){return e.handleNodeClick(t)})),this.sigmaInst.bind("clickStage",(function(t){return e.handleStageClick(t)}))),this.sigmaInst.bind("overNode",(function(t){var n=t.data;n.node.hoverLabel&&!1!==n.node.isActive&&(n.node.label=n.node.hoverLabel,e.sigmaInst.refresh()),e.props.onNodeHover&&e.props.onNodeHover(t)})),this.sigmaInst.bind("outNode",(function(t){var n=t.data;n.node.hoverLabel&&n.node.label&&(n.node.label=void 0,e.sigmaInst.refresh()),e.props.onNodeLeave&&e.props.onNodeLeave(t)})),this.props.hasLasso&&(this.canvasLasso=wn(this.sigmaInst,{isActive:this.props.lassoActive,path:this.props.lassoPath,onPathChange:function(t){return e.props.onLassoPathChange(t)}}),this.sigmaInst.canvasLasso=this.canvasLasso);var n=this.sigmaInst.renderers[0];this.sigmaInst.settings("rendererXKey","".concat(n.options.prefix,"x")),this.sigmaInst.settings("rendererYKey","".concat(n.options.prefix,"y")),this.sigmaInst.settings("rendererSizeKey","".concat(n.options.prefix,"size")),this.sigmaInst.settings("_camera",this.sigmaInst.camera),this.props.viewport&&this.restoreViewport(this.props.viewport),this.props.recomputeLayout?this.startLayout():this.sigmaInst.refresh();var r=this.props.addExportCallback;r&&(r("network-png",(function(){return function(e){var t=e.renderers[0],n=document.createElement("canvas");n.setAttribute("width","".concat(t.width,"px")),n.setAttribute("height","".concat(t.height,"px"));var r=n.getContext("2d"),a=!0,o=!1,i=void 0;try{for(var c,l=Nn[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var s=c.value;s in t.domElements&&r.drawImage(t.domElements[s],0,0)}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}return n.toDataURL()}(e.sigmaInst)})),r("network-svg",(function(){return function(e){var t=e.renderers[0],n={},r=new jn.a(t.width,t.height);r.clearRect=function(){};for(var a=0,o=Object.keys(t.contexts);a<o.length;a++){var i=o[a];n[i]=t.contexts[i],t.contexts[i]=r}e.refresh();for(var c=0,l=Object.keys(n);c<l.length;c++){var s=l[c];t.contexts[s]=n[s]}return r.getSerializedSvg(!1)}(e.sigmaInst)})))}},{key:"componentDidUpdate",value:function(e){e.showLabels!==this.props.showLabels&&this.sigmaInst.settings("drawLabels",this.props.showLabels),e.showNodes!==this.props.showNodes&&this.sigmaInst.settings("drawNodes",this.props.showNodes),e.nodeSize!==this.props.nodeSize&&this.sigmaInst.settings("maxNodeSize",this.props.nodeSize/2),this.props.graph!==e.graph&&(this.sigmaInst.graph.clear(),this.sigmaInst.graph.read(this.props.graph)),e.lassoActive!==this.props.lassoActive&&this.canvasLasso.setActive(this.props.lassoActive),e.lassoPath!==this.props.lassoPath&&this.canvasLasso.setPath(this.props.lassoPath),this.sigmaInst.refresh()}},{key:"componentWillUnmount",value:function(){this.timeoutID&&clearTimeout(this.timeoutID),this.canvasLasso&&this.canvasLasso.destroy(),this.sigmaInst&&this.sigmaInst.kill();var e=this.props.removeExportCallback;e&&(e("network-png"),e("network-svg"))}},{key:"getNodeNeighbours",value:function(e){var t=this,n=new Set,r=!0,a=!1,o=void 0;try{for(var i,c=function(){var e=i.value;n.add(e),t.props.graph.edges.forEach((function(t){t.source===e&&n.add(t.target),t.target===e&&n.add(t.source)}))},l=e[Symbol.iterator]();!(r=(i=l.next()).done);r=!0)c()}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return Array.from(n)}},{key:"getNodeComponent",value:function(e){for(var t=this,n=e,r=new Set,a=function(){var e=n.pop();r.add(e),t.props.graph.edges.forEach((function(t){t.source!==e||r.has(t.target)||n.push(t.target),t.target!==e||r.has(t.source)||n.push(t.source)}))};n.length;)a();return Array.from(r)}},{key:"startLayout",value:function(){var e=this;this.sigmaInst&&!this.sigmaInst.isForceAtlas2Running()&&(this.props.onLayoutStart&&this.props.onLayoutStart(),this.sigmaInst.renderers[0].settings("drawEdges",!1),this.sigmaInst.startForceAtlas2(Gn({worker:!0,barnesHutOptimize:!1},this.props.layoutSettings)),this.timeoutID=setTimeout((function(){return e.stopLayout()}),this.props.layoutDuration))}},{key:"stopLayout",value:function(){if(this.sigmaInst&&this.sigmaInst.isForceAtlas2Running()){this.sigmaInst.renderers[0].settings("drawEdges",!0),this.sigmaInst.stopForceAtlas2();var e=this.sigmaInst.graph.nodes(),t={},n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;t[c.id]={x:c.x,y:c.y}}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}this.props.onLayoutChange&&this.props.onLayoutChange(t)}}},{key:"handleNodeClick",value:function(e){var t=e.data.captor.metaKey||e.data.captor.ctrlKey,n=e.data.captor.altKey||e.data.captor.shiftKey,r=e.data.node.map((function(e){return e.id}));if(n&&t){var a=this.getNodeComponent(r);this.props.onNodeSelect(a)}else if(n){var o=this.getNodeNeighbours(r);this.props.onNodeSelect(o,t)}else this.props.onNodeSelect(r,t)}},{key:"handleStageClick",value:function(e){var t=e.data.captor,n=t.isDragging,r=t.metaKey,a=t.ctrlKey;n||(r||a)||this.props.onNodeSelect()}},{key:"handleZoomChange",value:function(e){var t=Math.pow(this.sigmaInst.settings("zoomingRatio"),-e),n={duration:this.sigmaInst.settings("mouseZoomDuration")};sigma.utils.zoomTo(this.sigmaInst.camera,0,0,t,n)}},{key:"handleZoomReset",value:function(){var e={duration:this.sigmaInst.settings("mouseZoomDuration")};sigma.utils.zoomTo(this.sigmaInst.camera,0,0,1/this.sigmaInst.camera.ratio,e)}},{key:"saveViewport",value:function(){return{x:this.sigmaInst.camera.x,y:this.sigmaInst.camera.y,ratio:this.sigmaInst.camera.ratio}}},{key:"restoreViewport",value:function(e){this.sigmaInst.camera.x=e.x,this.sigmaInst.camera.y=e.y,this.sigmaInst.camera.ratio=e.ratio}},{key:"renderSecondaryControls",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,this.props.hasLasso&&a.a.createElement(yn,{active:this.props.lassoActive,onClick:function(){return e.props.onLassoActiveChange(!e.props.lassoActive)}}),a.a.createElement(mn,{title:"Shuffle nodes",onClick:function(){return e.startLayout()}},a.a.createElement("i",{className:"material-icons"},"shuffle")),a.a.createElement(mn,{title:"Reset zoom",onClick:function(){return e.handleZoomReset()}},a.a.createElement("i",{className:"material-icons"},"zoom_out_map")),this.props.secondaryControls)}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height;return a.a.createElement(vn,{primaryControls:this.props.primaryControls,onZoomChange:function(t){return e.handleZoomChange(t)},secondaryControls:this.renderSecondaryControls(),style:Gn({width:n,height:r},this.props.style)},a.a.createElement("div",{className:d()("libmr-Network",this.props.className),ref:function(t){e.el=t},style:Gn({width:n,height:r},this.props.style)},this.props.children))}}]),t}(a.a.Component);Un.propTypes={addExportCallback:_t.a.func,children:_t.a.node,className:_t.a.string,draggableNodes:_t.a.bool,edgeColour:_t.a.string,fontFamily:_t.a.string,graph:_t.a.shape({edges:_t.a.array,nodes:_t.a.array}),hasLasso:_t.a.bool,height:_t.a.number,labelColour:_t.a.string,labelSize:_t.a.number,lassoActive:_t.a.bool,lassoPath:_t.a.array,layoutDuration:_t.a.number,layoutSettings:_t.a.object,minNodeSize:_t.a.number,nodeColour:_t.a.string,nodeRenderer:_t.a.func,nodeSize:_t.a.number,onLassoActiveChange:_t.a.func,onLassoPathChange:_t.a.func,onLayoutChange:_t.a.func,onLayoutStart:_t.a.func,onNodeHover:_t.a.func,onNodeLeave:_t.a.func,onNodeSelect:_t.a.func,onViewportChange:_t.a.func,primaryControls:_t.a.node,recomputeLayout:_t.a.bool,removeExportCallback:_t.a.func,secondaryControls:_t.a.node,settings:_t.a.object,showLabels:_t.a.bool,showNodes:_t.a.bool,style:_t.a.object,viewport:_t.a.object,width:_t.a.number},Un.defaultProps={draggableNodes:!1,edgeColour:"#ccc",fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',hasLasso:!1,labelColour:"#222",labelSize:14,layoutDuration:1e3,maxLabelSize:160,minNodeSize:1,nodeColour:"#ccc",nodeSize:16,secondaryControls:[],showLabels:!0,showNodes:!0};var Bn=Un,Hn=function(e,t){return"Cluster of ".concat(e," at threshold of ").concat(t)};var Vn=Object(s.a)((function(e){return{numberOfGenomesInCluster:mt(e),threshold:Fe(e)}}))((function(e){var t=e.numberOfGenomesInCluster,n=e.threshold;return Hn(t,n)})),Kn=window.URL||window.webkitURL,qn={};function Wn(e,t,n){var r=e;"svg"===n?r=Kn.createObjectURL(new Blob([e],{type:"image/svg+xml"})):"nwk"===n&&(r=Kn.createObjectURL(new Blob([e],{type:"text/plain"})));var a=document.createElement("a");void 0!==a.download?(a.download="".concat(t,".").concat(n),a.href=r,document.body.appendChild(a),a.click(),document.body.removeChild(a)):document.location.href="png"===n?r.replace("data:image/png","image/octet-stream"):r}function Yn(e,t){qn[e]=t}function Zn(e){qn[e]=void 0}function Xn(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("function"==typeof qn[e])return Promise.resolve(t).then(qn[e]).then((function(r){if(n){var a=e.split("-"),o=B()(a,2)[1];Wn(r,t,o)}return r}));throw new Error("Invalid export type: ".concat(e))}var Qn=function(){return a.a.createElement("div",{className:"pw-cluster-status"},a.a.createElement("p",{className:"wgsa-blink"},"Fetching cluster..."))},Jn=function(){return a.a.createElement("div",{className:"pw-cluster-status"},a.a.createElement("p",null,"Couldn't fetch the cluster, try another threshold"))},$n=a.a.createClass({displayName:"ClusterNetwork",getInitialState:function(){return{controlsVisible:!1}},render:function(){var e=this;switch(this.props.status){case"INITIAL_STATUS":case"BUILDING_CLUSTERS":case"BUILT_CLUSTERS":case"FETCHING_CLUSTERS":case"FETCHING_EDGES":case"FETCHED_CLUSTERS":return a.a.createElement(Qn,null);case"FETCHED_EDGES":case"RUNNING_LAYOUT":case"COMPLETED_LAYOUT":break;case"FAILED_BUILDING_CLUSTERS":case"FAILED_FETCHING_CLUSTERS":case"FAILED_FETCHING_EDGES":default:return a.a.createElement(Jn,null)}var t={opacity:"RUNNING_LAYOUT"===this.props.status?.5:1},n=this.props.edgesCount,r=this.state.controlsVisible;return a.a.createElement("div",{className:"pw-cluster-network"},!1!==this.props.coverMessage&&a.a.createElement("p",{className:"pw-network-cover-message"},"RUNNING_LAYOUT"===this.props.status?a.a.createElement("span",{className:"wgsa-blink"},"Rendering cluster..."):a.a.createElement(Vn,null)),a.a.createElement(Bn,{addExportCallback:Yn,controlsVisible:r,graph:this.props.graph,hasLasso:this.props.hasLasso,lassoActive:this.props.lassoActive,lassoPath:this.props.lassoPath,layoutDuration:Math.min(Math.max(1e3,n/5),1e4),layoutSettings:Ie.a,onControlsVisibleChange:function(){return e.setState({controlsVisible:!r})},onLassoActiveChange:this.props.onLassoActiveChange,onLassoPathChange:this.props.onLassoPathChange,onLayoutChange:this.props.stopLayout,onLayoutStart:this.props.startLayout,onNodeSelect:this.props.onNodeSelect,primaryControls:this.props.primaryControls,recomputeLayout:"FETCHED_EDGES"===this.props.status,removeExportCallback:Zn,settings:Ie.e,style:t}))}});var er=Object(s.a)((function(e,t){return{edgesCount:Ye(e),graph:t.graph||vt(e),status:Re(e)}}),(function(e){return{startLayout:function(){return e(bt.n())},stopLayout:function(t){return e(bt.o(t))}}}))($n),tr={cursor:"pointer"},nr=function(e){function t(){var e,n,r;ue()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return fe()(r,(n=r=fe()(this,(e=ge()(t)).call.apply(e,[this].concat(o))),r.state={hovering:!1},n))}return be()(t,e),me()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.labels,n=void 0===t?[]:t,r=e.values,a=void 0===r?[]:r,o=e.backgroundColor,i=void 0===o?"#b199c7":o,c=e.hoverBackgroundColor,l=void 0===c?"#673c90":c,s=e.toolTipFunc,u=void 0===s?null:s,d=null===u?void 0:{callbacks:{label:u,title:function(){return""}}},m=this.canvas.getContext("2d");this.chart=new Chart(m,{type:"bar",data:{labels:n,datasets:[{backgroundColor:i,hoverBackgroundColor:l,borderWidth:0,data:a}]},options:{legend:{display:!1},scales:{xAxes:[{barPercentage:1,categoryPercentage:.9,ticks:{maxTicksLimit:10}}],yAxes:[{ticks:{beginAtZero:!0,display:!1}}]},tooltips:d}})}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.labels,n=void 0===t?[]:t,r=e.values,a=void 0===r?[]:r,o=e.backgroundColor,i=e.hoverBackgroundColor,c=this.chart.data.datasets[0];c.data=a,c.backgroundColor=o,c.hoverBackgroundColor=i,this.chart.data.labels=n,this.chart.update()}},{key:"onClick",value:function(e){var t,n,r=this.chart.getElementsAtEvent(e);try{var a=r[0]._index;t=this.chart.data.labels[a],n=this.chart.data.datasets[0].data[a]}catch(e){return null}return this.props.onClick({label:t,value:n})}},{key:"render",value:function(){var e=this;return a.a.createElement("canvas",{style:tr,onClick:function(t){return e.onClick(t)},ref:function(t){e.canvas=t},width:this.props.width,height:this.props.height})}}]),t}(r.Component),rr=function(e){return Hn(e.yLabel,e.xLabel)},ar=["FAILED_BUILDING_CLUSTERS","FAILED_FETCHING_CLUSTERS","FAILED_FETCHING_EDGES","COMPLETED_LAYOUT"],or=function(e){function t(){return ue()(this,t),fe()(this,ge()(t).apply(this,arguments))}return be()(t,e),me()(t,[{key:"onClick",value:function(e){var t=e.label;-1!==ar.indexOf(this.props.status)&&(this.props.numberOfNodesAtThreshold[this.props.chartThresholds.indexOf(t)]>Ie.b?this.props.showToast("This cluster is too large to display, please select a lower threshold."):this.props.setThreshold(t))}},{key:"render",value:function(){var e=this;return a.a.createElement(nr,{width:584,height:100,labels:this.props.chartThresholds,values:this.props.chartValues,onClick:function(t){return e.onClick(t)},toolTipFunc:rr,backgroundColor:this.props.chartColours.status,hoverBackgroundColor:this.props.chartColours.hover})}}]),t}(r.Component);var ir=Object(s.a)((function(e){return{chartColours:gt(e),chartThresholds:lt(),chartValues:ut(e),numberOfNodesAtThreshold:dt(e),status:Re(e)}}))(or);var cr=Object(s.a)((function(e){return{selectedGenomeId:Me(e),threshold:Fe(e),status:Re(e)}}),(function(e){return{setThreshold:function(t){return e(bt.l(t))}}}))((function(e){var t=e.result,n=e.selectedGenomeId,r=e.setThreshold,o=e.status,i=e.threshold;return a.a.createElement("div",{className:d()({"pw-genome-report-noprint":"COMPLETED_LAYOUT"!==o})},a.a.createElement("header",{className:"pw-genome-report-section-header"},a.a.createElement("h2",null,"Core genome clustering"),a.a.createElement("p",null,a.a.createElement("a",{href:t.scheme,target:"_blank",rel:"noopener"},t.scheme))),a.a.createElement(kt,null,a.a.createElement("div",{className:"pw-cluster-view"},a.a.createElement(er,null),a.a.createElement("p",{className:"pw-cluster-chart-intro"},"Pick a threshold by clicking on the chart below"),a.a.createElement(ir,{setThreshold:r}),a.a.createElement("div",{className:"pw-cluster-buttons"},a.a.createElement(St,{genomeId:n},"Recluster"),a.a.createElement(le.a,{to:"/clustering/".concat(n,"?threshold=").concat(i),className:"mdl-button mdl-button--raised mdl-button--colored pw-cluster-buttons-view"},"View cluster")))))})),lr=function(e){var t=e.result,n=t.fp,r=t.summary;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Core stats"),a.a.createElement("dl",{className:"grid"},a.a.createElement("div",null,a.a.createElement("dt",null,"Core matches"),a.a.createElement("dd",null,r.kernelSize)),a.a.createElement("div",null,a.a.createElement("dt",null,"Core families"),a.a.createElement("dd",null,r.percentKernelMatched,"%")),a.a.createElement("div",null,a.a.createElement("dt",null,"Non-core"),a.a.createElement("dd",null,(100-r.percentAssemblyMatched).toFixed(1),"%")),a.a.createElement("div",null,a.a.createElement("dt",null,"Complete alleles"),a.a.createElement("dd",null,r.completeAlleles)),a.a.createElement("div",null,a.a.createElement("dt",null,"Families matched"),a.a.createElement("dd",null,r.familiesMatched)),a.a.createElement("div",null,a.a.createElement("dt",null,a.a.createElement(Z,null)," reference"),a.a.createElement("dd",null,n.reference))))},sr=function(e){var t=e.matches,n=e.amrMatches,r=void 0===n?[]:n,o=e.library,i=(e.setBackground,e.displayAmr),c=void 0!==i&&i,l="gram_negative"===o?"Inc Match":"Group",s=t.reduce((function(e,t){return e.push(t[l].replace(/_\d+$/,"")),e}),[]);return s.sort(),t.sort((function(e,t){return e["Contig Start"]-t["Contig Start"]})),a.a.createElement(a.a.Fragment,null,a.a.createElement("tbody",{className:"pw-inctyper-contig"},t.map((function(e,n){return 0===n?a.a.createElement("tr",null,a.a.createElement("td",{rowSpan:t.length},s.join("/")),c&&a.a.createElement("td",{rowSpan:t.length},0===r.length?"-":r.join(", ")),a.a.createElement("td",null,e["Inc Match"]),a.a.createElement("td",null,e["Percent Identity"]),a.a.createElement("td",null,e["Match Coverage"])):a.a.createElement("tr",null,a.a.createElement("td",null,e["Inc Match"]),a.a.createElement("td",null,e["Percent Identity"]),a.a.createElement("td",null,e["Match Coverage"]))}))))};function ur(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:"pw-genome-report-section-header"},a.a.createElement("h2",null,"Plasmid Inc types"),a.a.createElement("p",null,a.a.createElement("a",{href:"https://cge.cbs.dtu.dk/services/PlasmidFinder/",target:"_blank",rel:"noopener"},"Database sourced from https://cge.cbs.dtu.dk/services/PlasmidFinder/"))),a.a.createElement("p",null,e))}var dr=function(e){var t=e.analysis,n=t.inctyper,r=t.paarsnp,o=void 0===r?{matches:[],library:""}:r;if(!n.hasOwnProperty("Inc Matches"))return ur("Inctyper was not run for this assembly.");if(0===n["Inc Matches"].length)return ur("No matches reported.");var i=n["Inc Matches"].reduce((function(e,t){var n=e;return n.hasOwnProperty(t.Contig)||(n[t.Contig]=[]),n[t.Contig].push(t),n}),{}),c=Object.keys(i).sort(),l={},s=!0,u=!1,d=void 0;try{for(var m,p=o.matches[Symbol.iterator]();!(s=(m=p.next()).done);s=!0){var f=m.value;f.query&&((o.hasOwnProperty("paar")&&o.paar.includes(f.id)||o.hasOwnProperty("snp")&&o.snp.includes(f.id))&&(f.query.id in l||(l[f.query.id]=[]),l[f.query.id].push(f.id)))}}catch(e){u=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:"pw-genome-report-section-header"},a.a.createElement("h2",null,"Plasmid Inc types"),a.a.createElement("p",null,a.a.createElement("a",{href:"https://cge.cbs.dtu.dk/services/PlasmidFinder/",target:"_blank",rel:"noopener"},"Database sourced from https://cge.cbs.dtu.dk/services/PlasmidFinder/"))),a.a.createElement("table",{className:"bordered wide",cellSpacing:"0"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Contig Inc type"),""!==o.library&&a.a.createElement("th",null,"Contig AMR genes"),a.a.createElement("th",null,"Match ID"),a.a.createElement("th",null,"% Identity"),a.a.createElement("th",null,"% Coverage"))),Object.keys(i).length?c.map((function(e,t){return a.a.createElement(sr,{amrMatches:l[e],library:n.Library,matches:i[e],setBackground:t%2==0,displayAmr:""!==o.library})})):a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",{colSpan:"5",className:"muted"},"No matches")))))},mr='14px "Roboto", "Helvetica", "Arial", sans-serif';!function(e){e.pluginService.register({beforeDatasetsDraw:function(e){var t=e.scales["y-axis-0"],n=e.scales["x-axis-0"],r=e.chart.ctx;if(e.options.horizontalLine)for(var a=0;a<e.options.horizontalLine.length;a++){r.save();var o=e.options.horizontalLine[a],i=o.y?t.getPixelForValue(o.y):0;i&&(r.beginPath(),r.moveTo(n.getPixelForValue(n.min),i),r.lineTo(n.getPixelForValue(n.max),i),r.lineWidth=o.lineWidth||2,r.strokeStyle=o.style||"rgba(0,0,0,.54)",o.dash&&r.setLineDash([8,8]),r.stroke()),o.text&&(r.fillStyle=o.textStyle||o.style||"rgba(0,0,0,.54)",r.textBaseline="top",r.textAlign="right",r.font=o.font||mr,r.fillText(o.text,n.getPixelForValue(n.max),i+4)),r.restore()}}}),e.pluginService.register({beforeDatasetsDraw:function(e){var t=e.scales["x-axis-0"],n=e.scales["y-axis-0"],r=e.chart.ctx;if(e.options.verticalLine)for(var a=0;a<e.options.verticalLine.length;a++){r.save();var o=e.options.verticalLine[a],i=o.x?t.getPixelForValue(o.x):0;i&&(r.beginPath(),r.moveTo(i,n.getPixelForValue(n.min)),r.lineTo(i,n.getPixelForValue(n.max)),r.lineWidth=o.lineWidth||2,r.strokeStyle=o.style||"rgba(0,0,0,.54)",o.dash&&r.setLineDash([8,8]),r.stroke()),o.text&&(r.fillStyle=o.textStyle||o.style||"rgba(0,0,0,.54)",r.font=o.font||mr,r.textBaseline="top",r.fillText(o.text,i+8,n.getPixelForValue(n.max))),r.restore()}}})}(Chart);var pr=a.a.createClass({displayName:"N50Chart.react",componentDidMount:function(){var e=this.props.metrics,t=e.contigSums,n=e.N50Contig,r={label:"N50",backgroundColor:"#a386bd",fill:!1,pointBorderColor:"#a386bd",data:[{x:0,y:0}].concat(t.map((function(e,t){return{x:t+1,y:e}})))};this.chart=new Chart(this.canvas,{type:"line",data:{datasets:[r]},options:{animation:!1,responsive:!1,legend:{display:!1},tooltips:{displayColors:!1,callbacks:{title:function(e,t){var n=t.datasets;return"Sum: ".concat(e.map((function(e){var t=e.index,r=e.datasetIndex;return n[r].data[t].y})).join(", "))},label:function(e,t){var n=e.index,r=e.datasetIndex,a=t.datasets;return"Size: ".concat(a[r].data[n].y-(n>0?a[r].data[n-1].y:0))}}},scales:{xAxes:[{type:"linear",position:"bottom",ticks:{display:!1,max:t.length+1},scaleLabel:{display:!1},beginAtZero:!0,gridLines:{display:!1}}],yAxes:[{gridLines:{display:!1}}]},horizontalLine:[{y:e.length/2,style:"#3c7383",text:e.length/2,dash:!0}],verticalLine:[{x:n,style:"#ccc",dash:!0,text:"Contig ".concat(n),textStyle:"rgba(0, 0, 0, 0.54)"}]}})},render:function(){var e=this;return a.a.createElement("canvas",{ref:function(t){e.canvas=t},width:"584",height:"320"})}}),fr=function(e){var t=e.result;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Assembly stats"),a.a.createElement("dl",{className:"grid"},a.a.createElement("div",null,a.a.createElement("dt",null,"Genome length"),a.a.createElement("dd",null,t.length)),a.a.createElement("div",null,a.a.createElement("dt",null,"No. contigs"),a.a.createElement("dd",null,t.contigs)),a.a.createElement("div",null,a.a.createElement("dt",null,"Smallest contig"),a.a.createElement("dd",null,t.smallestContig)),a.a.createElement("div",null,a.a.createElement("dt",null,"Largest contig"),a.a.createElement("dd",null,t.largestContig)),a.a.createElement("div",null,a.a.createElement("dt",null,"Average contig length"),a.a.createElement("dd",null,t.averageContig)),a.a.createElement("div",null,a.a.createElement("dt",null,"N50"),a.a.createElement("dd",null,t.N50)),a.a.createElement("div",null,a.a.createElement("dt",null,"Non-ATCG"),a.a.createElement("dd",null,t.nonATCG)),a.a.createElement("div",null,a.a.createElement("dt",null,"GC content"),a.a.createElement("dd",null,t.gcContent,"%"))),a.a.createElement("figure",null,a.a.createElement("figcaption",null,"N50 chart"),a.a.createElement(pr,{metrics:t})))},hr=n(12),gr={PUBLIC:"https://gitlab.com/cgps/pathogenwatch/amr-libraries/blob",TESTING:"https://gitlab.com/cgps/pathogenwatch/amr-test-libraries/blob"},vr=new Set(["1280","1313","485","90370"]),br=function(e){var t=e.result,n=e.genome.analysis.speciator.organismId,r=t.antibiotics,o=t.library,i=void 0===o?{label:n,source:vr.has(n)?"PUBLIC":"TESTING",version:"0.0.1"}:o,c=new Set;if(hr.d.has(n)){var l=hr.d.get(n).amrOptions,s=void 0===l?{}:l;s&&s.hiddenColumns&&(c=s.hiddenColumns)}var u=c.size?r.filter((function(e){var t=e.name;return!c.has(t)})):r,m="".concat(gr[i.source],"/").concat(i.version,"/").concat(i.label,".toml");return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:"pw-genome-report-section-header"},a.a.createElement("a",{href:m,target:"_blank",rel:"noopener",className:"pw-genome-report-secondary-link"},a.a.createElement("strong",null,"PAARSNP AMR")," - Library ",i.label," version ",i.version,"PUBLIC"!==i.source?" (".concat(i.source,")"):"")),a.a.createElement("table",{cellSpacing:"0",className:"wgsa-genome-report-amr wide bordered"},a.a.createElement("caption",null,"Resistance profile"),a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Agent"),a.a.createElement("th",null,"Predicted phenotype"),a.a.createElement("th",null,"SNPs/genes"))),a.a.createElement("tbody",null,u.map((function(e){var t=e.name,n=e.fullName,r=e.state,o=e.mechanisms;return a.a.createElement("tr",{key:t,className:d()({"pw-genome-report-amr-present":"NOT_FOUND"!==r,"pw-genome-report-amr-resistant":"RESISTANT"===r})},a.a.createElement("td",null,n),a.a.createElement("td",{className:"wgsa-genome-report-amr-state"},r.replace(/_/g," ").toLowerCase()),a.a.createElement("td",{className:"pw-genome-report-amr-mechanisms"},o.join(", ")))})))))},yr=["AGly","Col","Fcyn","Flq","Gly","MLS","Ntmdz","Phe","Rif","Sul","Tet","Tmt","Bla","Bla_Carb","Bla_ESBL","Bla_ESBL_inhR","Bla_broad","Bla_broad_inhR"],Er={AGly:{name:"Aminoglycosides",key:"AGS",type:"Aminoglycosides"},Col:{name:"Colistin",key:"CST",type:"Colistin"},Fcyn:{name:"Fosfomycin",key:"FOF",type:"Phosphonic Acid"},Flq:{name:"Fluoroquinolones",key:"FLQ",type:"Fluoroquinolones"},Gly:{name:"Glycopeptides",key:"GPA",type:"Glycopeptides"},MLS:{name:"Macrolides",key:"MAC",type:"Macrolides"},Ntmdz:{name:"Nitroimidazoles",key:"NIM",type:"Nitroimidazoles"},Phe:{name:"Phenicols",key:"PHE",type:"Phenicols"},Rif:{name:"Rifampicin",key:"RIF",type:"Rifamycin"},Sul:{name:"Sulfonamides",key:"SMX",type:"Sulfonamides"},Tet:{name:"Tetracycline",key:"TCY",type:"Tetracyclines"},Tmt:{name:"Trimethoprim",key:"TMP",type:"Diaminopyrimidine"},Bla:{name:"Beta-lactams",key:"BLA",type:"Beta-Lactams"},Bla_Carb:{name:"Carbapenems",key:"CBP",type:"Carbapenems"},Bla_ESBL:{name:"ESBLs",key:"EBL",type:"Extended Spectrum Beta-Lactams"},Bla_ESBL_inhR:{name:"ESBL Inhibitors",key:"EBI",type:"ESBL Inhibitors"},Bla_broad:{name:"Broad-Spectrum Cephalosporins",key:"CEP",type:"Broad-Spectrum Cephalosporins"},Bla_broad_inhR:{name:"BSBL Inhibitors",key:"BBI",type:"Broad-Spectrum Beta-Lactam Inhibitors"}},Or=function(e){var t=e.result;return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:"pw-genome-report-section-header"},a.a.createElement("a",{href:"https://github.com/katholt/Kleborate#resistance-gene-detection",target:"_blank",rel:"noopener",className:"pw-genome-report-secondary-link"},a.a.createElement("strong",null,"Kleborate AMR")," - https://github.com/katholt/Kleborate#resistance-gene-detection")),a.a.createElement("table",{cellSpacing:"0",className:"wgsa-genome-report-amr wide bordered"},a.a.createElement("caption",null,"Resistance profile"),a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Agent"),a.a.createElement("th",null,"Variants/genes"))),a.a.createElement("tbody",null,yr.map((function(e){return a.a.createElement("tr",{key:Er[e].name,className:d()({"pw-genome-report-amr-present":"-"!==t[e],"pw-genome-report-amr-resistant":"-"!==t[e]})},a.a.createElement("td",null,Er[e].name),a.a.createElement("td",{className:"pw-genome-report-amr-mechanisms"},t[e].replace(/;/gi,", ").replace(/\*\?/gi," (homolog, fragment)").replace(/\*/gi," (homolog)").replace(/\?/gi," (fragment)")))})))))},Cr={amx:{name:"Amoxicillin",type:"Beta-lactams"},cro:{name:"Ceftriaxone",type:"Extended-Spectrum Beta-lactams"},ctx:{name:"Cefotaxime",type:"Broad-spectrum cephalosporins"},cxm:{name:"Cefuroxime",type:"Beta-lactams"},mem:{name:"Meropenem",type:"Carbapenems"},pen:{name:"Penicillin",type:"Beta-lactams"}},wr=function(e){var t=e.result;return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:"pw-genome-report-section-header"},a.a.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/pubmed/27302760",target:"_blank",rel:"noopener",className:"pw-genome-report-secondary-link"},a.a.createElement("strong",null,"PBP Analysis")," - Li et al, 2016")),a.a.createElement("div",{className:"pw-genome-report-column"},a.a.createElement("table",{className:"pw-mlst-profile",cellSpacing:"0"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"pbp1A"),a.a.createElement("th",null,"pbp2B"),a.a.createElement("th",null,"pbp2X"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,t.pbp1a),a.a.createElement("td",null,t.pbp2b),a.a.createElement("td",null,t.pbp2x))))),a.a.createElement("table",{cellSpacing:"0",className:"wgsa-genome-report-amr wide bordered"},a.a.createElement("caption",null,"Predicted resistance profile"),a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Agent"),a.a.createElement("th",null,"MIC"),a.a.createElement("th",null,"Phenotype (non/meningitis)"))),a.a.createElement("tbody",null,Object.keys(Cr).map((function(e){return a.a.createElement("tr",{key:Cr[e].name,className:d()({"pw-genome-report-amr-present":"NF"!==t[e]||"NF"!==t["".concat(e,"Meningitis")]||"NF"!==t["".concat(e,"NonMeningitis")],"pw-genome-report-amr-resistant":"R"===t[e]||"R"===t["".concat(e,"Meningitis")]||"R"===t["".concat(e,"NonMeningitis")]})},a.a.createElement("td",null,Cr[e].name),a.a.createElement("td",{className:"wgsa-genome-report-amr-state"},t["".concat(e,"Mic")]),a.a.createElement("td",{className:"wgsa-genome-report-amr-state"},t.hasOwnProperty(e)?t[e]:"(".concat(t["".concat(e,"NonMeningitis")]," / ").concat(t["".concat(e,"Meningitis")],")")))})))))},Sr=function(e){var t=e.genome,n=t.analysis,r=n.paarsnp,o=n.kleborate,i=n.spn_pbp_amr;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Antimicrobial resistance (AMR)"),!!r&&!o&&a.a.createElement(br,{result:r,genome:t}),!!o&&a.a.createElement(Or,{result:o}),!!i&&a.a.createElement(wr,{result:i}))},jr=function(e){var t=e.result;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Organism prediction"),a.a.createElement("dl",{className:"grid"},a.a.createElement(oe,{label:"Taxonomy ID"},a.a.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?mode=Tree&id=".concat(t.organismId),target:"_blank",rel:"noopener",title:"View in NCBI taxonomy browser"},t.organismId)),a.a.createElement(oe,{label:"Organism name"},t.organismName),a.a.createElement(oe,{label:"RefSeq reference"},a.a.createElement("a",{href:"http://www.ncbi.nlm.nih.gov/assembly/".concat(t.referenceId,"/"),target:"_blank",rel:"noopener"},t.referenceId)),a.a.createElement(oe,{label:"Mash distance"},t.mashDistance),a.a.createElement(oe,{label:"p-value"},t.pValue),a.a.createElement(oe,{label:"Matching hashes"},t.matchingHashes)))},Nr=function(e){var t=e.to,n=e.children;return a.a.createElement("div",{className:"pw-genome-report-external-link"},a.a.createElement("a",{href:t,target:"_blank",rel:"noopener"},n),a.a.createElement("i",{className:"material-icons"},"launch"))},Pr=n(95),kr=function(e){var t=e.result,n=e.speciator,r=e.filterKey,o=void 0===r?"mlst":r,i=e.heading,c=void 0===i?"MLST – Multilocus sequence typing":i,l=t.alleles.map((function(e){var t=e.gene.split("_");return{gene:t[1]||t[0],hits:e.hits}}));return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:"pw-genome-report-section-header"},a.a.createElement("h2",null,c),a.a.createElement("p",null,a.a.createElement("a",{href:t.url,target:"_blank",rel:"noopener"},t.url))),a.a.createElement("div",{className:"pw-genome-report-column one third"},a.a.createElement("dl",null,a.a.createElement(oe,{label:"Sequence type"},a.a.createElement(Pr.b,{id:t.st}))),a.a.createElement(Nr,{to:"/genomes/all?genusId=".concat(n.genusId,"&speciesId=").concat(n.speciesId,"&").concat(o,"=").concat(t.st)},"View all ST ",a.a.createElement(Pr.b,{id:t.st,textOnly:!0}))),a.a.createElement("div",{className:"pw-genome-report-column two thirds"},a.a.createElement("table",{className:"pw-mlst-profile",cellSpacing:"0"},a.a.createElement("caption",null,"Profile"),a.a.createElement("thead",null,a.a.createElement("tr",null,l.map((function(e){var t=e.gene;return a.a.createElement("th",{key:t},t)})))),a.a.createElement("tbody",null,a.a.createElement("tr",null,l.map((function(e){var t=e.gene,n=e.hits;return a.a.createElement("td",{key:t},n.length?n.map((function(e){return a.a.createElement(Pr.a,{key:e,id:e})})):a.a.createElement("span",{title:"Not found"},"?"))})))))))},xr=function(e){var t=e.result;return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:"pw-genome-report-section-header"},a.a.createElement("h2",null,"Genotyphi"),a.a.createElement("p",null,a.a.createElement("a",{href:"https://github.com/katholt/genotyphi",target:"_blank",rel:"noopener"},"https://github.com/katholt/genotyphi"))),a.a.createElement("dl",{className:"flex"},a.a.createElement("div",null,a.a.createElement("dt",null,"Genotype"),a.a.createElement("dd",null,t.genotype)),a.a.createElement("div",null,a.a.createElement("dt",null,"SNPs called"),a.a.createElement("dd",null,t.foundLoci))),a.a.createElement(Nr,{to:"/genomes/all?organismId=90370&genotype=".concat(t.genotype)},"View all genotype ",t.genotype))},_r=function(e){var t=e.result;return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:"pw-genome-report-section-header"},a.a.createElement("h2",null,"NG-MAST – Multi-antigen sequence typing"),a.a.createElement("p",null,a.a.createElement("a",{href:"https://github.com/MDU-PHL/ngmaster",target:"_blank",rel:"noopener"},"https://github.com/MDU-PHL/ngmaster"))),a.a.createElement("div",null,a.a.createElement("dl",{className:"flex"},a.a.createElement("div",null,a.a.createElement("dt",null,"NG-MAST"),a.a.createElement("dd",null,t.ngmast)),a.a.createElement("div",null,a.a.createElement("dt",null,"POR"),a.a.createElement("dd",null,t.por)),a.a.createElement("div",null,a.a.createElement("dt",null,"TBPB"),a.a.createElement("dd",null,t.tbpb))),a.a.createElement(Nr,{to:"/genomes/all?genusId=482&speciesId=485&ngmast=".concat(t.ngmast)},"View all ST ",t.ngmast)))},Ir={SISTR:{link:a.a.createElement("a",{href:"http://journals.plos.org/plosone/article?id=10.1371/journal.pone.0147101",target:"_blank",rel:"noopener"},a.a.createElement("em",null,"Salmonella In Silico")," Typing Resource (SISTR)"),title:"serovar"},SeroBA:{link:a.a.createElement("a",{href:"https://mgen.microbiologyresearch.org/content/journal/mgen/10.1099/mgen.0.000186",target:"_blank",rel:"noopener"},"SeroBA"),docs:"https://cgps.gitbook.io/pathogenwatch/technical-descriptions/typing-methods/seroba"}},Tr=function(e){var t=e.genome.analysis,n=t.speciator,r=t.serotype,o=Ir[r.source]||{},i=o.link,c=void 0===i?a.a.createElement("span",null,"(unspecified source)"):i,l=o.title,s=void 0===l?"serotype":l,u=o.docs;return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:"pw-genome-report-section-header"},a.a.createElement("h2",null,"Serotype"),a.a.createElement("p",null,c)),a.a.createElement("dl",{className:"flex"},r.subspecies&&a.a.createElement("div",{className:"pw-genome-report-metadata"},a.a.createElement("dt",null,"Subspecies"),a.a.createElement("dd",null,a.a.createElement("em",null,r.subspecies))),a.a.createElement("div",{className:"pw-genome-report-metadata"},a.a.createElement("dt",{className:"pw-capitalise"},s),a.a.createElement("dd",null,r.value,r.warn&&u&&a.a.createElement("a",{href:u,target:"_blank",rel:"noopener",className:"pw-genome-report-secondary-link"},"Guidance on this result")))),a.a.createElement(Nr,{to:"/genomes/all?genusId=".concat(n.genusId,"&speciesId=").concat(n.speciesId,"&serotype=").concat(r.value)},"View all ",s," ",r.value))},Lr=function(e){var t=e.genome,n=t.analysis,r=n.poppunk,o=n.speciator;return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:"pw-genome-report-section-header"},a.a.createElement("h2",null,"Strain"),a.a.createElement("p",null,a.a.createElement("a",{href:"https://www.pneumogen.net/gps/"},"The Global Pneumococcal Sequencing Project"))),a.a.createElement("dl",{className:"pw-genome-report-unsized"},a.a.createElement("div",{className:"pw-genome-report-metadata"},a.a.createElement("dt",null,"GPSC"),a.a.createElement("dd",null,r.strain,"novel"===r.strain&&"me"===t.owner&&a.a.createElement("a",{href:"mailto:gps@pneumogen.net?subject=Novel strain assignment&body=(Please attach your assembly to this email)",target:"_blank",rel:"noopener",className:"pw-genome-report-secondary-link"},"Submit for assignment")))),a.a.createElement(Nr,{to:"/genomes/all?genusId=".concat(o.genusId,"&speciesId=").concat(o.speciesId,"&strain=").concat(r.strain)},"View all GPSC ",r.strain))},Ar=function(e){var t=e.genome,n=t.analysis.kleborate,r=n.species!==t.analysis.speciator.speciesName;return a.a.createElement(a.a.Fragment,null,a.a.createElement("header",{className:"pw-genome-report-section-header"},a.a.createElement("h2",null,"Kleborate"),a.a.createElement("p",null,a.a.createElement("a",{href:"https://github.com/katholt/Kleborate",target:"_blank",rel:"noopener"},"https://github.com/katholt/Kleborate"))),a.a.createElement("dl",{className:"grid"},a.a.createElement("div",{className:"pw-genome-report-metadata"},a.a.createElement("dt",null,"K locus"),a.a.createElement("dd",null,n.K_locus),a.a.createElement(Nr,{to:"/genomes/all?genusId=570&klocus=".concat(n.K_locus)},"View all ",n.K_locus)),a.a.createElement("div",{className:"pw-genome-report-metadata"},a.a.createElement("dt",null,"Confidence"),a.a.createElement("dd",null,n.K_locus_confidence)),a.a.createElement("div",{className:"pw-genome-report-metadata"},a.a.createElement("dt",null,a.a.createElement("em",null,"wzi")),a.a.createElement("dd",null,n.wzi))),a.a.createElement("dl",{className:"grid"},a.a.createElement("div",{className:"pw-genome-report-metadata"},a.a.createElement("dt",null,"O locus"),a.a.createElement("dd",null,n.O_locus)),a.a.createElement("div",{className:"pw-genome-report-metadata"},a.a.createElement("dt",null,"Confidence"),a.a.createElement("dd",null,n.O_locus_confidence))),r&&a.a.createElement("dl",{className:"pw-genome-report-unsized"},a.a.createElement("div",{className:"pw-genome-report-metadata"},a.a.createElement("dt",{className:"danger"},"Species"),a.a.createElement("dd",null,n.species))))};var Dr=function(e){var t=e.genome,n=t.analysis,r=n.speciator,o=n.mlst,i=n.mlst2,c=n.ngstar;return a.a.createElement(a.a.Fragment,null,(o||c)&&a.a.createElement("div",{id:"mlst"},o&&a.a.createElement(kr,{result:o,speciator:r}),i&&a.a.createElement(kr,{heading:"Alternative MLST",result:i,speciator:r,filterKey:"mlst2"}),c&&a.a.createElement(kr,{heading:"NG-STAR – Sequence typing for antimicrobial resistance",result:c,speciator:r,filterKey:"ngstar",label:"type"})),function(e){var t=e.analysis,n=t.genotyphi,r=t.ngmast,o=t.serotype,i=t.poppunk,c=t.kleborate;return a.a.createElement(a.a.Fragment,null,!!i&&a.a.createElement("div",{className:"pw-genome-report-column one half"},a.a.createElement(Lr,{genome:e})),!!o&&a.a.createElement("div",{className:"pw-genome-report-column one half"},a.a.createElement(Tr,{genome:e})),!!n&&a.a.createElement("div",{className:"pw-genome-report-column one half"},a.a.createElement(xr,{result:n})),!!r&&a.a.createElement("div",null,a.a.createElement(_r,{result:r})),!!c&&a.a.createElement("div",null,a.a.createElement(Ar,{genome:e})))}(t))},Mr={0:"no virulence loci",1:"yersiniabactin only",2:"yersiniabactin and colibactin, or colibactin only",3:"aerobactin and/or salmochelin only (without yersiniabactin or colibactin)",4:"aerobactin and/or salmochelin with yersiniabactin (without colibactin)",5:"yersiniabactin, colibactin and aerobactin and/or salmochelin"},Rr=function(e){var t=e.className,n=e.children;return a.a.createElement("td",{className:t},n.replace("0","-"))},Fr=function(e){var t=e.result;return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",{className:"pw-genome-report-section-header"},a.a.createElement("a",{href:"https://github.com/katholt/Kleborate#virulence-loci",target:"_blank",rel:"noopener",className:"pw-genome-report-secondary-link"},a.a.createElement("strong",null,"Kleborate virulence")," - https://github.com/katholt/Kleborate#virulence-loci")),a.a.createElement("div",{className:"pw-genome-report-column two thirds"},a.a.createElement("dl",{className:"pw-genome-report-unsized"},a.a.createElement("div",null,a.a.createElement("dt",null,"Virulence score"),a.a.createElement("dd",null,t.virulence_score," – ",Mr[t.virulence_score])))),a.a.createElement("div",{className:"pw-genome-report-column one third"},a.a.createElement("dl",{className:"pw-genome-report-unsized"},a.a.createElement("div",null,a.a.createElement("dt",null,"Hypermucoidy (",a.a.createElement("em",null,"rmpA")," / ",a.a.createElement("em",null,"rmpA2"),")"),a.a.createElement("dd",null,t.rmpA," / ",t.rmpA2)))),"0"!==t.virulence_score&&a.a.createElement("table",{className:"wide bordered",cellSpacing:"0"},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Yersiniabactin"),a.a.createElement("th",null,"YbST"),a.a.createElement("th",null,"Colibactin"),a.a.createElement("th",null,"CbST"),a.a.createElement("th",null,"Aerobactin"),a.a.createElement("th",null,"AbST"),a.a.createElement("th",null,"Salmochelin"),a.a.createElement("th",null,"SmST"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement(Rr,null,t.Yersiniabactin),a.a.createElement(Rr,null,t.YbST),a.a.createElement(Rr,null,t.Colibactin),a.a.createElement(Rr,null,t.CbST),a.a.createElement(Rr,null,t.Aerobactin),a.a.createElement(Rr,null,t.AbST),a.a.createElement(Rr,null,t.Salmochelin),a.a.createElement(Rr,null,t.SmST)))))},zr=function(e){var t=e.genome.analysis.kleborate;return a.a.createElement(a.a.Fragment,null,a.a.createElement("h2",null,"Virulence"),!!t&&a.a.createElement(Fr,{result:t}))};var Gr=n(505),Ur=a.a.createClass({displayName:"Content",getInitialState:function(){return{active:"Overview"}},setActive:function(e){this.setState({active:e})},scrollTo:function(e){e in this.sections&&this.sections[e].scrollIntoView({behavior:"smooth",block:"start"})},sections:{},render:function(){var e=this,t=this.props.genome,n=t.fileId,r=t.pending,o=void 0===r?[]:r,i=t.userDefined,c=void 0===i?null:i,l=t.upload,s=void 0===l?{type:"assembly"}:l,u=[{key:"Top",component:a.a.createElement(ne,{genome:t})}];return c&&Object.keys(c).length>0&&u.push({key:"Metadata",component:a.a.createElement(ce,{genome:t})}),u.push.apply(u,f()(function(e){var t=e.analysis,n=void 0===t?{}:t,r=n.cgmlst,o=n.core,i=n.inctyper,c=n.kleborate,l=n.metrics,s=n.paarsnp,u=n.speciator,d=[];return function(e){return e.mlst||e.mlst2||e.genotyphi||e.ngmast||e.serotype||e.poppunk||e.kleborate||e.ngstar}(n)&&d.push({key:"Typing",component:a.a.createElement(Dr,{genome:e})}),(s||c)&&d.push({key:"AMR",component:a.a.createElement(Sr,{genome:e})}),i&&Object.keys(i).includes("Inc Matches")&&d.push({key:"Inc Typing",component:a.a.createElement(dr,{analysis:n})}),c&&d.push({key:"Virulence",component:a.a.createElement(zr,{genome:e})}),r&&d.push({key:"Clustering",component:a.a.createElement(cr,{result:r})}),o&&d.push({key:"Core",component:a.a.createElement(ie,{taskName:"core",component:lr,genome:e})}),l&&d.push({key:"Assembly",component:a.a.createElement(ie,{taskName:"metrics",component:fr,genome:e})}),u&&d.push({key:"Organism",component:a.a.createElement(ie,{taskName:"speciator",component:jr,genome:e})}),d}(t))),o.length&&u.push({key:"+".concat(o.length," Pending"),component:a.a.createElement("ul",null,o.map((function(e){return a.a.createElement("li",null,e)})))}),a.a.createElement("div",null,a.a.createElement("style",null,Gr.a),a.a.createElement("nav",{onClick:function(e){return e.stopPropagation()}},a.a.createElement(g.a,{items:u.map((function(e){return e.key.toLowerCase()})),currentClassName:"active",rootEl:".wgsa-genome-report .wgsa-overlay"},u.map((function(t){var n=t.key;return a.a.createElement("li",{key:n},a.a.createElement("a",{href:"#".concat(n.toLowerCase()),onClick:function(t){t.preventDefault(),e.scrollTo(n)}},n))}))),a.a.createElement(A,{key:"remove",genome:t,onRemove:close})),a.a.createElement("div",{className:"wgsa-genome-report-content",onClick:function(e){return e.stopPropagation()}},u.map((function(t){var n=t.key,r=t.component;return a.a.createElement("section",{key:n,ref:function(t){e.sections[n]=t},id:"".concat(n.toLowerCase())},r)})),!n&&a.a.createElement("div",{className:"pw-expand pw-flex-center"},a.a.createElement("span",{className:"wgsa-file-icon"},a.a.createElement("i",{className:"material-icons"},"assembly"===s.type?"insert_drive_file":"file_copy")),a.a.createElement("p",{className:"h6"},"Awaiting assembly"))))}}),Br=new Set(["LOADING","READY"]),Hr=function(e){var t=e.name,n=e.genome,r=e.status,o=e.close,i=Br.has(r),c=n?n.name:t;return a.a.createElement(w,{title:a.a.createElement("span",{className:"wgsa-genome-report-title"},a.a.createElement("div",{className:"pw-genome-report-print-button",onClick:function(e){return e.stopPropagation()}},a.a.createElement("button",{className:"mdl-button mdl-button--icon",title:"Print report",onClick:function(){return function(e){var t=document.title;document.title="Pathogenwatch genome report ".concat(e),window.print(),document.title=t}(c)}},a.a.createElement("i",{className:"material-icons"},"print"))),"Genome report: ",c," ",n&&n.fileId&&a.a.createElement(z,{key:"download",id:n.id,name:n.name})),isOpen:i,onClose:o,animationKey:"genome-report",containerClassName:"wgsa-genome-report"},a.a.createElement(H,{placeholder:a.a.createElement("div",{className:"wgsa-genome-report-loader",onClick:function(e){return e.stopPropagation()}},a.a.createElement(G.a,null)),complete:"READY"===r},a.a.createElement(Ur,{genome:n})))},Vr=n(115);var Kr=Object(s.a)((function(e){return e.genomes.report}),(function(e){return{close:function(){return e(Object(Vr.c)(null))}}}))(Hr),qr=n(132),Wr=a.a.createClass({displayName:"Component",componentDidMount:function(){Object(qr.b)().then(this.props.setSelection)},render:function(){return null}});var Yr=Object(s.a)(null,(function(e){return{setSelection:function(t){return e(Object(x.l)(t))}}}))(Wr),Zr=n(916),Xr=(n(1026),n(193)),Qr=a.a.createClass({displayName:"MenuButton",propTypes:{openMenu:a.a.PropTypes.func},openLoginMenu:function(e){e.stopPropagation(),e.preventDefault(),this.props.openMenu()},render:function(){var e=this;return a.a.createElement("div",{className:"wgsa-main-menu-button"},a.a.createElement("button",{className:"mdl-button mdl-button--icon",title:"Main Menu",onClick:function(t){return e.openLoginMenu(t)}},a.a.createElement("i",{className:"material-icons"},"menu")))}});var Jr=Object(s.a)(null,(function(e){return{openMenu:function(){return e(Object(Xr.c)(!0))}}}))(Qr),$r=n(50),ea=n(176),ta=function(){return a.a.createElement("span",{className:"wgsa-header-content"},a.a.createElement("span",{className:"mdl-navigation__link"},"Offline Mode"))},na=function(e){var t=e.offline;return(void 0===t?Object(ea.b)():t)?a.a.createElement(ta,null):a.a.createElement("nav",{className:"wgsa-header-content mdl-navigation"},a.a.createElement($r.d,{to:"/genomes"},"Genomes"),a.a.createElement($r.d,{to:"/collections"},"Collections"),a.a.createElement($r.d,{to:"/upload"},"Upload"),a.a.createElement($r.d,{to:"https://cgps.gitbook.io/pathogenwatch/",external:!0,className:"sm-hide"},"Documentation"),a.a.createElement("a",{className:"mdl-button mdl-button--icon",href:"https://twitter.com/pathogenwatch",rel:"noopener",target:"_blank",title:"Follow @Pathogenwatch"},a.a.createElement("i",{className:"cgps-twitter-icon"})),a.a.createElement("a",{className:"mdl-button mdl-button--icon",href:"mailto:cgps@sanger.ac.uk",rel:"noopener",target:"_blank",title:"Contact us"},a.a.createElement("i",{className:"material-icons"},"email")))},ra=function(e){return e.header};function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var oa=function(){return a.a.createElement(le.a,{to:"/offline",className:"wgsa-main-menu-button",title:"View Saved Collections"},a.a.createElement("i",{className:"material-icons"},"signal_wifi_off"))};var ia=Object(s.a)((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},ra(e),{offline:Object(ea.b)()})}))((function(e){var t=e.asideEnabled,n=e.className,r=e.offline,o=e.children,i=void 0===o?a.a.createElement(na,{asideEnabled:t}):o;return a.a.createElement("header",{className:d()("mdl-layout__header mdl-layout__header--scroll wgsa-header",{"wgsa-header--inverse":r},n)},a.a.createElement("div",{className:"mdl-layout__header-row"},r?a.a.createElement(oa,null):a.a.createElement(Jr,null),a.a.createElement(le.a,{to:"/",className:"mdl-layout-title"},a.a.createElement(Q,{className:"wgsa-header-logo"})),i))})),ca=a.a.createElement(i.a,{component:ia}),la=(n(1028),n(15)),sa=n(33),ua=n(87),da=n.n(ua),ma=function(e){return e.viewer.clusterView},pa=Object(xe.createSelector)(ma,(function(e){return e.lassoPath})),fa=Object(xe.createSelector)(ma,(function(e){return e.lassoActive}));function ha(e,t){for(var n=!1,r=0,a=e.length-1;r<e.length;a=r++)e[r].y>t.y!=e[a].y>t.y&&t.x<(e[a].x-e[r].x)*(t.y-e[r].y)/(e[a].y-e[r].y)+e[r].x&&(n=!n);return n}var ga=Object(xe.createSelector)(pa,vt,(function(e,t){if(e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=t.nodes[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value;l.x&&l.y&&ha(e,l)&&n.push.apply(n,f()(l.genomeIds))}}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}})),va=Object(xe.createSelector)(lt,dt,ut,(function(e,t,n){var r={};if(!t)return{items:r};for(var a=null,o=0,i=0;i<t.length&&!(t[i]>Ie.b);i++)a!==n[i]&&(a=n[i],r[e[i]]=""),o=e[i];return{max:o||e[n.indexOf(a)],items:r}})),ba=Object(xe.createSelector)((function(e){return e.location}),(function(e){return Object(ua.parse)(e.search).threshold})),ya=n(47),Ea=n(96),Oa=n.n(Ea),Ca=n(53),wa=n.n(Ca),Sa=function(e){return Oa()(e).format("YYYY-MM-DD")};function ja(e){var t=[],n={},r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value,s=l.date;n[s]=(n[s]||0)+1,t.push({x:s,y:n[s],id:l.id})}}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return t}function Na(e,t){var n={},r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value,s=Oa()(l.date),u=[s.year()];"quarter"===t?u.push(s.quarter()):"week"===t?u.push(s.week()):"month"===t?u.push(s.month()+1):"day"===t&&(u.push(s.month()+1),u.push(s.date()));var d=u.join("-");if(n[d])n[d].y++;else{var m=Oa()({year:s.year()});"quarter"===t?m.set("quarter",s.quarter()):"week"===t?m.set("week",s.week()):"month"===t?m.set("month",s.month()):"day"===t&&(m.set("month",s.month()),m.set("date",s.date())),n[d]={x:m.toDate(),y:1,label:Sa(m)}}}}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return Object.values(n)}var Pa=function(e){return{min:0,max:e.length-1}},ka=function(e,t){var n=e.min,r=e.max;return t.length?{min:Oa()(t[Math.ceil(n)].x),max:Oa()(t[Math.floor(r)].x)}:{}},xa=function(e){return Object(la.f)(e).timeline.libmicroreact},_a=Object(xe.createSelector)(sa.b,(function(e){return function(t){var n=t.id;return e[n].name}})),Ia=Object(xe.createSelector)(sa.a,(function(e){var t=[],n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;if(c.year){var l=Oa()();l.set("year",c.year),l.set("month",c.month||1),l.set("date",c.day||1),t.push({date:l.toDate(),id:c.id})}}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return wa()(t,"date")})),Ta=function(e){return Ia(e).length>0},La=Object(xe.createSelector)(Ia,(function(e){return xa(e).unit}),Na),Aa=Object(xe.createSelector)((function(e){return xa(e).bounds}),La,(function(e,t){return e||Pa(t)})),Da=Object(xe.createSelector)(Aa,La,ka),Ma=Object(xe.createSelector)((function(e){return xa(e).bounds}),Ia,Da,(function(e,t,n){var r=n.min,a=n.max;if(null===e)return null;var o=[],i=!0,c=!1,l=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var d=s.value,m=d.date,p=d.id;r.isSameOrBefore(m)&&a.isSameOrAfter(m)&&o.push(p)}}catch(e){c=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(c)throw l}}return o})),Ra=n(62),Fa=function(e){return e.viewer},za=Object(xe.createSelector)((function(e){return Fa(e).search.intersections}),(function(e){return e.reduce((function(e,t){var n=t[0].value.ids,r=!0,a=!1,o=void 0;try{for(var i,c=function(){var e=i.value.value;n=n.filter((function(t){return-1!==e.ids.indexOf(t)}))},l=t.slice(1)[Symbol.iterator]();!(r=(i=l.next()).done);r=!0)c()}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return e.concat(n)}),[])})),Ga=Object(xe.createSelector)((function(e){return Fa(e).filter}),ga,ya.c,Ma,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=[];return e[Ra.a.MAP].active&&a.push(e[Ra.a.MAP].ids),t.length&&a.push(new Set(t)),n&&n.length&&a.push(new Set(n)),r&&r.length&&a.push(new Set(r)),e[Ra.a.VISIBILITY].active&&a.push(e[Ra.a.VISIBILITY].ids),a})),Ua=Object(xe.createSelector)(sa.c,ya.f,(function(e,t){return t.length?t:e})),Ba=Object(xe.createSelector)(sa.c,(function(e){return e.length})),Ha=Object(xe.createSelector)(Ga,(function(e){return Fa(e).search.intersections}),za,(function(e,t,n){var r=f()(e);t.length&&r.push(new Set(n));var a=new Set(r[0]),o=!0,i=!1,c=void 0;try{for(var l,s=r.slice(1)[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value,d=!0,m=!1,p=void 0;try{for(var h,g=a[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var v=h.value;u.has(v)||a.delete(v)}}catch(e){m=!0,p=e}finally{try{d||null==g.return||g.return()}finally{if(m)throw p}}}}catch(e){i=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}return new Set(a)})),Va=Object(xe.createSelector)(Ua,Ba,Ha,(function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!!n.size;return{unfilteredIds:e,total:t,ids:n,active:r,count:r?n.size:e.length}})),Ka=Object(xe.createSelector)(Va,(function(e){return Array.from(e.active?e.ids:e.unfilteredIds)})),qa=n(37),Wa=n(11),Ya=n(143),Za=n(119),Xa=n(77),Qa=function(e){return Object(la.f)(e).search},Ja=function(e){return Qa(e).category},$a=function(e){return Qa(e).text},eo=function(e){return Qa(e).sort},to=function(e){return Qa(e).advanced},no=Object(xe.createSelector)(Ja,$a,(function(e){return Qa(e).exact}),(function(e,t,n){return t.length?(e&&e.numeric&&(r=Object(Za.e)(t)),r||(r=Object(Za.g)(t,n)),r):null;var r})),ro=Object(xe.createSelector)(Qa,(function(e){return Array.from(e.recent)})),ao=Object(xe.createSelector)(Qa,(function(e){return e.intersections})),oo=Object(xe.createSelector)(Qa,(function(e){return e.intersections[e.currentIntersection]})),io=Object(xe.createSelector)(qa.h,no,qa.j,(function(e,t,n){return Object.keys(e).reduce((function(r,a){var o=e[a],i=Object(Za.i)(o.columns,a,t);if(o===e.metadata){var c=Object(Za.f)(n,t);c&&i.unshift(c)}return i.length&&r.push({heading:Wa.b[a],items:i}),r}),[])}));function co(e,t,n){var r=n.length?[{key:"contains_".concat(t),label:t,ids:n,isExpression:!0}]:[],a=e.numeric?"Enter expression: =, <, >, <=, >=":"Enter text";return{heading:e.numeric?"Expression":"Contains",placeholder:a,items:r}}var lo=Object(xe.createSelector)(sa.b,sa.a,oo,Ga,(function(e,t,n,r){var a=f()(r);if(n){var o=!0,i=!1,c=void 0;try{for(var l,s=n[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;a.push(new Set(u.value.ids))}}catch(e){i=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}}if(!a.length)return t;var d=new Set(a[0]),m=!0,p=!1,h=void 0;try{for(var g,v=a.slice(1)[Symbol.iterator]();!(m=(g=v.next()).done);m=!0){var b=g.value,y=!0,E=!1,O=void 0;try{for(var C,w=d[Symbol.iterator]();!(y=(C=w.next()).done);y=!0){var S=C.value;b.has(S)||d.delete(S)}}catch(e){E=!0,O=e}finally{try{y||null==w.return||w.return()}finally{if(E)throw O}}}}catch(e){p=!0,h=e}finally{try{m||null==v.return||v.return()}finally{if(p)throw h}}return Array.from(d).map((function(t){return e[t]}))})),so=Object(xe.createSelector)(Ja,qa.h,$a,no,lo,eo,oo,(function(e,t,n,r,a,o){var i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],c=t[e.tableName],l=Object(Za.d)(c.columns,e.key),s=new Map,u=[],d=!0,m=!1,p=void 0;try{for(var f,h=function(){var t=f.value,n=l.valueGetter(t);if(null==n)return"continue";if(i.some((function(r){return r.category.key===e.key&&r.value.key===n||!r.value.ids.includes(t.uuid)})))return"continue";var a=Object(Za.h)(n,e.tableName),o=r&&r.test(a);if(o&&u.push(t.uuid),r?o:a){var c=s.get(n)||{key:n,label:a,ids:[]};c.ids.push(t.uuid),s.set(n,c)}},g=a[Symbol.iterator]();!(d=(f=g.next()).done);d=!0)h()}catch(e){m=!0,p=e}finally{try{d||null==g.return||g.return()}finally{if(m)throw p}}return[co(e,n,u),{heading:"Matches",items:Array.from(s.values()).sort(Za.j[o]),placeholder:"No results",sort:!0}]})),uo=function(e){return Ja(e)?so(e):io(e)},mo=Object(xe.createSelector)(uo,(function(e){return Qa(e).cursor}),(function(e,t){if(0===e.length)return null;var n=t,r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value.items;if(!(n>=l.length))return l[n];n-=l.length}}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}var s=e[e.length-1].items;return s[s.length-1]||null})),po=Object(xe.createSelector)(Qa,qa.d,(function(e,t){var n=e.advanced,r=e.category;return"FILTER ".concat(n?r?r.label:"COLUMNS":Object(Xa.a)(t.activeColumn))})),fo=n(44);var ho=Object(s.a)((function(e){return{active:eo(e)}}),(function(e){return{onChange:function(t){return e(Object(fo.s)(t.target.value))}}}))((function(e){var t=e.active,n=e.onChange;return a.a.createElement("aside",null,a.a.createElement("label",null,"Sort by",a.a.createElement("select",{value:t,onChange:n},a.a.createElement("option",{value:Ya.b.FREQ_DESC},"Frequency: High to Low"),a.a.createElement("option",{value:Ya.b.FREQ_ASC},"Frequency: Low to High"),a.a.createElement("option",{value:Ya.b.VALUE_ASC},"Value: Ascending"),a.a.createElement("option",{value:Ya.b.VALUE_DESC},"Value: Descending"))))}));var go=Object(s.a)((function(e,t){var n=t.index;return{active:Qa(e).currentIntersection===n}}),(function(e,t){var n=t.index;return{onClick:function(){return e(Object(fo.q)(n))}}}))((function(e){var t=e.operator,n=e.active,r=e.onClick;return a.a.createElement("button",{className:d()("mdl-chip",{"mdl-chip--active":n}),onClick:r},a.a.createElement("span",{className:"mdl-chip__text"},t))}));function vo(e){return function(t,n){var r=Qa(n());if(r.recent.has(e))t(Object(fo.k)(e));else if(r.category){var a=Object(Za.b)(r.category,e);t(Object(fo.k)(a))}else t(Object(fo.r)(e))}}function bo(e,t,n){var r=Object(qa.e)(e),a=Object(qa.d)(e),o=Object(sa.a)(e);return Object(Za.a)(r,a,o,t,n)}var yo=a.a.createClass({displayName:"AdvancedMode",propTypes:{open:a.a.PropTypes.bool},renderCurrentFilter:function(){var e=this.props,t=e.current,n=e.removeTerm;return t.length?a.a.createElement("section",null,a.a.createElement("h2",{className:"wgsa-search-dropdown__heading"},"Current Filter"),t.map((function(e,r){return a.a.createElement("ul",{key:r},e.map((function(t,o){return a.a.createElement("li",{key:t.key},a.a.createElement("span",{className:"mdl-chip mdl-chip--deletable mdl-chip--contact mdl-chip--alt"},a.a.createElement("span",{className:"mdl-chip__contact"},t.value.ids.length),a.a.createElement("span",{className:"mdl-chip__text"},a.a.createElement("small",null,t.category.label,": "),a.a.createElement("strong",null,t.value.label)),a.a.createElement("button",{className:"mdl-chip__action",onClick:function(){return n(t,r)},title:"Remove"},a.a.createElement("i",{className:"material-icons"},"cancel"))),o<e.length-1&&a.a.createElement("span",{className:"wgsa-search-operator"},"AND"))})),a.a.createElement("li",null,a.a.createElement(go,{operator:"AND",index:r})),r<t.length-1&&a.a.createElement("li",{className:"wgsa-search-operator"},a.a.createElement("span",null,"OR")),r===t.length-1&&a.a.createElement("li",{className:"wgsa-search-operator"},a.a.createElement(go,{operator:"OR",index:t.length})))})),a.a.createElement("hr",null)):null},renderRecentTerms:function(){var e=this.props,t=e.recent,n=e.selectItem;return t.length?a.a.createElement("section",null,a.a.createElement("h2",{className:"wgsa-search-dropdown__heading"},"Recently Used"),a.a.createElement("ul",null,t.map((function(e){return a.a.createElement("li",{key:e.key},a.a.createElement("button",{className:"mdl-chip mdl-chip--contact",onClick:function(){return n(e)}},a.a.createElement("span",{className:"mdl-chip__text"},a.a.createElement("span",{className:"mdl-chip__contact mdl-chip__contact--muted"},e.value.ids.length),a.a.createElement("small",null,e.category.label,": "),a.a.createElement("strong",null,e.value.label))))}))),a.a.createElement("hr",null)):null},getColumnHeading:function(e,t){return e?a.a.createElement("h2",{className:"wgsa-search-dropdown__heading"},"Choose Value"):t.length?a.a.createElement("h2",{className:"wgsa-search-dropdown__heading"},"Choose Column"):a.a.createElement("span",null,"(No matching column)")},render:function(){var e=this.props,t=e.sections,n=e.activeItem,r=e.category,o=this.props,i=o.selectItem,c=o.removeCategory;return a.a.createElement("div",{className:"wgsa-advanced-search"},this.renderCurrentFilter(),this.renderRecentTerms(),a.a.createElement("section",null,this.getColumnHeading(r,t),!!r&&a.a.createElement("span",{className:"mdl-chip mdl-chip--deletable"},a.a.createElement("span",{className:"mdl-chip__text"},r.label),a.a.createElement("button",{className:"mdl-chip__action",onClick:function(){return c()}},a.a.createElement("i",{className:"material-icons"},"cancel")))),a.a.createElement("div",{className:"wgsa-search-dropdown__values"},t.map((function(e){var t=e.heading,r=e.items,o=e.placeholder,c=e.sort;return a.a.createElement("section",{key:t},c&&a.a.createElement(ho,null),a.a.createElement("h3",{className:"wgsa-search-dropdown__heading"},t),o&&!r.length&&a.a.createElement("p",null,"(",o,")"),a.a.createElement("ul",null,r.map((function(e){return a.a.createElement("li",{key:e.key},a.a.createElement("button",{className:d()("mdl-chip",{"mdl-chip--active":e===n,"mdl-chip--contact":e.ids}),onClick:function(){return i(e)}},e.ids&&a.a.createElement("span",{className:"mdl-chip__contact"},e.ids.length),a.a.createElement("span",{className:"mdl-chip__text"},e.label)))}))))}))))}});var Eo=Object(s.a)((function(e){return{category:Ja(e),current:ao(e),recent:ro(e),sections:uo(e),activeItem:mo(e)}}),(function(e){return{selectItem:function(t){return e(vo(t))},removeTerm:function(t,n){return e(Object(fo.p)(t,n))},removeCategory:function(){return e(Object(fo.r)(null))}}}))(yo),Oo=a.a.createClass({displayName:"SearchDropdown",propTypes:{isOpen:a.a.PropTypes.bool,close:a.a.PropTypes.func},render:function(){var e=this.props,t=e.isOpen,n=e.close;return a.a.createElement(O.a,{className:"wgsa-search-dropdown-container"},t?a.a.createElement("div",{className:"wgsa-search-dropdown"},a.a.createElement("button",{onClick:n,className:"mdl-button mdl-button--icon"},a.a.createElement("i",{className:"material-icons"},"close")),a.a.createElement(Eo,null)):null)}});var Co=Object(s.a)((function(e){return{isOpen:to(e)}}),(function(e){return{close:function(){return e(Object(fo.u)())}}}))(Oo),wo=n(73);var So=Object(s.a)((function(e){var t=Va(e);return{totalAmount:t.total,filteredAmount:t.count,active:t.active}}),(function(e){return{clear:function(){return e(Object(wo.g)())}}}))((function(e){var t=e.active,n=e.filteredAmount,r=e.totalAmount,o=e.clear,i=e.children;return a.a.createElement("span",{className:"wgsa-filter-status",onClick:function(e){return e.stopPropagation()}},a.a.createElement("span",null,n," of ",r),i,a.a.createElement("button",{className:"mdl-button mdl-button--icon",onClick:o,title:"Clear filter",disabled:!t},a.a.createElement("i",{className:"material-icons"},"backspace")))})),jo=a.a.createClass({displayName:"Search",propTypes:{filteredAmount:a.a.PropTypes.number,totalAmount:a.a.PropTypes.number,filterColumnName:a.a.PropTypes.string,handleChange:a.a.PropTypes.func},componentDidUpdate:function(e){var t=this.props.search;e.search.category===t.category&&e.search.intersections===t.intersections&&e.search.currentIntersection===t.currentIntersection&&e.search.advanced===t.advanced||this.refs.input.focus()},handleChange:function(e){this.props.handleChange(e.target.value)},handleClick:function(){this.refs.input.focus()},handleKeyboard:function(e){var t=this.props.search,n=t.text,r=t.category;switch(e.keyCode){case 37:this.props.moveCursor(-1);break;case 39:this.props.moveCursor(1);break;case 38:this.props.moveIntersection(-1);break;case 40:this.props.moveIntersection(1);break;case 8:r&&0===n.length&&this.props.removeCategory();break;case 13:this.props.selectItemAtCursor();break;case 27:e.stopPropagation(),this.props.toggleMode()}},render:function(){var e=this.props,t=e.toggleMode,n=e.toggleExactMatch,r=e.search,o=r.text,i=r.advanced,c=r.exact;return a.a.createElement("div",{className:"wgsa-search-box-container"},a.a.createElement("div",{className:d()("wgsa-search-box",{"wgsa-search-box--active":i}),onClick:this.handleClick},a.a.createElement("i",{className:"wgsa-search-box__icon material-icons"},"search"),a.a.createElement("button",{className:d()("mdl-button mdl-button--icon",{active:i}),onClick:t,title:"Toggle advanced search"},a.a.createElement("i",{className:"material-icons"},"add_box")),a.a.createElement("button",{className:d()("mdl-button mdl-button--icon",{active:c}),onClick:n,title:"Toggle exact match"},a.a.createElement("i",{className:"material-icons"},"explicit")),a.a.createElement("input",{ref:"input",className:"wgsa-search-box__input",placeholder:this.props.placeholder,onChange:this.handleChange,onKeyDown:this.handleKeyboard,value:o}),a.a.createElement(So,null)),a.a.createElement(Co,null))}});var No=Object(s.a)((function(e){return{search:Qa(e),placeholder:po(e)}}),(function(e){return{handleChange:function(t){return e(function(e){return function(t,n){var r=n(),a=Qa(r),o=a.advanced,i=a.exact;if(o)t(Object(fo.m)(e));else{var c=bo(r,e,i);t(Object(fo.k)(c))}}}(t))},openDropdown:function(t){return e(Object(fo.l)(t))},removeCategory:function(){return e(Object(fo.r)(null))},selectItemAtCursor:function(){return e((function(e,t){var n=mo(t());n&&e(vo(n))}))},moveCursor:function(t){return e(Object(fo.n)(t))},moveIntersection:function(t){return e(Object(fo.o)(t))},toggleMode:function(){return e(Object(fo.u)())},toggleExactMatch:function(){return e((function(e,t){var n=t(),r=Qa(n),a=r.text,o=r.exact,i=!!a.length&&bo(n,a,!o);e(Object(fo.t)(i))}))}}}))(jo),Po=(n(1030),n(171)),ko=(n(1032),a.a.createClass({displayName:"DropArea",propTypes:{onFiles:a.a.PropTypes.func.isRequired},getInitialState:function(){return{indicatorVisible:!1}},handleDrop:function(e){e.stopPropagation(),e.preventDefault(),this.setState({indicatorVisible:!1}),e.dataTransfer&&e.dataTransfer.files.length>0&&this.props.onFiles(e.dataTransfer.files)},showDropIndicator:function(e){e.stopPropagation(),e.preventDefault(),this.setState({indicatorVisible:!0})},hideDropIndicator:function(e){e.stopPropagation(),e.preventDefault(),this.setState({indicatorVisible:!1})},handleClick:function(){this.refs.fileInput.click()},handleFileInputChange:function(e){var t=e.target.files;t&&t.length>0&&(this.props.onFiles(t),e.target.value=null)},render:function(){return a.a.createElement("form",{className:d()("pw-drop-area-form",this.props.className,{"is-indicating":this.state.indicatorVisible}),onDragOver:this.showDropIndicator,onDragLeave:this.hideDropIndicator,onDrop:this.handleDrop,onClick:this.handleClick},a.a.createElement(O.a,null,this.state.indicatorVisible?a.a.createElement("p",{key:"drop"},a.a.createElement("strong",null,"Drop to upload")):a.a.cloneElement(this.props.children,{key:"instructions"})),a.a.createElement("input",{type:"file",multiple:"multiple",accept:".csv",ref:"fileInput",onChange:this.handleFileInputChange}))}})),xo=window.URL||window.webkitURL;function _o(e){var t=new Blob([e],{type:"text/csv;charset=utf-8"});return xo.createObjectURL(t)}var Io=a.a.createClass({displayName:"DownloadButton",getInitialState:function(){return{link:null}},componentWillReceiveProps:function(e){this.props.genomeIds!==e.genomeIds&&this.setState({link:null})},componentDidUpdate:function(e,t){!t.link&&this.state.link&&this.link.click()},onClick:function(){var e=this;this.props.generateFile().then((function(t){e.setState({link:_o(t)})}))},render:function(){var e=this,t=this.props,n=t.filename,r=t.title,o=t.children,i=t.className;return this.state.link?a.a.createElement("a",{ref:function(t){e.link=t},href:this.state.link,target:"_blank",rel:"noopener",download:n,title:r,className:i},o):a.a.createElement("button",{onClick:this.onClick,title:r,className:i},o)}}),To=n(314),Lo=n.n(To),Ao=n(506),Do=/(\.csv)$/i;function Mo(e){for(var t={},n=0,r=Object.entries(e);n<r.length;n++){var a=B()(r[n],2),o=a[0],i=a[1];o.length&&"string"==typeof i&&(t[o.toLowerCase().trim()]=i.trim().replace(/^=*/,""))}return t}function Ro(e){var t=Lo.a.parse(e,{header:!0,dynamicTyping:!1,skipEmptyLines:!0});return t.errors.length>0&&(console.error("[Pathogenwatch] Errors during CSV to JSON conversion:"),console.dir(t.errors)),t.data=t.data.map(Mo),t}function Fo(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.filename,n=e.displayname,r=e.id,a=e.name,o=E()(e,["displayname","id","name"]),i=n||a||r||t,c=o.year,l=o.month,s=o.day,u=o.latitude,d=o.longitude,m=o.pmid,p=E()(o,["year","month","day","latitude","longitude","pmid"]),f={},h=0,g=Object.entries(p);h<g.length;h++){var v=B()(g[h],2),b=v[0],y=v[1];y.length&&"filename"!==b&&(f[b]=y)}var O={name:i,userDefined:f};return c&&(O.year=parseInt(c,10)),l&&(O.month=parseInt(l,10)),s&&(O.day=parseInt(s,10)),u&&(O.latitude=parseFloat(u)),d&&(O.longitude=parseFloat(d)),m&&(O.pmid=m),Object(Ao.default)(O),O}var zo={parseCsvToJson:Ro,isValid:function(e){var t=e.date,n=(new Date).getFullYear();if(!t)return!0;var r=t.day,a=t.month,o=t.year;return!(r&&(r<1||r>31||!a||!o))&&(!(a&&(a<1||a>12||!o))&&(!o||!(o<1900||o>n)))}};function Go(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Uo=n(156),Bo=n(312),Ho=Object(xe.createSelector)((function(e){return e.viewer.highlight}),(function(e){return e.ids})),Vo=Object(xe.createSelector)(Ho,Array.from),Ko=Object(xe.createSelector)(Ho,(function(e){return e.size>0}));function qo(e){for(var t=[],n=[e];n.length;){var r=n.shift();t.push(r),Array.isArray(r.children)&&n.unshift.apply(n,f()(r.children))}return t}function Wo(e){for(var t=[],n=[e];n.length;){var r=n.pop();Array.isArray(r.children)&&n.push.apply(n,f()(r.children)),t.push(r)}return t.reverse()}var Yo=n(681),Zo=function(e){var t=e;"string"==typeof e&&(t={type:"newick",data:e});var n=t,r=n.type,a=n.data,o=E()(n,["type","data"]),i=null;if("newick"===r||void 0===r)i=Yo.parse_newick(a);else{if("biojs"!==r)throw new Error("Source type is not supported: ".concat(r));i=a}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.trimQuotes,r=void 0===n||n,a=Wo(e),o=qo(e),i=a.every((function(e){return 0===(e.branchLength||e.branch_length||0)}));if(i){e.branchLength=0;for(var c=0;c<o.length;c++){var l=o[c];if(l.children){var s=!0,u=!1,d=void 0;try{for(var m,p=l.children[Symbol.iterator]();!(s=(m=p.next()).done);s=!0){var f=m.value;f.branchLength=l.branchLength+1}}catch(e){u=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}}}}for(var h=0;h<a.length;h++){var g=a[h];if(g.postIndex=h,g.isLeaf=!Array.isArray(g.children),g.branchLength=Math.abs(g.branchLength||g.branch_length||0),delete g.branch_length,g.isLeaf&&"string"==typeof g.name&&(g.id=r?g.name.trim().replace(/^['"]|['"]$/g,""):g.name,delete g.name),g.totalNodes=1,g.totalLeaves=1,g.totalLeafLength=g.branchLength,!g.isLeaf){g.totalNodes=1,g.totalLeaves=0;var v=0,b=!0,y=!1,E=void 0;try{for(var O,C=g.children[Symbol.iterator]();!(b=(O=C.next()).done);b=!0){var w=O.value;g.totalNodes+=w.totalNodes,g.totalLeaves+=w.totalLeaves,w.totalLeafLength>v&&(v=w.totalLeafLength),w.parent=g}}catch(e){y=!0,E=e}finally{try{b||null==C.return||C.return()}finally{if(y)throw E}}g.totalLeafLength=g.branchLength+v,g.longestLeaf=v}}for(var S={},j=[],N=0;N<o.length;N++){var P=o[N];P.preIndex=N,P.id||(P.id=N.toString()),S[P.id]=P,P.distanceFromRoot=(P.parent?P.parent.distanceFromRoot:0)+P.branchLength,P.isLeaf&&j.push(P),P.visibleLeaves=P.totalLeaves}return{nodeById:S,rootNode:e,leafNodes:j,postorderTraversal:a,preorderTraversal:o}}(i,o)};function Xo(e,t,n){var r=[],a=!0,o=!1,i=void 0;try{for(var c,l=n.children[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var s=c.value,u=e.splice(t,s.totalNodes);r.push(u)}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}for(var d=0,m=r;d<m.length;d++){var p=m[d];e.splice.apply(e,[t,0].concat(f()(p)))}}var Qo=function(e,t,n){var r=t.preorderTraversal,a=t.postorderTraversal;Xo(r,r.indexOf(n)+1,n);for(var o=0;o<r.length;o++)r[o].preIndex=o;Xo(a,a.indexOf(n)-n.totalNodes+1,n);for(var i=0;i<a.length;i++)a[i].postIndex=i;n.children.reverse()},Jo=n(71),$o=n(65),ei=Object(xe.createSelector)(qa.g,qa.a,(function(e,t){return Object($o.a)(e.entities[t],e.multi)})),ti=Object(xe.createSelector)(qa.d,(function(e){return e.activeColumn.valueGetter}));function ni(e){return e.reference?"triangle":e.public?"square":"circle"}var ri=Object(xe.createSelector)(sa.a,ti,ei,(function(e,t,n){var r={},a=!0,o=!1,i=void 0;try{for(var c,l=e[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var s=c.value;r[s.id]={colour:n(s),label:t(s),shape:ni(s)}}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}return r})),ai=n(29),oi=Object(xe.createSelector)(ri,(function(e){return Ka?Ka(e):[]}),sa.b,(function(e,t,n){for(var r={},a=0,o=Object.keys(e);a<o.length;a++){var i=o[a],c=t.includes(i);r[i]={fillStyle:e[i].colour,fontStyle:n[i].__isCollection||n[i].reference?"bold":null,label:e[i].label,labelFillStyle:n[i].__isCollection?M.b.COLOURS.PURPLE:null,shape:c?e[i].shape:"none",strokeStyle:e[i].colour}}return r})),ii=function(e,t){var n=e.status,r=e.size,a=e.populationSize,o=e.progress;if("PENDING"===n)return"".concat(t,": Pending");if("IN PROGRESS"===n)return"".concat(t,": ").concat(o,"%");if("ERROR"===n)return"".concat(t,": Error, awaiting retry");if("FAILED"===n)return"".concat(t,": Failed");if("READY"===n){var i=r-a;return a>0?"".concat(t," (").concat(i,") [").concat(a,"]"):i>0?"".concat(t," (").concat(i,")"):t}},ci=Object(xe.createSelector)(Jo.d,Jo.c,(function(e){return Object(Jo.d)(e)[ai.b].leafIds}),ya.b,(function(e,t,n,r){var a={},o=!0,i=!1,c=void 0;try{for(var l,s=n[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value,d=r[u];t.includes(u)?a[u]={fillStyle:M.b.COLOURS.PURPLE_LIGHT,fontStyle:"bold",label:ii(e[u],d),labelFillStyle:M.b.COLOURS.PURPLE}:a[u]={fillStyle:M.b.COLOURS.GREY,label:d}}}catch(e){i=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}return a})),li=n(116);function si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ui=Object(xe.createSelector)(ya.e,Vo,sa.b,(function(e,t,n){if(e===ai.b){var r=new Set,a=!0,o=!1,i=void 0;try{for(var c,l=t[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var s=c.value;n[s].analysis&&r.add(n[s].analysis.core.fp.reference)}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}return Array.from(r)}return t})),di=Object(xe.createSelector)(ya.e,ya.b,(function(e){return Object(la.a)(e).uuid}),(function(e,t,n){var r=e in li.a?li.a[e].toLowerCase():t[e];return"pathogenwatch-".concat(hr.b.nickname,"-").concat(n).concat(r?"-".concat(r):"","-tree")})),mi=Object(xe.createSelector)(di,(function(e){return{image:"".concat(e,".png"),leafLabels:"".concat(e,"-labels.txt"),newick:"".concat(e,".nwk")}})),pi={digits:0,fontSize:13,position:{left:8,bottom:16}},fi={shape:"triangle"},hi=Object(xe.createSelector)(Jo.e,ya.g,(function(e){return Object(ya.e)(e)===ai.b?ci(e):oi(e)}),ui,(function(e,t,n,r){var a=e.name,o=e.newick,i=t.phylocanvas;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?si(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):si(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},i,{leafNodeStyle:a===ai.b?fi:i.leafNodeStyle,renderLeafLabels:a===ai.b||i.renderLeafLabels,scalebar:pi,selectedIds:r,source:i.source||o,styles:n})})),gi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return[];var n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value,l=e.nodeById[c];Qo(0,e,l)}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}var s=[],u=!0,d=!1,m=void 0;try{for(var p,f=e.preorderTraversal[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var h=p.value;h.isLeaf&&s.push(h.id)}}catch(e){d=!0,m=e}finally{try{u||null==f.return||f.return()}finally{if(d)throw m}}return s},vi=function(e){var t=Object(ya.a)(e);return ai.a in t?t[ai.a].phylocanvas:{}},bi=Object(xe.createSelector)((function(e){return vi(e).source}),(function(e){return(Object(Jo.d)(e)[ai.a]||{}).newick}),(function(e,t){return e||t?Zo(e||t):null})),yi=Object(xe.createSelector)(bi,(function(e){return vi(e).rotatedIds}),(function(e,t){return gi(e,t)})),Ei=Object(xe.createSelector)((function(e){return Object(ya.g)(e).phylocanvas.source}),(function(e){return e?Zo(e):null})),Oi=Object(xe.createSelector)(ya.e,yi,Ei,(function(e){return Object(ya.g)(e).phylocanvas.rotatedIds}),(function(e,t,n,r){return li.b.has(e)?t.length?t:null:gi(n,r)})),Ci=Object(xe.createSelector)(Ho,Ka,(function(e,t){return Array.from(e.size?e:t)})),wi=Object(xe.createSelector)(sa.b,Ci,(function(e){if(!Object(la.g)(e))return Oi(e)}),(function(e,t,n){if(!n)return t.map((function(t){return e[t]}));var r=[],a=!0,o=!1,i=void 0;try{for(var c,l=n[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var s=c.value;t.includes(s)&&r.push(e[s])}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}return r}));function Si(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ji=Object(xe.createSelector)(wi,(function(e){return e.filter((function(e){return"me"===e.owner}))}));var Ni=Object(s.a)((function(e){return{numberOfRows:Object(Bo.b)(e),genomes:ji(e)}}),(function(e){return{addMetadata:function(t){return e(Object(Uo.c)(t))},clearMetadata:function(){return e(Object(Uo.d)())}}}),(function(e,t){var n=e.numberOfRows,r=e.genomes;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Si(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Si(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({numberOfRows:n},t,{generateCSV:function(){return Promise.resolve("name\n".concat(r.map((function(e){return e.name})).join("\n")))}})}))((function(e){var t=e.addMetadata,n=e.numberOfRows,r=e.clearMetadata,o=e.generateCSV,i=a.a.useState(!1),c=B()(i,2),l=c[0],s=c[1],u=a.a.useState(null),d=B()(u,2),m=d[0],p=d[1];return a.a.createElement(Rt,{align:"right",button:a.a.createElement(Ut,{title:"Private metadata"},a.a.createElement("i",{className:"material-icons"},"note_add")),caret:!0,className:"pw-viewer-add-metadata-menu",open:l,toggle:function(){l||p(null),s(!l)},toggleOnClick:!1},a.a.createElement("header",null,a.a.createElement("h3",null,"Private Metadata"),a.a.createElement(O.a,{out:!0},l&&n>0&&a.a.createElement("button",{key:"clear",className:"wgsa-link-button secondary",onClick:r},a.a.createElement("i",{className:"material-icons wgsa-button-icon"},"remove_circle_outline"),"Clear ",n," added rows"))),a.a.createElement("p",null,"Drag and drop a file in ",a.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Comma-separated_values",target:"_blank",rel:"noopener"},"CSV format")," to add private metadata to this view. These data stay on your computer and are ",a.a.createElement("strong",null,"not saved anywhere else"),", so please retain your files."),a.a.createElement("p",null,"The ",a.a.createElement("strong",null,"name")," column is used to match rows to genome records.",a.a.createElement("br",null),a.a.createElement(Io,{className:"wgsa-link-button",filename:"genomes.csv",generateFile:o},"Download names of your uploaded genomes in this view")),a.a.createElement("p",null,"We recommend you include the following columns:",a.a.createElement("br",null),a.a.createElement("strong",null,"latitude"),", ",a.a.createElement("strong",null,"longitude"),", ",a.a.createElement("strong",null,"year"),", ",a.a.createElement("strong",null,"month"),", ",a.a.createElement("strong",null,"day")),a.a.createElement("p",null,"When providing a date, month and day are optional. Coordinates should be provided in decimal degrees. Extra columns will be included in the metadata table."),a.a.createElement(ko,{className:"pw-viewer-add-metadata-form",onFiles:function(e){var n=Array.from(e)[0];Do.test(n.name)?Object(Po.readAsText)(n).then(Ro).then((function(e){var n=e.data,r=e.errors;if(r.length>0){var a=B()(r,1)[0];p(a)}else t(n.map((function(e){var t=Fo(e);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Go(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Go(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{position:{latitude:t.latitude,longitude:t.longitude}})}))),s(!1)})):p({message:"File extension must end with .csv"})}},m?a.a.createElement("p",{key:"error"},!isNaN(m.row)&&a.a.createElement(a.a.Fragment,null,"There is a problem on row ",m.row+1,":",a.a.createElement("br",null)),a.a.createElement("strong",null,m.message)):a.a.createElement("p",{key:"instruction"},"Drag and drop or click to add")))})),Pi=(n(1034),n(225)),ki=n.n(Pi),xi=n(271),_i=n.n(xi),Ii=n(99),Ti=(n(1036),n(248)),Li=function(e){return Object(la.a)(e).access},Ai=function(e){return Object(la.a)(e).access_status};var Di=Object(s.a)((function(e,t){var n=t.level;return{active:Li(e)===n}}),(function(e,t){var n=t.level;return{onClick:function(){return e(Object(Ti.b)(n))}}}))((function(e){var t=e.onClick,n=e.icon,r=e.active,o=e.title,i=e.description;return a.a.createElement("button",{className:d()({active:r}),title:'Set collection to "'.concat(o,'"'),onClick:t,disabled:r},a.a.createElement("i",{className:"material-icons"},n),a.a.createElement("div",null,a.a.createElement("strong",null,o),a.a.createElement("br",null),i))}));var Mi=Object(s.a)((function(e){return{status:Ai(e)}}))((function(e){var t,n=e.status;return n&&"LOADING"!==n?("ERROR"===n&&(t=a.a.createElement("p",null,a.a.createElement("i",{className:"material-icons"},"error_outline")," Failed, please try again")),"OK"===n&&(t=a.a.createElement("p",null,a.a.createElement("i",{className:"material-icons"},"check_circle")," Saved")),a.a.createElement(O.a,{className:"wgsa-collection-access-status"},t)):null})),Ri=function(){return a.a.createElement("section",{className:"wgsa-collection-access"},a.a.createElement("h4",null,"Access level"),a.a.createElement(Mi,null),a.a.createElement("ul",null,a.a.createElement("li",null,a.a.createElement(Di,{level:"private",icon:"lock",title:"Private",description:"available to you only."})),a.a.createElement("li",null,a.a.createElement(Di,{level:"shared",icon:"link",title:"Shared",description:"available to anyone with the link, no sign-in required."}))))},Fi=n(227),zi=(n(1038),n(1040),n(507)),Gi=n.n(zi),Ui=function(e){var t=e.className,n=e.id,r=e.onChange,o=e.checked,i=e.children,c=e.label,l=void 0===c?i:c;return a.a.createElement(Qt.a,{id:n,className:d()("libmr-Checkbox",t)},a.a.createElement(Gi.a,{onChange:r,checked:o}),a.a.createElement("label",null,l))};Ui.propTypes={checked:_t.a.bool,children:_t.a.node,className:_t.a.string,id:_t.a.string,label:_t.a.node,onChange:_t.a.func};var Bi=Ui,Hi=n(100),Vi=n(81),Ki=function(e){switch(e.status){case Hi.a.SAVING:return"saving data...";case Hi.a.ERRORED:return"sorry, something went wrong.";default:return"page will refresh once saved."}},qi=function(e){var t=e.status,n=e.checkStatus,r=e.onSave,o=Object(Vi.d)();a.a.useEffect((function(){o&&n()}),[]);var i=a.a.useState(t===Hi.a.SAVED),c=B()(i,2),l=c[0],s=c[1];if(a.a.useEffect((function(){l||t!==Hi.a.SAVED||s(!0)}),[t]),!o)return a.a.createElement("div",{className:"wgsa-save-for-offline unsupported"},a.a.createElement("h4",null,"Offline mode"),a.a.createElement("p",null,"Unsupported by your browser."));return a.a.createElement("div",{className:"wgsa-save-for-offline supported"},a.a.createElement("h4",null,"Offline mode"),a.a.createElement(Bi,{id:"save-for-offline",key:"checkbox",checked:l,onChange:function(){l||(s(!0),r())}},t===Hi.a.SAVED?a.a.createElement("span",null,a.a.createElement("strong",null,"Saved for offline use"),a.a.createElement("br",null),a.a.createElement("a",{href:"/offline",target:"_blank",rel:"noopener"},"manage offline collections")):a.a.createElement("span",null,a.a.createElement("strong",null,"Save for offline use"),a.a.createElement("br",null),a.a.createElement(Ki,{status:t}))))},Wi=function(e){return Object(la.f)(e).offline.status},Yi=n(275);var Zi=Object(s.a)((function(e){return{status:Wi(e)}}),(function(e){return{checkStatus:function(){return e(Object(Yi.b)())},onSave:function(){return e(Object(Yi.c)())}}}))(qi),Xi=n(315);function Qi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ji=Object(s.a)((function(e){return{isOpen:Object(la.f)(e).aboutCollectionOpen,metadata:Object(la.b)(e),organism:hr.b.current.formattedName}}),null,(function(e,t){var n=t.dispatch;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qi(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{onButtonClick:function(){return n(Object(Xi.b)(!e.isOpen))}})}))((function(e){var t=e.organism,n=e.metadata,r=e.isOpen,o=e.onButtonClick;return a.a.createElement(Rt,{align:"right",button:a.a.createElement(Ut,{title:"About collection"},a.a.createElement("i",{className:"material-icons"},"info")),caret:!0,className:"wgsa-about-collection-dropdown",open:r,toggle:o,toggleOnClick:!1},a.a.createElement(Fi.a,{className:"wgsa-about-collection-dropdown__title",level:"3"},n.title||"About Collection"),a.a.createElement("p",{className:"wgsa-card-metadata-inliner"},a.a.createElement(Ii.a,{title:"Organism",icon:"bug_report"},t),a.a.createElement(Ii.a,{tooltip:n.dateCreated.toLocaleDateString(),icon:"access_time"},_i()(n.dateCreated,new Date)," ago")),n.description?a.a.createElement(ki.a,{source:n.description}):a.a.createElement("p",null,"(no description)"),n.pmid&&a.a.createElement("p",{className:"pw-append-icon"},a.a.createElement(K.a,{pmid:n.pmid},"View Publication"),a.a.createElement("i",{className:"material-icons"},"launch")),"me"===n.owner&&a.a.createElement("hr",null),"me"===n.owner&&a.a.createElement(Ri,{access:n.access}),a.a.createElement("hr",null),a.a.createElement(Zi,null))}));n(1043),n(1045);function $i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ec=function(e){return a.a.createElement(Rt,b()({},e,{className:d()("libmr-DropdownMenu",e.className)}))};ec.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$i(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Rt.propTypes);var tc=zt(ec),nc=(Object(xe.createSelector)(sa.b,Ci,(function(e,t){return t.reduce((function(t,n){var r=e[n],a=r.reference,o=r.__isCollection;return a?(t.reference++,t):o?(t.collection++,t):(t.public++,t)}),{reference:0,collection:0,public:0})})),Object(xe.createSelector)(la.a,(function(e){return Object(R.c)("/download/collection/".concat(e.uuid))}))),rc=n(80),ac=function(e){var t=e.link,n=e.filename,r=e.title,o=e.genomeIds,i=e.children;return a.a.createElement("form",{action:"".concat(t,"?filename=").concat(n),method:"POST"},a.a.createElement("button",{type:"submit",download:n,title:r},i),o&&a.a.createElement("input",{type:"hidden",name:"ids",value:o}))},oc=function(e){var t=e.collection,n=e.genomeIds,r=e.prefix;return a.a.createElement(a.a.Fragment,null,a.a.createElement(ac,{link:"".concat(r,"/speciator"),filename:Object(rc.a)(t,"species-prediction.csv"),genomeIds:n},"Species prediction"),hr.b.uiOptions.kleborate&&a.a.createElement(ac,{link:"".concat(r,"/kleborate"),filename:Object(rc.a)(t,"kleborate.csv"),genomeIds:n},"Kleborate"))};oc.propTypes={collection:a.a.PropTypes.object,genomeIds:a.a.PropTypes.array,prefix:a.a.PropTypes.string};var ic,cc,lc=Object(s.a)((function(e){return{collection:Object(la.a)(e),genomeIds:Ci(e),prefix:nc(e)}}))(oc),sc=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{onClick:function(){return Xn("network-png","pathogenwatch-clustering")}},"Network (.png)"),a.a.createElement("button",{onClick:function(){return Xn("network-svg","pathogenwatch-clustering")}},"Network (.svg)"))},uc=n(97),dc=n(91);function mc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var pc={columnKey:"__name",valueGetter:function(e){return e.name}},fc={columnKey:"__latitude",valueGetter:function(e){var t=e.position;return t&&t.latitude?t.latitude:""}},hc={columnKey:"__longitude",valueGetter:function(e){var t=e.position;return t&&t.longitude?t.longitude:""}},gc={columnKey:"__mlst",valueGetter:function(e){var t=e.analysis;return t.mlst?t.mlst.st:""}},vc={columnKey:"__mlst_profile",valueGetter:function(e){var t=e.analysis;if(!t.mlst)return null;var n=t.mlst,r=n.code,a=n.alleles;return r||Object(dc.a)(a)}},bc=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mc(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}((ic={},Ct()(ic,pc.columnKey,pc),Ct()(ic,fc.columnKey,fc),Ct()(ic,hc.columnKey,hc),ic),uc.a,(cc={},Ct()(cc,gc.columnKey,gc),Ct()(cc,vc.columnKey,vc),cc)),yc={metadata:Xa.c,typing:Xa.c,stats:Xa.c,antibiotics:function(e,t){var n=t.analysis.paarsnp;return Object($o.g)(n,e)?1:0},snps:function(e,t){return Object($o.f)(t,"snp",e)?1:0},genes:function(e,t){return Object($o.f)(t,"paar",e)?1:0}};function Ec(e,t,n){var r=function(e,t){return e.map((function(e){var n=e.key;if(n in bc)return bc[n].valueGetter;var r=yc[t];return function(e){return r(n,e)}}))}(t,e);return Lo.a.unparse({fields:t.map((function(e){return e.label})),data:n.map((function(e){return r.map((function(t){return t(e)}))}))})}function Oc(e,t){return t.group?t.columns.reduce(Oc,e):t.columnKey in e||t.hidden||!t.valueGetter?e:(e[t.columnKey]=t,e)}function Cc(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){var r=n.genomes,a=n.genomeIds,o=n.tables[e].columns.reduce(Oc,{});o=Object.keys(o).map((function(e){return{key:e,label:o[e].displayName||Object(Xa.a)(o[e])}})).concat(t);var i=a.map((function(e){return r[e]}));return Promise.resolve(Ec(e,o,i))}}var wc=Cc(Wa.c.metadata,[{key:"__latitude",label:"LATITUDE"},{key:"__longitude",label:"LONGITUDE"}]),Sc=Cc(Wa.c.typing),jc=Cc(Wa.c.stats),Nc=Cc(Wa.c.antibiotics),Pc=Cc(Wa.c.snps),kc=Cc(Wa.c.genes),xc=function(e){var t=e.collection,n=e.genomes,r=e.genomeIds,o=e.tables;return a.a.createElement(a.a.Fragment,null,e.hasMetadataTable&&a.a.createElement(Io,{filename:Object(rc.a)(t,"metadata.csv"),genomeIds:r,generateFile:function(){return wc({genomes:n,genomeIds:r,tables:o})}},"Metadata table"),e.hasTypingTable&&a.a.createElement(Io,{filename:Object(rc.a)(t,"typing.csv"),genomeIds:r,generateFile:function(){return Sc({genomes:n,genomeIds:r,tables:o})}},"Typing table"),a.a.createElement(Io,{filename:Object(rc.a)(t,"stats.csv"),genomeIds:r,generateFile:function(){return jc({genomes:n,genomeIds:r,tables:o})}},"Stats table"),e.hasAMRTables&&a.a.createElement(a.a.Fragment,null,a.a.createElement("hr",null),a.a.createElement(Io,{filename:Object(rc.a)(t,"amr-profile.csv"),genomeIds:r,generateFile:function(){return Nc({genomes:n,genomeIds:r,tables:o})}},"AMR profile"),a.a.createElement(Io,{filename:Object(rc.a)(t,"amr-snps.csv"),genomeIds:r,generateFile:function(){return Pc({genomes:n,genomeIds:r,tables:o})}},"AMR SNPs"),a.a.createElement(Io,{filename:Object(rc.a)(t,"amr-genes.csv"),genomeIds:r,generateFile:function(){return kc({genomes:n,genomeIds:r,tables:o})}},"AMR genes")))};xc.propTypes={collection:a.a.PropTypes.object,genomes:a.a.PropTypes.object,genomeIds:a.a.PropTypes.array,hasMetadataTable:a.a.PropTypes.bool,hasTypingTable:a.a.PropTypes.bool,tables:a.a.PropTypes.object};var _c=Object(s.a)((function(e){return{collection:Object(la.a)(e),genomes:Object(sa.b)(e),genomeIds:Ci(e),hasMetadataTable:Object(sa.f)(e),hasTypingTable:Object(qa.k)(e),hasAMRTables:Object(sa.d)(e),tables:Object(qa.h)(e)}}))(xc),Ic=function(e){var t=e.collection;return a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{onClick:function(){return Xn("timeline-png",Object(rc.a)(t,"timeline"))}},"Timeline (.png)"))};Ic.propTypes={collection:a.a.PropTypes.object,genomeIds:a.a.PropTypes.array,prefix:a.a.PropTypes.string,tree:a.a.PropTypes.string};var Tc=Object(s.a)((function(e){return{collection:Object(la.a)(e)}}))(Ic),Lc=function(e){var t=e.link,n=e.filename,r=e.title,o=e.genomeIds,i=e.tree,c=e.children;return a.a.createElement("form",{action:"".concat(t,"?filename=").concat(n),method:"POST"},a.a.createElement("button",{type:"submit",download:n,title:r,disabled:i===ai.b},c),o&&a.a.createElement("input",{type:"hidden",name:"ids",value:o}),!li.b.has(i)&&a.a.createElement("input",{type:"hidden",name:"subtree",value:i}))},Ac=function(e){var t=e.link,n=e.filename,r=e.title,o=e.children;return a.a.createElement("a",{href:"".concat(t,"?filename=").concat(n),target:"_blank",rel:"noopener",download:n,title:r},o)},Dc=function(e){var t=e.collection,n=e.genomeIds,r=e.path,o=e.filename,i=e.tree;return i?a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{onClick:function(){return Xn("tree-nwk",o)}},"Tree (.nwk)"),a.a.createElement("button",{onClick:function(){return Xn("tree-png",o)}},"Tree (.png)"),a.a.createElement("button",{onClick:function(){return Xn("tree-svg",o)}},"Tree (.svg)"),a.a.createElement("hr",null),a.a.createElement(Lc,{link:"".concat(r,"/core-allele-distribution"),filename:Object(rc.a)(t,"core-allele-distribution.csv"),genomeIds:n,tree:i},"Core allele distribution"),a.a.createElement(Lc,{link:"".concat(r,"/score-matrix"),filename:Object(rc.a)(t,"score-matrix.csv"),genomeIds:n,tree:i},"Score matrix"),a.a.createElement(Lc,{link:"".concat(r,"/difference-matrix"),filename:Object(rc.a)(t,"difference-matrix.csv"),genomeIds:n,tree:i},"Difference matrix"),a.a.createElement(Ac,{link:"".concat(r,"/variance-summary"),filename:Object(rc.a)(t,"variance-summary.csv")},"Variance summary")):null};Dc.propTypes={collection:a.a.PropTypes.object,genomeIds:a.a.PropTypes.array,prefix:a.a.PropTypes.string,tree:a.a.PropTypes.string};var Mc=Object(s.a)((function(e){return{collection:Object(la.a)(e),filename:di(e),genomeIds:Ci(e),path:nc(e),tree:Object(ya.e)(e)}}))(Dc),Rc=function(e){var t=e.viewHasTrees,n=e.viewHasNetwork,r=e.viewHasTimeline,o=a.a.useState(!1),i=B()(o,2),c=i[0],l=i[1];return a.a.createElement(tc,{align:"right",button:a.a.createElement(Ut,{title:"Downloads"},a.a.createElement("i",{className:"material-icons",style:{marginTop:"1px"}},"file_download")),className:"pw-downloads-menu",open:c,toggle:function(){l(!c)},toggleOnClick:!1},a.a.createElement(lc,null),a.a.createElement("hr",null),a.a.createElement(_c,null),(t||n)&&a.a.createElement("hr",null),t&&a.a.createElement(a.a.Fragment,null,r&&a.a.createElement(Tc,null),a.a.createElement(Mc,null)),n&&a.a.createElement(a.a.Fragment,null,a.a.createElement(sc,null),r&&a.a.createElement(Tc,null)))};Rc.propTypes={viewHasTrees:a.a.PropTypes.bool,viewHasNetwork:a.a.PropTypes.bool,viewHasTimeline:a.a.PropTypes.bool};var Fc=Object(s.a)((function(e){return{viewHasTrees:Object(Jo.f)(e),viewHasNetwork:Object(la.g)(e),viewHasTimeline:Ta(e)}}))(Rc);var zc=Object(s.a)((function(e){return{clusterView:Object(la.g)(e)}}))((function(e){var t=e.clusterView;return a.a.createElement("span",{className:"mdl-layout-spacer mdl-layout-spacer--flex"},a.a.createElement(No,null),a.a.createElement("nav",{className:"wgsa-header-collection-options mdl-navigation",onClick:function(e){return e.stopPropagation()}},a.a.createElement(Fc,null),a.a.createElement(Ni,null),!t&&a.a.createElement(Ji,null)),a.a.createElement("style",null,".libmr-RelativePortal > div {\n          z-index: 3;\n        }"))}));function Gc(e){return e===Wa.a.READY?"mdl-layout__header--primary mdl-shadow--3dp":null}var Uc=Object(s.a)((function(e){return{status:Object(la.a)(e).status}}))((function(e){var t=e.status;return a.a.createElement(ia,{className:Gc(t)},function(e){switch(e){case Wa.a.READY:return a.a.createElement(zc,null);default:return a.a.createElement(na,null)}}(t))})),Bc=(n(1048),n(1050),n(345)),Hc=(n(1052),n(221)),Vc=n.n(Hc),Kc=n(90);function qc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Wc=function(e){function t(){var e,n,r;ue()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return fe()(r,(n=r=fe()(this,(e=ge()(t)).call.apply(e,[this].concat(o))),r.state={height:0,width:0},n))}return be()(t,e),me()(t,[{key:"renderComponent",value:function(e,t){var n=this.state,r=n.width,o=n.height;return o&&r?a.a.createElement(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qc(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:r,height:o},t)):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.component,o=void 0===r?n:r,i=t.minWidth,c=t.minHeight,l=E()(t,["children","component","minWidth","minHeight"]);return a.a.createElement(Kc.a,b()({},l,{onResize:Vc()((function(t){var n=t.width,r=t.height;return e.setState({width:Math.max(i,n),height:Math.max(c,r)})}),64)}),(function(){return e.renderComponent(o,l)}))}}]),t}(a.a.Component);Wc.displayName="AutoSizer",Wc.propTypes={children:_t.a.elementType,component:_t.a.elementType,minHeight:_t.a.number,minWidth:_t.a.number},Wc.defaultProps={minHeight:160,minWidth:240};n(1054);var Yc=function(e){var t=e.entries,n=e.current,r=e.onTravel;return a.a.createElement("ul",{className:"libmr-History"},t.map((function(e,t){return a.a.createElement("li",{key:t,tabIndex:"0",onClick:function(){return r(t)},className:t===n?"is-selected":null},a.a.createElement("img",{src:e}))})))};Yc.propTypes={current:_t.a.number,entries:_t.a.arrayOf(_t.a.string).isRequired,onTravel:_t.a.func.isRequired};var Zc=Yc,Xc=(n(1056),n(88)),Qc=n(106),Jc=(n(1058),n(32)),$c=n(270),el=n(454),tl=n(485),nl=n(455),rl=n(456),al=n(28),ol=n.n(al),il=n(344),cl=n.n(il),ll=n(510),sl=n.n(ll),ul=n(388),dl=n.n(ul),ml=n(389),pl=n.n(ml),fl=n(511),hl=n.n(fl),gl=n(390),vl=n.n(gl),bl=n(215);function yl(e){return!hl()(e)&&!e}function El(e){return!yl(e)}function Ol(e){return yl(e.lng)||yl(e.lat)}var Cl=function(e){function t(e,n){var r;return ue()(this,t),(r=fe()(this,ge()(t).call(this,e,n))).map=void 0!==e.map?e.map:n.map,r.markers={},r}return be()(t,e),me()(t,[{key:"createLeafletElement",value:function(){return null}},{key:"componentWillReceiveProps",value:function(){}},{key:"componentDidMount",value:function(){this.leafletElement=ol.a.findDOMNode(this.container),this.map.getPanes().overlayPane.appendChild(this.leafletElement),this.props.fitBoundsOnLoad&&this.fitBounds(),this.attachEvents(),this.updatePosition()}},{key:"componentWillUnmount",value:function(){var e=this.map.getPanes();"overlayPane"in e&&e.overlayPane.removeChild(this.leafletElement)}},{key:"fitBounds",value:function(){var e=this.props.markers,t=vl()(cl()(e,this.props.longitudeExtractor),El),n=vl()(cl()(e,this.props.latitudeExtractor),El),r={lng:pl()(t),lat:pl()(n)},a={lng:dl()(t),lat:dl()(n)};Ol(r)||Ol(a)||this.map.fitBounds(Jc.default.latLngBounds(Jc.default.latLng(a),Jc.default.latLng(r)))}},{key:"markersOrPositionExtractorsChanged",value:function(e){return this.props.markers!==e.markers||this.props.longitudeExtractor!==e.longitudeExtractor||this.props.latitudeExtractor!==e.latitudeExtractor}},{key:"componentDidUpdate",value:function(e){this.map.invalidateSize(),this.props.fitBoundsOnUpdate&&this.markersOrPositionExtractorsChanged(e)&&this.fitBounds(),this.updatePosition()}},{key:"attachEvents",value:function(){this.map.on("zoomend",this.updatePosition.bind(this)),this.map.on("viewreset",this.updatePosition.bind(this))}},{key:"getLocationForMarker",value:function(e){return{lat:this.props.latitudeExtractor(e),lng:this.props.longitudeExtractor(e)}}},{key:"updatePosition",value:function(){var e=this;sl()(this.props.markers,(function(t,n){var r=e.getLocationForMarker(t);if(!Ol(r)){var a=e.markers[e.getMarkerRefName(n)];if(!a||!a.ref)throw new Error("Missing reference: Please add a reference to your Marker element, by adding 'ref={(c) => this.ref = c}' to your marker's root tag");var o=ol.a.findDOMNode(a.ref);if(o){var i=e.map.latLngToLayerPoint(Jc.default.latLng(r));Jc.default.DomUtil.setPosition(o,i)}}}))}},{key:"render",value:function(){var e=this;return a.a.createElement("div",{ref:function(t){e.container=t},className:"leaflet-objects-pane leaflet-marker-pane leaflet-zoom-hide react-leaflet-marker-layer"},this.renderMarkers())}},{key:"renderMarkers",value:function(){var e=this,t={position:"absolute"},n=this.props.markerComponent;return cl()(this.props.markers,(function(r,o){return Ol(e.getLocationForMarker(r))?null:a.a.createElement(n,b()({},e.props.propsForMarkers,{key:o,style:t,map:e.map,ref:function(t){e.markers[e.getMarkerRefName(o)]=t},marker:r}))}))}},{key:"getMarkerRefName",value:function(e){return"marker-".concat(e)}}]),t}(bl.a);Cl.prototype.createLeafletElement=function(){},Cl.propTypes={markers:_t.a.array,longitudeExtractor:_t.a.func.isRequired,latitudeExtractor:_t.a.func.isRequired,markerComponent:_t.a.func.isRequired,propsForMarkers:_t.a.object,fitBoundsOnLoad:_t.a.bool,fitBoundsOnUpdate:_t.a.bool};var wl=n(391),Sl=n.n(wl),jl=(n(791),Jc.default.divIcon({className:"material-icons",html:"place",iconSize:[40,40],iconAnchor:[20,37],popupAnchor:[0,-32]})),Nl={},Pl=function(e){function t(){return ue()(this,t),fe()(this,ge()(t).apply(this,arguments))}return be()(t,e),me()(t,[{key:"componentWillMount",value:function(){Sl()(ge()(t.prototype),"componentWillMount",this).call(this)}},{key:"componentDidMount",value:function(){Sl()(ge()(t.prototype),"componentDidMount",this).call(this),this.addMarkers(this.props.markers)}},{key:"shouldComponentUpdate",value:function(e){return e.markers!==this.props.markers}},{key:"componentDidUpdate",value:function(){this.addMarkers(this.props.markers)}},{key:"createLeafletElement",value:function(){return this.leafletElement=Jc.default.markerClusterGroup(this.props.options),this.leafletElement}},{key:"addMarkers",value:function(e){var t=this.leafletElement.getLayers(),n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;c.options.layerId===Nl&&this.leafletElement.removeLayer(c)}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}if(Array.isArray(e)&&0!==e.length){var l=[],s=!0,u=!1,d=void 0;try{for(var m,p=e[Symbol.iterator]();!(s=(m=p.next()).done);s=!0){var f=m.value,h=f.id,g=f.latitude,v=f.longitude,b=f.name,y=f.icon,E=void 0===y?jl:y;g&&v&&l.push(Jc.default.marker([g,v],{id:h,icon:E,title:b,layerId:Nl}).on("click",this.props.onMarkerClick))}}catch(e){u=!0,d=e}finally{try{s||null==p.return||p.return()}finally{if(u)throw d}}this.leafletElement.addLayers(l)}}},{key:"render",value:function(){return null}}]),t}(bl.a);Pl.propTypes={map:a.a.PropTypes.object,markers:a.a.PropTypes.array,onMarkerClick:a.a.PropTypes.func,options:a.a.PropTypes.object},Pl.defaultProps={markers:[],options:{}};var kl=Pl,xl=(n(792),{width:"30px",height:"30px",margin:"-2px 0 0 -4px",backgroundImage:"url('data:image/svg+xml;charset=utf-8;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDU2LjcgNTYuNyIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNTYuNyA1Ni43IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJQb2x5X3Rvb2xfZm91ciI+DQoJPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAxMDEwMSIgc3Ryb2tlLXdpZHRoPSIxLjQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSIzNC45LDE2LjIgMTMuNCwxMy41IDIxLjUsNDMuMiANCgkJNDIuOSwzNy44IDQ4LjMsMjAuNCAJIi8+DQoJPGVsbGlwc2UgZmlsbD0iI0ZGRkZGRiIgc3Ryb2tlPSIjMDEwMTAxIiBzdHJva2Utd2lkdGg9IjAuOCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBjeD0iMTMuNCIgY3k9IjEzLjUiIHJ4PSI1LjQiIHJ5PSI1LjQiLz4NCgk8ZWxsaXBzZSBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiMwMTAxMDEiIHN0cm9rZS13aWR0aD0iMC44IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGN4PSIzNC45IiBjeT0iMTYuMiIgcng9IjUuNCIgcnk9IjUuNCIvPg0KCTxlbGxpcHNlIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzAxMDEwMSIgc3Ryb2tlLXdpZHRoPSIwLjgiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgY3g9IjIxLjUiIGN5PSI0My4yIiByeD0iNS40IiByeT0iNS40Ii8+DQoJPGVsbGlwc2UgZmlsbD0iI0ZGRkZGRiIgc3Ryb2tlPSIjMDEwMTAxIiBzdHJva2Utd2lkdGg9IjAuOCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBjeD0iNDIuOSIgY3k9IjM3LjgiIHJ4PSI1LjQiIHJ5PSI1LjQiLz4NCgk8cmVjdCBmaWxsPSJub25lIiB3aWR0aD0iNTYuNCIgaGVpZ2h0PSI1Ni43Ii8+DQo8L2c+DQo8L3N2Zz4=')",backgroundRepeat:"no-repeat"}),_l=a.a.createClass({displayName:"LeafletMapLasso",propTypes:{className:a.a.PropTypes.string,activeClassName:a.a.PropTypes.string,initialPath:a.a.PropTypes.array,onPathChange:a.a.PropTypes.func},contextTypes:{map:a.a.PropTypes.instanceOf(Jc.default.Map)},getDefaultProps:function(){return{activeClassName:"is-active"}},getInitialState:function(){return{isActive:null!==(this.props.initialPath||null)}},componentDidMount:function(){var e=this;this.lasso=L.featureGroup.lassoSelect({finishedTooltip:"Click outside the region to cancel the filter.",polyline:{color:"#673c90"},initialPath:this.props.initialPath}).addTo(this.context.map),this.context.map.lasso=this.lasso,this.lasso.on("pathchange",(function(){var t=e.props.onPathChange;t&&t(e.lasso.getPath())}))},componentWillReceiveProps:function(e){this.props.initialPath&&!e.initialPath&&this.setState({isActive:!1})},componentDidUpdate:function(e,t){null===this.props.initialPath&&this.lasso.reset(),t.isActive!==this.state.isActive&&(this.state.isActive?this.lasso.enable():(this.lasso.disable(),this.lasso.reset()))},onLassoToggleButtonClick:function(e){e.stopPropagation(),this.setState({isActive:!this.state.isActive})},render:function(){var e=this.props,t=e.className,n=e.activeClassName,r=this.state.isActive;return a.a.createElement("button",{className:d()("leaflet-map-lasso-button",t,Ct()({},n,r)),title:r?"Disable map region filter":"Activate map region filter",onClick:this.onLassoToggleButtonClick},a.a.createElement("i",{className:"material-icons mr-lasso-icon",style:xl}))}});function Il(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Il(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Il(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ll=a.a.createClass({displayName:"LeafletMap",propTypes:{height:a.a.PropTypes.number,width:a.a.PropTypes.number,className:a.a.PropTypes.string,markerIds:a.a.PropTypes.array,markers:a.a.PropTypes.arrayOf(a.a.PropTypes.object),markerComponent:a.a.PropTypes.func,markerSize:a.a.PropTypes.number,cluster:a.a.PropTypes.bool,clusterOptions:a.a.PropTypes.object,center:$c.a.latlng,zoom:a.a.PropTypes.number,highlightedColour:a.a.PropTypes.string,lassoPath:a.a.PropTypes.array,mapboxStyle:a.a.PropTypes.string,mapboxKey:a.a.PropTypes.string,buttonClassname:a.a.PropTypes.string,onBoundsChange:a.a.PropTypes.func,onLassoPathChange:a.a.PropTypes.func,refitOnMarkerChange:a.a.PropTypes.bool},getDefaultProps:function(){return{cluster:!1,markers:[],markerIds:[],refitOnMarkerChange:!0}},componentDidMount:function(){this.refitMapBounds()},componentDidUpdate:function(e){0===e.markers.length&&this.props.markers.length?this.refitMapBounds():this.props.refitOnMarkerChange&&e.markerIds!==this.props.markerIds&&this.refitMapBounds()},componentWillUnmount:function(){var e=this.props.onBoundsChange;e&&this.map&&e({center:this.map.getCenter(),zoom:this.map.getZoom()})},onClusterMarkerClick:function(e){var t=e.target,n=e.event;this.props.onMarkerClick&&this.props.onMarkerClick(t.options,n)},onMarkerLayerClick:function(e){var t=e.marker,n=e.event;this.props.onMarkerClick&&this.props.onMarkerClick(t,n)},onClick:function(e){this.props.onClick&&this.props.onClick(e,this.map)},getBounds:function(){var e=this.props.markers;if(!e||0===e.length)return Jc.default.latLngBounds([-85,-180],[85,180]);var t=-1e3,n=-1e3,r=1e3,a=1e3,o=!0,i=!1,c=void 0;try{for(var l,s=e[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;if(u.position||u.latitude&&u.longitude){var d=u.latitude||u.position[0],m=u.longitude||u.position[1];d>t&&(t=d),d<r&&(r=d),m>n&&(n=m),m<a&&(a=m)}}}catch(e){i=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}var p=Jc.default.latLng([r,a]),f=Jc.default.latLng([t,n]);return Jc.default.latLngBounds(p,f)},refitMapBounds:function(e){e?this.leafletMap.leafletElement.panTo(e):this.leafletMap.leafletElement.fitBounds(this.getBounds())},renderMarkers:function(){var e=this.props,t=e.markers,n=e.cluster,r=e.markerComponent,o=e.highlightedColour,i=e.markerProps,c=void 0===i?{}:i;return n?a.a.createElement(kl,{markers:t||[],onMarkerClick:this.onClusterMarkerClick,options:this.props.clusterOptions}):r?a.a.createElement(Cl,{markers:t||[],latitudeExtractor:function(e){return e.position[0]},longitudeExtractor:function(e){return e.position[1]},markerComponent:r,propsForMarkers:Tl({},c,{onClick:this.onMarkerLayerClick,highlightedColour:o})}):t?t.map((function(e,t){var n=e.position,r=e.title,o=e.icon,i=void 0===o?jl:o;return a.a.createElement(el.a,{key:t,position:n,title:r,icon:i})})):null},renderDefaultMarkers:function(){return this.props.markers?this.props.markers.map((function(e,t){var n=e.position;return a.a.createElement(el.a,{key:n.join("-"),position:n})})):null},render:function(){var e=this,t=this.props,n=t.center,r=t.zoom,o=t.mapboxStyle,i=t.mapboxKey;return a.a.createElement("div",{className:d()("cgps-leaflet-map","cgps-leaflet-map--marker-size-".concat(this.props.markerSize),this.props.className)},a.a.createElement(tl.a,{onClick:this.onClick,animate:!1,center:n,zoom:r,zoomControl:!1,boundsOptions:{animate:!1},onMoveend:function(t){var n=t.target;e.map=n},ref:function(t){e.leafletMap=t},style:{width:"100%",height:"100%"}},a.a.createElement(nl.a,{attribution:"\n  Map data &copy;\n  <a href='http://openstreetmap.org'>OpenStreetMap</a> contributors,\n  <a href='http://creativecommons.org/licenses/by-sa/2.0/'>CC-BY-SA</a>,\n  Imagery © <a href='http://mapbox.com'>Mapbox</a>\n",url:"https://api.mapbox.com/styles/v1/mapbox/".concat(o,"/tiles/{z}/{x}/{y}?access_token=").concat(i)}),this.renderMarkers(),a.a.createElement("div",{className:"cgps-leaflet-map-controls"},this.props.controls,a.a.createElement(_l,{className:this.props.buttonClassname,initialPath:this.props.lassoPath,onPathChange:this.props.onLassoPathChange})),a.a.createElement(rl.a,{position:"bottomright"})),this.props.children)}}),Al="mdl-button mdl-button--icon wgsa-pane-button wgsa-pane-button--dark";var Dl=Object(s.a)((function(e,t){return{bounds:Object(Qc.a)(e,t),lassoPath:t.lassoPath}}),(function(e,t){var n=t.stateKey;return{onBoundsChange:function(t){return e(Xc.storeBounds(n,t))},onLassoPathChange:t.onLassoPathChange||function(t){return e(Xc.changeLassoPath(n,t))}}}))((function(e){return a.a.createElement(Ll,{center:e.bounds.center,className:e.className,cluster:e.cluster,clusterOptions:e.clusterOptions,controls:e.controls,highlightedColour:M.b.COLOURS.PURPLE,buttonClassname:Al,lassoPath:e.lassoPath,markers:e.markers,markerIds:e.markerIds,markerComponent:e.markerComponent,markerProps:e.markerProps,markerSize:e.markerSize,mapboxKey:ye.a.mapboxKey,mapboxStyle:"light-v9",onBoundsChange:e.onBoundsChange,onClick:e.onClick,onGroupMarkersChange:e.onGroupMarkersChange,onLassoPathChange:e.onLassoPathChange,onMarkerClick:e.onMarkerClick,zoom:e.bounds.zoom},e.children)})),Ml=function(e){var t=e.colour,n=void 0===t?"black":t;return a.a.createElement("svg",{viewBox:"0 0 ".concat(100," ").concat(100),style:{width:"200%",transform:"translate(-25%, -25%)"}},a.a.createElement("circle",{cx:"50",cy:"50",r:42,fill:"none",stroke:n,strokeWidth:8}))},Rl=(a.a.PropTypes,2*Math.PI);var Fl=function(e){function t(){return ue()(this,t),fe()(this,ge()(t).apply(this,arguments))}return be()(t,e),me()(t,[{key:"render",value:function(){var e,t,n,r,o,i,c,l=this.props,s=l.borderWidth,u=void 0===s?7.5:s,d=l.borderColour,m=void 0===d?"#555":d,p=l.donutFill,f=void 0===p?"#fff":p;return a.a.createElement("svg",{viewBox:"0 0 ".concat(100," ").concat(100),className:this.props.className},a.a.createElement("g",{transform:"rotate(-90 ".concat(50," ").concat(50,")")},(e=this.props,t=e.slices,n=e.onSliceClick,r=t.reduce((function(e,t){return e+t.value}),0),o=0,i=49,c=0,t.map((function(e,t){var l=e.colour,s=e.value;if(s===r)return a.a.createElement("circle",{r:49,cx:50,cy:50,fill:l,key:t,"data-count":s,onClick:function(t){return n&&n(e,t)}});if(0===s)return null;var u=s/r,d=u<=.5?0:1;o+=u*Rl;var m=49*Math.cos(o),p=49*Math.sin(o),f=["M ".concat(50,",").concat(50),"l ".concat(i,",").concat(-c),"a".concat(49,",").concat(49),"0","".concat(d,",0"),"".concat(m-i,",").concat(-(p-c)),"z"].join(" ");return i=m,c=p,a.a.createElement("path",{d:f,fill:l,key:t,"data-count":s,onClick:function(t){n&&n(e,t)}})})))),u>0&&a.a.createElement("circle",{cx:50,cy:50,r:50-u/2,fill:"none",strokeWidth:u,stroke:m}),this.props.donut&&a.a.createElement("circle",{cx:50,cy:50,r:(50-u)/2,fill:f,strokeWidth:u,stroke:m}),"}",a.a.createElement("text",{x:"50",y:"50"}))}}]),t}(a.a.Component);Fl.propTypes={className:a.a.PropTypes.string,borderWidth:a.a.PropTypes.number,borderColour:a.a.PropTypes.string,donut:a.a.PropTypes.bool,slices:a.a.PropTypes.arrayOf(a.a.PropTypes.shape({colour:a.a.PropTypes.string.isRequired,value:a.a.PropTypes.number.isRequired})).isRequired,onSliceClick:a.a.PropTypes.func};var zl=a.a.createClass({displayName:"LeafletPieChartMarker",shouldComponentUpdate:function(e){var t=this.props.marker;if(t.id.length!==e.marker.id.length)return!0;var n=!0,r=!1,a=void 0;try{for(var o,i=t.id[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;if(-1===e.marker.id.indexOf(c))return!0}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}if(t.highlighted!==e.marker.highlighted)return!0;if(t.slices.size!==e.marker.slices.size)return!0;for(var l=t.slices.entries(),s=e.marker.slices.entries(),u=0;u<t.slices.size;u++){var d=B()(l.next().value,2),m=d[0],p=d[1],f=B()(s.next().value,2),h=f[0],g=f[1];if(m!==h||p!==g)return!0}return!1},render:function(){var e=this,t=this.props,n=t.marker,r=t.style,o=t.onClick,i=t.highlightedColour,c=Array.from(n.slices.entries()).map((function(e){var t=B()(e,2);return{colour:t[0],value:t[1]}}));return a.a.createElement("div",{ref:function(t){e.ref=t},style:r,className:d()("leaflet-marker-icon",{highlighted:n.highlighted}),onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),o({event:e,marker:n})}},n.highlighted&&a.a.createElement(Ml,{colour:i}),a.a.createElement(Fl,{slices:c,borderColour:this.props.borderColour,borderWidth:this.props.botderWidth}))}}),Gl=a.a.createClass({displayName:"LeafletMarkerControls",propTypes:{className:a.a.PropTypes.string,activeClassName:a.a.PropTypes.string,markerSize:a.a.PropTypes.number,onMarkerSizeChange:a.a.PropTypes.func,onViewByCountryChange:a.a.PropTypes.func},getDefaultProps:function(){return{activeClassName:"is-active"}},getInitialState:function(){return{isActive:!1}},componentDidUpdate:function(){if(this.state.isActive){var e=this.refs,t=e.slider,n=e.countrySwitch;componentHandler.upgradeElements([t,n])}},render:function(){var e=this,t=this.props,n=t.className,r=t.activeClassName,o=t.markerSize,i=t.onMarkerSizeChange,c=t.onViewByCountryChange,l=this.state.isActive;return a.a.createElement("div",{onClick:function(e){return e.stopPropagation()}},a.a.createElement("button",{key:"button",className:d()("leaflet-marker-controls-button",n,Ct()({},r,l)),title:l?"Hide map controls":"Show map controls",onClick:function(){return e.setState({isActive:!l})}},a.a.createElement("i",{className:"material-icons"},"tune")),a.a.createElement("div",{className:d()("wgsa-pane-controls wgsa-pane-controls--top",{"wgsa-pane-controls--visible":l})},a.a.createElement("div",{className:"wgsa-pane-controls__row wgsa-pane-overlay"},a.a.createElement("div",{className:"wgsa-pane-slider"},a.a.createElement("label",null,"Marker Size",a.a.createElement("input",{ref:"slider",type:"range",onChange:function(e){return i(parseInt(e.target.value,10))},min:"1",max:"10",step:"1",value:o,className:"mdl-slider mdl-js-slider",tabIndex:"0"}))),a.a.createElement("label",{ref:"countrySwitch",className:"mdl-icon-toggle mdl-js-icon-toggle mdl-js-ripple-effect",htmlFor:"group-markers-switch",title:"View by Country"},a.a.createElement("input",{type:"checkbox",id:"group-markers-switch",className:"mdl-icon-toggle__input",onChange:function(e){return c(e.target.checked)}}),a.a.createElement("i",{className:"mdl-icon-toggle__label material-icons"},"flag")))))}}),Ul=n(327),Bl=Object(xe.createSelector)(sa.a,Qc.b,(function(e,t){return e.reduce((function(e,n){var r=n.uuid,a=n.position,o=void 0===a?{}:a;return o.latitude&&o.longitude&&Object(Ul.contains)(t,{lat:o.latitude,lng:o.longitude})?e.concat(r):e}),[])})),Hl=function(e){var t=e.position,n=void 0===t?{}:t,r=n.latitude,a=n.longitude;return r&&a?[r,a]:null},Vl=function(e){var t=e.country;return t?Object(W.a)(t):null},Kl=Object(xe.createSelector)(Qc.d,(function(e){return e?Vl:Hl})),ql=Object(xe.createSelector)(Kl,sa.b,Ka,Ho,ri,(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;if(!n||0===n.length)return[];var o=new Map,i=!0,c=!1,l=void 0;try{for(var s,u=n[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var d=s.value,m=t[d],p=e(m);if(p){var f=a[m.id].colour,h=p.join("_"),g=o.get(h)||{position:p,id:[],slices:new Map,highlighted:!1};g.id.push(d),g.title=g.id.length,g.slices.set(f,(g.slices.get(f)||0)+1),g.highlighted=g.highlighted||r.has(d),o.set(h,g)}}}catch(e){c=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(c)throw l}}return Array.from(o.values())})),Wl=Ka;function Yl(e,t){return function(n,r){if(n(Xc.changeLassoPath(e,t)),t){var a=Bl(r(),{stateKey:e});n(Object(wo.f)(a,Ra.a.MAP))}else n(Object(wo.h)(Ra.a.MAP))}}var Zl=n(79);function Xl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ql=Object(s.a)((function(e){return{markerIds:Wl(e,{stateKey:"COLLECTION"}),markerSize:Object(Qc.c)(e,{stateKey:"COLLECTION"}),lassoPath:Object(Qc.b)(e,{stateKey:"COLLECTION"}),markers:ql(e,{stateKey:"COLLECTION"}),hasHighlight:Ko(e)}}),(function(e){return{dispatch:e,onLassoPathChange:function(t){return e(Yl("COLLECTION",t))},onMarkerClick:function(t,n){var r=t.id,a=t.highlighted;n.stopPropagation(),n.metaKey||n.ctrlKey?e(a?Object(Zl.e)(r):Object(Zl.f)(r,!0)):e(Object(Zl.f)(r))},onMarkerSizeChange:function(t){return e(Object(Xc.markerSizeChanged)("COLLECTION",t))},onViewByCountryChange:function(t){return e(Object(Xc.viewByCountry)("COLLECTION",t))}}}),(function(e,t,n){var r=t.dispatch,a=E()(t,["dispatch"]);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xl(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{},e,{},a,{onClick:function(t){var n,a=t.originalEvent;(n=a.target).ownerSVGElement&&n.ownerSVGElement.parentNode&&n.ownerSVGElement.parentNode.classList.contains("leaflet-marker-icon")||(e.hasHighlight?r(Object(Zl.d)()):e.lassoPath&&r(Yl("COLLECTION",void 0)))}})}))((function(e){return a.a.createElement(Dl,{className:"wgsa-collection-viewer-map",stateKey:"COLLECTION",lassoPath:e.lassoPath,markers:e.markers,markerIds:e.markerIds,markerComponent:zl,markerSize:e.markerSize,onClick:e.onClick,onLassoPathChange:e.onLassoPathChange,onMarkerClick:e.onMarkerClick,controls:a.a.createElement(Gl,{className:Al,activeClassName:"wgsa-pane-button--active",markerSize:e.markerSize,onMarkerSizeChange:e.onMarkerSizeChange,onViewByCountryChange:e.onViewByCountryChange})},e.children)})),Jl=(n(1060),n(528)),$l={icon:_t.a.node,component:_t.a.elementType,title:_t.a.string},es=function(e){var t=e.children,n=e.className,r=e.navStyle,o=e.panes,i=e.style,c=a.a.useState(null),l=B()(c,2),s=l[0],u=l[1],m=a.a.useState(!1),p=B()(m,2),f=p[0],h=p[1],g=null!==s;return a.a.createElement("div",{className:d()("libmr-SidePane",{active:g,open:f},n),style:i},a.a.createElement("div",{className:"libmr-SidePane-main"},t),a.a.createElement(Jl.a,{transitionName:"libmr-SidePane",onEnd:function(){return h(g)}},g&&a.a.createElement("aside",{key:"aside",className:"libmr-SidePane-aside"},a.a.createElement(Ut,{className:"libmr-SidePane-close",onClick:function(){return u(null)},title:"Close"},a.a.createElement("i",{className:"material-icons"},"close")),a.a.createElement("div",{className:"libmr-SidePane-contents"},o[s].title&&a.a.createElement("h3",{className:"libmr-SidePane-title"},o[s].title),a.a.createElement("div",{className:"libmr-SidePane-contents-overflow"},a.a.createElement(o[s].component))))),a.a.createElement("nav",{className:"libmr-SidePane-nav",style:r},o.map((function(e,t){var n=e.icon;return a.a.createElement(mn,{key:t,active:s===t,onClick:function(){return u(s===t?null:t)}},n)}))))};es.propTypes={children:_t.a.node,className:_t.a.string,navStyle:_t.a.object,panes:_t.a.arrayOf(_t.a.shape($l)),style:_t.a.object};var ts=es,ns=(n(1062),function(e){var t=e.active,n=e.text,r=e.contact,o=e.contactStyle,i=e.className,c=e.onClick;return a.a.createElement("button",{title:name,className:d()(i,"mdl-chip mdl-chip--contact",{"mdl-chip--active":t}),onClick:function(e){return c(e)}},r&&a.a.createElement("span",{className:"mdl-chip__contact",style:o},r),a.a.createElement("span",{className:"mdl-chip__text"},n))}),rs=(Object(xe.createSelector)(wi,ri,(function(e,t){return e.map((function(e){return{genome:e,colour:t[e.id].colour}}))})),Object(xe.createSelector)(wi,ri,(function(e,t){return Array.from(e.reduce((function(e,n){var r=t[n.id].colour,a=e.get(r)||[];return a.push(n),e.set(r,a)}),new Map).entries())}))),as=function(e){return function(e){return Object(la.f)(e).summary}(e).isExpanded},os=n(328);function is(e){return e.map((function(e){var t=B()(e,2),n=t[0],r=t[1];return{colour:n,value:r.length,genomes:r}}))}var cs=Object(s.a)((function(e){return{summary:rs(e),isExpanded:as(e)}}),(function(e){return{onClick:function(t){return e(Object(os.b)(t))},onSliceClick:function(t){return e(Object(wo.f)(t))}}}))((function(e){var t=e.summary,n=e.isExpanded,r=e.onClick,o=e.onSliceClick;return a.a.createElement("div",{title:n?"":"Summary",className:d()("wgsa-collection-viewer-summary mdl-shadow--2dp",{"wgsa-collection-viewer-summary--expanded":n}),onClick:function(e){e.stopPropagation(),n||r(!0)}},n&&a.a.createElement("button",{className:"mdl-button mdl-button--icon",onClick:function(e){e.stopPropagation(),r(!1)},title:"Close summary"},a.a.createElement("i",{className:"material-icons"},"clear")),a.a.createElement(Fl,{className:"wgsa-summary-chart",slices:is(t),borderWidth:1.5,onSliceClick:function(e,t){n&&(t.preventDefault(),t.stopPropagation(),o(e.genomes.map((function(e){return e.uuid}))))}}),a.a.createElement("div",{className:"wgsa-summary-list"},t.map((function(e,t){var n=B()(e,2),r=n[0],i=n[1];return Object($o.d)(r)&&a.a.createElement(ns,{key:t,className:d()("wgsa-summary-list__chip",{"mdl-chip--inverse":r===$o.h}),text:Object($o.d)(r),contact:i.length,contactStyle:{background:r},onClick:function(e){e.preventDefault(),e.stopPropagation(),o(i.map((function(e){return e.uuid})))}})}))))})),ls=(n(1064),n(1066),n(1068),n(256));function ss(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];return(e+(t?" ".concat(e,"--selected "):" ")+r.join(" ")).trim()}function us(e,t){var n=e.group;return ss("wgsa-table-header",t,e.headerClasses,n?"wgsa-table-header--group":null)}var ds=ss.bind(null,"wgsa-table-cell"),ms=function(e,t){var n=e.valueGetter,r=e.display;return(void 0===r?n:r)(t)};function ps(e){return e.group?e.system||e.columns.some((function(e){return e.valueGetter&&!e.hidden})):!e.hidden}var fs=a.a.createClass({displayName:"FixedTable",propTypes:{height:a.a.PropTypes.number,width:a.a.PropTypes.number,tableProps:a.a.PropTypes.object,columns:a.a.PropTypes.array,data:a.a.PropTypes.array,calculatedColumnWidths:a.a.PropTypes.array,getDefaultHeaderContent:a.a.PropTypes.func,rowClickHandler:a.a.PropTypes.func,activeColumns:a.a.PropTypes.object},handleRowClick:function(e,t){e.stopPropagation(),this.props.rowClickHandler(this.props.data[t])},isSelected:function(e){var t=this;if(e.system)return!1;var n=(e.group?e.columns:[e]).filter((function(e){return ps(e)&&e.valueGetter}));return!!n.length&&n.every((function(e){return t.props.activeColumns.has(e)}))},renderHeader:function(e,t){var n=e.getHeaderContent,r=this.isSelected(e);return a.a.createElement(ls.Cell,b()({},t,{className:us(e,r)}),n?n(e):this.props.getDefaultHeaderContent(e))},renderCell:function(e,t){var n=t.rowIndex,r=t.width,o=t.height,i=e.cellClasses,c=e.getCellContents,l=void 0===c?ms:c,s=this.isSelected(e);return a.a.createElement(ls.Cell,b()({width:r,height:o},{className:ds(s,i)}),l(e,this.props.data[n]))},renderColumns:function(e){var t=this;return e.filter(ps).map((function(e){return e.group?a.a.createElement(ls.ColumnGroup,{key:e.columnKey,fixed:e.fixed,header:function(n){return t.renderHeader(e,n)}},t.renderColumns(e.columns)):a.a.createElement(ls.Column,b()({key:e.columnKey,header:function(n){return t.renderHeader(e,n)},cell:function(n){return t.renderCell(e,n)},width:e.fixedWidth||e.width||96,flexGrow:0},e))}))},render:function(){var e=this.props,t=e.data,n=e.columns,r=e.height,o=e.width,i=e.tableProps;return a.a.createElement(ls.Table,b()({rowsCount:t.length,rowHeight:28,headerHeight:28+(n.length&&n[0].group?0:24),groupHeaderHeight:24,height:r,width:o,className:"wgsa-table",rowClassNameGetter:function(){return"wgsa-table-row"},onRowClick:this.handleRowClick},i),this.renderColumns(n))}}),hs=n(172);var gs=Object(xe.createSelector)((function(e){return Object(qa.i)(e).columns}),wi,la.a,qa.c,(function(e,t,n,r){return e.map((function(e){return function e(t,n){if(t.isSelected=n.activeColumns.has(t),t.group){for(var r=0;r<t.columns.length;r++)t.columns[r]=e(t.columns[r],n);return t}return t.addState?t.addState(n):n.genomes.length?Object(hs.a)(t,n):t}(e,{genomes:t,collection:n,activeColumns:r})}))}));function vs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vs(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ys=function(e){return e.preventDefault()},Es=a.a.createClass({displayName:"Table",propTypes:{height:a.a.PropTypes.number,width:a.a.PropTypes.number,tableProps:a.a.PropTypes.object,data:a.a.PropTypes.array,columns:a.a.PropTypes.array,handleHeaderClick:a.a.PropTypes.func,dispatch:a.a.PropTypes.func,filter:a.a.PropTypes.object},componentDidMount:function(){componentHandler.upgradeDom()},shouldComponentUpdate:function(e){var t=this.props,n=t.data,r=t.columns,a=t.filter,o=t.width,i=t.height;return n!==e.data||r!==e.columns||a!==e.filter||o!==e.width||i!==e.height},componentDidUpdate:function(){componentHandler.upgradeDom()},render:function(){return a.a.createElement("section",{onClick:this.props.onClick,onWheel:ys,onTouchMove:ys},a.a.createElement(O.a,null,a.a.createElement(fs,b()({key:this.props.tableName},this.props,{rowClickHandler:this.props.onRowClick,getDefaultHeaderContent:this.props.getDefaultHeaderContent}))),0===this.props.data.length&&a.a.createElement("p",{className:"wgsa-text-overlay wgsa-hipster-style"},"No matching results."))}}),Os=function(e){var t=e.column,n=e.onClick;return a.a.createElement("button",{title:t.headerTitle,className:"wgsa-selectable-column-heading",onClick:function(e){return n(e,t)}},Object(Xa.a)(t))};var Cs=Object(s.a)((function(e){var t=Object(qa.i)(e),n=t.activeColumn,r=t.activeColumns;return bs({},E()(t,["activeColumn","activeColumns"]),{activeColumns:n?new Set([n]):r,collection:Object(la.a)(e),columns:gs(e),data:wi(e),fixedGroupWidth:Object(qa.f)(e),tableName:Object(qa.j)(e)})}),null,(function(e,t,n){var r=t.dispatch,o=e.data,i=e.columns,c=e.activeColumns,l=e.tableName;return Object(Xa.d)(i,n.width,e.fixedGroupWidth),bs({},n,{activeColumns:c,data:o,tableName:l,columns:i,onRowClick:function(e){return r((t=e,function(e,n){var r=n(),a=Ho(r);1===a.size&&a.has(t.uuid)?e(Object(Zl.d)()):e(Object(Zl.f)([t.uuid]))}));var t},getDefaultHeaderContent:function(t){return a.a.createElement(Os,{column:t,onClick:function(t,n){if(t.stopPropagation(),!n.noAction){var a=n.onHeaderClick||e.onHeaderClick;r(a(t,n))}}})}})}))(Es),ws=Object(xe.createSelector)(Ta,(function(e){return Object(la.f)(e).timeline.visible}),qa.j,(function(e,t,n){return!e||null!==t&&!0!==t?n:"timeline"})),Ss=Object(xe.createSelector)(ws,qa.l,(function(e,t){return"timeline"!==e&&t})),js=n(54);var Ns,Ps=Object(s.a)((function(e){return{visible:Ss(e),active:Object(qa.g)(e).multi}}),(function(e){return{toggle:function(){return e(Object(js.h)())}}}))((function(e){var t=e.visible,n=e.active,r=e.toggle;return t?a.a.createElement(mn,{active:n,className:"pw-multi-button",onClick:function(){return r()},title:"Toggle multiple resistance"},"MDR"):null})),ks=n(329),xs=(Ns={},Ct()(Ns,Wa.c.metadata,"list"),Ct()(Ns,Wa.c.typing,"list"),Ct()(Ns,Wa.c.stats,"list"),Ct()(Ns,Wa.c.antibiotics,"local_pharmacy"),Ct()(Ns,Wa.c.snps,"local_pharmacy"),Ct()(Ns,Wa.c.genes,"local_pharmacy"),Ct()(Ns,Wa.c.timeline,"access_time"),Ns),_s=Object(s.a)((function(e){var t=Object(sa.e)(e);return{amr:Object(sa.d)(e)&&!t,kleborate:t,metadata:Object(sa.f)(e),timeline:Ta(e),typing:Object(qa.k)(e),visibleView:ws(e)}}),(function(e){return{showTable:function(t){return e(Object(js.g)(t))},_showTimeline:function(t){return e(Object(ks.b)(t))}}}))((function(e){var t=e.visibleView,n=e.showTable,r=e._showTimeline,o=e.metadata,i=e.timeline,c=e.typing,l=e.kleborate,s=e.amr;return a.a.createElement(tc,{direction:"up",button:a.a.createElement(Ht,{direction:"up"},a.a.createElement("i",{className:"material-icons"},xs[t]),Wa.b[t])},o&&a.a.createElement("button",{onClick:function(){return n(Wa.c.metadata)}},"Metadata"),c&&a.a.createElement("button",{onClick:function(){return n(Wa.c.typing)}},"Typing"),a.a.createElement("button",{onClick:function(){return n(Wa.c.stats)}},"Stats"),(s||l)&&a.a.createElement("hr",null),s&&a.a.createElement(a.a.Fragment,null,a.a.createElement("button",{onClick:function(){return n(Wa.c.antibiotics)}},"Antibiotics"),a.a.createElement("button",{onClick:function(){return n(Wa.c.snps)}},"SNPs"),a.a.createElement("button",{onClick:function(){return n(Wa.c.genes)}},"Genes")),l&&a.a.createElement("button",{onClick:function(){return n(Wa.c.kleborateAMR)}},"Kleborate AMR"),i&&a.a.createElement(a.a.Fragment,null,a.a.createElement("hr",null),a.a.createElement("button",{onClick:r},"Timeline")))})),Is=function(){return a.a.createElement("div",{className:"wgsa-table-switcher",onClick:function(e){return e.stopPropagation()}},a.a.createElement(_s,null),a.a.createElement(Ps,null))};Is.displayName="TableSwitcher";var Ts=Is,Ls=(n(1070),n(145)),As=n.n(Ls);n(869),n(870);As.a.defaults.timeline=As.a.defaults.scatter;var Ds={};As.a.controllers.timeline=As.a.controllers.scatter.extend({dataElementType:As.a.elements.Point.extend({draw:function(){var e=this._view;if(!e.skip){var t=this._chart.ctx,n=e.radius,r=this._chart.config.data.datasets[this._datasetIndex],a=r.data[this._index].id,o=r.styles[a]||Ds,i=r.highlightedIds.has(a);Fn(t,e.x,e.y,n,o.shape,o.colour,i&&En.b.primaryColour)}}})});var Ms={day:1,week:7,month:30,quarter:90,year:365},Rs=function(e){function t(){return ue()(this,t),fe()(this,ge()(t).apply(this,arguments))}return be()(t,e),me()(t,[{key:"componentDidMount",value:function(){var e=this;this.createChart(),this.props.addExportCallback&&this.props.addExportCallback("timeline-png",(function(){return e.domRef.toDataURL()}))}},{key:"componentDidUpdate",value:function(e){var t=e.width!==this.props.width||e.height!==this.props.height,n=e.bounds!==this.props.bounds||e.chartData!==this.props.chartData||e.unit!==this.props.unit,r=e.highlightedIds!==this.props.highlightedIds||e.nodeSize!==this.props.nodeSize||e.styles!==this.props.styles;t&&this.resizeChart(),(n||r)&&this.updateChart(n),(t||n)&&this.resetChartRanges(),this.props.viewport!==e.viewport&&this.props.viewport&&this.restoreViewport(),this.chart.update()}},{key:"componentWillUnmount",value:function(){this.props.removeExportCallback&&this.props.removeExportCallback("timeline-png"),this.destroyChart()}},{key:"getYTicks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=2*this.props.nodeSize+2,n=this.props.height-40,r=n/t;return{min:e,max:r+e}}},{key:"getPanZoomRanges",value:function(e){var t={pan:{},zoom:{}},n=2*this.props.nodeSize+2;t.pan.rangeMin={x:e.min.toDate(),y:0},t.pan.rangeMax={x:e.max.toDate(),y:this.props.maxStackSize+1};var r=(this.props.width-40)/n,a=(this.props.height-40)/n;return t.zoom.rangeMin={x:r*Ms[this.props.unit]*864e5,y:a},t.zoom.rangeMax={x:this.props.bounds.max.diff(this.props.bounds.min),y:this.props.maxStackSize},t}},{key:"getChartBounds",value:function(){var e=Math.max(1,this.props.bounds.max.diff(this.props.bounds.min,"days")),t=Math.ceil((this.props.nodeSize+2)*e/(this.props.width-40));return{min:Oa()(this.props.bounds.min).subtract(t,"day"),max:Oa()(this.props.bounds.max).add(t,"day")}}},{key:"createDatasets",value:function(){return{labels:[],datasets:[{label:"Dataset",pointRadius:this.props.nodeSize/2,pointHoverRadius:this.props.nodeSize/2+1,data:this.props.chartData,highlightedIds:this.props.highlightedIds,styles:this.props.styles}]}}},{key:"createChart",value:function(){var e=this,t=this.domRef.getContext("2d");this.domRef.height=this.props.height,this.domRef.width=this.props.width;var n=this.getChartBounds(),r=this.getPanZoomRanges(n),a=this.props.viewport;this.chart=new As.a(t,{type:"timeline",data:this.createDatasets(),options:{animation:!1,layout:{padding:{left:0,right:0,top:-24,bottom:0}},legend:{display:!1},maintainAspectRatio:!1,onClick:function(t,n){var r=B()(n,1)[0],a=t.metaKey||t.ctrlKey;if(r){var o=r._chart.config.data.datasets[r._datasetIndex].data[r._index];e.props.setHighlightedIds([o.id],a)}else e.props.highlightedIds.size&&!a&&e.props.setHighlightedIds()},pan:{enabled:!0,mode:"xy",rangeMin:r.pan.rangeMin,rangeMax:r.pan.rangeMax,onPan:function(){return e.saveViewport()}},responsive:!1,responsiveAnimationDuration:0,scales:{xAxes:[{position:"bottom",time:{unit:this.props.unit,min:a?a.minx:n.min,max:a?a.maxx:n.max},ticks:{maxRotation:0,autoSkip:!0,autoSkipPadding:16},type:"time"}],yAxes:[{display:!1,ticks:a?{min:a.miny,max:a.maxy}:this.getYTicks()}]},title:{display:!0,text:""},tooltips:{displayColors:!1,callbacks:{title:function(e,t){return e.map((function(e){return t.datasets[e.datasetIndex].data[e.index].x.toLocaleDateString()})).join(", ")},label:function(t,n){var r=n.datasets[t.datasetIndex].data[t.index];return e.props.getTooltip(r)}}},zoom:{enabled:!0,drag:!1,mode:"xy",rangeMin:r.zoom.rangeMin,rangeMax:r.zoom.rangeMax,onZoom:function(){return e.saveViewport()}}}}),window.cgps_microreact_timelineChart=this.chart}},{key:"updateChart",value:function(e){if(e){var t=this.getChartBounds();this.chart.scales["x-axis-1"].options.time.min=t.min,this.chart.scales["x-axis-1"].options.time.max=t.max,this.chart.scales["x-axis-1"].options.time.unit=this.props.unit;var n=2*this.props.nodeSize+2,r=(this.chart.chartArea.bottom-this.chart.chartArea.top)/n;this.chart.scales["y-axis-1"].options.ticks.min=0,this.chart.scales["y-axis-1"].options.ticks.max=r}this.chart.config.data=this.createDatasets(),this.chart.clear()}},{key:"resizeChart",value:function(){var e=this.chart.scales["y-axis-1"].options.ticks.min||0;this.chart.resize(),Object.assign(this.chart.scales["y-axis-1"].options.ticks,this.getYTicks(e))}},{key:"resetChartRanges",value:function(){var e=this.getChartBounds(),t=this.getPanZoomRanges(e);Object.assign(this.chart.config.options.pan,t.pan),Object.assign(this.chart.config.options.zoom,t.zoom)}},{key:"destroyChart",value:function(){this.chart&&(this.chart.destroy(),this.chart=null)}},{key:"saveViewport",value:function(){this.props.onViewportChange({minx:this.chart.scales["x-axis-1"].options.time.min.valueOf(),maxx:this.chart.scales["x-axis-1"].options.time.max.valueOf(),miny:this.chart.scales["y-axis-1"].options.ticks.min,maxy:this.chart.scales["y-axis-1"].options.ticks.max})}},{key:"restoreViewport",value:function(){this.chart.scales["x-axis-1"].options.time.min=this.props.viewport.minx,this.chart.scales["x-axis-1"].options.time.max=this.props.viewport.maxx,this.chart.scales["y-axis-1"].options.ticks.min=this.props.viewport.miny,this.chart.scales["y-axis-1"].options.ticks.max=this.props.viewport.maxy}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height;return a.a.createElement("div",{className:"libmr-Timeline-plot",style:{width:n,height:r}},a.a.createElement("canvas",{ref:function(t){e.domRef=t}}))}}]),t}(a.a.Component);Rs.displayName="TimelineChart",Rs.propTypes={addExportCallback:_t.a.func,bounds:_t.a.shape({min:_t.a.instanceOf(Oa.a).isRequired,max:_t.a.instanceOf(Oa.a).isRequired}),chartData:_t.a.arrayOf(_t.a.shape({x:_t.a.instanceOf(Date).isRequired,y:_t.a.number.isRequired,id:_t.a.string.isRequired})).isRequired,getTooltip:_t.a.func.isRequired,height:_t.a.number.isRequired,highlightedIds:_t.a.instanceOf(Set).isRequired,maxStackSize:_t.a.number.isRequired,nodeSize:_t.a.number.isRequired,onViewportChange:_t.a.func.isRequired,removeExportCallback:_t.a.func,setHighlightedIds:_t.a.func.isRequired,styles:_t.a.object.isRequired,unit:_t.a.string.isRequired,width:_t.a.number.isRequired,viewport:_t.a.shape({minx:_t.a.number.isRequired,maxx:_t.a.number.isRequired,miny:_t.a.number.isRequired,maxy:_t.a.number.isRequired})};n(1072),n(1074);var Fs=n(515),zs=function(e){return a.a.createElement(Qt.a,{id:e.id,className:"libmr-RadioButton"},a.a.createElement(Fs.Radio,{onChange:e.onChange,checked:e.checked}),a.a.createElement("label",null,e.label))};zs.propTypes={checked:_t.a.bool,id:_t.a.string,label:_t.a.string,onChange:_t.a.func};var Gs=zs,Us=function(e){return a.a.createElement("div",{className:d()("libmr-RadioSelect",e.className)},a.a.createElement("ul",null,e.items.map((function(t){return a.a.createElement("li",{key:t.value},a.a.createElement(Gs,{id:t.value,onChange:e.onChange?function(){return e.onChange(t.value)}:null,label:t.label,checked:e.value===t.value||t.selected||!1}))})),e.children))};Us.propTypes={children:_t.a.node,className:_t.a.string,items:_t.a.arrayOf(_t.a.shape({label:_t.a.string,value:_t.a.string,selected:_t.a.bool})),onChange:_t.a.func,value:_t.a.string};var Bs=Us,Hs={year:"Year",quarter:"Quarter",month:"Month",week:"Week",day:"Day"},Vs={1:"1 second",3:"3 seconds",10:"10 seconds",20:"20 seconds",30:"30 seconds",60:"60 seconds"},Ks=Object.keys(Hs).map((function(e){return{value:e,label:Hs[e]}})),qs=function(e){function t(){var e,n,r;ue()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return fe()(r,(n=r=fe()(this,(e=ge()(t)).call.apply(e,[this].concat(o))),r.state={isPlaying:!1,isMovingWindow:!1},n))}return be()(t,e),me()(t,[{key:"componentDidUpdate",value:function(e,t){t.isPlaying!==this.state.isPlaying&&(this.state.isPlaying?this.startTimelinePlay():this.stopTimelinePlay())}},{key:"componentWillUnmount",value:function(){this.stopTimelinePlay()}},{key:"moveBounds",value:function(e,t){var n=this.props.bounds.min+e,r=this.props.bounds.max+t;return n>=0&&r<=this.props.timelineMax&&this.props.onBoundsChange({min:n,max:r}),r>=this.props.timelineMax}},{key:"togglePlayTimeline",value:function(e){this.setState({isPlaying:!this.state.isPlaying,isMovingWindow:e.metaKey||e.ctrlKey})}},{key:"startTimelinePlay",value:function(){this.timerTick(!0)}},{key:"stopTimelinePlay",value:function(){this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=null}},{key:"timerTick",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.moveBounds(this.state.isMovingWindow?1:0,1),r=1e3*parseInt(this.props.speed,10);n?t?(this.props.onBoundsChange({min:0,max:1}),this.timeoutID=setTimeout((function(){return e.timerTick()}),r)):this.setState({isPlaying:!1}):this.timeoutID=setTimeout((function(){return e.timerTick()}),r)}},{key:"render",value:function(){var e=this;return a.a.createElement(a.a.Fragment,null,a.a.createElement(mn,{title:"Reset zoom",onClick:function(){return e.props.onBoundsChange({min:e.props.bounds.min,max:e.props.bounds.max})}},a.a.createElement("i",{className:"material-icons"},"zoom_out_map")),a.a.createElement("div",{className:"libmr-Panel-control-group"},a.a.createElement(mn,{title:"Skip to end",onClick:function(){return e.props.onBoundsChange({min:e.props.timelineMax-(e.props.bounds.max-e.props.bounds.min),max:e.props.timelineMax})}},a.a.createElement("i",{className:"material-icons"},"skip_next")),a.a.createElement(mn,{title:"Fast-forward",onClick:function(){return e.moveBounds(1,1)}},a.a.createElement("i",{className:"material-icons"},"fast_forward")),a.a.createElement(mn,{active:this.state.isPlaying,onClick:function(t){return e.togglePlayTimeline(t)},title:this.state.isPlaying?"Pause":"Play timeline. Hold Ctrl/Cmd + click for moving window."},a.a.createElement("i",{className:"material-icons"},this.state.isPlaying?"pause":"play_arrow")),a.a.createElement(mn,{title:"Rewind",onClick:function(){return e.moveBounds(-1,-1)}},a.a.createElement("i",{className:"material-icons"},"fast_rewind")),a.a.createElement(mn,{title:"Back to start",onClick:function(){return e.props.onBoundsChange({min:0,max:e.props.bounds.max-e.props.bounds.min})}},a.a.createElement("i",{className:"material-icons"},"skip_previous"))),a.a.createElement("div",{className:"libmr-Panel-control-group"},a.a.createElement(Zt,{active:!1,align:"right",size:"narrow",summary:a.a.createElement("strong",null,Vs[this.props.speed]),title:"Speed"},a.a.createElement(Bs,{items:Object.keys(Vs).map((function(t){return{value:t,label:"1 ".concat(e.props.unit,"/").concat(Vs[t])}})),onChange:this.props.onSpeedChange,value:this.props.speed})),a.a.createElement(Zt,{active:!1,align:"right",size:"narrow",summary:a.a.createElement("strong",null,Hs[this.props.unit]),title:"Group by"},a.a.createElement(Bs,{items:Ks,onChange:this.props.onUnitChange,value:this.props.unit})),a.a.createElement(Zt,{align:"right",title:"Nodes"},a.a.createElement(on,{label:"Node size",onChange:this.props.onNodeSizeChange,min:this.props.minNodeSize,max:this.props.maxNodeSize,unit:"px",value:this.props.nodeSize}))))}}]),t}(a.a.Component);qs.displayName="TimelineControls",qs.propTypes={bounds:_t.a.shape({min:_t.a.number.isRequired,max:_t.a.number.isRequired}).isRequired,maxNodeSize:_t.a.number,minNodeSize:_t.a.number,nodeSize:_t.a.number.isRequired,onBoundsChange:_t.a.func.isRequired,onNodeSizeChange:_t.a.func.isRequired,onSpeedChange:_t.a.func.isRequired,onUnitChange:_t.a.func.isRequired,speed:_t.a.string.isRequired,timelineMax:_t.a.number.isRequired,unit:_t.a.string.isRequired},qs.defaultProps={maxNodeSize:xn.a.MAX_NODE_SIZE,minNodeSize:xn.a.MIN_NODE_SIZE,nodeSize:xn.a.NODE_SIZE};n(1077);var Ws=n(516);function Ys(e){var t=0,n=Number.MAX_VALUE,r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value;l.y>t&&(t=l.y),l.y<n&&(n=l.y)}}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}var s=.1*(t-n);return{min:n>s?n-s:0,max:t+s}}var Zs=function(e){function t(){var e,n,r;ue()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return fe()(r,(n=r=fe()(this,(e=ge()(t)).call.apply(e,[this].concat(o))),r.state={isDragging:!1,bounds:null},n))}return be()(t,e),me()(t,[{key:"componentDidMount",value:function(){var e=this;this.createChart(),this.debouncedChangeBounds=Vc()((function(t){e.state.isDragging&&e.props.onBoundsChange(t)}),xn.a.DELAY)}},{key:"componentDidUpdate",value:function(e){e.width===this.props.width&&e.height===this.props.height||this.resizeChart(),e.chartData!==this.props.chartData&&this.updateChart()}},{key:"componentWillUnmount",value:function(){this.chart.destroy()}},{key:"createDatasets",value:function(){return{labels:this.props.chartData.map((function(e){return e.label})),datasets:[{data:this.props.chartData,get backgroundColor(){return En.b.primaryColourAlphaMedium},lineTension:0,label:"Histogram"}]}}},{key:"createChart",value:function(){var e=this;this.domRef.height=this.props.height,this.domRef.width=this.props.width;var t=this.domRef.getContext("2d");this.chart=new As.a(t,{type:"line",data:this.createDatasets(),options:{animation:!1,layout:{padding:{left:0,right:0,top:-40,bottom:0}},legend:{display:!1},maintainAspectRatio:!1,responsive:!1,scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:Ys(this.props.chartData)}]},title:{display:!0,text:""},tooltips:{callbacks:{title:function(t){var n=t.map((function(t){return e.props.chartData[t.index].label}));return"".concat(n.join(" "),": ").concat(t.length," point").concat(1===t.length?"":"s")},label:function(){return""}},displayColors:!1,yAlign:"bottom"}}})}},{key:"updateChart",value:function(){this.chart.config.data=this.createDatasets();var e=Ys(this.props.chartData);this.chart.config.options.scales.yAxes[0].ticks.min=e.min,this.chart.config.options.scales.yAxes[0].ticks.max=e.max,this.chart.clear(),this.chart.update()}},{key:"resizeChart",value:function(){this.chart.resize()}},{key:"destroyChart",value:function(){this.chart.destroy(),this.chart=null}},{key:"sliderPositionToBounds",value:function(e,t){var n=this.props.chartData.length-1;return{min:e*n/this.props.width,max:(e+t)*n/this.props.width}}},{key:"render",value:function(){var e=this,t=this.state.bounds||this.props.bounds,n=this.props.width/Math.max(1,this.props.chartData.length-1),r=t.min*n,o=Math.max(1,t.max-t.min)*n,i=o<128,c=r>this.props.width-64+7,l=r+o<71;return a.a.createElement("div",{className:"libmr-AreaChart",style:{width:this.props.width,height:this.props.height}},a.a.createElement("canvas",{ref:function(t){e.domRef=t}}),a.a.createElement(Ws.a,{bounds:"parent",minWidth:24,position:{x:r,y:0},size:{width:o,height:this.props.height},onDragStart:function(){return e.setState({isDragging:!0})},onDrag:function(t,n){var r=e.sliderPositionToBounds(n.x>0?n.x:0,o);e.setState({bounds:r}),e.debouncedChangeBounds(r)},onDragStop:function(t,n){e.setState({isDragging:!1,bounds:null});var r=e.sliderPositionToBounds(n.x>0?n.x:0,o);e.props.onBoundsChange(r)},onResizeStart:function(){return e.setState({isDragging:!0})},onResize:function(t,n,r,a,o){var i=e.sliderPositionToBounds(o.x>0?o.x:0,r.offsetWidth);e.setState({bounds:i}),e.debouncedChangeBounds(i)},onResizeStop:function(t,n,r,a,o){e.setState({isDragging:!1,bounds:null});var i=e.sliderPositionToBounds(o.x>0?o.x:0,r.offsetWidth);e.props.onBoundsChange(i)},className:d()("libmr-AreaChart-slider",{"has-labels":this.props.showLabels||this.state.isDragging,stacked:i,"stacked-left":c,"stacked-right":l}),enableResizing:{top:!1,right:!0,bottom:!1,left:!0,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},dragAxis:"x",resizeHandleClasses:{left:"libmr-AreaChart-resize-handler",right:"libmr-AreaChart-resize-handler"},resizeHandleStyles:{left:{top:-1,bottom:-1,height:"auto"},right:{top:-1,bottom:-1,height:"auto"}}},a.a.createElement("label",{className:"libmr-AreaChart-label-min"},this.props.formatLabel(this.props.chartData[Math.ceil(t.min)].x)),a.a.createElement("label",{className:"libmr-AreaChart-label-max"},this.props.formatLabel(this.props.chartData[Math.floor(t.max)].x))))}}]),t}(a.a.Component);Zs.displayName="AreaChart",Zs.propTypes={bounds:_t.a.shape({min:_t.a.number.isRequired,max:_t.a.number.isRequired}).isRequired,chartData:_t.a.arrayOf(_t.a.shape({x:_t.a.oneOfType([_t.a.instanceOf(Date),_t.a.number]).isRequired,y:_t.a.number.isRequired,label:_t.a.string.isRequired})).isRequired,formatLabel:_t.a.func,height:_t.a.number.isRequired,onBoundsChange:_t.a.func.isRequired,showLabels:_t.a.bool,width:_t.a.number.isRequired},Zs.defaultProps={formatLabel:function(e){return e}};var Xs=function(e){var t=e.width,n=e.height,r=E()(e,["width","height"]),o=a.a.useState(!1),i=B()(o,2),c=i[0],l=i[1],s=a.a.useMemo((function(){return function(e){if(e.length){var t=e[0].y,n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value.y;t=c>t?c:t}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return t}return 0}(r.chartData)}),[r.chartData]);return a.a.createElement(gn,{className:"libmr-Timeline",controlsVisible:c,onControlsVisibleChange:l,secondaryControls:a.a.createElement(qs,{bounds:r.bounds,nodeSize:r.nodeSize,onBoundsChange:r.onBoundsChange,onNodeSizeChange:r.onNodeSizeChange,onSpeedChange:r.onSpeedChange,onUnitChange:r.onUnitChange,speed:r.speed,timelineMax:r.histogram.length-1,unit:r.unit}),style:{width:t,height:n},zoomControls:!1},a.a.createElement(Rs,{addExportCallback:r.addExportCallback,bounds:r.momentBounds,chartData:r.chartData,getTooltip:r.getTooltip,height:n-56,highlightedIds:r.highlightedIds,maxStackSize:s,nodeSize:r.nodeSize,onViewportChange:r.onViewportChange,removeExportCallback:r.removeExportCallback,setHighlightedIds:r.setHighlightedIds,styles:r.styles,unit:r.unit,viewport:r.viewport,width:t-16}),a.a.createElement(Zs,{bounds:r.bounds,chartData:r.histogram,formatLabel:Sa,height:48,onBoundsChange:r.onBoundsChange,width:t-16,showLabels:c}),r.children)};Xs.displayName="Timeline",Xs.propTypes={addExportCallback:_t.a.func,bounds:_t.a.shape({min:_t.a.number.isRequired,max:_t.a.number.isRequired}),chartData:_t.a.arrayOf(_t.a.shape({x:_t.a.instanceOf(Date).isRequired,y:_t.a.number.isRequired,id:_t.a.string.isRequired})).isRequired,children:_t.a.node,getTooltip:_t.a.func,height:_t.a.number.isRequired,highlightedIds:_t.a.instanceOf(Set).isRequired,histogram:_t.a.arrayOf(_t.a.shape({x:_t.a.instanceOf(Date).isRequired,y:_t.a.number.isRequired,label:_t.a.string.isRequired})).isRequired,maxNodeSize:_t.a.number,minNodeSize:_t.a.number,momentBounds:_t.a.shape({min:_t.a.instanceOf(Oa.a).isRequired,max:_t.a.instanceOf(Oa.a).isRequired}).isRequired,nodeSize:_t.a.number.isRequired,onBoundsChange:_t.a.func.isRequired,onNodeSizeChange:_t.a.func.isRequired,onSpeedChange:_t.a.func.isRequired,onUnitChange:_t.a.func.isRequired,onViewportChange:_t.a.func.isRequired,removeExportCallback:_t.a.func,setHighlightedIds:_t.a.func.isRequired,speed:qs.propTypes.speed,styles:_t.a.object.isRequired,unit:qs.propTypes.unit,viewport:_t.a.shape({minx:_t.a.number.isRequired,maxx:_t.a.number.isRequired,miny:_t.a.number.isRequired,maxy:_t.a.number.isRequired}).isRequired,width:_t.a.number.isRequired},Xs.defaultProps={getTooltip:function(e){return e.id}};var Qs=Xs,Js=function(e){var t=function(e){var t=e.points,n=e.unit,r=a.a.useMemo((function(){return ja(t)}),[t]),o=a.a.useMemo((function(){return Na(t,n)}),[t,n]),i=a.a.useMemo((function(){return e.bounds||Pa(o)}),[e.bounds,o]),c=a.a.useMemo((function(){return ka(i,o)}),[i,o]);return{bounds:i,chartData:r,histogram:o,momentBounds:c}}(e);return a.a.createElement(Qs,b()({},e,t))};Js.propTypes={points:_t.a.arrayOf(_t.a.shape({date:_t.a.instanceOf(Date).isRequired,id:_t.a.string.isRequired})).isRequired,styles:_t.a.object.isRequired};var $s=n(125),eu=Object(xe.createSelector)(Ia,Ka,(function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value;t.includes(l.id)&&n.push(l)}}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n})),tu=Object(xe.createSelector)(eu,ja);var nu=Object(s.a)((function(e){var t=xa(e);return{hasTimeline:Ta(e),bounds:Aa(e),chartData:tu(e),getTooltip:_a(e),highlightedIds:Ho(e),histogram:La(e),momentBounds:Da(e),nodeSize:t.nodeSize,speed:t.speed,styles:ri(e),unit:t.unit,viewport:t.viewport}}),(function(e){return{onBoundsChange:function(t){return e($s.f(t))},onNodeSizeChange:function(t){return e($s.g(t))},onSpeedChange:function(t){return e($s.h(t))},onUnitChange:function(t){return e($s.i(t))},onViewportChange:function(t){return e($s.j(t))},setHighlightedIds:function(t,n){return e(Object(Zl.f)(t,n))}}}))((function(e){return e.hasTimeline?a.a.createElement(Qs,b()({addExportCallback:Yn,removeExportCallback:Zn},e)):null})),ru=(n(1079),n(1081),n(1083),n(1085),n(111)),au=n.n(ru),ou=n(518),iu=n.n(ou),cu=n(519),lu=n.n(cu),su=n(520),uu=n.n(su),du=n(521),mu=n.n(du),pu=n(522),fu=n.n(pu);function hu(){return(hu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var gu=a.a.createElement("path",{d:"M3 15.813V6v9.813zM14 19v-6 6zM9 9V3v6zM9 3h8-8zM9 9h8-8zM3 6h5-5zM3 15.813h11H3zM14 13h6-6zM14 19h6-6z"}),vu=a.a.createElement("path",{d:"M3 15.813v1H2v-1h1zM3 6H2V5h1v1zm11 13v1h-1v-1h1zm0-6h-1v-1h1v1zM9 9v1H8V9h1zm0-6H8V2h1v1zM2 15.813V6h2v9.813H2zM13 19v-6h2v6h-2zM8 9V3h2v6H8zm1-7h8v2H9V2zm0 6h8v2H9V8zM3 5h5v2H3V5zm0 9.813h11v2H3v-2zM14 12h6v2h-6v-2zm0 6h6v2h-6v-2z",fill:"#FFF"}),bu=function(e){return a.a.createElement("svg",hu({width:"1em",height:"1em",viewBox:"0 0 22 22"},e),gu,vu)};function yu(){return(yu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Eu=a.a.createElement("path",{d:"M14.53 7.462l-.707-.707-.707.707.707.707.707-.707zm-8.485 2.829l.98.196.203-1.014-1.02-.169-.163.987zm-4.95-.707L.1 9.474l.994.11zm2.828 8.485l.707-.707-.015-.016-.017-.015-.675.738zm6.364-6.364l3.536 3.535 1.414-1.414-3.536-3.535-1.414 1.414zm4.95 3.535c1.008-1.007 1.556-2.064 1.765-3.107.207-1.036.065-1.989-.198-2.777a7.143 7.143 0 00-.963-1.867 7.13 7.13 0 00-.583-.712 2.323 2.323 0 00-.013-.014l-.005-.004-.001-.002-.001-.001-.708.706-.708.707-.001-.002h-.001l.001.001.017.018a5.142 5.142 0 01.375.465c.238.333.514.796.694 1.337.179.537.258 1.131.134 1.753-.123.614-.458 1.325-1.218 2.085l1.414 1.414zm-1.414-1.414c-.76.76-1.472 1.095-2.086 1.218-.621.125-1.215.046-1.752-.133a5.148 5.148 0 01-1.337-.694 5.157 5.157 0 01-.466-.375l-.017-.017-.002-.002v.001l.002.001-.706.708-.707.708.001.001.002.002.005.005.013.013.043.04a7.111 7.111 0 00.669.542c.44.315 1.083.702 1.867.964.789.263 1.742.405 2.778.198 1.043-.21 2.1-.758 3.107-1.766l-1.414-1.414zm1.414-5.657l3.535-3.535-1.414-1.414-3.535 3.535 1.414 1.414zm2.828-4.242a96.673 96.673 0 01-.626.78v-.001l-.002-.002v.001l.016.013.083.075c.076.07.19.182.33.336.279.307.652.778 1.007 1.41.706 1.254 1.352 3.162 1.028 5.749l1.985.248c.384-3.07-.384-5.404-1.27-6.978a9.814 9.814 0 00-1.268-1.772 7.484 7.484 0 00-.591-.585 3.164 3.164 0 00-.063-.052l-.002-.002h-.001l-.626.78zm0 0l.707-.708-.002-.002a2.277 2.277 0 00-.06-.057 11.74 11.74 0 00-.701-.606c-.47-.376-1.15-.864-1.986-1.318-1.658-.9-4.038-1.719-6.668-1.112l.45 1.949c1.967-.454 3.83.142 5.264.92a11.717 11.717 0 012.15 1.51 5.87 5.87 0 01.136.128l.005.004h-.001l.706-.708zm-9.9 9.9c-.897-.898-1.41-1.99-1.14-3.34l-1.961-.392c-.437 2.185.464 3.922 1.688 5.145l1.414-1.414zm-2.12-3.536l.163-.987h-.003l-.007-.002-.03-.004-.112-.019A142.258 142.258 0 004.29 9c-1.045-.159-2.31-.34-3.105-.412l-.18 1.991c.724.066 1.933.239 2.984.399a170.72 170.72 0 011.744.275l.11.018.029.005h.007l.001.001.165-.986zm-3.956-.597c.153-1.376.773-2.639 1.39-3.586a11.308 11.308 0 011.071-1.39 4.7 4.7 0 01.08-.083c0-.002.002-.002.002-.003l-.001.001-.708-.706-.707-.707-.002.002a2.275 2.275 0 00-.039.04 10.443 10.443 0 00-.409.457c-.258.306-.604.748-.962 1.297C1.096 6.1.302 7.667.101 9.473l1.988.221zM.1 9.474c-.325 2.92.448 5.244 1.304 6.834.427.794.876 1.406 1.222 1.825a8.644 8.644 0 00.6.655.842.842 0 01.018.016l.002.001v.001l.676-.737.676-.738v.001H4.6l.001.002-.002-.002-.017-.017a6.654 6.654 0 01-.414-.456 9.257 9.257 0 01-1.002-1.499c-.707-1.313-1.348-3.232-1.077-5.666L.1 9.474zm3.115 9.302c4.28 4.28 11.277 4.28 15.557 0l-1.415-1.414c-3.498 3.498-9.23 3.498-12.728 0l-1.414 1.414z"}),Ou=function(e){return a.a.createElement("svg",yu({width:"1em",height:"1em",viewBox:"0 0 22 22"},e),Eu)};function Cu(){return(Cu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var wu=a.a.createElement("path",{d:"M11.536 1.267l1.5 5.417 1.928-.534-1.5-5.417-1.928.534zm2.955 6.02l6.5-3.666-.982-1.742-6.5 3.667.982 1.742zm-1.369-1.35l-3 5.5 1.756.959 3-5.5-1.756-.958zm-1.826 5.024l-10-3.099-.592 1.91 10 3.1.592-1.91zm-1.174 1.434l2.5 4.584 1.756-.958-2.5-4.583-1.756.957zm2.464 3.699l-2 4.5 1.828.812 2-4.5-1.828-.812zm.622 1.362l6 1.834.584-1.913-6-1.833-.584 1.912z"}),Su=function(e){return a.a.createElement("svg",Cu({width:"1em",height:"1em",viewBox:"0 0 22 22"},e),wu)};function ju(){return(ju=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Nu=a.a.createElement("path",{d:"M1 11l-.447.894v-1.788L1 11zm2.25-1.125l-.447-.894.447.894zm4.5-2.25l-.447-.894.447.894zM10 6.5l.447.894L10 6.5zm4.5-2.25l-.447-.894.447.894zm2.25-1.125l-.447-.894.447.894zm-15.303 6.98l18 9-.894 1.79-18-9 .894-1.79zm-.894 0l2.25-1.124.894 1.788-2.25 1.125-.894-1.788zm2.25-1.124l4.5-2.25.894 1.788-4.5 2.25-.894-1.788zm4.5-2.25l2.25-1.125.894 1.788-2.25 1.125-.894-1.788zm2.25-1.125l4.5-2.25.894 1.788-4.5 2.25-.894-1.788zm4.5-2.25l2.25-1.125.894 1.788-2.25 1.125-.894-1.788zm2.25-1.125l2.25-1.125.894 1.788-2.25 1.125-.894-1.788z"}),Pu=a.a.createElement("path",{d:"M5.553 13.106l6-3 .894 1.788-6 3-.894-1.788zm6-3l7-3.5.894 1.788-7 3.5-.894-1.788zm.894 0l7 3.5-.894 1.788-7-3.5.894-1.788z"}),ku=function(e){return a.a.createElement("svg",ju({width:"1em",height:"1em",viewBox:"0 0 22 22"},e),Nu,Pu)};function xu(){return(xu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var _u=a.a.createElement("path",{d:"M6.188 3H16 6.187zM3 14h6-6zM13 9h6-6zM19 9v8-8zM13 9v8-8zM16 3v5-5zM6.188 3v11V3zM9 14v6-6zM3 14v6-6z",fill:"#C4C4C4"}),Iu=a.a.createElement("path",{d:"M6.188 3h-1V2h1v1zM16 3V2h1v1h-1zM3 14H2v-1h1v1zm6 0v-1h1v1H9zm4-5h-1V8h1v1zm6 0V8h1v1h-1zM6.187 2H16v2H6.187V2zM3 13h6v2H3v-2zm10-5h6v2h-6V8zm7 1v8h-2V9h2zm-6 0v8h-2V9h2zm3-6v5h-2V3h2zM7.187 3v11h-2V3h2zM10 14v6H8v-6h2zm-6 0v6H2v-6h2z",fill:"#FFF"}),Tu={rc:bu,cr:Ou,rd:Su,dg:ku,hr:function(e){return a.a.createElement("svg",xu({width:"1em",height:"1em",viewBox:"0 0 22 22"},e),_u,Iu)}},Lu={rc:"Rectangular",cr:"Circular",rd:"Radial",dg:"Diagonal",hr:"Hierarchical"},Au=function(e){var t=e.treeType.toLowerCase(),n=t===e.selectedTreeType,r=Tu[t];return a.a.createElement(mn,{active:n,title:Lu[e.treeType],onClick:function(){return e.handleClick(e.treeType.toLowerCase())}},a.a.createElement(r,null))};Au.displayName="TreeTypeButton",Au.propTypes={treeType:_t.a.string.isRequired,selectedTreeType:_t.a.string.isRequired,handleClick:_t.a.func.isRequired};var Du=Au;const Mu={Degrees0:0,Degrees45:.25*Math.PI,Degrees90:.5*Math.PI,Degrees180:Math.PI,Degrees270:1.5*Math.PI,Degrees360:2*Math.PI},Ru=[];var Fu={alignLabels:!1,branchScale:null,collapsedIds:Ru,fillStyle:"#222",fontFamily:"serif",fontSize:16,fontWeight:"normal",haloRadius:12,haloStyle:"#3C7383",haloWidth:4,highlightedId:null,highlightedStyle:"#3C7383",internalNodeStyle:{shape:"none"},labelThreshold:8,leafNodeStyle:{shape:"circle"},lineWidth:1,nodeSize:14,nodesPowRatio:.5,padding:32,renderInternalLabels:!1,renderLabels:!0,renderLeafLabels:!0,rootId:null,rotatedIds:Ru,selectableInternalNodes:!0,selectableLeafNodes:!0,selectedIds:Ru,showLabels:!1,showNodes:!0,stepScale:8,strokeStyle:"#222",styleLeafLabels:!1,styleNodeLines:!1,styles:{},type:"rc",zoomFactor:3},zu=function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement(yn,{active:e.lasso,onClick:function(){return e.onLassoChange(!e.lasso)}}),a.a.createElement("div",{className:"libmr-Panel-control-group"},a.a.createElement(Du,{treeType:"hr",selectedTreeType:e.type,handleClick:e.onTypeChange}),a.a.createElement(Du,{treeType:"dg",selectedTreeType:e.type,handleClick:e.onTypeChange}),a.a.createElement(Du,{treeType:"rd",selectedTreeType:e.type,handleClick:e.onTypeChange}),a.a.createElement(Du,{treeType:"cr",selectedTreeType:e.type,handleClick:e.onTypeChange}),a.a.createElement(Du,{treeType:"rc",selectedTreeType:e.type,handleClick:e.onTypeChange})))};zu.displayName="TreeControls",zu.propTypes={lasso:_t.a.bool.isRequired,type:_t.a.string.isRequired,onLassoChange:_t.a.func.isRequired,onTypeChange:_t.a.func.isRequired},zu.defaultProps={type:Fu.type};var Gu=zu,Uu=function(e){return a.a.createElement(Zt,{className:"scrollable-content",title:"Nodes & labels"},a.a.createElement(on,{id:"tree-nodeSize",label:"Node size",onChange:e.onNodeSizeChange,min:e.minNodeSize,max:e.maxNodeSize,value:e.nodeSize,unit:"px"}),a.a.createElement(on,{id:"tree-fontSize",label:"Label size",onChange:e.onFontSizeChange,min:e.minFontSize,max:e.maxFontSize,value:e.fontSize,unit:"px"}),a.a.createElement("hr",null),a.a.createElement(tn,{className:"mr-toggle-switch",label:"Show leaf nodes",id:"tree-styleLeafNodes",isChecked:e.styleLeafNodes,onChange:function(t){return e.onStyleLeafNodesChange(t)}}),a.a.createElement(tn,{className:"mr-toggle-switch",label:"Show leaf borders",id:"tree-renderLeafBorders",isChecked:e.renderLeafBorders,onChange:function(t){return e.onRenderLeafBordersChange(t)}}),a.a.createElement("hr",null),a.a.createElement(tn,{className:"mr-toggle-switch",label:"Show leaf labels",id:"tree-renderLeafLabels",isChecked:e.renderLeafLabels,onChange:function(t){return e.onRenderLeafLabelsChange(t)}}),a.a.createElement(tn,{className:"mr-toggle-switch",label:"Align leaf labels",id:"tree-alignLabels",isChecked:e.alignLabels,onChange:function(t){return e.onAlignLabelsChange(t)}}),a.a.createElement(tn,{className:"mr-toggle-switch",label:"Colour leaf labels",id:"tree-styleLeafLabels",isChecked:e.styleLeafLabels,onChange:function(t){return e.onStyleLeafLabelsChange(t)}}),a.a.createElement("hr",null),a.a.createElement(tn,{className:"mr-toggle-switch",label:"Show internal nodes",id:"tree-styleInternalNodes",isChecked:e.styleInternalNodes,onChange:function(t){return e.onStyleInternalNodesChange(t)}}),a.a.createElement(tn,{className:"mr-toggle-switch",label:"Show internal labels",id:"tree-renderInternalLabels",isChecked:e.renderInternalLabels,onChange:function(t){return e.onRenderInternalLabelsChange(t)}}),a.a.createElement(tn,{className:"mr-toggle-switch",label:"Colour internal edges",id:"tree-styleNodeLines",isChecked:e.styleNodeLines,onChange:function(t){return e.onStyleNodeLinesChange(t)}}))};Uu.propTypes={alignLabels:_t.a.bool,fontSize:_t.a.number.isRequired,maxFontSize:_t.a.number.isRequired,maxNodeSize:_t.a.number.isRequired,minFontSize:_t.a.number.isRequired,minNodeSize:_t.a.number.isRequired,nodeSize:_t.a.number.isRequired,onAlignLabelsChange:_t.a.func.isRequired,onFontSizeChange:_t.a.func.isRequired,onNodeSizeChange:_t.a.func.isRequired,onRenderInternalLabelsChange:_t.a.func.isRequired,onRenderLeafBordersChange:_t.a.func.isRequired,onRenderLeafLabelsChange:_t.a.func.isRequired,onStyleInternalNodesChange:_t.a.func.isRequired,onStyleLeafLabelsChange:_t.a.func.isRequired,onStyleLeafNodesChange:_t.a.func.isRequired,onStyleNodeLinesChange:_t.a.func.isRequired,renderInternalLabels:_t.a.bool,renderLeafBorders:_t.a.bool,renderLeafLabels:_t.a.bool,styleInternalNodes:_t.a.bool,styleLeafLabels:_t.a.bool,styleLeafNodes:_t.a.bool,styleNodeLines:_t.a.bool},Uu.defaultProps={fontSize:xn.a.FONT_SIZE,maxFontSize:xn.a.MAX_FONT_SIZE,maxNodeSize:xn.a.MAX_NODE_SIZE,minFontSize:xn.a.MIN_FONT_SIZE,minNodeSize:xn.a.MIN_NODE_SIZE,nodeSize:xn.a.NODE_SIZE};var Bu=Uu,Hu={x:["fullscreen","swap_horiz","swap_vert"],y:["fullscreen","swap_vert","swap_horiz"]},Vu=function(e){function t(){var e,n,r;ue()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return fe()(r,(n=r=fe()(this,(e=ge()(t)).call.apply(e,[this].concat(o))),r.state={mode:0},r.toggleMode=function(){r.setState({mode:2===r.state.mode?0:r.state.mode+1})},n))}return be()(t,e),me()(t,[{key:"render",value:function(){var e=[this.props.onZoomIn,this.props.onHorizZoomIn,this.props.onVertZoomIn],t=[this.props.onZoomOut,this.props.onHorizZoomOut,this.props.onVertZoomOut],n=this.props.mainAxis,r=void 0===n?"x":n;return a.a.createElement(fn,{className:this.props.className,onZoomIn:e[this.state.mode],onZoomOut:t[this.state.mode]},a.a.createElement("div",{className:"libmr-ZoomControls-button",title:"Toogle zoom mode",onClick:this.toggleMode},a.a.createElement("i",{className:"libmr-ZoomControls-icon material-icons"},Hu[r][this.state.mode])))}}]),t}(a.a.Component);Vu.displayName="TreeZoomControls",Vu.propTypes={className:_t.a.string,mainAxis:_t.a.string,onZoomIn:_t.a.func.isRequired,onZoomOut:_t.a.func.isRequired,onHorizZoomIn:_t.a.func.isRequired,onHorizZoomOut:_t.a.func.isRequired,onVertZoomIn:_t.a.func.isRequired,onVertZoomOut:_t.a.func.isRequired};var Ku={rd:{alignableLabels:!1,branchScalingAxis:"xy",drawLine:function(e,t,n){e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(n.parent.x,n.parent.y),e.ctx.stroke(),e.ctx.closePath()},getBranchScale:function(e){const t=function(e){return Math.min(e.ctx.canvas.width,e.ctx.canvas.height)}(e)/2,n=e.getVirtualTree(),r=n.rootNode.totalLeafLength-n.rootNode.branchLength;return r>0?t/r:r<0?t*r:0},getNodeAtPoint:function(e,t,n,r){const{rootNode:a,postorderTraversal:o}=e.layout();for(let e=a.postIndex-a.totalNodes+1;e<=a.postIndex;e++){const a=o[e];if(a.parent&&(a.x>a.parent.x?t<a.x&&t>a.parent.x:t<a.parent.x&&t>a.x))if(isNaN(a.slope)){if(a.y>a.parent.y?n<a.y&&n>a.parent.y:n<a.parent.y&&n>a.y)return a}else if(n>a.slope*t+a.intercept-r&&n<a.slope*t+a.intercept+r)return a}return null},layoutNodes:function(e,t){let n=0;const{rootNode:r}=t;for(let e=r.postIndex-r.totalNodes+1;e<=r.postIndex;e++){const a=t.postorderTraversal[e];if(a.isLeaf)a.angle=n*(Mu.Degrees360/r.visibleLeaves);else{let e=0;for(const t of a.children)e+=t.angle*t.totalLeaves;a.angle=e/a.totalLeaves}(a.isLeaf&&!a.isHidden||a.isCollapsed&&!a.isHidden)&&(n+=1)}for(let n=r.preIndex;n<r.preIndex+r.totalNodes;n++){const a=t.preorderTraversal[n],o=a.branchLength*e.state.branchScale;a.x=(a!==r?a.parent.x:0)+o*Math.cos(a.angle),a.y=(a!==r?a.parent.y:0)+o*Math.sin(a.angle),a!==r&&(a.slope=(a.parent.y-a.y)/(a.parent.x-a.x),a.intercept=a.y-a.slope*a.x)}}},rc:{alignableLabels:!0,branchScalingAxis:"x",drawLine:function(e,t,n){n!==t.rootNode&&(e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(n.parent.x,n.y),e.ctx.lineTo(n.parent.x,n.parent.y),e.ctx.stroke(),e.ctx.closePath())},getBranchScale:function(e,t=e.state.stepScale){const n=e.getVirtualTree(),r=n.rootNode.totalLeaves*t,a=e.ctx.canvas.width/e.ctx.canvas.height*r,o=n.rootNode.totalLeafLength-n.rootNode.branchLength;return 0===o&&e.error(501),a/o},getNodeAtPoint:function(e,t,n,r){const{rootNode:a,postorderTraversal:o}=e.layout();for(let e=a.postIndex-a.totalNodes+1;e<=a.postIndex;e++){const a=o[e];if(a.parent&&(t<a.x+r&&t>a.parent.x-r&&n<a.y+r&&n>a.y-r||t<a.parent.x+r&&t>a.parent.x-r&&(n<a.parent.y?n>a.y-r:n<a.y+r)))return a}return null},mainAxis:"x",layoutNodes:function(e,t){let n=0;const{rootNode:r}=t;for(let a=r.postIndex-r.totalNodes+1;a<=r.postIndex;a++){const r=t.postorderTraversal[a];if(r.angle=Mu.Degrees0,r.x=r.distanceFromRoot*e.state.branchScale,r.isLeaf)r.y=n*e.state.stepScale;else if(r.isCollapsed)r.y=n*e.state.stepScale;else{const e=r.children[0].y,t=r.children[r.children.length-1].y;r.y=(t+e)/2}(r.isLeaf&&!r.isHidden||r.isCollapsed&&!r.isHidden)&&(n+=1)}},stepScalingAxis:"y"},cr:{alignableLabels:!0,branchScalingAxis:"xy",drawLine:function(e,t,n){const{rootNode:r}=t,a=n.parent.distanceFromRoot-r.distanceFromRoot;if(e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(a*e.state.branchScale*Math.cos(n.angle),a*e.state.branchScale*Math.sin(n.angle)),e.ctx.stroke(),e.ctx.closePath(),n.children&&n.children.length&&!n.isCollapsed){const t=n.children[0].angle,a=n.children[n.children.length-1].angle,o=Math.abs(n.distanceFromRoot-r.distanceFromRoot);e.ctx.beginPath(),e.ctx.arc(0,0,o*e.state.branchScale,t,a,a<t),e.ctx.stroke(),e.ctx.closePath()}},getBranchScale:function(e){const t=function(e){return Math.min(e.ctx.canvas.width,e.ctx.canvas.height)}(e)/2,{rootNode:n}=e.getVirtualTree();return n.totalLeafLength>0?t/n.totalLeafLength:n.totalLeafLength<0?t*n.totalLeafLength:0},getNodeAtPoint:function(e,t,n,r){const{rootNode:a,postorderTraversal:o}=e.layout();for(let i=a.postIndex-a.totalNodes+1;i<=a.postIndex;i++){const c=o[i];if(!c.parent)continue;const l=c.parent.distanceFromRoot-a.distanceFromRoot,s=l*e.state.branchScale*Math.cos(c.angle);if(c.x>s?t<c.x&&t>s:t<s&&t>c.x)if(isNaN(c.slope)){const t=l*e.state.branchScale*Math.sin(c.angle);if(c.y>t?n<c.y&&n>t:n<t&&n>c.y)return c}else if(n>c.slope*t+c.intercept-r&&n<c.slope*t+c.intercept+r)return c}return null},layoutNodes:function(e,t){let n=0;const{rootNode:r}=t;for(let a=r.postIndex-r.totalNodes+1;a<=r.postIndex;a++){const r=t.postorderTraversal[a];if(r.isLeaf)r.angle=n*(Mu.Degrees360/t.rootNode.visibleLeaves);else{const e=r.children[0].angle,t=r.children[r.children.length-1].angle;r.angle=(t+e)/2}const o=(r.distanceFromRoot-t.rootNode.distanceFromRoot)*e.state.branchScale;r.x=o*Math.cos(r.angle),r.y=o*Math.sin(r.angle),(r.isLeaf&&!r.isHidden||r.isCollapsed&&!r.isHidden)&&(n+=1),r.parent&&(r.slope=Math.tan(r.angle),r.intercept=r.y-r.slope*r.x)}}},dg:{alignableLabels:!1,getBranchScale:function(e){const{rootNode:t}=e.getVirtualTree(),n=e.ctx.canvas.width-2*e.state.padding;return t.totalLeafLength>0?n/t.totalLeafLength:t.totalLeafLength<0?n*t.totalLeafLength:0},getNodeAtPoint:function(e,t,n,r){const{rootNode:a,postorderTraversal:o}=e.getVirtualTree();for(let e=a.postIndex-a.totalNodes+1;e<=a.postIndex;e++){const a=o[e];if(a&&a.parent&&t<a.x&&t>a.parent.x&&n>a.slope*t+a.intercept-r&&n<a.slope*t+a.intercept+r)return a}return null},drawLine:function(e,t,n){n!==t.rootNode&&(e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(n.parent.x,n.parent.y),e.ctx.stroke(),e.ctx.closePath())},layoutNodes:function(e,t){let n=0;const{rootNode:r}=t;for(let a=r.postIndex-r.totalNodes+1;a<=r.postIndex;a++){const r=t.postorderTraversal[a];if(r.angle=Mu.Degrees0,r.x=(t.rootNode.visibleLeaves-r.visibleLeaves)*e.state.stepScale/2,r.isLeaf)r.y=n*e.state.stepScale;else if(r.isCollapsed)r.y=n*e.state.stepScale;else{const t=r.children[0].y,n=(r.visibleLeaves-r.children[0].visibleLeaves)*e.state.stepScale;r.y=t+n/2}r.isLeaf&&n++}for(let e=r.preIndex;e<r.preIndex+r.totalNodes;e++){const n=t.preorderTraversal[e];n.parent&&(n.slope=(n.parent.y-n.y)/(n.parent.x-n.x),n.intercept=n.y-n.slope*n.x)}},mainAxis:"x",stepScalingAxis:"y"},hr:{alignableLabels:!0,drawLine:function(e,t,n){n!==t.rootNode&&(e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(n.x,n.parent.y),e.ctx.lineTo(n.parent.x,n.parent.y),e.ctx.stroke(),e.ctx.closePath())},branchScalingAxis:"y",getBranchScale:function(e,t=e.state.stepScale){const n=e.getVirtualTree(),r=n.rootNode.totalLeaves*t,a=e.ctx.canvas.height/e.ctx.canvas.width*r,o=n.rootNode.totalLeafLength-n.rootNode.branchLength;return 0===o&&e.error(501),a/o},getNodeAtPoint:function(e,t,n,r){const{rootNode:a,preorderTraversal:o}=e.layout();for(let e=a.preIndex;e<a.preIndex+a.totalNodes;e++){const a=o[e];if(a.parent&&(t<a.x+r&&t>a.x-r&&n<a.y+r&&n>a.parent.y-r||n<a.parent.y+r&&n>a.parent.y-r&&(t<a.parent.x?t>a.x-r:t<a.x+r)))return a}return null},mainAxis:"y",layoutNodes:function(e,t){let n=0;const{rootNode:r}=t;for(let a=r.postIndex-r.totalNodes+1;a<=r.postIndex;a++){const r=t.postorderTraversal[a];if(r.angle=Mu.Degrees90,r.y=r.distanceFromRoot*e.state.branchScale,r.isLeaf)r.x=-1*n*e.state.stepScale;else if(r.isCollapsed)r.x=n*e.state.stepScale;else{const e=r.children[0].x,t=r.children[r.children.length-1].x;r.x=(t+e)/2}(r.isLeaf&&!r.isHidden||r.isCollapsed&&!r.isHidden)&&(n+=1)}},stepScalingAxis:"x"}},qu=function(e){const t=e.getBounds(!1),n=e.getDrawingArea(),r=t.maxX-t.minX,a=t.maxY-t.minY,o=Math.max(.333*n.width,n.right-n.left-e.state.nodeSize),i=Math.max(.333*n.height,n.bottom-n.top-e.state.nodeSize),c=o/r,l=i/a,s=Math.min(c,l),u=e.state.padding+Math.max(e.state.nodeSize,e.state.fontSize)/2;let d=-1*t.minX*s,m=-1*t.minY*s;c>l?(d+=u+(o-r*s)/2,m+=u):c<l?(d+=u,m+=u+(i-a*s)/2):(d+=u,m+=u),void 0===Ku[e.state.type].mainAxis&&(d+=(n.width-o)/2-u,m+=(n.height-i)/2-u);const{minScale:p,maxScale:f}=function(e){return{minScale:e/2,maxScale:Math.max(e,16)}}(s);return{offsetX:d,offsetY:m,scale:s,minScale:p,maxScale:f}},Wu=function(e){return{branchScale:Ku[e.state.type].getBranchScale(e,Fu.stepScale)}},Yu=function(e){return{stepScale:Fu.stepScale}},Zu=function(e){return e.chain(Yu,Wu,qu)},Xu=function(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:xn.a.NODE_BORDER_WIDTH,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:xn.a.NODE_BORDER_STYLE,l=0,s=0,u=Object.keys(a);s<u.length;s++){var d=u[s];e.fillStyle=d,e.beginPath(),e.moveTo(t,n);var m=l+2*Math.PI*a[d];e.arc(t,n,r,l,m,!1),e.fill(),e.closePath(),l=m}i>0&&(e.beginPath(),e.arc(t,n,r,In.Degrees0,In.Degrees360),e.strokeStyle=c,e.strokeWidth=i,e.stroke(),e.closePath()),o&&_n(e,t,n,r,o)};function Qu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ju(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qu(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $u=function(e){return function(t,n){t.lasso=Cn(t.ctx.canvas,t.ctx.canvas,{isActive:e.props.lasso,path:e.props.path,onPathChange:function(n){if(null!==n||!e.props.highlightedIds.length){var r=null;if(n){r=[];var a=t.layout(),o=!0,i=!1,c=void 0;try{for(var l,s=a.leafNodes[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;t.lasso.isPointInside(u,n)&&r.push(u.id)}}catch(e){i=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}}e.props.onFilterChange(r,n)}},onRedrawRequested:function(){return t.render()},translateToCanvas:function(e){return e.map((function(e){return au.a.utils.unmapPoint(t,e.x,e.y)}))},translateFromCanvas:function(e,n){return au.a.utils.mapPoint(t,e,n)}});var r=function(){setTimeout((function(){return e.props.onAddHistoryEntry(t.ctx.canvas.toDataURL())}),0)};t.drawNodeShape=function(e,t,n,r){var a=e.state,o=e.ctx,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r/2;t.isLeaf?a.styleLeafNodes&&Fn(o,0,0,i,n,o.fillStyle,null,a.renderLeafBorders?o.lineWidth:0):(t.isCollapsed&&a.styleLeafNodes||a.styleInternalNodes)&&t.piechartSlices&&Xu(o,0,0,i,t.piechartSlices,null,a.renderLeafBorders?o.lineWidth:0)}.bind(null,t),n("collapseNode",(function(e,t){e.apply(void 0,f()(t)),r()})),n("layout",(function(e,n){var r=e.apply(void 0,f()(n));if(t._.piechart=t._.piechart||{},(!0===t.state.styleInternalNodes||t.state.collapsedIds.length)&&t._.piechart.styles!==t.state.styles){var a=Ju({fillStyle:t.state.fillStyle},t.state.leafNodeStyle),o=!0,i=!1,c=void 0;try{for(var l,s=r.postorderTraversal[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value;if(u.isLeaf){var d=t.state.styles?t.state.styles[u.id]:void 0;u.strokeStyle=(d?d.strokeStyle:void 0)||t.state.strokeStyle}else{var m={},p=!0,h=!1,g=void 0;try{for(var v,b=u.children[Symbol.iterator]();!(p=(v=b.next()).done);p=!0){var y=v.value;if(y.isLeaf){var E=t.state.styles[y.id]||a;m[E.fillStyle]=(m[E.fillStyle]||0)+1}else for(var O=0,C=Object.keys(y.piechartSlices);O<C.length;O++){var w=C[O];m[w]=(m[w]||0)+y.piechartSlices[w]}}}catch(e){h=!0,g=e}finally{try{p||null==b.return||b.return()}finally{if(h)throw g}}u.piechartSlices=m}}}catch(e){i=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}var S=!0,j=!1,N=void 0;try{for(var P,k=r.postorderTraversal[Symbol.iterator]();!(S=(P=k.next()).done);S=!0){var x=P.value;if(!x.isLeaf)for(var _=0,I=Object.keys(x.piechartSlices);_<I.length;_++){var T=I[_];x.piechartSlices[T]=x.piechartSlices[T]/x.totalLeaves}}}catch(e){j=!0,N=e}finally{try{S||null==k.return||k.return()}finally{if(j)throw N}}t._.piechart.styles=t.state.styles}return r})),n("mergeState",(function(n,r){var a=B()(r,1)[0];n(),t.state=Ju({},t.state,{},a,{size:{width:e.props.width,height:e.props.height},highlightedStyle:En.b.primaryColour,haloStyle:En.b.primaryColour,metadata:Ju({},t.state.metadata,{},a.metadata),scalebar:Ju({},t.state.scalebar,{},a.metadata)})})),n("postRender",(function(e,n){e.apply(void 0,f()(n)),t.lasso.isActive&&(t.ctx.save(),t.ctx.scale(t.pixelRatio,t.pixelRatio),t.lasso.draw(),t.ctx.restore(),t.lasso.updateCanvas())})),n("rerootNode",(function(e,t){e.apply(void 0,f()(t)),r()})),t.selectNode=function(n,r){if(t._.selectedNodeId=null,n&&n.isLeaf)e.props.setHighlightedIds([n.id],r);else{if(e.props.path)return void(e.props.highlightedIds.length&&e.props.setHighlightedIds());n&&!n.isHidden?(t._.selectedNodeId=n.id,e.props.onFilterChange(t.getLeafIds(n))):r||(e.props.highlightedIds.length?e.props.setHighlightedIds():e.props.onFilterChange(null))}},t.setRoot=function(e){t._.selectedNodeId=null;var n=null;null!==e&&(n=t.getNodeById(e)),t.setState(Ju({},function(e,t){return e.chain(()=>({rootId:t}),Zu)}(t,n?n.id:null),{ids:t.getLeafIds(e)})),r()},e.props.onPhylocanvasStateChange&&n("setState",(function(t,n){var r=B()(n,1)[0];t(),e.props.onPhylocanvasStateChange(r)})),n("setTreeType",(function(e,t){e.apply(void 0,f()(t)),r()})),t.isUninitialised=function(){return null===t.state.branchScale},e.props.onRedrawOriginalTree&&n("setSource",(function(n,r){r[0]===t.nodes.originalSource?e.props.onRedrawOriginalTree():n.apply(void 0,f()(r))}))}},ed=(_t.a.shape({index:_t.a.number.isRequired,field:_t.a.string.isRequired,label:_t.a.string.isRequired}),_t.a.shape({index:_t.a.number.isRequired,image:_t.a.string.isRequired}),_t.a.shape({x:_t.a.number.isRequired,y:_t.a.number.isRequired}));_t.a.oneOfType([_t.a.arrayOf(_t.a.number.isRequired),_t.a.shape({lat:_t.a.number.isRequired,lng:_t.a.number.isRequired})]);function td(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?td(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):td(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var rd=function(){},ad=function(e){function t(){var e,n,r;ue()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return fe()(r,(n=r=fe()(this,(e=ge()(t)).call.apply(e,[this].concat(o))),r.state={controlsVisible:!1},n))}return be()(t,e),me()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.phylocanvasState;t.viewPort&&!t.size&&(t=nd({},t,{},au.a.utils.restoreViewport(t.viewPort,t.padding,this.props.width,this.props.height))),this.tree=au.a.createTree(this.canvasRef,t,[iu.a,uu.a,mu.a,fu.a,$u(this),lu.a]),this.onInitialise();var n=this.props.addExportCallback;n&&(n("tree-png",(function(){return e.tree.exportPNG()})),n("tree-svg",(function(){return e.tree.exportSerialisedSVG()})),n("tree-nwk",(function(){return e.tree.getNewick()})))}},{key:"componentDidUpdate",value:function(e){e.width===this.props.width&&e.height===this.props.height||this.resizeTree(),e.lasso!==this.props.lasso&&this.tree.lasso.setActive(this.props.lasso),e.path!==this.props.path&&this.tree.lasso.setPath(this.props.path),e.filenames!==this.props.filenames&&(this.tree.contextMenu.filenames=this.props.filenames);var t=!1;if(e.phylocanvasState!==this.props.phylocanvasState&&(this.tree.mergeState(this.props.phylocanvasState),this.tree.isUninitialised())){var n=this.props.phylocanvasState.source;this.tree.setSource(n),t=!0}this.tree.render(),t&&this.onInitialise()}},{key:"componentWillUnmount",value:function(){this.tree.lasso&&this.tree.lasso.destroy(),this.tree&&this.tree.destroy();var e=this.props.removeExportCallback;e&&(e("tree-png"),e("tree-svg"))}},{key:"onInitialise",value:function(){var e=this;this.props.onPhylocanvasInitialise&&setTimeout((function(){return e.props.onPhylocanvasInitialise(e.tree.ctx.canvas.toDataURL())}),0)}},{key:"getMainAxis",value:function(){if(this.tree){var e=au.a.types[this.tree.state.type];return e?e.mainAxis:void 0}}},{key:"resizeTree",value:function(){this.tree.resize(this.props.width,this.props.height)}},{key:"toggleStyleInternalNodes",value:function(e){this.tree.setState({styleInternalNodes:e,internalNodeStyle:{shape:e?"circle":"none"}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height,o=t.phylocanvasState,i=this.state.controlsVisible;return a.a.createElement(gn,{controlsVisible:i,onControlsVisibleChange:function(){return e.setState({controlsVisible:!i})},primaryControls:a.a.createElement("div",{className:"libmr-ControlsMenu-group"},a.a.createElement(Bu,{alignLabels:o.alignLabels,fontSize:o.fontSize,maxFontSize:this.props.maxFontSize,maxNodeSize:this.props.maxNodeSize,minFontSize:this.props.minFontSize,minNodeSize:this.props.minNodeSize,nodeSize:o.nodeSize,onAlignLabelsChange:function(t){return e.tree.setState({alignLabels:t})},onFontSizeChange:function(t){return e.tree.setState({fontSize:t})},onNodeSizeChange:function(t){return e.tree.setState({nodeSize:t})},onRenderInternalLabelsChange:function(t){return e.tree.setState({renderInternalLabels:t})},onRenderLeafBordersChange:function(t){return e.tree.setState({renderLeafBorders:t})},onRenderLeafLabelsChange:function(t){return e.tree.setState({renderLeafLabels:t})},onStyleInternalNodesChange:function(t){return e.toggleStyleInternalNodes(t)},onStyleLeafLabelsChange:function(t){return e.tree.setState({styleLeafLabels:t})},onStyleLeafNodesChange:function(t){return e.tree.setState({styleLeafNodes:t})},onStyleNodeLinesChange:function(t){return e.tree.setState({styleNodeLines:t})},renderInternalLabels:o.renderInternalLabels,renderLeafBorders:o.renderLeafBorders,renderLeafLabels:o.renderLeafLabels,styleInternalNodes:o.styleInternalNodes,styleLeafLabels:o.styleLeafLabels,styleLeafNodes:o.styleLeafNodes,styleNodeLines:o.styleNodeLines,theme:this.props.theme}),this.props.primaryControls),secondaryControls:a.a.createElement(Gu,{lasso:this.props.lasso,onLassoChange:this.props.onLassoChange,onTypeChange:function(t){return e.tree.setTreeType(t)},type:o.type}),style:nd({width:n,height:r},this.props.style),theme:this.props.theme,zoomControls:a.a.createElement(Vu,{mainAxis:this.getMainAxis(),onZoomIn:function(){return e.tree.transform(0,0,1)},onZoomOut:function(){return e.tree.transform(0,0,-1)},onHorizZoomIn:function(){return e.tree.changeBranchScale(1)},onHorizZoomOut:function(){return e.tree.changeBranchScale(-1)},onVertZoomIn:function(){return e.tree.changeStepScale(1)},onVertZoomOut:function(){return e.tree.changeStepScale(-1)},theme:this.props.theme})},a.a.createElement("div",{className:"libmr-Tree",style:{width:n,height:r}},a.a.Children.map(this.props.children,(function(e){return a.a.isValidElement(e)?a.a.cloneElement(e,{controlsVisible:i}):e})),a.a.createElement("canvas",{ref:function(t){e.canvasRef=t},width:n,height:r})))}}]),t}(a.a.Component);ad.displayName="Tree",ad.propTypes=nd({},gn.panelProps,{addExportCallback:_t.a.func,filenames:_t.a.object,height:_t.a.number.isRequired,highlightedIds:_t.a.array,lasso:_t.a.bool,newickString:_t.a.string,onAddHistoryEntry:_t.a.func,onFilterChange:_t.a.func,onLassoChange:_t.a.func,onPhylocanvasInitialise:_t.a.func,onPhylocanvasStateChange:_t.a.func,onRedrawOriginalTree:_t.a.func,path:_t.a.arrayOf(ed),phylocanvasState:_t.a.object,removeExportCallback:_t.a.func,setHighlightedIds:_t.a.func,width:_t.a.number.isRequired}),ad.defaultProps={highlightedIds:[],lasso:!1,onAddHistoryEntry:rd,onControlsVisibleChange:rd,onFilterChange:rd,onLassoChange:rd,onPhylocanvasInitialise:rd,onPhylocanvasStateChange:rd,onZoomModeChange:rd,setHighlightedIds:rd};var od=n(92),id=n(41),cd=n(330);function ld(e){return function(t,n){var r=Object(la.a)(n());return t(od.d(e,Object(cd.b)(r.uuid,e)))}}var sd={message:"Subtree currently unavailable, please try again later."};function ud(e){return function(t,n){var r=n(),a=Object(Jo.d)(r)[e];a&&"READY"===a.status&&(a.newick?t(od.f(e)):t(ld(e)).then((function(){return t(od.f(e))})).catch((function(){return t(Object(m.c)(sd))})))}}var dd=Object(s.a)((function(e){return{singleTree:Object(la.e)(e),visibleTree:Object(ya.h)(e),subtrees:Object(Jo.b)(e)}}),(function(e){return{displayTree:function(t){return e(ud(t))}}}))((function(e){var t=e.singleTree,n=e.displayTree,r=e.subtrees,o=e.visibleTree;return t===ai.a?null:a.a.createElement("header",{className:"wgsa-tree-header"},a.a.createElement(tc,{button:a.a.createElement(Ht,null,o)},!t&&a.a.createElement("button",{onClick:function(){return n(ai.a)}},"Collection"),(!t||t===ai.b)&&a.a.createElement("button",{onClick:function(){return n(ai.b)}},"Population"),a.a.createElement("hr",null),r.map((function(e){var t=B()(e,2),r=t[0],o=t[1];return a.a.createElement("button",{onClick:function(){return n(r)}},o)}))))})),md=n(120),pd=n(277);function fd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hd(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fd(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var gd=function(e){var t=e.controlsVisible,n=void 0!==t&&t,r=e.loading;return a.a.createElement(O.a,{in:!0},!n&&a.a.createElement(dd,{key:"header"}),r?a.a.createElement("div",{className:"wgsa-loading-overlay",key:"loading"},a.a.createElement(G.a,null)):null)},vd=Object(s.a)((function(e){var t=Object(Jo.e)(e);return{name:t.name,loaded:t.loaded,lasso:t.lasso,path:t.path,filenames:mi(e),highlightedIds:ui(e),loading:Object(ya.i)(e),phylocanvasState:hi(e)}}),(function(e,t){var n=t.stateKey;return{onAddHistoryEntry:function(t){return e(hd({stateKey:n},Object(md.e)(t)))},onFilterChange:function(t,r){return n!==ai.b&&e(hd({stateKey:n},Object(pd.c)(t,r,n)))},onLassoChange:function(t){return e(hd({stateKey:n},Object(pd.a)(t)))},onPhylocanvasInitialise:function(t){return e(hd({stateKey:n},Object(md.e)(t)))},onPhylocanvasStateChange:function(t){return e(hd({stateKey:n},Object(pd.b)(t)))},onRedrawOriginalTree:function(){return e(hd({stateKey:n},Object(md.d)()))},setHighlightedIds:function(t,r){return e(function(e,t,n){return function(r){e===ai.b?1===t.length&&r(ud(t[0])):r(Object(Zl.f)(t,n))}}(n,t,r))}}}))((function(e){return 0===e.width||0===e.height?null:a.a.createElement(ad,b()({},e,{addExportCallback:Yn,removeExportCallback:Zn}),a.a.createElement(gd,{loading:e.loading}))})),bd=a.a.createClass({displayName:"Progress",renderQueuePosition:function(){var e=this.props.position;return 0===e?"Awaiting progress":e?"Queue position: ".concat(e):"Awaiting position"},renderStatus:function(){var e=this.props,t=e.status,n=e.progress;return"PENDING"===t?a.a.createElement("div",{className:"wgsa-tree-progress mdl-shadow--2dp"},a.a.createElement("p",null,"Tree pending"),a.a.createElement("p",{className:"wgsa-muted wgsa-blink"},this.renderQueuePosition()),a.a.createElement(Pe,{interval:10,fn:this.props.fetchPosition})):"IN PROGRESS"===t?a.a.createElement("div",{className:"wgsa-tree-progress mdl-shadow--2dp"},a.a.createElement(ke,{radius:"40",strokeWidth:"8",percentage:n||0}),a.a.createElement("p",{className:"wgsa-blink"},"Tree in progress")):"ERROR"===t?a.a.createElement("div",{className:"wgsa-tree-progress mdl-shadow--2dp"},a.a.createElement("p",{className:"danger"},"Error building tree"),a.a.createElement("p",{className:"wgsa-blink"},"Awaiting retry")):"FAILED"===t?a.a.createElement("div",{className:"wgsa-tree-progress mdl-shadow--2dp"},a.a.createElement("p",null,"😞"),a.a.createElement("p",{className:"danger"},"Failed to build tree")):"READY"===t?a.a.createElement("div",{className:"wgsa-tree-progress mdl-shadow--2dp"},a.a.createElement("button",{className:"mdl-button mdl-button--raised mdl-button--colored",onClick:this.props.showTree},"View Tree")):null},render:function(){return a.a.createElement(O.a,{out:!0},a.a.cloneElement(this.renderStatus(),{key:this.props.status}))}});var yd=Object(s.a)((function(e){var t=Object(Jo.d)(e)[ai.a];return{status:t.status,progress:t.progress,position:t.position}}),(function(e,t){var n=t.date;return{fetchPosition:function(){return e(Object(od.e)(ai.a,n))},showTree:function(){return e(Object(od.f)(ai.a))}}}))(bd),Ed=n(392),Od=Object(Ed.a)(Ed.b);var Cd=Object(s.a)((function(e){return{genomeTotals:ut(e),currentThreshold:ba(e),marks:va(e)}}))((function(e){var t=e.marks,n=e.currentThreshold,r=e.genomeTotals,o=void 0===r?[]:r;return a.a.createElement(Kc.a,null,(function(e){var r=e.width;return a.a.createElement("div",{className:"pw-cluster-threshold-slider wgsa-pane-overlay",style:{width:r}},a.a.createElement("h3",null,"Set Threshold"),a.a.createElement(Od,{min:0,max:t.max,step:1,marks:t.items,defaultValue:n,included:!1,onAfterChange:function(e){return Object($r.f)({threshold:e})},tipFormatter:function(e){return"".concat(o[e]," genomes at threshold ").concat(e)}}))}))})),wd=n(161);function Sd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var jd=Object(xe.createSelector)(vt,Ho,Va,(function(e,t,n){var r=!0,a=!1,o=void 0;try{for(var i,c=e.nodes[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value;if(l.isHighlighted=l.genomeIds.some((function(e){return t.has(e)})),n.active){var s=l.genomeIds.some((function(e){return n.ids.has(e)}));l.isActive=s,l.label&&!s?(l.hiddenLabel=l.label,l.label=void 0):l.hiddenLabel&&s&&(l.label=l.hiddenLabel)}else l.isActive=!0,l.hiddenLabel&&(l.label=l.hiddenLabel)}}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sd(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)})),Nd=a.a.createClass({displayName:"ClusterViewNetwork",componentDidUpdate:function(e){e.threshold!==this.props.threshold&&this.props.fetch(this.props.genomeId,this.props.threshold)},render:function(){var e=this.props;return"READY"!==e.collectionStatus?null:a.a.createElement(a.a.Fragment,null,a.a.createElement(kt,null,a.a.createElement(er,{coverMessage:!1,graph:e.graph,hasLasso:!0,height:e.height,lassoActive:e.lassoActive,lassoPath:e.lassoPath,onLassoActiveChange:e.onLassoActiveChange,onLassoPathChange:function(t){return e.onLassoPathChange(t,e.hasHighlight)},onNodeSelect:function(t,n){return e.onNodeSelect(e,t,n)},width:e.width})),a.a.createElement("h2",{className:"pw-cluster-view-current-threshold wgsa-pane-overlay"},"Threshold of ",e.threshold),a.a.createElement(Cd,null))}});var Pd=Object(s.a)((function(e){var t=Object(la.a)(e);return{lassoActive:fa(e),lassoPath:pa(e),graph:jd(e),threshold:ba(e),genomeId:t.genomeId,collectionStatus:t.status,hasHighlight:Ko(e)}}),(function(e){return{fetch:function(t,n){return e(Object(wd.c)(t,n))},onLassoActiveChange:function(){return e(Object(wd.e)())},onLassoPathChange:function(t,n){e(null===t&&n?Object(Zl.d)():Object(wd.d)(t))},onNodeSelect:function(t,n,r){e(function(e,t,n){return function(r,a){if(!e.lassoActive||e.lassoPath){var o;if(t&&t.length){o=[];var i=a(),c=We(i),l=!0,s=!1,u=void 0;try{for(var d,m=t[Symbol.iterator]();!(l=(d=m.next()).done);l=!0){var p,h=d.value;(p=o).push.apply(p,f()(c[h].ids))}}catch(e){s=!0,u=e}finally{try{l||null==m.return||m.return()}finally{if(s)throw u}}}o?r(Object(Zl.f)(o,n)):e.lassoPath||r(Object(Zl.d)())}}}(t,n,r))}}}))(Nd);function kd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var xd=Object(s.a)((function(e,t){var n=t.stateKey;return Object(la.d)(e)[n]||{entries:[]}}),(function(e,t){var n=t.stateKey;return{onTravel:function(t){return e(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kd(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(md.f)(t),{stateKey:n}))}}}))(Zc),_d=Object(s.a)((function(e){return{stateKey:Object(ya.e)(e)}}))(vd),Id=Object(s.a)((function(e){return{visible:ws(e)}}))((function(e){var t=e.visible,n=E()(e,["visible"]);return a.a.createElement("div",{style:{position:"relative"}},a.a.createElement(Ts,null),"timeline"===t?a.a.createElement(nu,n):a.a.createElement(Cs,n))})),Td=function(e){var t=e.isClusterView,n=e.treeStateKey,r=e.horizontalSize,o=e.createdAt,i=a.a.useState(null),c=B()(i,2),l=c[0],s=c[1];return t?a.a.createElement(Bc.a,{split:"vertical",defaultSize:"50%",className:"wgsa-no-overflow-pane",resizerClassName:"wgsa-resizer",onChange:s},a.a.createElement(Pd,{width:l,height:r}),a.a.createElement(Ql,null,a.a.createElement(cs,null))):n?a.a.createElement(Bc.a,{split:"vertical",defaultSize:"50%",className:"wgsa-no-overflow-pane",resizerClassName:"wgsa-resizer",onChange:s},a.a.createElement(Wc,{component:_d}),a.a.createElement(Ql,null,a.a.createElement(cs,null))):a.a.createElement(Ql,null,a.a.createElement(cs,null),a.a.createElement(yd,{date:o}))};var Ld=Object(s.a)((function(e){var t=Object(la.a)(e);return{createdAt:t.createdAt,isClusterView:t.isClusterView,treeStateKey:Object(ya.e)(e)}}))((function(e){var t=e.isClusterView,n=e.treeStateKey,r=e.createdAt,o=a.a.useState(null),i=B()(o,2),c=i[0],l=i[1],s=a.a.useMemo((function(){return{height:c||"62.5%"}}),[c]),u=a.a.useMemo((function(){return t?[]:[{title:"History",icon:a.a.createElement("i",{className:"material-icons"},"history"),component:function(){return a.a.createElement(xd,{stateKey:n})}}]}),[t,n]);return a.a.createElement(ts,{panes:u,navStyle:s},a.a.createElement(Bc.a,{split:"horizontal",defaultSize:"62.5%",resizerClassName:"wgsa-resizer",onChange:l},a.a.createElement(Td,{createdAt:r,isClusterView:t,treeStateKey:n,horizontalSize:c}),a.a.createElement(Wc,{component:Id})))})),Ad=a.a.createClass({displayName:"StatusSwitcher",componentDidMount:function(){var e=this.props,t=e.uuid;e.treesComplete||!t||this.notificationChannel||(this.notificationChannel=Se(t,"progress",this.props.updateProgress))},componentDidUpdate:function(e){var t=this.props.treesComplete;!e.treesComplete&&t&&this.notificationChannel&&je(this.props.uuid)},componentWillUnmount:function(){this.notificationChannel&&je(this.props.uuid)},render:function(){return null}});var Dd=Object(s.a)((function(e){var t=Object(la.a)(e);return{treesComplete:Object(Jo.a)(e),uuid:t.uuid}}),(function(e){return{updateProgress:function(t){return e(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return"tree"===e.task&&"READY"===e.status?t(ld(e.name)):t(Object(id.f)(e))}}(t))}}}))(Ad);var Md=Object(s.a)((function(e){return{title:Object(la.c)(e)||"Explore Collection"}}))((function(e){var t=e.title;return a.a.createElement(a.a.Fragment,null,a.a.createElement(ee.a,null,t),a.a.createElement(Ld,null),a.a.createElement(Dd,null))})),Rd=(n(1087),{background:M.b.COLOURS.GREY_LIGHT}),Fd=Object(s.a)()(a.a.createClass({displayName:"Background",componentDidMount:function(){componentHandler.upgradeDom()},render:function(){var e=this.props.logo,t=void 0===e||e;return a.a.createElement("div",{style:Rd,className:"wgsa-loading-container"},a.a.createElement("div",{className:"wgsa-loading-content"},t&&a.a.createElement(Q,{className:"wgsa-loading-logo"}),this.props.children))}})),zd=a.a.createClass({displayName:"LoadSpinner",render:function(){return a.a.createElement(Fd,{logo:!1},a.a.createElement(ee.a,null,"Loading..."),a.a.createElement(G.a,null),a.a.createElement("h1",null,"Loading collection..."))}});var Gd=a.a.createClass({displayName:"LoadError",render:function(){return a.a.createElement(Fd,null,a.a.createElement(ee.a,null,"Error"),function(e){var t=e.collection,n=e.location,r=t.status;if(r===Wa.a.NOT_FOUND){var o=(n.state||{}).organism;return o?[a.a.createElement("h1",null,"Looking for an old collection?"),a.a.createElement("p",{className:"mdl-typography--title"},"It will be available at ",a.a.createElement("a",{href:"https://archive.wgsa.net/".concat(o).concat(n.pathname)},"archive.wgsa.net")," for a short time.",a.a.createElement("br",null),"Please ",a.a.createElement("a",{href:"mailto:cgps@sanger.ac.uk"},"contact us")," if you would like your data migrated to the new site.")]:[a.a.createElement("h1",null,"We're sorry, this collection cannot be found."),a.a.createElement("p",{className:"mdl-typography--title"},"Please ensure that the address is correct, and if so, please try again later.")]}return r===Wa.a.ABORTED?[a.a.createElement("h1",null,"We're sorry, your upload was interrupted"),a.a.createElement("p",{className:"mdl-typography--title"},"Please upload your files again."),a.a.createElement(le.a,{to:"/".concat(hr.b.nickname,"/upload"),className:"mdl-button mdl-button--raised"},"Go Back")]:[a.a.createElement("h1",null,"We're sorry, something went wrong."),a.a.createElement("button",{onClick:function(){return history.go(-1)},className:"mdl-button mdl-button--raised"},"Go Back")]}(this.props),a.a.createElement("p",null,"Please contact ",a.a.createElement("a",{href:"mailto:cgps@sanger.ac.uk"},"cgps@sanger.ac.uk")," if problems persist."))}}),Ud=a.a.createClass({displayName:"Explorer",propTypes:{fetch:a.a.PropTypes.func,reset:a.a.PropTypes.func,status:a.a.PropTypes.string,progress:a.a.PropTypes.object},componentDidMount:function(){this.props.fetch()},componentWillUnmount:function(){this.props.reset()},render:function(){var e=this.props.collection;return e.status===Wa.a.READY?a.a.createElement(Md,null):e.status&&e.status!==Wa.a.READY?a.a.createElement(Gd,{collection:e,location:this.props.location}):a.a.createElement(zd,null)}});var Bd=Object(s.a)((function(e){return{collection:Object(la.a)(e)}}),(function(e,t){var n=t.match;return{fetch:function(){return e(id.d(n.params.token))},reset:function(){return e(id.e())}}}))(Ud),Hd=a.a.createElement(i.a,{path:"/collection/:token",component:Uc}),Vd=a.a.createElement(i.a,{path:"/collection/:token",component:Bd}),Kd=(n(1089),n(1091),function(e){var t=e.style,n=e.children;return a.a.createElement("div",{style:t,className:"wgsa-grid-item"},n)}),qd=a.a.createClass({displayName:"Grid.react",propTypes:{className:a.a.PropTypes.string,columnWidth:a.a.PropTypes.number,columnCount:a.a.PropTypes.oneOfType([a.a.PropTypes.number,a.a.PropTypes.array]),items:a.a.PropTypes.array,rowHeight:a.a.PropTypes.number,template:a.a.PropTypes.func},getColumnCount:function(e){return this.props.columnCount?this.parseColumnCount(e):Math.max(1,Math.floor(e/this.props.columnWidth))},getColumnWidth:function(e,t){var n=this.props,r=n.columnWidth,a=n.rightMargin;return(r||Math.floor(e/t))-(a?a/t:0)},getRowHeight:function(e){var t=this.props,n=t.rowHeight,r=t.rowMinHeight,a=void 0===r?0:r,o=t.rowMaxHeight,i=void 0===o?Number.MAX_VALUE:o,c=t.cellArea,l=t.rowFooterHeight,s=void 0===l?0:l;return Math.min(Math.max(a,(n||c/e)+s),i)},parseColumnCount:function(e){var t=this.props.columnCount;if(Array.isArray(t)){var n=1,r=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value,s=l.minWidth,u=void 0===s?0:s,d=l.count;if(u>e)return n;n=d}}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}return t},render:function(){var e=this,t=this.props,n=t.template,r=t.items,o=t.headerHeight,i=void 0===o?0:o;return a.a.createElement("div",{className:this.props.className},this.props.header,a.a.createElement(Kc.a,null,(function(t){var o=t.height,c=t.width,l=e.getColumnCount(c),s=e.getColumnWidth(c,l);return a.a.createElement(Kc.b,{cellRenderer:function(e){var t=e.key,o=e.columnIndex,i=e.rowIndex,c=e.style,s=r[o+i*l];return s?a.a.createElement(Kd,{key:t,style:c},a.a.createElement(n,{item:s})):null},className:"wgsa-virtualised-grid",columnCount:l,columnWidth:s,rowCount:Math.ceil(r.length/l),rowHeight:e.getRowHeight(s),width:c,height:o-i})})))}}),Wd=n(162),Yd=(n(1093),a.a.memo((function(e){var t=e.visible,n=e.total,r=e.itemType;return a.a.createElement("p",{className:"wgsa-filter-summary__count"},"Viewing ",a.a.createElement("span",null,t.toLocaleString())," of ",n.toLocaleString()," ",r,1!==n?"s":"")}))),Zd=function(e){var t=e.className,n=e.children;return a.a.createElement("div",{className:d()("wgsa-filter-summary wgsa-content-margin",t)},n)},Xd=n(109),Qd=n(84);var Jd=Object(s.a)((function(e){return{isOpen:Object(Qd.g)(e)}}),(function(e){return{onClick:function(){return e(Object(Xd.d)())}}}))((function(e){e.isOpen;var t=e.onClick;return a.a.createElement("div",{className:"wgsa-filter-header"},a.a.createElement("button",{className:"mdl-button mdl-button--icon",onClick:t},a.a.createElement("i",{className:"material-icons"},"tune")))})),$d=function(e){return e.collections.entities},em=Object(xe.createSelector)($d,(function(e){return Object.keys(e).map((function(t){return e[t]}))})),tm=function(e){return(t=e,t.collections.summary).total;var t};var nm=Object(s.a)((function(e){return{visibleCollections:em(e).length,totalCollections:tm(e),activeSort:Object(Qd.a)(e)}}),(function(e){return{onSortChange:function(t){return e(Object(Xd.e)({sort:t.target.value}))}}}))((function(e){var t=e.visibleCollections,n=e.totalCollections,r=e.activeSort,o=void 0===r?"createdAt-":r,i=e.onSortChange;return 0===n?a.a.createElement("header",null):a.a.createElement("header",null,a.a.createElement(Jd,null),a.a.createElement(Yd,{visible:t,total:n,itemType:"collection"}),a.a.createElement("label",{className:"wgsa-select-box"},"Sort by",a.a.createElement("select",{value:o,onChange:i},a.a.createElement("option",{value:"createdAt-"},"Created: Most Recent"),a.a.createElement("option",{value:"createdAt"},"Created: Least Recent"),a.a.createElement("option",{value:"size"},"Size: Low to High"),a.a.createElement("option",{value:"size-"},"Size: High to Low"),a.a.createElement("option",{value:"title"},"Title: Ascending"),a.a.createElement("option",{value:"title-"},"Title: Descending"),a.a.createElement("option",{value:"publicationYear"},"Published: Ascending"),a.a.createElement("option",{value:"publicationYear-"},"Published: Descending"))))})),rm=n(339),am=(n(1095),n(122)),om=n.n(am),im=function(e){var t=e.children,n=e.visible;return a.a.createElement(om.a,{transitionName:"wgsa-overlay",transitionEnterTimeout:280,transitionLeaveTimeout:280},n&&a.a.createElement("div",{className:"wgsa-content-overlay"},t))},cm=n(164);function lm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var sm=a.a.createClass({displayName:"Collections",componentWillMount:function(){this.props.filter()},componentDidUpdate:function(e){e.prefilter!==this.props.prefilter&&this.props.filter()},getEmptyMessage:function(){var e=this.props,t=e.total,n=e.match,r=e.filterActive,o=n.params.prefilter;if(r)return a.a.createElement("div",{className:"pw-filter-view-message"},a.a.createElement("p",null,"No matches, please refine your search."),a.a.createElement("button",{className:"mdl-button mdl-button--raised mdl-button--colored",onClick:this.props.clear},"Clear Filters"));if(0===t)switch(o){case"bin":return a.a.createElement("p",{className:"pw-filter-view-message"},"Nothing in the bin 👍");case"user":return a.a.createElement("div",{className:"pw-filter-view-message"},a.a.createElement("p",null,"You haven't created any collections."),a.a.createElement("p",null,a.a.createElement(le.a,{to:"/genomes",className:"mdl-button mdl-button--raised mdl-button--colored"},"Browse Genomes")));default:return a.a.createElement("p",{className:"pw-filter-view-message"},"Nothing to see here.")}return null},getContent:function(){var e=this.props,t=e.status,n=e.collections;return t===cm.a.ERROR?a.a.createElement("p",{className:"pw-filter-view-message"},"Something went wrong. 😞"):0===this.props.total&&t===cm.a.LOADING?null:0===n.length?this.getEmptyMessage():a.a.createElement(qd,{className:"wgsa-filter-view",template:rm.a,items:n,columnCount:[{minWidth:560,count:2},{minWidth:1020,count:3},{minWidth:1580,count:4}],rightMargin:16,cellArea:64e3,rowMinHeight:160,rowMaxHeight:232,rowFooterHeight:36})},render:function(){var e=this.props.status;return a.a.createElement("div",{className:d()("wgsa-collections wgsa-filter-container",{"has-filter":this.props.isFilterOpen})},a.a.createElement(ee.a,null,"Collections"),a.a.createElement(Wd.a,null),a.a.createElement("div",{className:"wgsa-filter-content"},a.a.createElement(nm,null),this.getContent()),a.a.createElement(im,{visible:e===cm.a.LOADING},a.a.createElement("p",{className:"pw-filter-view-loading"},"Loading... ⏳")))}});var um=Object(s.a)((function(e,t){var n;return{prefilter:t.match.params.prefilter,collections:em(e),total:tm(e),status:(n=e,n.collections.status),isFilterOpen:Object(Qd.g)(e),filterActive:Object(Qd.f)(e)}}),(function(e,t){var n=t.match,r=t.location,a=n.params.prefilter,o=Object(ua.parse)(r.search);return{filter:function(){return e(Object(Xd.e)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lm(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({prefilter:a},o),!1))},clear:function(){return e(Object(Xd.c)())}}}))(sm),dm=a.a.createElement(i.a,{path:"/collections"},a.a.createElement(ia,{asideEnabled:!0})),mm=a.a.createElement(i.a,{path:"".concat("/collections","/:prefilter(all|user|bin)"),component:um}),pm=(n(1097),n(38)),fm=Object(s.a)((function(e,t){var n=t.view,r="/genomes/".concat(Object(pm.d)(e)),a=n?"".concat(r,"/").concat(n):r,o=e.location;return{link:"".concat(a).concat(o.search),active:o.pathname===a}}))((function(e){var t=e.active,n=e.link,r=e.title;return a.a.createElement(le.a,{to:n,className:d()("wgsa-button-group__item",{active:t})},r)})),hm=n(78);var gm=Object(s.a)((function(e){return{isOpen:Object(pm.g)(e)}}),(function(e){return{onClick:function(){return e(Object(hm.f)())}}}))((function(e){var t=e.isOpen,n=e.onClick;return a.a.createElement("div",{className:"wgsa-filter-header"},a.a.createElement("button",{className:"mdl-button mdl-button--icon",onClick:n,title:t?"Hide filter":"Show filter"},a.a.createElement("i",{className:"material-icons"},"tune")))})),vm=(n(1099),n(1101),n(1103),function(e){var t=e.children,n=e.className,r=e.redirect,o=void 0===r?"".concat(window.location.pathname).concat(window.location.search):r;return a.a.createElement(le.a,{className:n,to:"/sign-in?redirect=".concat(o)},t)}),bm=n(31),ym=n(133);function Em(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Om(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Em(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Em(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cm=ye.a.user;var wm=Object(s.a)((function(e){return{selectedGenomes:Object(bm.d)(e),selectedGenomeIds:Object(bm.c)(e),canCreateCollection:Object(ym.a)(e)}}),(function(e){return{clearAll:function(){return e(Object(x.g)())},removeGenome:function(t){return e(Object(x.i)([t]))},showGenome:function(t){return e(Object(Vr.d)(t.id,t.name))},sendToBin:function(t){return e(T(t,!0))},toggle:function(t){return e(Object(x.m)(t))}}}))((function(e){var t=e.clearAll,n=e.removeGenome,r=e.selectedGenomes,o=e.sendToBin,i=e.showGenome,c=e.toggle,l=e.canCreateCollection;return a.a.createElement("div",{className:"wgsa-genome-selection"},a.a.createElement("header",{className:"wgsa-dropdown-header"},"Selection",a.a.createElement("button",{className:"wgsa-button--text wgsa-clear-selection",onClick:t},"Clear All")),a.a.createElement(Kc.d,{height:278,width:438,style:{overflowX:"hidden"},className:"wgsa-genome-selection-list",rowCount:r.length,rowHeight:32,rowRenderer:function(e){var t=e.key,o=e.index,c=e.style,l=r[o];return a.a.createElement("li",{key:t,className:"wgsa-list-item",style:Om({},c,{width:440,top:c.top+8})},a.a.createElement("button",{className:"wgsa-link-button",title:"View report",onClick:function(){return i(l)}},l.name),a.a.createElement("button",{title:"Remove from selection",onClick:function(e){e.stopPropagation(),n(l)},className:"mdl-button mdl-button--icon"},a.a.createElement("i",{className:"material-icons"},"clear")))}}),a.a.createElement("footer",{className:"wgsa-dropdown-footer"},!!Cm&&a.a.createElement("div",null,a.a.createElement("button",{className:"mdl-button mdl-button--icon",onClick:function(){return o(r)},title:"Send to bin"},a.a.createElement("i",{className:"material-icons"},"delete_sweep")),a.a.createElement("button",{title:"Edit metadata",className:"mdl-button",onClick:function(){return c("edit")}},"Edit")),l?a.a.createElement("span",{key:"can-create-collection"},a.a.createElement("button",{className:"mdl-button",onClick:function(){return c("download")}},"Download Data"),Cm?a.a.createElement("button",{key:"create-collection",className:"mdl-button mdl-button--raised mdl-button--colored",onClick:function(){return c("collection")}},"Create Collection"):a.a.createElement(vm,{key:"create-collection",className:"mdl-button mdl-button--raised mdl-button--colored"},"Sign in to Create Collection")):a.a.createElement("button",{key:"download-only",className:"mdl-button mdl-button--raised mdl-button--colored",onClick:function(){return c("download")}},"Download Data")))})),Sm=(n(1105),n(182)),jm=function(e){var t=e.amount,n=e.limit;return a.a.createElement("div",{className:"wgsa-selection-message"},a.a.createElement("h3",null,"We're Sorry!"),a.a.createElement("p",null,"You have selected ",a.a.createElement("strong",null,t," genomes"),", but the current limit for this feature is ",a.a.createElement("strong",null,n),". 😞"),a.a.createElement("p",null,"Please refine your selection to continue."))};var Nm=Object(s.a)((function(e){return{amount:Object(bm.i)(e)}}))((function(e){var t=e.type,n=e.amount,r=e.children,o=ye.a[t]||1e3;return n>o?a.a.createElement(jm,{type:t,amount:n,limit:o}):r}));var Pm=Object(s.a)(null,(function(e){return{goBack:function(){return e(Object(x.m)("selection"))}}}))((function(e){var t=e.goBack;return a.a.createElement("div",{className:"wgsa-genome-collection"},a.a.createElement("header",{className:"wgsa-dropdown-header"},"Create Collection"),a.a.createElement(Nm,{type:"maxCollectionSize"},a.a.createElement(Sm.b,null)),a.a.createElement("footer",{className:"wgsa-dropdown-footer"},a.a.createElement("button",{className:"mdl-button",onClick:t},"Go back")))})),km=(n(1109),function(e){var t=e.link,n=e.ids,r=e.children,o=e.className;return a.a.createElement("form",{action:t,method:"POST",target:"_blank"},a.a.createElement("button",{className:o},r),a.a.createElement("input",{type:"hidden",name:"ids",value:n}))}),xm=function(e){var t=e.speciesId,n=e.speciesName,r=e.total,o=e.tasks,i=e.ids;return t?a.a.createElement("li",null,a.a.createElement(V.a,{speciesName:n}),a.a.createElement("ul",{className:"wgsa-genome-download-list"},a.a.createElement("li",null,a.a.createElement(km,{link:Object(R.c)("/download/genome/fasta"),ids:i},"FASTA files")),a.a.createElement("li",null,a.a.createElement(km,{link:Object(R.c)("/download/genome/metadata"),ids:i},"Metadata")),o.map((function(e){return a.a.createElement("li",{key:e.name},a.a.createElement(km,{link:e.link,ids:e.ids},e.label,e.sources.length>0&&a.a.createElement("small",null," (",e.sources.join(", "),")")),a.a.createElement("span",null,e.ids.length,"/",r))})))):null},_m=a.a.createClass({displayName:"Content",componentDidMount:function(){this.props.fetch()},componentDidUpdate:function(e){var t=this.props,n=t.selection,r=t.fetch;e.selection!==n&&r()},showAllOrganisms:function(e,t){return 0===e.length||1===e.length&&e[0].ids.length!==t.length||e.length>1},render:function(){var e=this.props,t=e.status,n=e.summary,r=e.selection;if(t===M.e.LOADING)return a.a.createElement(G.a,null);if(t===M.e.ERROR)return a.a.createElement("p",null,"Something went wrong. 😞");if(t===M.e.SUCCESS){var o=r.map((function(e){return e.id}));return a.a.createElement("ul",null,this.showAllOrganisms(n,o)&&a.a.createElement("li",null,"All Organisms",a.a.createElement("ul",{className:"wgsa-genome-download-list"},a.a.createElement("li",null,a.a.createElement(km,{link:Object(R.c)("/download/genome/fasta"),ids:o},"FASTA files")),a.a.createElement("li",null,a.a.createElement(km,{link:Object(R.c)("/download/genome/metadata"),ids:o},"Metadata")),a.a.createElement("li",null,a.a.createElement(km,{link:Object(R.c)("/download/analysis/speciator"),ids:o},a.a.createElement("strong",null,"Species Prediction"))))),n.map((function(e){return a.a.createElement(xm,b()({key:e.speciesId},e))})))}return null}});var Im=Object(s.a)((function(e){return{status:Object(bm.g)(e).status,summary:Object(bm.a)(e),selection:Object(bm.d)(e)}}),(function(e){return{fetch:function(){return e(Object(x.h)())},goBack:function(){return e(Object(x.m)("selection"))}}}))((function(e){var t=e.goBack,n=E()(e,["goBack"]);return a.a.createElement("div",{className:"wgsa-genome-downloads"},a.a.createElement("header",{className:"wgsa-dropdown-header"},"Download"),a.a.createElement("div",{className:"wgsa-genome-downloads__content"},a.a.createElement(Nm,{type:"maxDownloadSize"},a.a.createElement(_m,n))),a.a.createElement("footer",{className:"wgsa-dropdown-footer"},a.a.createElement("button",{className:"mdl-button",onClick:t},"Go back")))})),Tm=(n(1111),n(155)),Lm=n.n(Tm),Am=a.a.createClass({displayName:"Progress",propTypes:{error:_t.a.shape({row:_t.a.number,message:_t.a.string}),progress:_t.a.number,rows:_t.a.number},render:function(){if(this.props.error){var e=this.props.error,t=e.row,n=void 0===t?null:t,r=e.message;return a.a.createElement("div",{className:"pw-edit-metadata-progress error"},a.a.createElement("p",null,"Sorry! There was a problem",null!==n?" with row ".concat(n):"",":"),a.a.createElement("p",null,r))}var o=this.props.result;return a.a.createElement("div",{className:"pw-edit-metadata-progress success"},a.a.createElement(O.a,null,o?a.a.createElement("p",{key:"complete"},a.a.createElement("i",{className:"material-icons"},"check_circle"),o.matched," genome",1===o.matched?" ":"s ","updated successfully"):a.a.createElement("p",{className:"wgsa-blink"},"Uploading...")))}}),Dm=n(17);function Mm(e){return Object(R.a)("POST","/api/genome",e)}var Rm=Object(Dm.b)("SEND_METADATA_UPDATE");function Fm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var zm=function(e){function t(){var e;return ue()(this,t),(e=fe()(this,ge()(t).call(this))).state={uploading:!1,rows:0,completed:0,error:null},e.handleFiles=e.handleFiles.bind(Lm()(e)),e}return be()(t,e),me()(t,[{key:"componentDidUpdate",value:function(e,t){!t.result&&this.state.result&&setTimeout(this.props.goBack,1e3)}},{key:"handleFiles",value:function(e){var t=this,n=Array.from(e)[0];Do.test(n.name)&&this.setState({uploading:!0},(function(){return Object(Po.readAsText)(n).then((function(e){return zo.parseCsvToJson(e)})).then((function(e){var n=e.data,r=e.errors;if(r.length>0){var o=B()(r,1)[0],i=o.row,c=o.message;t.setState({error:{row:i+1,message:c}})}else t.props.update(n.map((function(e,t){if(!e.id)throw new Error("Every row must contain an ID, please download existing metadata before attempting to upload.");try{return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fm(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.id},Fo(e))}catch(e){throw e.message="".concat(e.message," (row ").concat(t+1,")"),e}}))).then((function(e){return t.setState({result:e})})).catch((function(){return t.setState({error:{message:a.a.createElement(a.a.Fragment,null,"Failed to update, please make sure you are the owner of the genomes in the file.",a.a.createElement("br",null),"/genomes/user"!==window.location.pathname&&a.a.createElement(le.a,{to:"/genomes/user"},"View genomes owned by you"))}})}))})).catch((function(e){return t.setState({error:{message:e.message}})}))}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.ids,r=t.goBack,o=this.state.completed/this.state.rows*100;return a.a.createElement("div",{className:"wgsa-dropdown"},a.a.createElement("header",{className:"wgsa-dropdown-header"},"Edit Metadata"),a.a.createElement(Nm,{type:"maxDownloadSize"},a.a.createElement(O.a,{className:"wgsa-dropdown-content pw-edit-metadata-section",out:!1},this.state.uploading?a.a.createElement(Am,{key:"progress",result:this.state.result,error:this.state.error}):a.a.createElement("div",{className:"pw-edit-metadata-instructions pw-edit-metadata-section"},a.a.createElement("p",{className:"pw-edit-metadata-warning"},a.a.createElement("i",{className:"material-icons danger"},"warning"),"This will overwrite existing data"),a.a.createElement(km,{className:"pw-edit-metadata-link",link:Object(R.c)("/download/genome/metadata"),ids:n},"1. Download existing metadata for selected genomes"),a.a.createElement("p",null,"2. Make changes to the spreadsheet (e.g. in Excel)"),a.a.createElement(ko,{className:"pw-edit-metadata-section",onFiles:this.handleFiles},a.a.createElement("p",null,"3. Drag file here to upload ",a.a.createElement("br",null),"or click to select file"))))),a.a.createElement("footer",{className:"wgsa-dropdown-footer wgsa-dropdown-footer--right"},!this.state.uploading&&a.a.createElement("button",{className:d()("mdl-button",{"mdl-button--raised mdl-button--colored":100===o}),onClick:r},"Go back"),a.a.createElement(O.a,null,this.state.error&&a.a.createElement("button",{className:"mdl-button mdl-button--raised mdl-button--colored",onClick:function(){return e.setState({uploading:!1,rows:0,completed:0,error:null})}},"Try Again"))))}}]),t}(a.a.Component);var Gm=Object(s.a)((function(e){return{ids:Object(bm.c)(e)}}),(function(e){return{goBack:function(){return e(Object(x.m)("selection"))},update:function(t){return e(function(e){return{type:Rm,payload:{data:e,promise:Mm(e)}}}(t))}}}))(zm),Um=a.a.createElement("div",{className:"wgsa-selection-message"},a.a.createElement("h3",null,"No genomes selected"),a.a.createElement("p",null,"In the ",a.a.createElement("strong",null,"List")," view, select genomes by clicking a row. Try selecting one genome and holding ",a.a.createElement("strong",null,"shift")," to select more."),a.a.createElement("p",null,"In the ",a.a.createElement("strong",null,"Map")," view, select genomes by using the lasso tool.")),Bm=a.a.createClass({displayName:"Dropdown",getInitialState:function(){return{slideDirection:null}},componentWillReceiveProps:function(e){return"selection"===this.props.view&&"edit"===e.view?this.setState({slideDirection:"right"}):"edit"===this.props.view&&"selection"===e.view?this.setState({slideDirection:"left"}):"selection"===e.view?this.setState({slideDirection:"right"}):this.setState({slideDirection:"left"})},render:function(){var e=this.props,t=e.view,n=e.hasSelection;return a.a.createElement(O.a,{out:!0},t?a.a.createElement("div",{className:"wgsa-genome-selection-dropdown mdl-shadow--2dp"},n?a.a.createElement(om.a,{transitionName:"slide-".concat(this.state.slideDirection),transitionEnterTimeout:280,transitionLeaveTimeout:280},"selection"===t&&a.a.createElement(wm,null),"collection"===t&&a.a.createElement(Pm,null),"download"===t&&a.a.createElement(Im,null),"edit"===t&&a.a.createElement(Gm,null)):Um):null)}});var Hm=Object(s.a)((function(e){return{hasSelection:Object(bm.i)(e)>0,view:Object(bm.h)(e)}}))(Bm);var Vm=a.a.createClass({displayName:"Summary",componentDidUpdate:function(e){var t=this;this.animating||this.props.size!==e.size&&(this.sonarEl.classList.remove("wgsa-sonar-effect"),this.sonarEl.offsetWidth,this.sonarEl.classList.add("wgsa-sonar-effect"),this.animating=!0,setTimeout((function(){t.animating=!1}),1400))},onKeyUp:function(e){"Escape"===e.key&&this.props.toggle()},animating:!1,render:function(){var e,t=this,n=this.props,r=n.size,o=n.toggle,i=n.view;return a.a.createElement("div",{className:"wgsa-selection-summary",onKeyUp:this.onKeyUp},a.a.createElement("button",{className:"mdl-chip mdl-chip--contact mdl-chip--active wgsa-selection",onClick:function(){return o(i||"selection")},title:0===r?"No genomes selected":void 0},a.a.createElement("span",{ref:function(e){t.sonarEl=e},className:"mdl-chip__contact",title:r>0?"View selection":void 0},(e=r)>9999?"".concat(Math.round(e/1e3),"K"):e),a.a.createElement("span",{className:"mdl-chip__text"},"Selected Genomes")),a.a.createElement(Hm,null))}});var Km=Object(s.a)((function(e){return{size:Object(bm.i)(e),view:Object(bm.h)(e)}}),(function(e){return{toggle:function(t){return e(Object(x.m)(t))}}}))(Vm);var qm=Object(s.a)((function(e){var t=Object(bm.d)(e);return{selectedGenomes:t,disabled:0===t.length}}),(function(e){return{restore:function(t){return e(T(t,!1))}}}))((function(e){var t=e.selectedGenomes,n=e.disabled,r=e.restore;return a.a.createElement("button",{disabled:n,className:"mdl-button mdl-button--primary",onClick:function(){return r(t)},title:n?"Select genomes to restore":"Restore selected genomes"},"Restore From Bin")})),Wm=function(e){return e.genomes.summary},Ym=function(e){return Wm(e).visible},Zm=function(e){return Wm(e).total};var Xm=Object(s.a)((function(e){return{visibleGenomes:Ym(e),totalGenomes:Zm(e)}}))((function(e){var t=e.visibleGenomes,n=e.totalGenomes,r=e.prefilter;return 0===n?a.a.createElement("header",null):a.a.createElement("header",null,a.a.createElement(gm,null),a.a.createElement("div",{className:"wgsa-button-group"},a.a.createElement("i",{className:"material-icons",title:"View"},"visibility"),a.a.createElement(fm,{title:"List"}),a.a.createElement(fm,{view:"map",title:"Map"}),a.a.createElement(fm,{view:"stats",title:"Stats"})),a.a.createElement(Yd,{visible:t,total:n,itemType:"genome"}),"bin"===r?a.a.createElement(qm,null):a.a.createElement(Km,null))})),Qm=n(183),Jm=a.a.createClass({displayName:"Genomes.react",propTypes:{hasGenomes:a.a.PropTypes.bool,uploads:a.a.PropTypes.object,isUploading:a.a.PropTypes.bool,prefilter:a.a.PropTypes.string,fetch:a.a.PropTypes.func},contextTypes:{router:a.a.PropTypes.object},componentWillMount:function(){this.props.fetch()},componentDidUpdate:function(e){var t=this.props,n=t.prefilter,r=t.fetch;e.prefilter===n||r()},renderEmptyMessage:function(){var e=this.props,t=e.total,n=e.prefilter;if(e.filterActive)return a.a.createElement("div",{className:"pw-filter-view-message"},a.a.createElement("p",null,"No matches, please refine your search."),a.a.createElement("button",{className:"mdl-button mdl-button--raised mdl-button--colored",onClick:this.props.clearFilter},"Clear Filters"));if(0===t)switch(n){case"bin":return a.a.createElement("p",{className:"pw-filter-view-message"},"Nothing in the bin 👍");case"user":return a.a.createElement("div",{className:"pw-filter-view-message"},a.a.createElement("p",null,"You haven't uploaded any genomes."),a.a.createElement("p",null,a.a.createElement(le.a,{to:"/upload",className:"mdl-button mdl-button--raised mdl-button--colored"},"Upload now")));default:return a.a.createElement("p",{className:"pw-filter-view-message"},"Nothing to see here.")}return null},renderContent:function(){var e=this.props,t=e.items,n=e.total,r=e.status;return r===Qm.a.ERROR?a.a.createElement("p",{className:"pw-filter-view-message"},"Something went wrong. 😞"):0===n&&r===Qm.a.LOADING?null:0===t.length?this.renderEmptyMessage():this.props.children},render:function(){return a.a.createElement("div",{className:d()("wgsa-genomes wgsa-filter-container",{"has-filter":this.props.isFilterOpen})},a.a.createElement(ee.a,{title:"Genomes"}),a.a.createElement(j.a,null),a.a.createElement("div",{className:"wgsa-filter-content"},a.a.createElement(Xm,{prefilter:this.props.prefilter}),this.renderContent()),a.a.createElement(im,{visible:this.props.status===Qm.a.LOADING},a.a.createElement("p",{className:"pw-filter-view-loading"},"Loading... ⏳")))}}),$m=n(61),ep=n(153);function tp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var np=Object(s.a)((function(e,t){return{prefilter:t.match.params.prefilter,hasGenomes:Object($m.g)(e)>0,items:Object($m.d)(e),total:Object(ep.b)(e),status:Object($m.f)(e),isFilterOpen:Object(pm.g)(e),filterActive:Object(pm.f)(e)}}),(function(e,t){var n=t.match,r=t.location,a=Object(ua.parse)(r.search),o=n.params.prefilter;return{fetch:function(){return e(Object(hm.g)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tp(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({prefilter:o},a),!1))},clearFilter:function(){return e(Object(hm.d)())}}}))(Jm);n(1113);var rp=Object(s.a)((function(e,t){var n=t.genomes,r=Object(bm.e)(e);return{isSelected:n.every((function(e){return e.id in r}))}}),(function(e,t){var n=t.genomes,r=t.index;return{onClick:t.onClick||function(t){return t.stopPropagation()||e(Object(x.n)(n,r))}}}))((function(e){var t=e.isSelected,n=e.onClick,r=e.className;return a.a.createElement("button",{className:d()("wgsa-genome-checkbox",r),onClick:n,title:t?"Remove from selection":"Add to selection"},a.a.createElement("i",{className:"material-icons"},t?"check_box":"check_box_outline_blank"))})),ap=function(e){var t=e.genome,n=t.speciesName,r=t.subspecies,o=t.serotype;return n?a.a.createElement(V.a,{abbreviated:!0,speciesName:n,subspecies:r,serotype:o}):a.a.createElement("span",null," ")};function op(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ip=function(e){var t=e.title,n=e.icon,r=e.children,o=e.onClick;return a.a.createElement("span",{className:"wgsa-genome-list-cell wgsa-overflow-fade",title:t,onClick:o},n&&a.a.createElement("i",{title:t,className:"material-icons"},n),r)},cp=a.a.createElement("span",{className:"wgsa-genome-list-cell wgsa-overflow-fade"});var lp=Object(s.a)((function(e){return{lastSelectedIndex:Object(bm.b)(e)}}),null,(function(e,t,n){var r=t.dispatch,a=e.lastSelectedIndex,o=n.genome,i=n.index;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?op(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):op(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n,{onViewGenome:function(e){return e.stopPropagation()||r(Object(Vr.d)(o.id,o.name))},onClick:function(e){e.stopPropagation(),e.shiftKey&&null!==a?r(Object(x.k)(a,i)):r(Object(x.n)([o],i))}})}))((function(e){var t,n=e.index,r=e.genome,o=e.onClick,i=e.style,c=e.onViewGenome,l=e.className,s=e.onMouseOver,u=r.name,m=r.st,p=r.st2,f=r.country,h=f?Object(W.b)(f):null,g=r.year?Object(q.c)(r):null;return a.a.createElement("div",{className:d()(l,"wgsa-genome-list-item wgsa-genome-list-item--selectable"),style:i,onClick:o,onMouseOver:s},a.a.createElement(ip,{title:u},a.a.createElement(rp,{genomes:[r],index:n,onClick:o}),a.a.createElement("button",{title:"View report",className:"wgsa-link-button",onClick:c},u)),a.a.createElement(ip,null,a.a.createElement(ap,{genome:r})),m?a.a.createElement(ip,null,a.a.createElement(Pr.b,{id:m}),!!p&&a.a.createElement(a.a.Fragment,null," / ",a.a.createElement(Pr.b,{id:p}))):cp,f?a.a.createElement(ip,{title:h},a.a.createElement("strong",null,f.toUpperCase())," – ",h):cp,g?a.a.createElement(ip,{title:g},g):cp,(t=r).reference?a.a.createElement(ip,{title:"Access",icon:"book"},"Reference"):t.public?a.a.createElement(ip,{title:"Access",icon:"public"},"Public"):a.a.createElement(ip,{title:"Uploaded at ".concat(t.uploadedAt),icon:"person"},"Private"))})),sp={UNCHECKED:"check_box_outline_blank",CHECKED:"check_box",INDETERMINATE:"indeterminate_check_box"};function up(e,t){return t?'"Select All" is not available on the unfiltered list, please select at least one filter.':"CHECKED"===e?"Remove from selection":"Add to selection"}var dp=Object(s.a)((function(e){return{status:Object(bm.j)(e),disabled:Object(bm.k)(e)}}),(function(e){return{select:function(){return e(Object(x.j)())}}}))((function(e){var t=e.status,n=e.disabled,r=e.select,o=a.a.useState(!1),i=B()(o,2),c=i[0],l=i[1];return a.a.createElement("button",{className:d()("wgsa-genome-checkbox",{"wgsa-blink":c}),onClick:function(){l(!0),r().then((function(){return l(!1)}))},disabled:n,title:up(t,n)},a.a.createElement("i",{className:"material-icons"},sp[t]))})),mp=n(74),pp=function(e){return a.a.createElement(mp.a,b()({className:"wgsa-genome-list-cell",stateKey:j.b,update:hm.g},e))},fp=function(e){var t=e.hasScrollbar,n=void 0===t||t;return a.a.createElement("div",{className:"wgsa-list-header-container"},a.a.createElement("div",{className:"wgsa-genome-list-item wgsa-genome-list-header"},a.a.createElement("span",{className:"wgsa-genome-list-cell"},a.a.createElement(dp,null),a.a.createElement(mp.a,{stateKey:j.b,update:hm.g,sortKey:"name"},"Name")),a.a.createElement(pp,{sortKey:"organism"},"Organism"),a.a.createElement(pp,{sortKey:"mlst"},"MLST"),a.a.createElement(pp,{sortKey:"country"},"Country"),a.a.createElement(pp,{sortKey:"date"},"Date"),a.a.createElement(pp,{sortKey:"access"},"Access")),n&&a.a.createElement("div",{style:{overflowY:"scroll",visibility:"hidden",height:0}}))};function hp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var gp=ye.a.pagination,vp=void 0===gp?{min:100}:gp,bp=a.a.createClass({displayName:"ListView",propTypes:{items:a.a.PropTypes.object.isRequired,indices:a.a.PropTypes.object.isRequired,total:a.a.PropTypes.number.isRequired},getInitialState:function(){return{mouseOverIndex:null}},getRowClassName:function(e){var t=this.props.lastSelectedIndex,n=this.state,r=n.mouseOverIndex,a=n.range;if(null!==t&&a&&null!==r){var o=Math.min(t,r),i=Math.max(t,r);if(o<=e&&e<=i)return"active"}return""},hasScrollbar:function(){return 40*this.props.total>=window.innerHeight-145},render:function(){var e=this,t=this.props,n=t.items,r=t.total,o=t.fetch,i=t.indices;return a.a.createElement("div",{className:"wgsa-genome-list-view",tabIndex:"0",onKeyDown:function(t){e.setState({range:t.shiftKey})},onKeyUp:function(){e.setState({range:!1})}},a.a.createElement(fp,{hasScrollbar:this.hasScrollbar()}),a.a.createElement(Kc.c,{isRowLoaded:function(e){var t=e.index;return i[t]},loadMoreRows:o,rowCount:r,minimumBatchSize:vp.min},(function(t){var o=t.onRowsRendered,c=t.registerChild;return a.a.createElement(Kc.a,null,(function(t){var l=t.width,s=t.height;return a.a.createElement(Kc.d,{height:s-25,onRowsRendered:o,ref:c,rowCount:r,rowHeight:40,rowRenderer:function(t){var r=t.key,o=t.index,c=t.style,l=i[o],s=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hp(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},c,{width:"calc(100% - 32px"});return"string"==typeof l?a.a.createElement(lp,{key:r,style:s,genome:n[l],index:o,className:e.getRowClassName(o),onMouseOver:function(t){e.setState({mouseOverIndex:o})}}):a.a.createElement("div",{key:r,style:s,className:"wgsa-genome-list-placeholder"},a.a.createElement("span",{style:{width:Math.floor(200*Math.random())}}))},width:l})}))})))}});var yp=Object(s.a)((function(e){return{items:Object($m.c)(e),indices:Object($m.e)(e),total:Object(ep.c)(e),lastSelectedIndex:Object(bm.b)(e)}}),(function(e){return{fetch:function(t){var n=t.startIndex,r=t.stopIndex;return e(Object(P.e)(n,r))}}}))(bp),Ep=(n(1115),n(184)),Op=n(200),Cp=a.a.createClass({displayName:"Marker",render:function(){var e=this,t=this.props,n=t.marker,r=t.style,o=t.popup.position===n.position;return a.a.createElement("div",{className:d()("wgsa-marker-cluster",{"has-popup":o}),ref:function(t){e.ref=t},style:r,onClick:function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),o?e.props.closePopup():e.props.showMarkerPopup(n)}},n.genomes.length)}}),wp=function(e){var t=e.list,n=e.onItemClick,r=e.close;return t.length?a.a.createElement("aside",{className:"wgsa-genomes-map-popup mdl-shadow--2dp"},a.a.createElement("header",null,a.a.createElement(rp,{genomes:t}),a.a.createElement("h2",{className:"h4"},t.length," Genome",1===t.length?"":"s"),a.a.createElement("button",{className:"mdl-button mdl-button--icon",onClick:r},a.a.createElement("i",{className:"material-icons"},"close"))),a.a.createElement("ul",null,t.map((function(e){return a.a.createElement("li",{key:e.id},a.a.createElement(rp,{genomes:[e]}),a.a.createElement("span",{className:"wgsa-checklist-content"},a.a.createElement("button",{title:"".concat(e.name," - view report"),className:"wgsa-link-button",onClick:function(){return n(e.id)}},e.name),a.a.createElement(hr.a,{organismId:e.organismId,title:e.speciesName},a.a.createElement("em",null,e.speciesName))))})))):a.a.createElement("aside",{className:"wgsa-genomes-map-popup mdl-shadow--2dp is-loading"},a.a.createElement(G.a,null))},Sp=a.a.createClass({displayName:"MapView",componentDidMount:function(){var e=this.props,t=e.filter,n=e.previousFilter,r=e.fetch;t!==n&&r()},componentWillReceiveProps:function(e){e.filter!==this.props.filter&&this.props.fetch()},shouldComponentUpdate:function(e){return e.markers!==this.props.markers||e.popup!==this.props.popup||e.lassoPath!==this.lassoPath},render:function(){var e=this,t=this.props,n=t.stateKey,r=t.lassoPath,o=t.markers,i=t.onLassoPathChange,c=t.popup,l=t.popupList;return a.a.createElement("div",{className:"wgsa-genomes-map"},a.a.createElement(Dl,{className:"wgsa-hub-map-view",lassoPath:r,markers:o,markerIds:o,markerComponent:Cp,markerProps:{popup:c,closePopup:this.props.closePopup,showGenomeReport:this.props.showGenomeReport,showMarkerPopup:this.props.showMarkerPopup},onClick:function(){r&&e.props.onLassoPathChange(null)},onLassoPathChange:i,stateKey:n}),c.open&&a.a.createElement(wp,{list:l,onItemClick:this.props.showGenomeReport,close:this.props.closePopup}))}});var jp=Object(s.a)((function(e,t){return{filter:Object(pm.a)(e),previousFilter:Object(Op.a)(e),markers:Object(Op.b)(e),lassoPath:Object(Qc.b)(e,t),popup:Object(Op.c)(e),popupList:Object(Op.d)(e)}}),(function(e,t){var n=t.stateKey;return{onLassoPathChange:function(t){return e(Object(Ep.d)(n,t))},showGenomeReport:function(t){return e(Object(Vr.d)(t))},showMarkerPopup:function(t){var n=t.position;return e(Object(Ep.e)([n]))},fetch:function(){return e(Object(P.f)())},closePopup:function(){return e(Object(Ep.c)())}}}))(Sp);function Np(e){return e?"GENOME_".concat(e.params.prefilter):null}var Pp=function(e){var t=e.match;return a.a.createElement(jp,{stateKey:Np(t)})},kp=(n(1117),a.a.createClass({displayName:"chart-resizer",componentDidUpdate:function(e){var t=this.props,n=t.width,r=t.height,a=t.chart;a&&(n===e.width&&r===e.height||a.resize())},render:function(){var e=this.props,t=e.width,n=e.height;return a.a.createElement("div",{className:this.props.className,style:{width:t,height:n}},this.props.children)}})),xp=function(e){return Object($m.b)(e).stats.metric},_p=function(e){return Object($m.b)(e).stats.entities},Ip=function(e){return Object($m.b)(e).stats.filter};function Tp(e,t){return e.reduce((function(e,n){return e+Number(t?n[t]:n)}),0)/(e.length||1)}var Lp=Object(xe.createSelector)(_p,xp,(function(e,t){return Tp(e,t).toFixed(1)})),Ap=Object(xe.createSelector)(_p,xp,Lp,(function(e,t,n){var r=e.map((function(e){var r=e[t]-n;return r*r}));return Math.sqrt(Tp(r)).toFixed(2)})),Dp=Object(xe.createSelector)(_p,xp,(function(e,t){return e.reduce((function(e,n){var r=e.min,a=e.max;return{min:r?Math.min(r,n[t]):n[t],max:a?Math.max(a,n[t]):n[t]}}),{min:0,max:0})})),Mp=Object(xe.createSelector)(_p,bm.c,(function(e,t){return e.reduce((function(e,n,r){return n.index=r,-1===t.indexOf(n.id)?e.unselected.push(n):e.selected.push(n),e}),{selected:[],unselected:[]})}));function Rp(e,t){return e.map((function(e){return{x:e.index+1,y:Number(e[t]),label:e.name,id:e.id}}))}var Fp=Object(xe.createSelector)(Mp,xp,(function(e,t){return[{label:"".concat(t," (selected)"),data:Rp(e.selected,t),backgroundColor:"#673c90",borderColor:"#673c90"},{label:"".concat(t," (unselected)"),data:Rp(e.unselected,t),backgroundColor:e.selected.length?"#ddd":"#a386bd",borderColor:e.selected.length?"#ddd":"#a386bd"}]})),zp=Object(xe.createSelector)(_p,(function(e){return e.length})),Gp=n(333),Up=[{title:"Genome Length",metric:"length"},{title:"N50",metric:"N50"},{title:"No. Contigs",metric:"contigs"},{title:"Non-ATCG",metric:"nonATCG"},{title:"GC Content",metric:"gcContent"}];var Bp=Object(s.a)((function(e,t){return{className:xp(e)===t.metric?"active":""}}),(function(e,t){return{onClick:function(){return e(Object(Gp.b)(t.metric))}}}))((function(e){var t=e.title,n=e.className,r=e.onClick;return a.a.createElement("button",{className:d()("wgsa-button-group__item",n),onClick:r},t)}));function Hp(e,t){return function(n,r){var a=B()(r,1)[0];if(a){var o=e[a._datasetIndex].data[a._index];t(o)}}}var Vp=a.a.createClass({displayName:"StatsView",componentDidMount:function(){var e,t=this.props,n=t.chartData,r=void 0===n?[]:n,a=t.previousFilter,o=t.filter,i=t.fetch,c=t.count;a!==o?i():e={datasets:r},this.chart=new Chart(this.canvas,{type:"line",data:e,options:{animation:!1,responsive:!1,elements:{points:{borderWidth:1,backgroundColor:"#a386bd",borderColor:"#a386bd"}},hover:{mode:"point",intersect:!0},legend:{display:!1},maintainAspectRatio:!1,onClick:Hp(r,this.props.onPointClick),showLines:!1,scales:{xAxes:[{type:"linear",position:"bottom",ticks:{display:!1,min:0,max:c+1},scaleLabel:{display:!1},beginAtZero:!0}]},tooltips:{displayColors:!1,callbacks:{title:function(e,t){var n=t.datasets;return e.map((function(e){var t=e.index,r=e.datasetIndex;return n[r].data[t].label})).join(", ")},label:function(e,t){var n=e.index,r=e.datasetIndex;return t.datasets[r].data[n].y}}}}})},componentDidUpdate:function(e){var t=this.props,n=t.chartData,r=t.onPointClick,a=t.filter,o=t.fetch,i=t.count;e.filter===a?n!==e.chartData&&(this.chart.data.datasets=n,this.chart.options.onClick=Hp(n,r),this.chart.options.scales.xAxes[0].ticks.max=i+1,this.chart.update(),this.chart.resize()):o()},render:function(){var e=this,t=this.props,n=t.average,r=t.stDev,o=t.range,i=void 0===o?{}:o;return a.a.createElement("div",{className:"wgsa-genome-stats"},a.a.createElement(Kc.a,null,(function(t){var o=t.height,c=t.width;return a.a.createElement("div",{style:{height:o,width:c,position:"relative"}},a.a.createElement("nav",{className:"wgsa-button-group"},a.a.createElement("i",{title:"Metric",className:"material-icons"},"timeline"),Up.map((function(e){return a.a.createElement(Bp,b()({key:e.metric},e))}))),a.a.createElement(kp,{className:"wgsa-stats-chart",height:o-184,width:c-8,chart:e.chart},a.a.createElement("canvas",{ref:function(t){e.canvas=t}})),a.a.createElement("div",{className:"wgsa-hub-stats-group"},a.a.createElement("dl",{className:"wgsa-hub-stats-section"},a.a.createElement("dt",{className:"wgsa-hub-stats-heading"},"Average"),a.a.createElement("dd",{className:"wgsa-hub-stats-value"},n)),a.a.createElement("dl",{className:"wgsa-hub-stats-section"},a.a.createElement("dt",{className:"wgsa-hub-stats-heading"},"Standard Deviation"),a.a.createElement("dd",{className:"wgsa-hub-stats-value"},r)),a.a.createElement("dl",{className:"wgsa-hub-stats-section"},a.a.createElement("dt",{className:"wgsa-hub-stats-heading"},"Range"),a.a.createElement("dd",{className:"wgsa-hub-stats-value"},i.min," – ",i.max))))})))}});var Kp=Object(s.a)((function(e){return{average:Lp(e),stDev:Ap(e),range:Dp(e),chartData:Fp(e),count:zp(e),filter:Object(pm.a)(e),previousFilter:Ip(e)}}),(function(e){return{onPointClick:function(t){return e(Object(Vr.d)(t.id,t.label))},fetch:function(){return e(Object(P.g)())}}}))(Vp),qp="/genomes/:prefilter(all|user|bin)",Wp=a.a.createElement(i.a,{path:qp,component:ia}),Yp=a.a.createElement(i.a,{path:qp,component:function(e){return a.a.createElement(np,e,a.a.createElement(Zr.a,null,a.a.createElement(i.a,{path:"".concat(qp,"/map"),component:Pp}),a.a.createElement(i.a,{path:"".concat(qp,"/stats"),component:Kp}),a.a.createElement(i.a,{component:yp})))}});n(1119);var Zp=Object(s.a)((function(e){return{collection:Object(la.a)(e)}}),(function(e,t){var n=t.match,r=t.location,a=Object(ua.parse)(r.search);return{fetch:function(){return e(Object(wd.c)(n.params.id,a.threshold))},reset:function(){return e(Object(id.e)())}}}))(Ud),Xp=a.a.createElement(i.a,{path:"/clustering/:id",component:Uc}),Qp=a.a.createElement(i.a,{path:"/clustering/:id",component:Zp}),Jp=function(){return a.a.createElement(Zr.a,null,Wp,dm,Hd,Xp,ca)},$p=n(914),ef=(n(1121),n(500)),tf=n(529),nf=function(e){var t=e.authMessage,n=E()(e,["authMessage"]);return ye.a.user?a.a.createElement(ef.a,n):a.a.createElement(tf.a,{to:{pathname:"/sign-in",search:"?redirect=".concat(n.path),state:{message:t}}})},rf=n(523),af=n.n(rf),of=n(170),cf={genome:"cloud_upload",collection:"collections"},lf={genome:function(e){var t=e.count,n=e.date;return a.a.createElement(le.a,{to:"/genomes/user?uploadedAt=".concat(n)},"Uploaded ",a.a.createElement("strong",null,t)," genome",1===t?"":"s")},collection:function(e){var t=e.size,n=e.organismId,r=e.title,o=e.token;return a.a.createElement(le.a,{to:"/collection/".concat(o)},"Created collection ",a.a.createElement(of.a,{tag:"strong"},r)," (",a.a.createElement(hr.a,{organismId:n}),", ",a.a.createElement("strong",null,t)," genomes)")}},sf=function(e){return a.a.createElement("li",{className:"wgsa-activity-item"},a.a.createElement("i",{className:"material-icons"},cf[e.type]),lf[e.type](e),a.a.createElement("span",{className:"wgsa-activity-item__time",title:e.formattedDate},af()(e.date)," ago"))},uf=function(e){return e.account},df=function(e){return uf(e).activity},mf=n(252),pf=n(179),ff=a.a.createClass({displayName:"ActivityList",componentDidMount:function(){this.props.fetch()},render:function(){var e=this.props.activity;return e===pf.a.LOADING?a.a.createElement(G.a,null):e===pf.a.ERROR?a.a.createElement("p",null,"Failed to fetch recent activity 😔"):e&&Array.isArray(e)?a.a.createElement("ul",{className:"wgsa-activity-list"},e.map((function(e){return a.a.createElement(sf,b()({key:e.date},e))}))):null}});var hf=Object(s.a)((function(e){return{activity:df(e)}}),(function(e){return{fetch:function(){return e(Object(mf.b)())}}}))(ff),gf=ye.a.user,vf=(void 0===gf?{photo:"/images/user.svg"}:gf).photo||"/images/user-signed-in.svg",bf=function(){return a.a.createElement("img",{src:vf,className:"cgps-avatar__image"})},yf=n(104),Ef=a.a.createClass({displayName:"ProfileContentComponent",componentDidMount:function(){this.props.summary.loaded&&this.props.fetch()},render:function(){var e=this.props,t=e.status,n=e.summary;if(t===pf.a.LOADING||!n.loaded)return null;var r=n.userCollections,o=n.userGenomes;return 0===r&&0===o?a.a.createElement("div",{className:"wgsa-profile-section wgsa-profile-onboarding"},a.a.createElement("p",null,"Welcome to ",a.a.createElement("strong",null,"Pathogenwatch"),"!"),a.a.createElement("p",null,"This is your account page, here you'll be able to see:"),a.a.createElement("ul",null,a.a.createElement("li",null,"The number of genomes you've uploaded"),a.a.createElement("li",null,"The number of collections you've created"),a.a.createElement("li",null,"A list of your recent activity")),a.a.createElement("p",null,"To get started, ",a.a.createElement(le.a,{to:"/upload"},"upload genomes")," or ",a.a.createElement(le.a,{to:"/genomes"},"browse the public dataset"),".")):a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"wgsa-hub-stats-group wgsa-profile-section"},a.a.createElement(le.a,{className:"wgsa-hub-stats-section wgsa-profile-counter",to:"/genomes/user",title:"Click to view genomes"},a.a.createElement("h3",{className:"wgsa-hub-stats-heading"},"Genomes"),a.a.createElement("p",{className:"wgsa-hub-stats-value wgsa-hub-stats-value--large"},o)),a.a.createElement(le.a,{className:"wgsa-hub-stats-section wgsa-profile-counter",to:"/collections/user",title:"Click to view collections"},a.a.createElement("h3",{className:"wgsa-hub-stats-heading"},"Collections"),a.a.createElement("p",{className:"wgsa-hub-stats-value wgsa-hub-stats-value--large"},r))),a.a.createElement("div",{className:"wgsa-hub-stats-group wgsa-profile-section"},a.a.createElement("div",{className:"wgsa-hub-stats-section"},a.a.createElement("div",{className:"wgsa-hub-stats-heading"},"Recent Activity"),a.a.createElement(hf,null))))}});var Of=Object(s.a)((function(e){return{status:uf(e),summary:Object(yf.c)(e)}}),(function(e){return{fetch:function(){return e(Object(k.b)())}}}))(Ef),Cf=function(){var e=ye.a.user;return e?a.a.createElement("div",{className:"wgsa-hipster-style"},a.a.createElement("div",{className:"cgps-avatar cgps-avatar--centered wgsa-profile-avatar"},a.a.createElement(bf,null),a.a.createElement("div",{className:"cgps-avatar__name title-font",title:e.name},e.name),a.a.createElement("div",{className:"cgps-avatar__contact",title:e.email},e.email)),a.a.createElement(Of,null)):null},wf=a.a.createElement(nf,{authMessage:"Please sign in to visit your account.",path:"/account",component:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(ee.a,null,"Account"),a.a.createElement(Cf,null))}});n(1123);function Sf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sf(Object(n),!0).forEach((function(t){Ct()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nf=a.a.createClass({displayName:"Marker",render:function(){var e=this,t=this.props,n=t.style,r=t.marker,o=t.selectedCollection,i=t.setCollection,c=r.collection,l=c.token,s=c.uuid,u=void 0===s?l:s;return a.a.createElement(le.a,{ref:function(t){e.ref=t},style:jf({},n,{animationDelay:"".concat(.125*r.index,"s")}),to:"/collection/".concat(u),className:d()("showcase__link",{"active wgsa-sonar-effect":o===u,inactive:o&&o!==u}),onMouseEnter:function(){return i(u)},onMouseLeave:function(){return i(null)}})}}),Pf=function(e){var t=e.collection;return a.a.createElement("div",{className:"wgsa-showcase-tooltip"},a.a.createElement(Fi.a,{level:"3"},t.title),a.a.createElement("p",null,t.size," ",a.a.createElement(hr.a,{organismId:t.organismId})," genomes"))},kf=a.a.createClass({displayName:"Showcase.react",getInitialState:function(){return{locations:[],collections:[],focus:!1}},componentDidMount:function(){var e=this;Object(R.a)("GET","/api/showcase").then((function(t){return e.setState({locations:t.reduce((function(e,t){var n=t.locations,r=E()(t,["locations"]),a=!0,o=!1,i=void 0;try{for(var c,l=n.entries()[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var s=B()(c.value,2),u=s[0],d=B()(s[1],2),m=d[0],p=d[1];null!==m&&null!==p&&e.push({lat:m,lon:p,collection:r,index:u})}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}return e}),[]),collections:t})}))},componentDidUpdate:function(e,t){var n=this.state.collections;0===t.collections.length&&n.length>0&&(this.setCollection(),this.startCarousel())},componentWillUnmount:function(){this.stopCarousel()},setCollection:function(){var e=this.state.collections,t=e[Math.floor(Math.random()*e.length)],n=t.token,r=t.uuid,a=void 0===r?n:r;this.setState({uuid:a})},startCarousel:function(){this._interval=setInterval(this.setCollection,5e3)},stopCarousel:function(){clearInterval(this._interval)},renderCollectionLinks:function(){var e=this,t=this.state.locations;return a.a.createElement(Cl,{markers:t,latitudeExtractor:function(e){return e.lat},longitudeExtractor:function(e){return e.lon},markerComponent:Nf,propsForMarkers:{selectedCollection:this.state.uuid,setCollection:function(t){e.setState({uuid:t}),e.stopCarousel()}}})},render:function(){var e=this,t=this.state,n=t.locations,r=t.uuid,o=t.collections;return a.a.createElement("section",{className:"showcase"},a.a.createElement("div",{className:"wgsa-homepage__content"},a.a.createElement(tl.a,{animate:!1,zoomControl:!1,center:[44,13.5],zoom:2,minZoom:2,boundsOptions:{animate:!1},scrollWheelZoom:!1,onFocus:function(e){e.target.scrollWheelZoom.enable()},onBlur:function(e){e.target.scrollWheelZoom.disable()},onMoveend:function(t){var n=t.target;e.map=n},ref:function(t){e.leafletMap=t},style:{width:"100%",height:"100%"}},a.a.createElement(nl.a,{noWrap:!0,bounds:[[-90,-180],[90,180]],attribution:"\n  Map data &copy;\n  <a href='http://openstreetmap.org'>OpenStreetMap</a> contributors\n  <a href='http://creativecommons.org/licenses/by-sa/2.0/'>CC-BY-SA</a>,\n  Imagery © <a href='http://mapbox.com'>Mapbox</a>\n",url:"https://api.mapbox.com/styles/v1/cgpsdev/cj5y3b7aq0rru2spdrcdnjxsm/tiles/256/{z}/{x}/{y}?access_token=".concat(ye.a.mapboxKey)}),this.renderCollectionLinks()),0===n.length&&a.a.createElement(G.a,{singleColour:!0}),a.a.createElement(om.a,{className:"wgsa-showcase-tooltip-wrapper",transitionName:"wgsa-showcase-tooltip",transitionEnterTimeout:280,transitionLeaveTimeout:280},!!r&&a.a.createElement(Pf,{key:r,collection:o.find((function(e){return e.token===r}))}))))}}),xf=ye.a.maxCollectionSize,_f=void 0===xf?1e3:xf;var If=Object(s.a)((function(e){return{deployedOrganisms:new Set(Object(yf.a)(e))}}))((function(e){var t=e.deployedOrganisms;return a.a.createElement("div",{className:"wgsa-homepage"},a.a.createElement(ee.a,null,"A Global Platform for Genomic Surveillance"),a.a.createElement("section",{className:"jumbotron"},a.a.createElement("div",{className:"jumbotron-content"},a.a.createElement(Q,null),a.a.createElement("h1",null,"A ",a.a.createElement("strong",null,"Global Platform")," for"," ",a.a.createElement("strong",null,"Genomic Surveillance"),"."))),a.a.createElement(kf,null),a.a.createElement("section",{id:"how-it-works",className:"alt wgsa-how-it-works"},a.a.createElement("div",{className:"wgsa-homepage__content"},a.a.createElement("h2",null,"How ",a.a.createElement(Z,null)," Works"),a.a.createElement("ol",null,a.a.createElement("li",null,a.a.createElement("i",{className:"material-icons"},"file_upload"),a.a.createElement("h3",null,"Upload"),a.a.createElement("p",null,"Upload genome assemblies and metadata, or view all publicly available genomes.")),a.a.createElement("li",null,a.a.createElement("i",{className:"material-icons"},"settings"),a.a.createElement("h3",null,"Analyse"),a.a.createElement("p",null,"Generate results including MLST, AMR predictions, clustering of genomes, and interactive visualisation of metadata.")),a.a.createElement("li",null,a.a.createElement("i",{className:"material-icons"},"search"),a.a.createElement("h3",null,"Explore"),a.a.createElement("p",null,"Compare results with publicly available genomes within a species reference tree."))))),a.a.createElement("section",{id:"organisms"},a.a.createElement("div",{className:"wgsa-homepage__content"},a.a.createElement("h2",null,"Organisms"),a.a.createElement("p",{className:"lead"},a.a.createElement("strong",null,a.a.createElement(Z,null))," ","provides species and taxonomy prediction for over 60,000 variants of bacteria, viruses, and fungi."),a.a.createElement("p",{className:"lead"},a.a.createElement("strong",null,"MLST")," prediction is available for over 100 species using schemes from ",a.a.createElement("a",{href:"https://pubmlst.org/"},"PubMLST"),","," ",a.a.createElement("a",{href:"http://bigsdb.pasteur.fr/"},"Pasteur"),", and"," ",a.a.createElement("a",{href:"http://enterobase.warwick.ac.uk"},"Enterobase"),"."),a.a.createElement("p",{className:"lead"},a.a.createElement("strong",null,"cgMLST")," calling and clustering is available for the following schemes:"),a.a.createElement("ul",{className:"pw-homepage-cgmlst-organisms"},a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=469&speciesId=470"},"Acinetobacter baumannii")),a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=194&speciesId=195"},"Campylobacter coli")),a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=194&speciesId=197"},"Campylobacter jejuni")),a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=1350&speciesId=1352"},"Enterococcus faecium")),a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=561"},"Escherichia")),a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=570&speciesId=573"},"Klebsiella pneumoniae")),a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=570&speciesId=1463165"},"Klebsiella quasipneumoniae")),a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=570&speciesId=244366"},"Klebsiella variicola")),a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=1637"},"Listeria")),a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=1763&speciesId=33894"},"Mycobacterium africanum")),a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=1763&speciesId=1765"},"Mycobacterium bovis")),a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=1763&speciesId=78331"},"Mycobacterium canettii")),a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=1763&speciesId=1773"},"Mycobacterium tuberculosis")),a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=482&speciesId=485"},"Neisseria gonorrhoeae")),a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=482&speciesId=487"},"Neisseria meningitidis")),a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=590&speciesId=28901"},"Salmonella enterica")),a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=620"},"Shigella")),a.a.createElement("li",null,a.a.createElement(le.a,{to:"/genomes?genusId=1279&speciesId=1280"},"Staphylococcus aureus"))),a.a.createElement("table",{className:"wgsa-organism-table"},a.a.createElement("caption",null,"Further Analyses"),a.a.createElement("colgroup",null,a.a.createElement("col",{className:"wgsa-title-column"}),a.a.createElement("col",{className:"wgsa-feature-column"}),a.a.createElement("col",{className:"wgsa-feature-column"}),a.a.createElement("col",{className:"wgsa-feature-column"}),a.a.createElement("col",{className:"wgsa-feature-column"})),a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",null,"Organism"),a.a.createElement("th",null,"AMR Prediction"),a.a.createElement("th",null,"Core SNP Trees"),a.a.createElement("th",null,"Other"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("em",null,"Campylobacter")),a.a.createElement("td",null,a.a.createElement("i",{className:"material-icons"},"check")),a.a.createElement("td",null),a.a.createElement("td",null)),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("em",null,"Klebsiella")),a.a.createElement("td",null,a.a.createElement("i",{className:"material-icons"},"check")),a.a.createElement("td",null),a.a.createElement("td",null,a.a.createElement("small",null,"Kleborate"))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(hr.a,{organismId:"573"})),a.a.createElement("td",null,a.a.createElement("i",{className:"material-icons"},"check")),a.a.createElement("td",null,t.has("573")&&a.a.createElement("i",{className:"material-icons"},"check")),a.a.createElement("td",null,a.a.createElement("small",null,"Kleborate"))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(hr.a,{organismId:"485"})),a.a.createElement("td",null,a.a.createElement("i",{className:"material-icons"},"check")),a.a.createElement("td",null,t.has("485")&&a.a.createElement("i",{className:"material-icons"},"check")),a.a.createElement("td",null,a.a.createElement("small",null,"NG-MAST"))),t.has("1646")&&a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(hr.a,{organismId:"1646"})),a.a.createElement("td",null),a.a.createElement("td",null,a.a.createElement("i",{className:"material-icons"},"check")),a.a.createElement("td",null)),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement("em",null,"Salmonella")),a.a.createElement("td",null),a.a.createElement("td",null),a.a.createElement("td",null,a.a.createElement("small",null,"SISTR"))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(hr.a,{organismId:"90370"})),a.a.createElement("td",null,a.a.createElement("i",{className:"material-icons"},"check")),a.a.createElement("td",null,t.has("90370")&&a.a.createElement("i",{className:"material-icons"},"check")),a.a.createElement("td",null,a.a.createElement("small",null,"Genotyphi"))),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(hr.a,{organismId:"1280"})),a.a.createElement("td",null,a.a.createElement("i",{className:"material-icons"},"check")),a.a.createElement("td",null,t.has("1280")&&a.a.createElement("i",{className:"material-icons"},"check")),a.a.createElement("td",null)),t.has("1336")&&a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(hr.a,{organismId:"1336"})),a.a.createElement("td",null),a.a.createElement("td",null,a.a.createElement("i",{className:"material-icons"},"check")),a.a.createElement("td",null)),a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(hr.a,{organismId:"1313"})),a.a.createElement("td",null,a.a.createElement("i",{className:"material-icons"},"check")),a.a.createElement("td",null),a.a.createElement("td",null,a.a.createElement("small",null,"PopPUNK"),a.a.createElement("br",null),a.a.createElement("small",null,"SeroBA"))),t.has("64320")&&a.a.createElement("tr",null,a.a.createElement("td",null,a.a.createElement(hr.a,{organismId:"64320"})),a.a.createElement("td",null),a.a.createElement("td",null,a.a.createElement("i",{className:"material-icons"},"check")),a.a.createElement("td",null))))),a.a.createElement("footer",null,a.a.createElement(le.a,{to:"/genomes",className:"mdl-button mdl-button--raised mdl-button--colored"},"Browse Genomes"))),a.a.createElement("section",{id:"features",className:"alt"},a.a.createElement("div",{className:"wgsa-homepage__content"},a.a.createElement("h2",null,"Features"),a.a.createElement("table",{className:"wgsa-features-table"},a.a.createElement("colgroup",null,a.a.createElement("col",null),a.a.createElement("col",null)),a.a.createElement("thead",null,a.a.createElement("tr",{className:"title-font"},a.a.createElement("th",null,"Anonymous User"),a.a.createElement("th",null,"Signed-in User"))),a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"Access public genomes"),a.a.createElement("td",null,"Upload genomes for analysis")),a.a.createElement("tr",null,a.a.createElement("td",null,"cgMLST clustering",a.a.createElement("br",null),a.a.createElement("small",null,"public genomes only")),a.a.createElement("td",null,"cgMLST clustering",a.a.createElement("br",null),a.a.createElement("small",null,"public and uploaded genomes"))),a.a.createElement("tr",null,a.a.createElement("td",null,"Save collections for offline use",a.a.createElement("br",null),a.a.createElement(le.a,{to:"/offline"},a.a.createElement("small",null,"Find out more"))),a.a.createElement("td",null,"Save collections for offline use",a.a.createElement("br",null),a.a.createElement(le.a,{to:"/offline"},a.a.createElement("small",null,"Find out more")))),a.a.createElement("tr",null,a.a.createElement("td",null,"Access public collections"),a.a.createElement("td",null,"Create collections of up to",a.a.createElement("br",null),a.a.createElement("strong",null,_f)," genomes"))))),a.a.createElement("footer",null,ye.a.user?a.a.createElement(le.a,{to:"/account",className:"mdl-button mdl-button--raised mdl-button--colored"},"Go to Account"):a.a.createElement(vm,{className:"mdl-button mdl-button--raised mdl-button--colored"},"Sign in"))),a.a.createElement("footer",{className:"mr-footer"},a.a.createElement("p",null,a.a.createElement("span",null,"Funded by "),a.a.createElement("img",{src:"images/wellcome-logo-white.png",className:"mr-footer-logo-square"})),a.a.createElement("p",null,a.a.createElement("span",null,"Developed at "),a.a.createElement("img",{src:"images/bdi.png",className:"mr-footer-logo-square"}),a.a.createElement("img",{src:"images/sanger.svg",className:"mr-footer-logo"})),a.a.createElement("p",null,a.a.createElement("a",{href:"https://www.pathogensurveillance.net",target:"_blank",rel:"noopener"},a.a.createElement("img",{src:"images/cgps-long-white.svg",className:"mr-footer-logo-cgps"}))),a.a.createElement("p",{className:"cgps-copyright"},"© 2018 Centre for Genomic Pathogen Surveillance")))})),Tf=a.a.createElement(i.a,{exact:!0,path:"/",component:If}),Lf=n(241),Af=(n(1131),n(1133),n(1135),function(e){var t=e.strategies,n=void 0===t?[]:t,r=e.children;return a.a.createElement("div",{className:"cgps-login-links"},n.filter((function(e){return"passwordless"!==e})).map((function(e){return a.a.createElement("a",{key:e,className:"cgps-login-button cgps-login-button--".concat(e),href:"/auth/".concat(e)},a.a.createElement("div",{className:"cgps-login-button__icon"}),a.a.createElement("div",{className:"cgps-login-button__text"},"Sign in with ",e))})),r)});Af.propTypes={strategies:_t.a.arrayOf(_t.a.string),children:_t.a.node,contactEmail:_t.a.string};var Df=Af,Mf=function(e){var t=e.message,n=e.appName,r=void 0===n?"Microreact":n,o=e.strategies,i=e.additional,c=e.termsLink;return a.a.createElement("section",{className:"cgps-login"},a.a.createElement("h3",{className:"cgps-heading"},"Sign in to your ",r," account"),t&&a.a.createElement("p",{className:"cgps-login-message"},t),a.a.createElement(Df,{strategies:o},i),c&&a.a.createElement("p",{className:"cgps-login-tos"},"By signing in, you are agreeing to our ",c,"."),a.a.createElement("h4",{className:"cgps-heading"},"Access to Information"),a.a.createElement("p",null,r," accesses your ",a.a.createElement("strong",null,"name"),", ",a.a.createElement("strong",null,"email"),", and ",a.a.createElement("strong",null,"profile photo")," when signing in with ",a.a.createElement("strong",null,"Google"),", ",a.a.createElement("strong",null,"Twitter"),", or ",a.a.createElement("strong",null,"Facebook"),"."),a.a.createElement("p",null,"Other information, such as ",a.a.createElement("strong",null,"tweets")," and ",a.a.createElement("strong",null,"Facebook friends"),", will not be accessed or stored by ",r,"."))};Mf.displayName="Login",Mf.propTypes={message:_t.a.string,appName:_t.a.string,strategies:_t.a.arrayOf(_t.a.string),additional:_t.a.node,termsLink:_t.a.node};var Rf=Mf,Ff=(n(1137),function(e){function t(){var e,n,r;ue()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return fe()(r,(n=r=fe()(this,(e=ge()(t)).call.apply(e,[this].concat(o))),r.state={sending:!1,showControls:!1,email:""},r.showControls=function(e){e.stopPropagation(),r.setState({showControls:!0},(function(){return r.emailInput.focus()}))},r.emailInputChange=function(e){r.setState({email:e.target.value})},r.emailInputKeyUp=function(e){"Escape"===e.key&&(r.setState({showControls:!1}),e.stopPropagation())},r.submitForm=function(e){e.preventDefault();var t=r.state.email;if(t.length){var n=r.props,a=n.getPasswordlessToken,o=n.showMessage;r.setState({sending:!0}),a(t).then((function(){r.setState({showControls:!1,sending:!1}),o("Your sign-in link has been sent to ".concat(t,"."))})).catch((function(e){r.setState({sending:!1}),console.error(e),o("Something went wrong, please try again later.")}))}},n))}return be()(t,e),me()(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.showControls,r=t.email,o=this.props.spinner;return n?a.a.createElement("form",{className:"cgps-login-controls",onSubmit:this.submitForm},a.a.createElement("input",{type:"email",value:r,placeholder:"Email address",onChange:this.emailInputChange,onKeyUp:this.emailInputKeyUp,disabled:this.state.sending,ref:function(t){e.emailInput=t}}),a.a.createElement("button",{type:"submit"},this.state.sending?a.a.createElement(o,null):a.a.createElement("i",{className:"material-icons"},"send"))):a.a.createElement("a",{className:"cgps-login-button cgps-login-button--passwordless",onClick:this.showControls},a.a.createElement("span",{className:"cgps-login-button__icon"}),a.a.createElement("span",{className:"cgps-login-button__text"},"Sign in with an email"))}}]),t}(a.a.Component));Ff.displayName="SignInPasswordless";var zf=Ff;function Gf(e){return Object(R.a)("POST","/auth/passwordless",{user:e})}var Uf=Object(s.a)(null,(function(e){return{showMessage:function(t){return e(Object(m.c)({message:t}))}}}))((function(e){var t=e.showMessage;return a.a.createElement(zf,{getPasswordlessToken:Gf,showMessage:t,spinner:G.a})})),Bf=(ye.a||{}).strategies,Hf=void 0===Bf?[]:Bf,Vf=a.a.createElement("a",{target:"_blank",rel:"noopener",href:"https://cgps.gitbook.io/pathogenwatch/privacy-and-tos"},"terms of service"),Kf=function(e){var t=e.message;return a.a.createElement("div",{className:"pw-signin-page"},a.a.createElement(ee.a,null,"Sign In"),a.a.createElement(Rf,{appName:"Pathogenwatch",strategies:Hf,additional:Hf.includes("passwordless")?a.a.createElement(Uf,null):null,termsLink:Vf,message:t}))},qf=a.a.createElement(i.a,{path:"/sign-in",render:function(e){var t=e.location,n=void 0===t?{}:t,r=da.a.parse(n.search),o=r.message,i=r.redirect,c=void 0===i?"/account":i;return o?a.a.createElement(Kf,{message:o}):ye.a.user?a.a.createElement($p.a,{to:c}):a.a.createElement(Kf,{message:n.state&&n.state.message})}}),Wf=(n(1139),n(48)),Yf={MISSING_FILES:function(e){return a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"These files are still missing:"),a.a.createElement("ul",null,e.slice(0,5).map((function(e){return a.a.createElement("li",null,e)})),e.length>5&&a.a.createElement("li",null,"+",e.length-5," more")),a.a.createElement("p",null,"if the problem persists, please try a new upload."))}};var Zf=Object(s.a)((function(e){return{message:e.upload.errorMessage}}),(function(e){return{clearMessage:function(){return e(Object(Wf.g)(null))}}}))((function(e){var t=e.message,n=e.clearMessage;return a.a.createElement(C,{visible:!!t,hide:n},t&&a.a.createElement("div",{className:"pw-upload-message",onClick:function(e){return e.stopPropagation()}},a.a.createElement("span",{className:"wgsa-file-icon"},a.a.createElement("i",{className:"material-icons"},"warning")),t.type?Yf[t.type](t.data):a.a.createElement("p",null,t),a.a.createElement("footer",null,a.a.createElement("button",{className:"mdl-button mdl-button--raised mdl-button--colored",onClick:n},"Ok"))))})),Xf=(n(1141),n(1143),{position:"fixed",zIndex:-1,opacity:0}),Qf=a.a.createClass({displayName:"DragAndDrop",propTypes:{onFiles:a.a.PropTypes.func.isRequired,noAddButton:a.a.PropTypes.bool},getInitialState:function(){return{indicatorVisible:!1}},componentWillMount:function(){this.props.noAddButton&&(this.style.cursor="pointer")},style:{},handleFiles:function(e){this.props.onFiles(Array.from(e))},handleDrop:function(e){e.stopPropagation(),e.preventDefault(),this.setState({indicatorVisible:!1}),e.dataTransfer&&e.dataTransfer.files.length>0&&this.handleFiles(e.dataTransfer.files)},showDropIndicator:function(e){e.stopPropagation(),e.preventDefault(),this.setState({indicatorVisible:!0})},hideDropIndicator:function(e){e.stopPropagation(),e.preventDefault(),this.setState({indicatorVisible:!1})},handleClick:function(){this.refs.fileInput.click()},handleFileInputChange:function(e){var t=e.target.files;t&&t.length>0&&(this.handleFiles(t),e.target.value=null)},render:function(){var e=this.props,t=e.readsEligible,n=e.accept;return a.a.createElement("div",{className:"wgsa-drag-and-drop ".concat(this.state.indicatorVisible?"is-dragover":""),onDragOver:this.showDropIndicator,onDrop:this.handleDrop,style:this.style,onClick:this.props.noAddButton?this.handleClick:function(){}},a.a.createElement(C,{visible:this.state.indicatorVisible,className:"wgsa-drop-indicator",onDragLeave:this.hideDropIndicator},a.a.createElement("div",{className:"wgsa-drop-indicator__message"},a.a.createElement("div",{className:"wgsa-drop-indicator__icons"},t&&a.a.createElement("span",{className:"wgsa-file-icon wgsa-file-icon--purple"},a.a.createElement("i",{className:"material-icons"},"file_copy"),a.a.createElement("span",{className:"wgsa-file-icon__label"},".fastq.gz")),a.a.createElement("span",{className:"wgsa-file-icon wgsa-file-icon--purple"},a.a.createElement("i",{className:"material-icons"},"insert_drive_file"),a.a.createElement("span",{className:"wgsa-file-icon__label"},".fasta")),a.a.createElement("span",{className:"wgsa-file-icon wgsa-file-icon--green"},a.a.createElement("i",{className:"material-icons"},"insert_drive_file"),a.a.createElement("span",{className:"wgsa-file-icon__label"},".csv"))),a.a.createElement("p",{className:"wgsa-drop-indicator__title h2 title-font"},"Drop to add to ",a.a.createElement(Z,null)))),this.props.children,this.props.noAddButton?null:a.a.createElement("button",{className:"mdl-button mdl-js-button mdl-button--fab wgsa-drag-and-drop__button mdl-shadow--3dp",title:"Add files",onClick:this.handleClick},a.a.createElement("i",{className:"material-icons"},"add")),a.a.createElement("input",{type:"file",multiple:"multiple",ref:"fileInput",accept:n,style:Xf,onChange:this.handleFileInputChange}))}}),Jf=(n(1145),function(e){var t=e.id,n=e.checked,r=e.onChange,o=e.children,i=e.lhs,c=void 0!==i&&i;return a.a.createElement("label",{className:"wgsa-settings-switch"},!c&&o,a.a.createElement("span",{className:d()("mdl-switch",{"is-checked":n})},a.a.createElement("input",{type:"checkbox",id:t,className:"mdl-switch__input",value:n,onChange:function(){return r(!n)}}),a.a.createElement("span",{className:"mdl-switch__track"}),a.a.createElement("span",{className:"mdl-switch__thumb"},a.a.createElement("span",{className:"mdl-switch___focus-helper"}))),c&&o)});Jf.displayName="Switch",Jf.propTypes={left:a.a.PropTypes.object,right:a.a.PropTypes.object,id:a.a.PropTypes.string,checked:a.a.PropTypes.bool,onChange:a.a.PropTypes.func};var $f=Jf,eh=n(112);var th=Object(s.a)((function(e,t){var n=t.setting;return{checked:Object(eh.b)(e,n)}}),(function(e,t){var n=t.setting;return{onChange:function(t){return e(Object(Wf.e)(n,t))}}}))((function(e){var t=e.checked,n=e.onChange,r=e.children;return a.a.createElement($f,{checked:t,onChange:n},r)})),nh=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"pw-upload-instructions-column"},a.a.createElement("h2",null,"Genomic Data"),a.a.createElement("p",null,"One or more files in"," ",a.a.createElement("a",{href:"https://en.wikipedia.org/wiki/FASTA_format",target:"_blank",rel:"noopener"},"multi-FASTA format")," ","with one of the following extensions:"),a.a.createElement("ul",{className:"inline"},M.a.map((function(e){return a.a.createElement("li",{key:e},e)}))),a.a.createElement("p",null,"Files should contain ",a.a.createElement("strong",null,"assembled DNA sequences")," of"," ",a.a.createElement("strong",null,"whole genomes"),". Please ensure that there is"," ",a.a.createElement("strong",null,"one file per genome")," as metagenomic samples are not supported."),a.a.createElement("h2",null,"Settings"),a.a.createElement("p",null,a.a.createElement(th,{setting:"compression"},a.a.createElement("strong",null,"Compress files")),a.a.createElement("small",null,"Recommended for slow connections.")),a.a.createElement("p",null,a.a.createElement(th,{setting:"individual"},a.a.createElement("strong",null,"Upload files individually")),a.a.createElement("small",null,"Recommended for unstable connections."))),a.a.createElement("div",{className:"pw-upload-instructions-column"},a.a.createElement("h2",null,"Metadata"),a.a.createElement("p",null,"One or more files in"," ",a.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Comma-separated_values",target:"_blank",rel:"noopener"},"CSV format")," ","with the extension ",a.a.createElement("strong",null,".csv"),"."),a.a.createElement("p",null,"Files should contain a ",a.a.createElement("strong",null,"filename")," column to match each row to its respective genomic data. Please use the name of the file"," ",a.a.createElement("strong",null,"including extension"),"."),a.a.createElement("p",null,"To make full use of metadata, we strongly recommend including the following columns:"),a.a.createElement("ul",{className:"inline"},a.a.createElement("li",null,"latitude"),a.a.createElement("li",null,"longitude"),a.a.createElement("li",null,"year"),a.a.createElement("li",null,"month"),a.a.createElement("li",null,"day")),a.a.createElement("p",null,"When providing a date, month and day are optional. Coordinates should be provided in decimal degrees. Additional metadata may be included and will be saved."),a.a.createElement("h3",null,"CSV Templates"),a.a.createElement("ul",{className:"bulleted"},a.a.createElement("li",null,a.a.createElement("a",{href:"/pathogenwatch-metadata-template-minimal.csv",download:"pathogenwatch-metadata-template-minimal.csv"},"Minimal")),a.a.createElement("li",null,a.a.createElement("a",{href:"/pathogenwatch-metadata-template-typhi.csv",download:"pathogenwatch-metadata-template-typhi.csv"},a.a.createElement(hr.a,{organismId:"90370"}))))))},rh=function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"pw-upload-instructions-column"},a.a.createElement("h2",null,"Genomic Data"),a.a.createElement("p",null,"One or more ",a.a.createElement("strong",null,"pairs of files")," in gzip-compressed"," ",a.a.createElement("a",{href:"https://en.wikipedia.org/wiki/FASTQ_format",target:"_blank",rel:"noopener"},"FASTQ format")," ","with one of the following extensions:"),a.a.createElement("table",{cellPadding:"0",cellSpacing:"0"},a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement("td",null,"_1.fastq.gz"),a.a.createElement("td",null,"_2.fastq.gz")),a.a.createElement("tr",null,a.a.createElement("td",null,".1.fastq.gz"),a.a.createElement("td",null,".2.fastq.gz")),a.a.createElement("tr",null,a.a.createElement("td",null,"_R1.fastq.gz"),a.a.createElement("td",null,"_R2.fastq.gz")),a.a.createElement("tr",null,a.a.createElement("td",null,".R1.fastq.gz"),a.a.createElement("td",null,".R2.fastq.gz")))),a.a.createElement("p",null,"Files should contain ",a.a.createElement("strong",null,"short read DNA sequences")," of"," ",a.a.createElement("strong",null,"whole genomes"),". Please ensure that there are"," ",a.a.createElement("strong",null,"two files per genome")," as metagenomic samples are not supported.")),a.a.createElement("div",{className:"pw-upload-instructions-column"},a.a.createElement("h2",null,"Metadata"),a.a.createElement("p",null,"One or more files in"," ",a.a.createElement("a",{href:"https://en.wikipedia.org/wiki/Comma-separated_values",target:"_blank",rel:"noopener"},"CSV format")," ","with the extension ",a.a.createElement("strong",null,".csv"),"."),a.a.createElement("p",null,"Files should contain a ",a.a.createElement("strong",null,"filename")," column to match each row to its respective genomic data. Please use either the common prefix (e.g. the ",a.a.createElement("strong",null,"lane ID")," or the ",a.a.createElement("strong",null,"strain name"),"), or ",a.a.createElement("strong",null,"one of")," the names of the files including extension."),a.a.createElement("p",null,"To make full use of metadata, we strongly recommend including the following columns:"),a.a.createElement("ul",{className:"inline"},a.a.createElement("li",null,"latitude"),a.a.createElement("li",null,"longitude"),a.a.createElement("li",null,"year"),a.a.createElement("li",null,"month"),a.a.createElement("li",null,"day")),a.a.createElement("p",null,"When providing a date, month and day are optional. Coordinates should be provided in decimal degrees. Additional metadata may be included and will be saved."),a.a.createElement("h3",null,"CSV Templates"),a.a.createElement("ul",{className:"bulleted"},a.a.createElement("li",null,a.a.createElement("a",{href:"/pathogenwatch-metadata-template-reads-minimal.csv",download:"pathogenwatch-metadata-template-reads-minimal.csv"},"Minimal")),a.a.createElement("li",null,a.a.createElement("a",{href:"/pathogenwatch-metadata-template-reads-typhi.csv",download:"pathogenwatch-metadata-template-reads-typhi.csv"},a.a.createElement(hr.a,{organismId:"90370"}))))))},ah=(n(1147),function(e){var t=e.children,n=e.color,r=void 0===n?"purple":n,o=e.text,i=e.circular,c=void 0!==i&&i;return a.a.createElement("span",{className:d()("pw-badge","pw-badge-".concat(r),{circular:c}),"data-text":o},t)}),oh=n(117),ih=function(e){a.a.useEffect((function(){var t=oh.a.getState();e&&!t.auth.pending&&oh.a.dispatch(Object(Wf.f)(e))}),[e])},ch=n(201);function lh(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=oh.a.getState(),n=t.auth,a=n.token,o=n.pending;Object(r.useEffect)((function(){a||o||oh.a.dispatch(Object(ch.b)())}),[a,o]),Object(r.useEffect)((function(){a&&e&&oh.a.dispatch(Object(ch.b)())}),[])}var sh=Object(s.a)((function(e){return{usage:Object(eh.a)(e),token:e.auth.token}}))((function(e){var t=e.usage,n=e.token;lh(!0),ih(n);var r=a.a.useRef();return a.a.useEffect((function(){r.current&&!r.current.MaterialTabs&&componentHandler.upgradeElement(r.current)}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement(O.a,{className:"pw-upload-assembler-usage"},t&&a.a.createElement("aside",null,a.a.createElement("p",null,a.a.createElement("strong",null,"Processing reads is a trial service with fair-use limits.")),a.a.createElement("p",null,0===t.remaining?a.a.createElement(a.a.Fragment,null,"You have no assemblies remaining, check back soon."):a.a.createElement(a.a.Fragment,null,"You are currently limited to ",a.a.createElement("strong",null,t.remaining," assemblies"),"."),a.a.createElement("br",null),a.a.createElement("a",{href:"https://cgps.gitbook.io/pathogenwatch/technical-descriptions/short-read-assembly",target:"_blank",rel:"noopener"},"How the service works")))),a.a.createElement("div",{ref:function(e){r.current=e},className:"mdl-tabs mdl-js-tabs mdl-js-ripple-effect"},a.a.createElement("div",{className:"mdl-tabs__tab-bar"},a.a.createElement("a",{href:"#assemblies-panel",className:"mdl-tabs__tab is-active"},"Assemblies"),a.a.createElement("a",{href:"#reads-panel",className:"mdl-tabs__tab"},a.a.createElement(ah,{text:"Beta",color:"turquoise"},"Reads"))),a.a.createElement("div",{className:"mdl-tabs__panel is-active",id:"assemblies-panel"},a.a.createElement(nh,null)),a.a.createElement("div",{className:"mdl-tabs__panel",id:"reads-panel"},a.a.createElement(rh,null))))})),uh=n(915);var dh=Object(s.a)((function(e){return{hasIncomplete:Object(eh.c)(e)}}))((function(e){var t=e.children,n=e.hasIncomplete;return a.a.createElement(Zd,{className:"wgsa-upload-summary pw-upload-page"},t||a.a.createElement(a.a.Fragment,null,a.a.createElement(uh.a,{activeClassName:"mdl-button--primary",className:"mdl-button",exact:!0,to:"/upload"},"New Upload"),a.a.createElement(uh.a,{activeClassName:"mdl-button--primary",className:"mdl-button",exact:!0,to:"/upload/previous"},"Previous Uploads",n&&a.a.createElement("span",{title:"You have incomplete uploads.",className:"pw-blipper wgsa-blink"}))))}));var mh=function(e){return Object(Po.readAsText)(e).then(Ro)},ph=function(e){return e.reduce((function(e,t){var n=t.data,r=void 0===n?{}:n;return e.concat(r)}),[])},fh=n(98),hh=/^(.*)[_\.]R?[12]\.fastq\.gz$/,gh=new RegExp("(".concat(M.a.join("|"),")$"),"i"),vh=ye.a.maxGenomeFileSize,bh=void 0===vh?20:vh,yh=1048576*bh;function Eh(e){if(0===e.size)throw new Error("".concat(e.name," is an empty file."));if(e.size>yh)throw new Error("".concat(e.name," is too large, the limit is ").concat(bh," MB."));return e}var Oh=function(e,t){var n=[],r=[],a=[],o=Ch(),i=!0,c=!1,l=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var d=s.value;if(Do.test(d.name))n.push(d);else if(gh.test(d.name)){try{Eh(d)}catch(e){return Promise.reject(e)}r.push(d)}else o&&hh.test(d.name)&&a.push(d)}}catch(e){c=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(c)throw l}}if(0===r.length&&a.length<=1)return Promise.reject({message:"Please ensure that your files include at least one genome with the supported file extensions."});var m={};try{m=function(e,t,n){var r={},a=(n||{}).maxSizeMB,o=void 0===a?500:a,i=1048576*o,c=!0,l=!1,s=void 0;try{for(var u,d=e[Symbol.iterator]();!(c=(u=d.next()).done);c=!0){var m=u.value;if(m.size>i)throw new Error("".concat(m.name," is too large, the limit is ").concat(o," MB."));var p=m.name.match(t)[1];r[p]=r[p]||{},r[p][m.name]=m}}catch(e){l=!0,s=e}finally{try{c||null==d.return||d.return()}finally{if(l)throw s}}for(var f=0,h=Object.entries(r);f<h.length;f++){var g=B()(h[f],2),v=g[0],b=g[1];if(2!==Object.keys(b).length)throw new Error("No pair found for files starting ".concat(v,", please check and try again."))}if(n&&Object.keys(r).length>n.remaining)throw new Error("You do not have enough remaining assemblies to complete this upload.");return r}(a,hh,t)}catch(e){return Promise.reject(e)}return function(e){return Promise.all(e.map(mh)).then(ph)}(n).then((function(e){return[].concat(f()(r.map((function(t,n){var r=t.name.replace(gh,""),a=e.find((function(e){return e.filename===t.name||e.filename===r}));return{files:[t],id:"".concat(t.name,"__").concat(Date.now(),"_").concat(n),metadata:a?Fo(a,r):null,name:r,type:fh.a.ASSEMBLY}}))),f()(Object.entries(m).map((function(t,n){var r=B()(t,2),a=r[0],o=r[1],i=Object.keys(o),c=e.find((function(e){return e.filename===a||i.includes(e.filename)}));return{files:Object.values(o),id:"".concat(a,"__").concat(Date.now(),"_").concat(n),metadata:c?Fo(c):null,name:a,type:fh.a.READS}}))))}))};function Ch(){return"assemblerAddress"in ye.a}function wh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ch(),t=M.a;return e&&(t=M.a.concat(".fastq.gz")),t.join(",")}function Sh(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ch();return"".concat(wh(e),",.csv")}var jh=n(180);var Nh=Object(s.a)(null,(function(e){return{onFiles:function(t){return e((n=t,r=(new Date).toISOString(),function(e,t){var a=t(),o=Object(eh.a)(a);Oh(n,o).then((function(t){e(Object(Wf.d)(t,r)).then((function(){return Ag.push("/upload/".concat(r))}))})).catch((function(t){t.toast?e(Object(m.c)(t.toast)):t.message?e(Object(Wf.g)(t.message)):e(Object(Wf.g)("Sorry, something went wrong."))}))}));var n,r},fetchPreviousUploads:function(){return e(Object(jh.b)())}}}))((function(e){var t=e.onFiles,n=e.fetchPreviousUploads;a.a.useEffect((function(){n()}),[]);var r=Ch();return a.a.createElement(Qf,{onFiles:t,readsEligible:r,accept:Sh(r)},a.a.createElement(ee.a,null,"Upload"),a.a.createElement(dh,null),a.a.createElement("section",{className:"wgsa-page wgsa-compact-page wgsa-upload-instructions"},a.a.createElement("h1",null,"Drag and drop files to begin."),r?a.a.createElement(sh,null):a.a.createElement(nh,null)))})),Ph=(n(1149),function(e){var t=e.item,n=t.uploadedAt,r=t.total,o=t.complete;return a.a.createElement(le.a,{className:"wgsa-genome-list-item wgsa-genome-list-item--selectable",to:"/upload/".concat(n)},a.a.createElement("span",null,Object(q.b)(n)),a.a.createElement("span",null,r),a.a.createElement("span",null,r===o?a.a.createElement("span",{className:"pw-upload-session-status uploaded"},"Uploaded"):a.a.createElement("span",{className:"pw-upload-session-status incomplete"},"Incomplete")))}),kh=function(){return a.a.createElement("header",{className:"wgsa-genome-list-item wgsa-genome-list-header"},a.a.createElement("h3",{className:"wgsa-list-header-cell"},"Date Uploaded"),a.a.createElement("h3",{className:"wgsa-list-header-cell"},"Genomes"),a.a.createElement("h3",{className:"wgsa-list-header-cell"},"Status"))};var xh=Object(s.a)((function(e){return e.upload.previous}),(function(e){return{fetch:function(){return e(Object(jh.b)())}}}))((function(e){return a.a.useEffect((function(){e.fetch()}),[]),a.a.createElement(a.a.Fragment,null,a.a.createElement(ee.a,null,"Previous Uploads"),a.a.createElement(dh,null),a.a.createElement(H,{complete:e.uploads.length>0||e.error,placeholder:a.a.createElement("div",{className:"pw-flex-center"},a.a.createElement(G.a,null))},(n=(t=e).loading,r=t.error,o=t.uploads,r?a.a.createElement("p",{className:"pw-upload-page pw-centre-text"},"Failed to fetch previous uploads."):n||0!==o.length?a.a.createElement(qd,{className:"wgsa-genome-list-view wgsa-previous-uploads",template:Ph,items:o,columnCount:1,rowHeight:40,header:a.a.createElement(kh,null),headerHeight:25}):a.a.createElement("p",{className:"pw-upload-page pw-centre-text"},"No previous uploads found."))));var t,n,r,o})),_h=(n(1151),n(917)),Ih=(n(1153),n(881),n(131)),Th=n(64),Lh=n(159),Ah=a.a.createClass({displayName:"AnalysisChart",componentDidMount:function(){this.chart=new Chart(this.canvas,{type:"doughnut",data:{datasets:this.props.datasets},options:{responsive:!1,maintainAspectRatio:!1,animation:{animateRotate:!0,animateScale:!0},tooltips:{displayColors:!1,callbacks:{title:function(e,t){var n=t.datasets;return e.map((function(e){var t=e.index,r=e.datasetIndex;return n[r].labels[t]})).join(", ")},label:function(e,t){var n=e.index,r=e.datasetIndex,a=t.datasets[r];return a.tooltips?a.tooltips[n]:"".concat(a.data[n]," / ").concat(a.total,", ").concat((100*a.data[n]/a.total).toFixed(1),"%")}}},pieceLabel:{render:function(e){var t=e.dataset,n=e.index;return(t.shortLabels||t.labels)[n]},precision:2,fontColor:"#fff",fontSize:13,fontStyle:"400",fontFamily:"Roboto"}}})},componentDidUpdate:function(){var e=this,t=[],n=!0,r=!1,a=void 0;try{for(var o,i=function(){var n=o.value,r=e.chart.data.datasets.find((function(e){return e.label===n.label}));r?(r.data=n.data,r.backgroundColor=n.backgroundColor,r.organismIds=n.organismIds,r.labels=n.labels,r.shortLabels=n.shortLabels,r.parents=n.parents,r.total=n.total,r.tooltips=n.tooltips):t.unshift(n)},c=this.props.datasets[Symbol.iterator]();!(n=(o=c.next()).done);n=!0)i()}catch(e){r=!0,a=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}for(var l=0,s=t;l<s.length;l++){var u=s[l];this.chart.data.datasets.unshift(u)}this.chart.update()},getGenomesLink:function(){var e=this.props,t=e.uploadedAt,n=e.selectedOrganism,r="/genomes?uploadedAt=".concat(t);return n&&(r+="&organismId=".concat(n)),r},render:function(){var e=this;return a.a.createElement("div",{className:"wgsa-analysis-chart"},a.a.createElement(Kc.a,null,(function(t){var n=t.width,r=t.height;return a.a.createElement(kp,{height:r,width:n,chart:e.chart},a.a.createElement("canvas",{ref:function(t){e.canvas=t}}))})),this.props.specieationComplete&&a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"pw-analysis-chart-hover-trigger"}),a.a.createElement(le.a,{className:d()("mdl-shadow--2dp wgsa-view-genomes-button",{"wgsa-sonar-effect":this.props.sonar}),to:this.getGenomesLink()},"View Genomes")))}});var Dh=Object(s.a)((function(e){return{datasets:Object(Ih.b)(e),specieationComplete:Object(Th.i)(e),sonar:Object(Th.g)(e)&&!Object(Th.f)(e),selectedOrganism:Object(Ih.d)(e)}}),(function(e){return{selectOrganism:function(t){return e(Object(Lh.f)(t))}}}))(Ah),Mh=a.a.memo((function(e){var t=e.uploadedAt;a.a.useEffect((function(){var e="".concat(ye.a.clientId,"-analysis");return Se(e,t,(function(e){return oh.a.dispatch(Object(Lh.e)(e))})),function(){return je(e)}}),[t]),a.a.useEffect((function(){var e=setInterval((function(){return oh.a.dispatch(Object(Lh.d)(t))}),6e4);return function(){return clearInterval(e)}}),[t])})),Rh=(n(882),n(108)),Fh=n(160),zh=n(239);var Gh=Object(s.a)((function(e){return{listening:Object(Rh.h)(e),assemblyInProgress:Object(Rh.g)(e),token:e.auth.token}}),(function(e){return{handleStatusUpdate:function(t){switch(t.type){case"ERROR":e(Object(Fh.d)(t.payload));break;case"STATUS":e(Object(Fh.e)(t.payload));break;default:console.log("[Assembly] Unknown message type:",t)}},progressTick:function(){return e(Object(Fh.f)())}}}))((function(e){var t=e.assemblyInProgress,n=e.handleStatusUpdate,r=e.listening,o=e.progressTick,i=e.token,c=e.uploadedAt;return lh(),a.a.useEffect((function(){if(r&&i){Object(zh.a)(c,i).then((function(e){n({type:"STATUS",payload:e})})).catch(console.error);var e="".concat(ye.a.clientId,"-assembly");return Se(e,c,n),function(){return je(e)}}}),[r,i]),a.a.useEffect((function(){if(t){var e=setInterval(o,2e3);return function(){return clearInterval(e)}}}),[t]),null})),Uh=n(42),Bh=function(e){e.preventDefault(),window.location.reload()};var Hh=Object(s.a)((function(e){return{assemblerErrors:Object(Rh.a)(e),numOtherErrors:Object(Uh.b)(e),uploadPending:Object(Uh.k)(e),validationErrors:Object(Uh.j)(e)}}))((function(e){var t=e.assemblerErrors,n=e.validationErrors,r=e.numOtherErrors,o=e.uploadPending;return a.a.createElement("section",null,t.map((function(e){var t=e.name;return a.a.createElement("article",{key:t,className:"pw-upload-file-error"},a.a.createElement("i",{className:"material-icons"},"error_outline"),a.a.createElement("div",null,a.a.createElement("h5",null,t),a.a.createElement("p",null,"There was a problem during assembly")))})),n.map((function(e){var t=e.filename,n=e.error;return a.a.createElement("article",{key:t,className:"pw-upload-file-error"},a.a.createElement("i",{className:"material-icons"},"error_outline"),a.a.createElement("div",null,a.a.createElement("h5",null,t),a.a.createElement("p",null,n.message)))})),r>0&&a.a.createElement("article",{className:"pw-upload-file-error"},a.a.createElement("i",{className:"material-icons"},"error_outline"),a.a.createElement("div",null,a.a.createElement("h5",null,r," genome",1===r?" was ":"s were ","interrupted during upload"))),a.a.createElement("footer",{className:"pw-upload-file-error-footer"},!o&&(n.length>0||r>0)&&a.a.createElement("a",{className:"mdl-button mdl-button--raised mdl-button--colored",href:"#",onClick:Bh},"Reload page")))})),Vh=(n(1155),n(1157),a.a.createClass({displayName:"Progress Bar",propTypes:{className:a.a.PropTypes.string,progress:a.a.PropTypes.number,indeterminate:a.a.PropTypes.bool,label:a.a.PropTypes.string},componentDidMount:function(){var e=this,t=this.refs.progressBar;t.addEventListener("mdl-componentupgraded",(function(t){e.progressBar=t.target.MaterialProgress,e.setProgress()})),componentHandler.upgradeElement(t)},componentDidUpdate:function(){this.setProgress()},setProgress:function(){"progress"in this.props&&this.progressBar.setProgress(this.props.progress)},render:function(){var e=this.props,t=e.className,n=e.indeterminate,r=e.children,o=e.label,i=void 0===o?r:o;return a.a.createElement("div",{className:"wgsa-progress-bar"},i?a.a.createElement("label",{className:"wgsa-progress-bar__label"},i):null,a.a.createElement("div",{ref:"progressBar",className:d()(t,"mdl-progress mdl-js-progress",{"mdl-progress__indeterminate":n})}))}})),Kh=n(63),qh={IDENTIFY:"Identifying",PREPARE:"Preparing",UPLOAD:"Uploading"};var Wh=function(e){var t=e.genome;return a.a.createElement("div",{className:"wgsa-genome-card"},a.a.createElement("header",{className:"wgsa-card-header"},a.a.createElement("h2",{className:"wgsa-card-title wgsa-overflow-fade",title:t.name},t.name)),t.type===Kh.b.READS?function(e){return e.files.map((function(e){return a.a.createElement(a.a.Fragment,{key:e.name},a.a.createElement(Vh,{key:e.stage,progress:e.progress||0}),a.a.createElement(O.a,null,a.a.createElement("small",{key:e.stage},qh[e.stage]||"Pending")))}))}(t):function(e){switch(e.status){case Kh.a.COMPRESSING:return a.a.createElement(a.a.Fragment,null,a.a.createElement(Vh,{indeterminate:!0}),a.a.createElement("small",null,"Compressing"));case Kh.a.UPLOADING:var t=B()(e.files,1)[0];return a.a.createElement(a.a.Fragment,null,a.a.createElement(Vh,{progress:t.progress||0}),a.a.createElement("small",null,"Uploading"));case Kh.a.SUCCESS:return a.a.createElement(Vh,{progress:100});case Kh.a.QUEUED:default:return a.a.createElement(a.a.Fragment,null,a.a.createElement(Vh,{progress:0}),a.a.createElement("small",null,"Pending"))}}(t))},Yh=function(e){var t=e.uploadsInProgress,n=e.pending;return a.a.createElement(a.a.Fragment,null,a.a.createElement(om.a,{className:"wgsa-upload-card-list",transitionName:"wgsa-upload-card",transitionEnterTimeout:280,transitionLeave:!1},t.map((function(e){return a.a.createElement(Wh,{key:e.id,genome:e})}))),t.length>0&&n>0&&a.a.createElement("p",null,"+",n," genome",1===n?"":"s"))},Zh=n(67),Xh=function(e){var t=e.complete,n=e.total,r=e.hasErrors;return t===n?a.a.createElement("p",{className:d()("pw-with-icon",{success:!r})},a.a.createElement("i",{className:"material-icons"},r?"error_outline":"check_circle"),n.toLocaleString()," genome",1===n?"":"s"," assembled"):a.a.createElement("p",{className:"pw-with-icon"},"Assembly",a.a.createElement("span",{className:"wgsa-upload-legend-count"},a.a.createElement("strong",null,t.toLocaleString())," of ",a.a.createElement("strong",null,n.toLocaleString())))},Qh=function(e){var t=e.complete,n=e.total,r=e.hasErrors;return t===n?a.a.createElement("p",{className:d()("pw-with-icon",{success:!r})},a.a.createElement("i",{className:"material-icons"},r?"error_outline":"check_circle"),n.toLocaleString()," ",1===n?"analysis":"analyses"," completed"):a.a.createElement("p",{className:"pw-with-icon"},"Analysis",a.a.createElement("span",{className:"wgsa-upload-legend-count"},a.a.createElement("strong",null,t.toLocaleString())," of ",a.a.createElement("strong",null,n.toLocaleString())))},Jh=function(e){var t=e.position;return 0===t?a.a.createElement("p",{className:"wgsa-blink"},"Results processing"):t?a.a.createElement("p",null,t.toLocaleString()," job",1===t?"":"s"," till next result"):null};var $h=Object(s.a)((function(e){return{assemblyQueued:Object(Rh.c)(e),hasErrors:Th.f(e),sessionHasReads:Object(Zh.f)(e),position:Object(Ih.c)(e),progress:Th.b(e),totalGenomes:Object(Zh.a)(e)}}))((function(e){var t=e.assemblyQueued,n=e.hasErrors,r=e.sessionHasReads,o=e.position,i=e.progress,c=e.totalGenomes,l=e.completedUploads;if(0===c)return null;var s=i.assembly,u=i.analyses,m=i.speciation,p=!r||s.done===s.total,f=m.done===c,h=l>0&&(!r||s.complete>0)&&(0===u.total||u.done<u.total);return a.a.createElement("div",{className:"wgsa-upload-progress-overview"},a.a.createElement("p",{className:d()("pw-with-icon",{success:l===c})},a.a.createElement("i",{className:"material-icons"},l===c?"check_circle":"error_outline"),0===l?"No successful uploads":"".concat(l.toLocaleString()," genome").concat(1===l?"":"s"," uploaded")),r&&l>0&&a.a.createElement(Xh,{complete:s.done,total:s.total,hasErrors:s.failed>0}),f&&u.total>0&&a.a.createElement(Qh,{complete:u.done,total:u.total,hasErrors:n}),t>0&&a.a.createElement("p",{className:"wgsa-blink"},t," job",1===t?"":"s"," queued"),p&&h&&a.a.createElement(Jh,{position:o}))}));var eg=Object(s.a)((function(e){return{data:Object(Ih.e)(e),speciesPredictionComplete:Object(Th.i)(e)}}))((function(e){var t=e.data,n=e.speciesPredictionComplete;return a.a.createElement("ul",{className:"wgsa-upload-legend"},t.map((function(e){var t=e.key,r=e.label,o=e.total,i=e.colour,c=e.analyses,l=void 0===c?[]:c;return a.a.createElement("li",{key:t},a.a.createElement("span",{className:"pw-with-icon wgsa-upload-legend-header"},a.a.createElement("i",{className:"material-icons",style:{color:i}},"lens"),a.a.createElement("strong",{className:"wgsa-upload-legend-organism",title:r},r),a.a.createElement("span",{className:"wgsa-upload-legend-count"},o.toLocaleString())),a.a.createElement("ul",null,l.map((function(e){return"speciator"===e.key?null:e.label?a.a.createElement("li",{key:e.key,className:"pw-with-icon"},e.label,!!e.source&&a.a.createElement(a.a.Fragment,null," ",a.a.createElement("small",null,"(",e.source,")")),a.a.createElement("span",{className:"wgsa-upload-legend-count aligned"},e.errors>0&&a.a.createElement("span",{className:"wgsa-upload-legend-count-errors"}," ",e.errors," error",1===e.errors?"":"s"),n&&e.total===o?a.a.createElement("i",{className:d()("material-icons",{success:!(e.errors>0)})},e.errors>0?"error_outline":"check_circle"):e.total)):null}))))})))})),tg=Object(xe.createSelector)(Uh.a,Rh.e,(function(e,t){return e+t})),ng=Object(xe.createSelector)(Uh.c,Uh.a,Zh.a,(function(e){return(t=e,t.upload.progress.errors).showing;var t}),(function(e,t,n,r){return n>0&&0===e&&t===n||!!r}));var rg=Object(s.a)((function(e){return{files:Object(Uh.f)(e),sessionIsLoading:Object(Th.h)(e),sessionHasReads:Object(Zh.f)(e),showErrors:ng(e),showSpeciesBreakdown:Object(Ih.f)(e),uploadsInProgress:Object(Th.e)(e),uploadsPending:Object(Uh.k)(e)}}))((function(e){var t=e.files,n=e.sessionIsLoading,r=e.sessionHasReads,o=e.showErrors,i=e.showSpeciesBreakdown,c=e.uploadedAt,l=e.uploadsInProgress,s=e.uploadsPending;return a.a.createElement(a.a.Fragment,null,a.a.createElement(Mh,{uploadedAt:c}),r&&a.a.createElement(Gh,{uploadedAt:c}),a.a.createElement(H,{complete:!n,placeholder:a.a.createElement("div",{className:"pw-centre-text"},a.a.createElement(G.a,null))},a.a.createElement("div",{className:"wgsa-upload-progress pw-upload-page"},a.a.createElement(_h.a,{when:s,message:'\n          Your upload is not complete.\n          Return to "Previous Uploads" to resume this session at a later date.\n        '}),a.a.createElement("div",null,a.a.createElement("div",{className:"wgsa-section-divider"},s?a.a.createElement(Yh,{pending:t.pending,uploadsInProgress:l}):a.a.createElement($h,{completedUploads:t.completed})),i&&a.a.createElement("div",{className:"wgsa-section-divider"},a.a.createElement(eg,null))),a.a.createElement("div",{className:"wgsa-section-divider wgsa-flex-section"},a.a.createElement(O.a,{className:"pw-expand"},o?a.a.createElement(Hh,{key:"errors"}):a.a.createElement(Dh,{key:"analysis",uploadedAt:c}))))))})),ag=n(334);var og=Object(s.a)((function(e){var t=tg(e);return{numProblems:t,visible:!Object(Th.h)(e)&&t>0}}),(function(e){return{onClick:function(){return e(Object(ag.b)())}}}))((function(e){var t=e.visible,n=e.numProblems,r=e.onClick;return a.a.createElement(O.a,null,t&&a.a.createElement("button",{className:"pw-pill pw-pill-danger pw-uppercase",onClick:r},n," problem",1===n?"":"s"))})),ig=a.a.createClass({displayName:"Component",getTitle:function(){var e=this.props.summary;return[e.total?"(".concat(e.completed,"/").concat(e.total,")"):"","Upload"].join(" ")},render:function(){var e=this.props,t=e.uploadedAt,n=e.isUploading;return a.a.createElement(a.a.Fragment,null,a.a.createElement(ee.a,null,this.getTitle()),a.a.createElement(dh,null,!n&&a.a.createElement("a",{className:"mdl-button",onClick:function(){return window.history.back()}},a.a.createElement("i",{className:"material-icons"},"arrow_back")," Go back"),a.a.createElement("div",{className:"pw-upload-summary-column"},a.a.createElement(og,null),a.a.createElement("p",{className:"pw-upload-session-time"},Object(q.b)(t)))))}});var cg=Object(s.a)((function(e){return{summary:Uh.f(e),isUploading:Uh.l(e)}}))(ig),lg=(n(1159),n(238)),sg=n(68);var ug=Ch();var dg=Object(s.a)((function(e){return{numSuccessful:Object(Uh.d)(e),remainingFiles:Object(lg.c)(e)}}),(function(e,t){var n=t.session;return{onFiles:function(t){return e(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n,r){var a=r(),o=Object(eh.a)(a),i=Object(lg.b)(a),c=new Set(Object.keys(i)),l=e.filter((function(e){return c.has(e.name)}));0!==l.length?Oh(l,o).then((function(e){var r=!0,a=!1,o=void 0;try{for(var l,s=function(){var e=l.value,n=void 0;if(e.files){var r=!0,a=!1,o=void 0;try{for(var s,u=e.files[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var d=s.value;c.delete(d.name),n=n||i[d.name]}}catch(e){a=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}}if(n){e.id=n;var m=t.find((function(e){return e.genomeId===n}));m&&(e.recovery=m.files)}},u=e[Symbol.iterator]();!(r=(l=u.next()).done);r=!0)s()}catch(e){a=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(a)throw o}}c.size>0?n({type:"UPLOAD_ERROR_MESSAGE",payload:{type:"MISSING_FILES",data:Array.from(c)}}):(n({type:Wf.a.SUCCESS,payload:{genomes:e}}),n(Object(sg.e)()))})).catch((function(e){n({type:"UPLOAD_ERROR_MESSAGE",payload:e.message})})):n({type:"UPLOAD_ERROR_MESSAGE",payload:"No matching files for this session, please try again."})}}(t,n))}}}))((function(e){var t=e.onFiles,n=e.numSuccessful,r=e.remainingFiles;return a.a.createElement(Qf,{onFiles:t,readsEligible:ug,accept:wh(ug)},a.a.createElement("section",{className:"pw-upload-page pw-upload-recovery"},a.a.createElement("h1",null,"Recover this session."),n>0&&a.a.createElement("p",{className:"pw-with-icon success"},a.a.createElement("i",{className:"material-icons"},"check_circle"),n," genome",1===n?"":"s"," uploaded successfully"),a.a.createElement("p",null,"Please drag and drop these files to continue:"),a.a.createElement("ul",{className:"pw-upload-recovery-files"},r.map((function(e){return a.a.createElement("li",{key:e[0]},a.a.createElement("span",{className:"wgsa-file-icon"},a.a.createElement("i",{className:"material-icons"},1===e.length?"insert_drive_file":"file_copy")),a.a.createElement("ul",null,e.map((function(e){return a.a.createElement("li",{key:e},e)}))))})))))}));var mg=Object(s.a)((function(e){return{token:e.auth.token}}))((function(e){var t=e.uploadedAt,n=e.token;lh(),ih(n);var r=function(e,t){var n=a.a.useState(null),r=B()(n,2),o=r[0],i=r[1],c=a.a.useState(null),l=B()(c,2),s=l[0],u=l[1];return a.a.useEffect((function(){t&&Object(zh.b)(e,t).then((function(e){return i(e.progress)})).catch((function(e){"NOT_FOUND"===e.type?u({message:a.a.createElement(a.a.Fragment,null,a.a.createElement("p",null,"We couldn't find the details of this upload session."),a.a.createElement("p",null,"If the problem persists, you may need to start a new upload."))}):u(e)}))}),[e,t]),[o,s]}(t,n),o=B()(r,2),i=o[0],c=o[1];return a.a.createElement(H,{complete:i||c,placeholder:a.a.createElement("section",{className:"pw-upload-page pw-centre-text"},a.a.createElement(G.a,null))},c?a.a.createElement("section",{key:"error",className:"pw-upload-page"},a.a.createElement("h1",null,"Sorry, there's a problem."),"string"==typeof c.message?a.a.createElement("p",null,c.message):c.message):a.a.createElement(dg,{key:"loaded",session:i}))}));var pg=Object(s.a)((function(e){return{sessionHasReads:Object(Zh.f)(e)}}))((function(e){var t=e.uploadedAt,n=e.sessionHasReads;return Ch()&&n?a.a.createElement(mg,{uploadedAt:t}):a.a.createElement(dg,null)})),fg=n(89),hg=a.a.createClass({displayName:"Component",componentWillMount:function(){var e=this.props,t=e.isUploading,n=e.startUpload,r=e.fetch;t?n():r()},componentDidUpdate:function(e){var t=e.isUploading&&!this.props.isUploading,n=!1===e.isSpecieationComplete&&this.props.isSpecieationComplete;(t||n)&&this.props.fetch()},componentWillUnmount:function(){this.props.reset()},renderContent:function(){var e=this.props,t=e.match,n=e.uploadedAt;if(t.params.uploadedAt!==n)return null;switch(this.props.view){case fh.b.RECOVERY:return a.a.createElement(pg,{uploadedAt:n});case fh.b.PROGRESS:return a.a.createElement(rg,{uploadedAt:n});default:return null}},render:function(){return a.a.createElement(a.a.Fragment,null,a.a.createElement(cg,{uploadedAt:this.props.uploadedAt}),this.renderContent())}});var gg=Object(s.a)((function(e){return{uploadedAt:Object(Th.d)(e),isUploading:Object(Uh.k)(e),isSpecieationComplete:Object(Th.i)(e),view:Object(Th.c)(e)}}),(function(e,t){var n=t.match.params.uploadedAt;return{fetch:function(){return e(Object(fg.c)(n))},startUpload:function(){return e(Object(sg.e)())},reset:function(){return e(Object(fg.d)())}}}))(hg);var vg=Object(s.a)((function(e){return{uploading:Object(Uh.l)(e),uploadedAt:Object(Th.d)(e)}}))((function(e){var t=e.uploading,n=e.uploadedAt;return e.match.isExact&&t?a.a.createElement($p.a,{to:"".concat("/upload","/").concat(n)}):a.a.createElement("div",{className:"wgsa-hipster-style"},a.a.createElement(Zr.a,null,a.a.createElement(i.a,{path:"".concat("/upload","/previous"),component:xh}),a.a.createElement(i.a,{path:"".concat("/upload","/:uploadedAt"),component:gg}),a.a.createElement(i.a,{component:Nh})),a.a.createElement(Zf,null))})),bg=a.a.createElement(nf,{authMessage:"Please sign in to upload genomes.",path:"/upload",component:vg}),yg=Object(s.a)()(a.a.createClass({goBack:function(e){window.history&&(e.preventDefault(),window.history.back())},render:function(){return a.a.createElement("div",{className:"mdl-layout wgsa-loading-container wgsa-not-found"},a.a.createElement("div",{className:"wgsa-loading-content"},a.a.createElement("a",{href:"/"},a.a.createElement(Q,{className:"wgsa-loading-logo"})),a.a.createElement("h1",null,"These aren't the bacteria you're looking for."),a.a.createElement("p",null,"(This page could not be found)"),a.a.createElement("a",{className:"mdl-button",onClick:this.goBack,href:"#"},"Go back")))}})),Eg=function(e){var t=e.from,n=e.to;return a.a.createElement(i.a,{exact:!0,path:t,render:function(e){var t=e.location;return a.a.createElement($p.a,{to:"".concat(n).concat(t.search)})}})},Og=function(e){var t=e.from,n=e.to;return a.a.createElement(i.a,{exact:!0,path:t,render:function(){window&&window.location&&(window.location=n)}})},Cg=function(){return a.a.createElement(Zr.a,null,wf,Vd,Qp,mm,Yp,Tf,ea.a,Lf.a,Lf.c,qf,bg,a.a.createElement(Og,{from:"/documentation",to:"https://cgps.gitbook.io/pathogenwatch/"}),a.a.createElement($p.a,{from:"/index.html",to:"/"}),a.a.createElement($p.a,{from:"/collections/*",to:"/collections/all"}),a.a.createElement(Eg,{from:"/collections",to:"/collections/all"}),",",a.a.createElement($p.a,{from:"/genomes/*",to:"/genomes/all"}),a.a.createElement(Eg,{from:"/genomes",to:"/genomes/all"}),a.a.createElement($p.a,{from:"/:organism/upload",to:"/upload"}),Lf.b,a.a.createElement(i.a,{exact:!0,path:"/:organism/collection/:token",render:function(e){var t=e.match,n={pathname:"/collection/".concat(t.params.token),state:{organism:t.params.organism}};return a.a.createElement($p.a,{to:n})}}),a.a.createElement(i.a,{path:"/",component:yg}))},wg=(n(1161),function(e){var t=e.appName,n=void 0===t?"Microreact":t,r=e.visible,o=void 0===r||r,i=e.policyLink,c=e.onAccept,l=e.className;return a.a.createElement(Lt.a,{visible:o,transitionAppear:!0,removeOnLeave:!0,motionName:"libmr"},(function(e){return a.a.createElement("aside",{className:d()("libmr-CookieConsent",l,e.className)},a.a.createElement("div",{className:"libmr-CookieConsent-message"},a.a.createElement("h2",null,"We use cookies to give you the best online experience."),a.a.createElement("p",null,"By using ",n,", you agree to our use of cookies in accordance with our cookie policy."),a.a.createElement("div",{className:"libmr-CookieConsent-actions"},i,a.a.createElement("button",{onClick:c},"Accept"))))}))});wg.propTypes={appName:_t.a.string,className:_t.a.string,onAccept:_t.a.func,policyLink:_t.a.node,visible:_t.a.bool};var Sg=wg,jg="cookie-consent-given",Ng=a.a.createClass({displayName:"Cookies",getInitialState:function(){return{checked:!1,consented:!1}},componentWillMount:function(){var e=this;localforage.getItem(jg).then((function(t){e.setState({checked:!0,consented:t})}))},onAccept:function(){var e=this;localforage.setItem(jg,!0).then((function(){return e.setState({consented:!0})}))},render:function(){return this.state.checked?a.a.createElement(Sg,{visible:!this.state.consented,onAccept:this.onAccept,appName:"Pathogenwatch",theme:"purple",policyLink:a.a.createElement("a",{target:"_blank",rel:"noopener",href:"https://cgps.gitbook.io/pathogenwatch/privacy-and-tos",className:"mdl-button"},"Read our policy")}):null}});n(1163);function Pg(e){var t=e.user;return t?a.a.createElement(le.a,{className:"cgps-avatar cgps-avatar--top wgsa-account-header",to:"/account"},a.a.createElement(bf,null),a.a.createElement("div",{className:"cgps-avatar__name",title:t.name},t.name),a.a.createElement("div",{className:"cgps-avatar__contact",title:t.email},t.email)):a.a.createElement("div",{className:"cgps-avatar cgps-avatar--top wgsa-account-header"},a.a.createElement(bf,null),a.a.createElement("div",{className:"cgps-avatar__name"},a.a.createElement(Z,null)),a.a.createElement("div",{className:"cgps-avatar__contact",title:"Browsing anonymously"},"Browsing anonymously"))}var kg=n(308),xg=ye.a.user,_g=a.a.createClass({displayName:"UserDrawer",propTypes:{visible:a.a.PropTypes.bool,closeMenu:a.a.PropTypes.func},componentDidMount:function(){window.addEventListener("keyup",this.handleEscKey)},componentDidUpdate:function(e){e.location!==this.props.location&&this.props.visible&&this.props.closeMenu()},componentWillUnmount:function(){window.removeEventListener("keyup",this.handleEscKey)},handleEscKey:function(e){27===e.keyCode&&this.props.visible&&this.props.closeMenu()},handleSignOut:function(e){e.preventDefault(),Object(qr.e)().then((function(){window.location.pathname="/signout"}))},render:function(){var e=this.props.summary,t=e.allCollections,n=e.allGenomes,r=e.binnedGenomes,o=e.userCollections,i=e.userGenomes,c=e.offlineCollections,l=void 0===c?0:c,s=e.binnedCollections;e.numOrganisms;return a.a.createElement("div",{className:d()("mdl-layout__obfuscator",{"is-visible":this.props.visible}),onClick:this.props.closeMenu,onKeyUp:this.handleEscKey},a.a.createElement("div",{className:d()("mdl-layout__drawer",{"is-visible":this.props.visible}),onClick:function(e){return e.stopPropagation()}},a.a.createElement("div",{className:"wgsa-drawer-content"},a.a.createElement("span",{className:"mdl-layout-title"},a.a.createElement(Pg,{user:xg}),a.a.createElement($,null),ye.a.version&&a.a.createElement("a",{href:"".concat("https://cgps.gitbook.io/pathogenwatch","/release-notes/#").concat(ye.a.version),target:"_blank",rel:"noopener",className:"wgsa-version"},ye.a.version)),a.a.createElement("nav",{className:"mdl-navigation"},xg?a.a.createElement($r.d,{to:"/account",icon:"account_circle"},"My Account"):a.a.createElement($r.d,{to:"/sign-in",icon:"verified_user"},"Sign In")),a.a.createElement("hr",null),a.a.createElement("nav",{className:"mdl-navigation"},a.a.createElement("h2",{className:"wgsa-navigation-header"},"Genomes"),a.a.createElement($r.d,{to:"/genomes/all",badge:n,icon:a.a.createElement(kg.a,null)},xg?"All":"Public"," Genomes"),xg&&a.a.createElement($r.d,{to:"/genomes/user",badge:i,icon:"person"},"My Genomes"),xg&&a.a.createElement($r.d,{to:"/genomes/bin",badge:r,icon:"delete"},"Bin"),a.a.createElement($r.d,{to:"/upload",icon:"cloud_upload"},"Upload")),a.a.createElement("hr",null),a.a.createElement("nav",{className:"mdl-navigation"},a.a.createElement("h2",{className:"wgsa-navigation-header"},"Collections"),a.a.createElement($r.d,{to:"/collections/all",badge:t,icon:"collections"},xg?"All":"Public"," Collections"),xg&&a.a.createElement($r.d,{to:"/collections/user",badge:o,icon:"person"},"My Collections"),a.a.createElement($r.d,{to:"/offline",badge:l,icon:"signal_wifi_off"},"Offline Collections"),xg&&a.a.createElement($r.d,{to:"/collections/bin",badge:s,icon:"delete"},"Bin")),a.a.createElement("hr",null),a.a.createElement("nav",{className:"mdl-navigation"},a.a.createElement($r.d,{to:"https://cgps.gitbook.io/pathogenwatch",external:!0,icon:"help"},"Documentation"),a.a.createElement($r.d,{to:"https://gitlab.com/cgps/pathogenwatch/roadmap",external:!0,icon:"feedback"},"Feedback")),xg&&a.a.createElement("nav",{className:"mdl-navigation"},a.a.createElement("a",{href:"/signout",className:"mdl-navigation__link",onClick:this.handleSignOut},a.a.createElement("i",{className:"material-icons"},"exit_to_app"),a.a.createElement("span",null,"Sign Out"))),a.a.createElement("footer",{className:"wgsa-menu-footer"},a.a.createElement("a",{className:"cgps-logo",target:"_blank",rel:"noopener",href:"http://www.pathogensurveillance.net"},a.a.createElement("img",{src:"/images/cgps-short.svg"})),a.a.createElement("a",{className:"contact-email",href:"mailto:cgps@sanger.ac.uk"},"cgps@sanger.ac.uk")))))}});var Ig=Object(s.a)((function(e){return{summary:Object(yf.b)(e),location:e.location}}),(function(e){return{closeMenu:function(){return e(Object(Xr.c)(!1))}}}))(_g);function Tg(){return function(e){localforage.getItem("cookie-consent-given").then((function(t){t||e(Object(m.c)({message:a.a.createElement("span",null,"🍪 This website uses cookies for a better browsing experience."),action:{label:a.a.createElement("span",null,"That's OK"),onClick:function(){return function(e){localforage.setItem("cookie-consent-given",!0).then((function(){return e(Object(m.b)())}))}(e)}},closeButton:!1,autohide:!1}))}))}}var Lg=Object(s.a)((function(e){var t=e.location,n=e.header;return{pageSlug:t.slug,userDrawerVisible:n.userDrawerVisible}}),(function(e,t){var n=t.location;return{onLocationChange:function(){return e(Object($r.e)(n))},fetchSummary:function(){return e(Object(k.b)())},showIntroToast:function(){return e(Tg())}}}))(a.a.createClass({displayName:"App",propTypes:{children:a.a.PropTypes.element},componentDidMount:function(){componentHandler.upgradeDom(),this.menuButton=document.querySelector(".mdl-layout__drawer-button"),this.onLocationChange(),this.props.fetchSummary()},componentDidUpdate:function(e){this.props.location!==e.location&&this.onLocationChange()},onLocationChange:function(){var e=this.props,t=e.location,n=e.history;navigator.onLine||/^\/(offline|collection\/)/.test(t.pathname)?this.props.onLocationChange():"/offline"!==t.pathname&&n.replace("/offline")},componentDidCatch:function(e){console.log(e)},render:function(){var e=this.props,t=e.pageSlug,n=e.userDrawerVisible;return a.a.createElement("div",{className:"mdl-layout__container"},a.a.createElement("div",{ref:"layout",className:d()("mdl-layout","wgsa-page--".concat(t),{"user-drawer-visible":n})},a.a.createElement(Jp,null),a.a.createElement("main",{className:"mdl-layout__content"},a.a.createElement(Cg,null)),a.a.createElement(Ig,{visible:n}),a.a.createElement(m.a,null),a.a.createElement(Kr,null),a.a.createElement(Yr,null),a.a.createElement(Ng,null)))}}));n.d(t,"b",(function(){return Ag}));var Ag=l()();t.a=function(){return a.a.createElement(o.a,{history:Ag},a.a.createElement(i.a,{component:Lg}))}},function(e,t,n){"use strict";var r=n(26),a=n.n(r),o=n(0),i=n.n(o),c=n(914),l=n(499),s=(n(986),n(4)),u=n(386),d=n(12),m=n(99),p=n(279),f=n(52),h=n(60),g=n(3),v=function(e){return e.organisms},b=function(e,t){return e>t?1:e<t?-1:0},y=Object(g.createSelector)(v,(function(e){return e.supportedOrganisms.sort((function(e,t){return b(d.d.get(e.organismId).name,d.d.get(t.organismId).name)}))})),E=Object(g.createSelector)(v,(function(e){return e.allSpecies.sort((function(e,t){return b(e.speciesName,t.speciesName)}))})),O=n(197);var C=function(e){var t=e.item,n=t.organismId,r=t.totalCollections,a=t.totalGenomes,o=t.organism,c=void 0===o?d.d.get(n):o;return i.a.createElement(u.a,{key:n,className:"wgsa-organism-card wgsa-card wgsa-card--bordered",to:"/organisms/".concat(c.nickname),title:"".concat(c.name," Homepage")},i.a.createElement("h3",{className:"wgsa-section-title"},i.a.createElement(d.a,{organismId:n})),i.a.createElement(m.a,{icon:"wgsa_genome"},i.a.createElement(u.a,{to:"/genomes?organismId=".concat(n),title:"Browse Genomes"},a," Genome",1===a?"":"s")),i.a.createElement(m.a,{icon:"collections"},i.a.createElement(u.a,{to:"/collections?organismId=".concat(n),title:"Browse Collections"},r," Collection",1===r?"":"s")))},w=function(e){var t=e.item,n=t.speciesId,r=t.speciesName,a=t.totalGenomes;return i.a.createElement("div",{key:n,className:"wgsa-organism-card wgsa-card wgsa-card--bordered"},i.a.createElement("h3",{className:"wgsa-section-title"},i.a.createElement("em",null,r)),i.a.createElement(m.a,{icon:"wgsa_genome"},i.a.createElement(u.a,{to:"/genomes?speciesId=".concat(n),title:"Browse Genomes"},a," Genome",1===a?"":"s")))},S=i.a.createClass({displayName:"Index",componentDidMount:function(){this.props.fetch()},render:function(){var e=this.props,t=e.loading,n=e.supportedOrganisms,r=e.allSpecies;return i.a.createElement("div",{className:"wgsa-page"},i.a.createElement(h.a,null,"Organisms"),i.a.createElement("h1",null,"Organisms"),t&&i.a.createElement(f.a,null),!!n.length&&i.a.createElement("h2",null,"Supported Organisms"),i.a.createElement(p.a,{density:"compact",items:n,template:C,keyProp:"organismId"}),!!r.length&&i.a.createElement("h2",null,"All Species"),i.a.createElement(p.a,{density:"compact",items:r,template:w,keyProp:"organismId"}))}}),j=Object(s.a)((function(e){return{loading:e.organisms.loading,supportedOrganisms:y(e),allSpecies:E(e)}}),(function(e){return{fetch:function(){return e(Object(O.b)())}}}))(S),N=(n(992),n(2)),P=n.n(N),k=function(e){var t=e.children;return i.a.createElement("div",{className:"wgsa-page-breadcrumb"},t.map((function(e,n){return n<t.length-1?i.a.createElement("span",{key:n},e," » "):i.a.createElement("span",{key:n},e)})))};function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _=i.a.createClass({displayName:"Details",componentDidMount:function(){this.props.fetch()},render:function(){var e=this.props,t=e.organismId,n=e.totalGenomes,r=e.totalCollections,a=d.d.get(t),o=a.nickname,c=a.formattedName,l=a.definitionText,s=a.desc,m=a.imageCredit,p=a.taxonomy,f=a.name;return i.a.createElement("div",{className:"wgsa-page mdl-grid"},i.a.createElement(h.a,null,f),i.a.createElement("div",{className:"mdl-cell mdl-cell--12-col"},i.a.createElement(k,null,i.a.createElement(u.a,{to:"/organisms"},"Organisms"),c),i.a.createElement("h1",{className:"wgsa-page-divider wgsa-page-title"},c),i.a.createElement("p",null,l)),i.a.createElement("div",{className:"mdl-cell mdl-cell--3-col"},i.a.createElement("div",{className:"wgsa-section-divider mdl-typography--text-center"},i.a.createElement("p",{className:"wgsa-avatar-image"},i.a.createElement("img",{src:"/images/".concat(o,".jpg")})),m&&i.a.createElement("p",null,i.a.createElement("strong",null,"Image:")," ",m),i.a.createElement("p",null,i.a.createElement("strong",null,"Taxonomy ID:")," ",t),i.a.createElement("p",null,i.a.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?mode=Tree&id=".concat(t),target:"_blank",rel:"noopener"},"View in NCBI taxonomy browser")))),i.a.createElement("div",{className:"mdl-cell mdl-cell--6-col"},i.a.createElement("div",{className:"wgsa-section-divider"},i.a.createElement("h2",{className:"wgsa-section-title"},"About"),s),i.a.createElement("div",{className:"wgsa-section-divider"},i.a.createElement("h2",{className:"wgsa-section-title"},"Taxonomy"),i.a.createElement("ul",null,p.map((function(e){var t=e.taxId,n=e.scientificName,r=e.rank;return i.a.createElement("li",{key:t},i.a.createElement("a",{href:"https://www.ncbi.nlm.nih.gov/Taxonomy/Browser/wwwtax.cgi?mode=Info&id=".concat(t),target:"_blank",rel:"noopener"},n),"no rank"!==r&&" (".concat(r,")"))}))))),i.a.createElement("div",{className:"mdl-cell mdl-cell--3-col"},i.a.createElement("div",{className:"wgsa-section-divider"},i.a.createElement("h3",{className:"wgsa-section-title"},"Genomes"),i.a.createElement(u.a,{className:"wgsa-figure",to:"/genomes?organismId=".concat(t),title:"Browse Genomes"},n)),i.a.createElement("div",{className:"wgsa-section-divider"},i.a.createElement("h3",{className:"wgsa-section-title"},"Collections"),i.a.createElement(u.a,{className:"wgsa-figure",to:"/collections?organismId=".concat(t),title:"Browse Collections"},r)),i.a.createElement("div",{className:"wgsa-section-divider"},i.a.createElement("h3",{className:"wgsa-section-title"},"Reference Downloads"),i.a.createElement("ul",null,i.a.createElement("li",null,i.a.createElement("a",{href:"/download/organism/".concat(o,"/core_representatives.csv")},"Core Representatives")),i.a.createElement("li",null,i.a.createElement("a",{href:"/download/organism/".concat(o,"/reference_fastas.zip")},"Sequences")),i.a.createElement("li",null,i.a.createElement("a",{href:"/download/organism/".concat(o,"/reference_annotations.zip")},"Annotations")),i.a.createElement("li",null,i.a.createElement("a",{href:"/download/organism/".concat(o,"/reference_metadata.csv")},"Metadata"))))))}}),I=Object(s.a)((function(e,t){var n=t.organismId;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){P()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},y(e).find((function(e){return e.organismId===n.toString()})))}),(function(e){return{fetch:function(){return e(Object(O.b)())}}}))(_);n.d(t,"b",(function(){return A})),n.d(t,"a",(function(){return D}));var T=n(416),L="/organisms",A=T.map((function(e){var t=e.nickname;return i.a.createElement(c.a,{key:"".concat(t,"-redirect"),exact:!0,from:"/".concat(t),to:"".concat(L,"/").concat(t)})})),D=T.map((function(e){var t=e.id,n=e.nickname;return i.a.createElement(l.a,{key:n,path:"".concat(L,"/").concat(n),component:function(e){return i.a.createElement(I,a()({},e,{organismId:t}))}})}));t.c=i.a.createElement(l.a,{exact:!0,path:L,component:j})},,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r={LOADING:0,SUCCESS:1}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(e,t,n){for(var r=t.length,a=t.map((function(){return 0})),o=r-1;o>=0;o--)n[o]>e?a[o]=o:a[o]=a[t[o]];return a}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var r=n(17),a=n(15),o=n(8),i=Object(r.b)("COLLECTION_CHANGE_ACCESS_LEVEL");function c(e){return function(t,n){var r=n(),c=Object(a.a)(r).token;t({type:i,payload:{promise:Object(o.a)("POST","/api/collection/".concat(c,"/access"),{access:e}),access:e}})}}},,,,function(e,t,n){"use strict";var r=n(17),a=n(8);n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return i}));var o=Object(r.b)("FETCH_ACCOUNT_ACTIVITY");function i(){return{type:o,payload:{promise:Object(a.a)("GET","/api/account/activity")}}}},,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return i}));var r=n(8);function a(e){return Object(r.a)("GET","/api/collection",e)}function o(e){return Object(r.a)("GET","/api/collection/summary",e)}function i(e,t){return Object(r.a)("POST","/api/collection/".concat(e,"/binned"),{status:t})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return m})),n.d(t,"c",(function(){return f}));var r=n(6),a=n.n(r),o=n(15),i=n(71),c=n(8),l=n(100),s=n(81),u="SET_OFFLINE_STATUS";function d(e){return{type:u,payload:{status:e}}}function m(){return function(e,t){var n=t(),r=Object(o.a)(n).uuid;return e(d(l.a.SAVING)),Promise.all([navigator.serviceWorker.getRegistrations(),caches.has(Object(s.a)(r))]).then((function(e){var t=a()(e,2),n=t[0],r=t[1];return n.length&&r})).then((function(t){return e(d(t?l.a.SAVED:l.a.UNSAVED))})).catch((function(t){console.error(t),e(d(l.a.ERRORED))}))}}function p(e,t){var n=Object(c.c)("/api/collection/".concat(t));return fetch(n,{credentials:"include"}).then((function(t){return t.ok?e.put(n,t):Promise.reject(new Error("Failed to fetch collection data"))}))}function f(){return function(e,t){var n=t(),r=Object(o.a)(n),a=r.uuid,u=r.token,m=Object(i.c)(n),f=Object(s.a)(a);e(d(l.a.SAVING)),navigator.serviceWorker.register("/service-worker.js").then((function(){return caches.open(f)})).then((function(e){return Promise.all([p(e,u),e.addAll(m.map((function(e){return Object(c.c)("/api/collection/".concat(u,"/tree/").concat(encodeURIComponent(e)))})))])})).then((function(){return Object(s.f)(r)})).then((function(){return window.location.reload()})).catch((function(t){throw caches.delete(f),e(d(l.a.ERRORED)),t}))}}},,function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o}));var r=function(e){return{type:"LIBMR PHYLOCANVAS STATE",payload:e}},a=function(e){return{type:"LIBMR TREE LASSO",payload:{lasso:e}}},o=function(e,t){return{type:"LIBMR TREE FILTER",payload:{ids:e,path:t}}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return c}));var r=n(8),a=n(18).a.clientId;function o(e,t,n){var o=e.id;return Object(r.b)("PUT","/api/genome/".concat(o,"/assembly?").concat($.param({clientId:a})),t instanceof Uint8Array?"application/zip":"text/plain",t,n)}function i(e){return Object(r.a)("POST","/api/genome/".concat(e,"/uploaded"))}function c(e,t){return Object(r.a)("POST","/api/genome/".concat(e),t)}},function(e,t,n){"use strict";n(990);var r=n(0),a=n.n(r),o=n(5),i=n.n(o),c=function(e){var t=e.items,n=e.template,r=e.keyProp,o=e.density,c=void 0===o?"comfortable":o;return a.a.createElement("div",{className:i()("wgsa-static-grid","wgsa-".concat(c,"-grid"))},t.map((function(e){return a.a.createElement(n,{key:e[r],item:e})})))};n.d(t,"a",(function(){return c}))},,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r="COLLECTION",a="GENOME"},,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(4),i=n(104),c=n(176),l=n(136);t.default=Object(o.a)((function(e,t){var n=t.organismId,r=t.title,a=Object(i.a)(e);return{isDeployed:Object(c.b)()||!r?l.taxIdMap.has(n):a&&a.has(n)}}))((function(e){var t=e.isDeployed,n=e.organismId,r=e.title,o=e.shortName,i=void 0!==o&&o,c=e.children,s=void 0===c?r:c;return a.a.createElement("span",{title:r},t?l.taxIdMap.get(n)[i?"formattedShortName":"formattedName"]:s)}))},,,,,,,,,function(e,t,n){"use strict";var r=n(2),a=n.n(r),o=n(0),i=n.n(o),c=n(5),l=n.n(c);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){var t=e.item,n=e.onClick,r=e.renderLabel,a=t.value,o=t.label,c=void 0===o?a:o,s=t.title,u=void 0===s?c:s,d=t.count,m=t.active;return i.a.createElement("button",{title:u,className:l()("mdl-chip mdl-chip--contact",{"mdl-chip--active":m}),onClick:function(){return n(a)}},i.a.createElement("span",{className:"mdl-chip__contact"},function(e){return e>9999?"".concat(Math.round(e/1e3),"K"):e}(d)),i.a.createElement("span",{className:"mdl-chip__text"},r(t)))};function m(e){var t=e.autoSelect,n=void 0===t||t,r=e.filterActive,a=e.summary,o=void 0===a?[]:a,i=e.totalVisible;return r&&1===o.length&&o[0].count===i&&n?o[0]:o.find((function(e){return e.active}))}function p(e){var t=e.children,n=e.disabled,r=e.hidden,a=e.summary;return!t&&(!!r||!n&&0===(void 0===a?[]:a).length)}var f=i.a.createClass({displayName:"FilterSection",getInitialState:function(){return{activeItem:m(this.props),isHidden:p(this.props),isOpen:!1}},componentWillReceiveProps:function(e){var t=this.state,n=t.activeItem,r=t.isHidden,a=t.isOpen;this.setState({activeItem:e.isLoading&&!n?n:m(e),isHidden:e.isLoading?r:p(e),isOpen:!e.isLoading&&a})},componentDidUpdate:function(e,t){!t.isOpen&&this.state.isOpen&&this.itemFilterInput&&(componentHandler.upgradeElement(this.itemFilterInput.parentElement),this.itemFilterInput.focus())},toggle:function(e){this.setState({isOpen:!e})},render:function(){var e=this;if(this.state.isHidden)return null;var t=this.props,n=t.children,r=t.filterKey,a=t.heading,o=t.icon,c=t.summary,s=void 0===c?[]:c,m=t.updateFilter,p=t.renderLabel,f=void 0===p?function(e){var t=e.value,n=e.label;return void 0===n?t:n}:p,h=this.state,g=h.activeItem,v=h.isOpen,b=function(e){return m(r,e)};if(g){var y=g.value,E=g.label,O=void 0===E?y:E,C=g.title,w=g.activeTitle,S=void 0===w?C:w,j=!g.active,N=S||"".concat(a,": ").concat(O);return j&&(N+=" (selected automatically)"),i.a.createElement("section",{className:"wgsa-filter-section is-active",style:j?void 0:{cursor:"pointer"}},i.a.createElement("header",{title:N,onClick:j?null:function(){return b(y)}},i.a.createElement("i",{className:"material-icons",title:a},o),i.a.createElement("span",null,f(u({},g,{active:!0}))),!j&&i.a.createElement("i",{className:"material-icons"},"filter_list")))}var P=this.props,k=P.disabled,x=P.disabledText,_=P.className,I=P.headerComponent;return k?i.a.createElement("section",{className:"wgsa-filter-section is-disabled"},i.a.createElement("header",{title:x},i.a.createElement("i",{className:"material-icons",title:a},o),i.a.createElement("span",null,a))):i.a.createElement("section",{className:l()("wgsa-filter-section",_,{"is-open":v})},i.a.createElement("header",{onClick:function(){return e.toggle(v)}},i.a.createElement("i",{className:"material-icons",title:a},o),I?i.a.createElement(I,u({},this.props,{isOpen:v})):i.a.createElement("span",null,a),i.a.createElement("button",{className:"mdl-button mdl-button--icon"},i.a.createElement("i",{className:"material-icons"},v?"expand_less":"expand_more"))),v&&i.a.createElement(i.a.Fragment,null,n||s.map((function(e){return e.active?null:i.a.createElement(d,{key:e.value,item:e,onClick:b,renderLabel:f})}))))}});t.a=f},function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(91);t.a=a.a.createClass({displayName:"Hit.react",componentDidMount:function(){var e=this.props.id;Object(o.b)(e)&&window&&window.Clipboard&&(this.clipboard=new window.Clipboard(this.el,{text:function(){return e}}))},render:function(){var e=this,t=this.props,n=t.id,r=t.showNovelHash;return Object(o.b)(n)?a.a.createElement("span",{ref:function(t){e.el=t},onClick:function(e){return e.stopPropagation()},className:"wgsa-mlst-profile-hit is-novel",title:"Novel allele: ".concat(n,"\n(click to copy)")},"(",r?n.slice(0,4):"novel",")"):a.a.createElement("span",{className:"wgsa-mlst-profile-hit"},n)}})},,,,,,,,,function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(5),i=n.n(o);t.a=function(e){var t=e.moveToBin,n=e.restoreFromBin,r=e.primary,o=e.className,c=e.item,l=void 0===c?{}:c;return"me"!==l.owner?null:l.binned?a.a.createElement("button",{className:"mdl-button mdl-button--icon",onClick:n,title:"Restore from bin"},a.a.createElement("i",{className:"material-icons"},"restore")):r?a.a.createElement("button",{className:"mdl-button mdl-button--primary wgsa-button--text",onClick:t,title:"Move to bin"},"Move to Bin"):a.a.createElement("button",{className:i()("mdl-button mdl-button--icon",o),onClick:t,title:"Move to bin"},a.a.createElement("i",{className:"material-icons"},"delete"))}},,function(e,t,n){"use strict";var r=n(0),a=n.n(r);t.a=function(e){var t=e.title,n=e.viewBox,r=void 0===n?"0 0 64 64":n;return a.a.createElement("svg",{className:"material-icons",title:t,viewBox:r,y:"0px",x:"0px"},a.a.createElement("path",{style:{fill:"currentColor",fillOpacity:1,strokeWidth:.83934414},d:"M 35.804746,32.000009 C 39.48276,29.315777 43.105355,26.464515 45.98011,23.029095 50.083665,18.125646 52.077953,12.685841 52.077953,6.4 H 32 16.373933 11.922047 c 0,6.285841 1.994288,11.725646 6.097843,16.629095 2.874755,3.43542 6.496511,6.286682 10.175364,8.970914 -3.678013,2.684215 -7.300609,5.535475 -10.175364,8.970897 C 13.916335,45.874354 11.922047,51.314159 11.922047,57.6 H 32 47.625242 52.07711 c 0,-6.285841 -1.994288,-11.725646 -6.097,-16.629094 C 43.105355,37.535484 39.4836,34.684224 35.804746,32.000009 Z M 20.260937,18.643515 c -0.982885,-1.376524 -1.813823,-2.848738 -2.452576,-4.451873 -0.419674,-1.053381 -0.754573,-2.16384 -0.996302,-3.338929 H 32 47.187941 c -0.241729,1.175089 -0.576628,2.285548 -0.996301,3.338929 H 32 17.808361 c 0.638753,1.603135 1.469691,3.075349 2.452576,4.451873 H 32 43.739904 c -0.842692,1.180954 -1.79704,2.290572 -2.8353,3.349823 v -0.01045 H 32 23.096238 v 0.01045 c -1.039102,-1.059251 -1.99345,-2.168869 -2.835301,-3.349823 z m 7.928449,7.791641 H 32 35.810614 C 34.577627,27.389482 33.298457,28.324521 32,29.25954 30.701544,28.323681 29.422373,27.389482 28.189386,26.435156 Z M 32,34.741301 c 1.298457,0.935019 2.577627,1.870058 3.810614,2.824384 H 32 28.189386 C 29.422373,36.611359 30.701544,35.67632 32,34.741301 Z m -8.914678,7.276277 H 32 40.913838 c 1.034915,1.055884 1.985055,2.162137 2.825226,3.338907 H 32 20.260937 c 0.839344,-1.17677 1.789468,-2.283023 2.824385,-3.338907 z M 47.187941,53.148114 H 32 16.812059 C 17.053788,51.97304 17.388687,50.862581 17.808361,49.8092 H 32 46.19164 c 0.419673,1.053381 0.754572,2.16384 0.996301,3.338914 z"}))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return u}));var r=n(2),a=n.n(r),o=n(25),i=n.n(o);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s=Symbol("STALE_RESULT"),u=function(){return function(e){return function(t){var n=t.type,r=t.payload;if(!r||!r.promise||!r.promise.then)return e(t);var a=r.promise,o=i()(r,["promise"]);return e((function(e){return e({type:n.ATTEMPT,payload:l({},o)}),a.then((function(t){return t!==s&&e({type:n.SUCCESS,payload:l({result:t},o)}),t}),(function(t){return e({type:n.FAILURE,payload:l({error:t},o)}),t}))}))}}}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o}));var r=n(3),a=function(e){return e.viewer.metadata},o=Object(r.createSelector)(a,(function(e){return Object.keys(e).length}))},function(e,t,n){"use strict";var r=n(2),a=n.n(r),o=n(111),i=n.n(o),c=n(43);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={ids:null,lasso:!1,maxBlockLength:160,maxFontSize:64,maxNodeSize:64,minBlockLength:1,minFontSize:1,minNodeSize:1,path:null,subtreeIds:null,phylocanvas:s({},i.a.defaults,{fontSize:c.a.FONT_SIZE,fontFamily:c.a.FONT,metadata:{blockLength:14,headerFontWeight:"500",showLabels:!1,showHeaders:!1},nodeSize:c.a.NODE_SIZE,padding:32,renderInternalLabels:!1,renderLeafBorders:!0,renderLeafLabels:!1,styleInternalNodes:!1,styleLeafNodes:!0,styleNodeLines:!1,type:"rc"})};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIBMR PHYLOCANVAS STATE":var n=e.ids,r=e.subtreeIds;return t.payload.rootId&&t.payload.rootId!==e.phylocanvas.rootId?(r=t.payload.ids,n=null):Array.isArray(t.payload.ids)&&(n=t.payload.ids),null===t.payload.rootId&&e.phylocanvas.rootId&&(n=null,r=null),s({},e,{ids:n,subtreeIds:r,phylocanvas:s({},e.phylocanvas,{},t.payload,{metadata:s({},e.phylocanvas.metadata,{},t.payload.metadata||{})})});case"LIBMR TREE FILTER":return s({},e,{ids:t.payload.ids||null,path:void 0!==t.payload?t.payload.path:e.path});case"LIBMR TREE LASSO":return s({},e,{lasso:t.payload.lasso,ids:!1===t.payload.lasso?null:e.ids,path:!1===t.payload.lasso?null:e.path});default:return e}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r="TOGGLE_ABOUT_COLLECTION";function a(e){return{type:r,payload:{isOpen:e}}}},,,,,,,,,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r="COLLECTION_SUMMARY_TOGGLE";function a(e){return{type:r,payload:e}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r="SHOW_TIMELINE";function a(){return{type:r,payload:{}}}},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return s}));var r=n(2),a=n.n(r),o=n(8),i=n(173);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t){return Object(o.a)("GET","/api/collection/".concat(e,"/tree/").concat(encodeURIComponent(t))).then((function(e){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{genomes:Object(i.a)(e.genomes)})}))}function s(e){return Object(o.a)("GET","/api/collection/position/".concat(e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r=n(8);function a(e){return Object(r.a)("GET","/api/upload/".concat(e,"/position"))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return l}));var r=n(2),a=n.n(r),o=n(8);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e,t,n){return Object(o.a)("PUT","/api/collection",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({organismId:t},n,{genomeIds:e.map((function(e){return e.id}))}))}function l(e,t){return Object(o.a)("POST","/api/collection/verify",{organismId:t,genomeIds:e.map((function(e){return e.id}))})}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r="SHOW_METRIC";function a(e){return{type:r,payload:{metric:e}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r="UPLOAD_TOGGLE_ERRORS";function a(){return{type:r}}},function(e,t,n){"use strict";function r(e){this.message=e}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i}));var a=/^[ACGTURYKMSWBDHVN]+$/i,o=/^>|^;/;function i(e){for(var t=e.replace(/\r/g,""),n=t.split("\n"),i=!1,c=0;c<n.length;c++){var l=n[c];if(0!==l.length)if(i||">"!==l[0]){if(!o.test(l)){var s=a.test(l);if(!i&&s)throw new r("First contig header not found");if(!s)throw new r("Invalid sequence data at line ".concat(c+1))}}else i=!0}return t}},,function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(491),i=n.n(o),c=n(492),l=n.n(c),s=n(177),u=(n(978),n(980),n(6)),d=n.n(u),m=n(493),p=n.n(m),f=n(5),h=n.n(f),g=n(2),v=n.n(g),b=n(245),y=n.n(b),E=n(254),O=n.n(E),C=n(255),w=n.n(C),S=n(494),j=n.n(S),N=n(495),P=n.n(N),k=n(59);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var _=a.a.createClass({displayName:"MonthYearSelector.react",getInitialState:function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},this.parseDates(this.props))},componentWillReceiveProps:function(e){this.props.editing&&!e.editing?this.update():this.setState(this.parseDates(e))},setMonth:function(e){var t=parseInt(e.target.value,10);this.setState({month:t})},setYear:function(e){var t=parseInt(e.target.value,10);this.setState({year:t})},parseDates:function(e){var t=e.date,n=e.min,r=e.max;return{year:O()(t),minYear:O()(n),maxYear:O()(r),month:w()(t),minMonth:w()(n),maxMonth:w()(r)}},update:function(){var e=this.state,t=e.year,n=e.month,r=new Date(t,n),a=j()(this.props.max,P()(r,this.props.min)),o=O()(a),i=w()(a),c=O()(this.props.date),l=w()(this.props.date);o===c&&i===l||this.props.update(a)},renderMonths:function(){return k.e.map((function(e){var t=e.text,n=e.value;return a.a.createElement("option",{key:t,value:n},t.slice(0,3))}))},render:function(){var e=this;if(!this.props.date)return null;if(this.props.editing){var t=this.state,n=t.year,r=t.minYear,o=t.maxYear,i=t.month;return a.a.createElement("form",{ref:function(t){e.form=t},className:"wgsa-month-year-selector",onSubmit:function(e){return e.preventDefault()},onClick:function(e){return e.stopPropagation()}},a.a.createElement("select",{name:"month",value:i,onChange:this.setMonth},this.renderMonths()),a.a.createElement("input",{name:"year",type:"number",min:r,max:o,value:n,onChange:this.setYear}),a.a.createElement("button",{type:"submit",title:"Set Date"},a.a.createElement("i",{className:"material-icons"},"checked")))}return a.a.createElement("button",{onClick:this.props.onClick,title:"Edit Date"},y()(this.props.date,"MMM YYYY"))}}),I=a.a.createClass({displayName:"DateFilter.react",getInitialState:function(){var e=d()(this.props.values,2);return{min:e[0],max:e[1]}},componentWillReceiveProps:function(e){var t=d()(e.values,2),n=t[0],r=t[1];this.setState({min:n,max:r})},isInactive:function(){var e=d()(this.props.values,2),t=e[0],n=e[1];return!t&&!n},render:function(){var e=this,t=this.props,n=t.bounds,r=t.values,o=void 0===r?n:r,i=t.onChangeMin,c=t.onChangeMax,l=Object(k.a)(n[0]),s=Object(k.a)(n[1]),u=this.state.min||n[0],m=this.state.max||n[1],f=Object(k.a)(u),g=Object(k.a)(m);return a.a.createElement("div",{className:"wgsa-date-range"},a.a.createElement(p.a,{id:"genome-date-filter",min:l,max:s,value:[f,g],onChange:function(t){var n=d()(t,2),r=n[0],a=n[1];return e.setState({min:Object(k.d)(r),max:Object(k.d)(a)})},onAfterChange:function(e){var t=d()(e,2),n=t[0],r=t[1];n!==(o[0]?Object(k.a)(o[0]):l)&&i(Object(k.d)(n)),r!==(o[1]?Object(k.a)(o[1]):s)&&c(Object(k.d)(r))},className:h()({"rc-slider--inactive":this.isInactive()})}),a.a.createElement("label",{htmlFor:"genome-date-filter",onSubmit:function(){return e.setState({editing:null})}},a.a.createElement(_,{date:u,min:n[0],max:m,update:i,onClick:function(){return e.setState({editing:"min"})},editing:"min"===this.state.editing}),a.a.createElement(_,{date:m,min:u,max:n[1],update:c,onClick:function(){return e.setState({editing:"max"})},editing:"max"===this.state.editing})))}}),T=function(e){var t=e.summary,n=e.updateFilter;if(t){var r=!(!t.values[0]&&!t.values[1]);return a.a.createElement(s.a,{heading:"Date",icon:"date_range",expanded:r},a.a.createElement(I,{bounds:t.bounds,values:t.values,onChangeMin:function(e){return n("minDate",i()(e).toISOString())},onChangeMax:function(e){return n("maxDate",l()(e).toISOString())}}))}return null};n.d(t,"a",(function(){return T}))},,function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(386),i=n(225),c=n.n(i),l=n(271),s=n.n(l),u=n(99),d=n(12),m=n(226),p=n(26),f=n.n(p),h=n(25),g=n.n(h),v=n(4),b=n(306),y=n(82),E=n(130),O=n(72),C=n(84),w=n(274),S=n(170);function j(e,t){var n=e.title,r=e.binned;return{action:{label:"Undo",onClick:t},message:a.a.createElement("span",null,n?a.a.createElement(S.a,{tag:"strong"},n):"Collection"," ",r?"restored from":"moved to"," bin.")}}function N(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return function(r,a){var o=Object(C.b)(a()),i=function(){return r(N(e,!t,!1))};return Object(w.a)(e.token,t).then((function(){return Promise.all([r(y.c(o)),r(y.d(o)),r(Object(E.b)())])})).then((function(){return n&&r(Object(O.c)(j(e,i)))})).catch((function(e){throw r(Object(O.c)({message:"Something went wrong, please try again later."})),e}))}}var P=Object(v.a)(null,(function(e,t){var n=t.collection;return{moveToBin:function(){return e(N(n,!0))},restoreFromBin:function(){return e(N(n,!1))}}}))((function(e){var t=e.collection,n=void 0===t?{}:t,r=g()(e,["collection"]);return a.a.createElement(b.a,f()({item:n},r))})),k=n(227),x={READY:"done",PROCESSING:"hourglass_empty",FAILED:"warning"},_={READY:"Ready",PROCESSING:"In progress",FAILED:"Failed"};t.a=function(e){var t,n=e.item,r=e.footerLink,i=new Date,l=n.createdAt,p=n.status,f=n.size;return a.a.createElement(u.b,{className:"wgsa-card--bordered"},a.a.createElement("span",{className:"wgsa-card-metadata-overview"},a.a.createElement(u.a,{title:"Size",icon:"wgsa_genome"},f," genome",1===f?"":"s"),a.a.createElement(u.a,{tooltip:l.toLocaleString(),icon:"access_time"},s()(l,i)," ago"),"READY"!==p&&a.a.createElement(u.a,{title:"Status",icon:x[p]},_[p])),n.title?a.a.createElement(k.a,{level:"2",className:"wgsa-card-title wgsa-overflow-fade"},n.title):a.a.createElement("h2",{className:"wgsa-card-title"},"(Untitled Collection)"),a.a.createElement("p",{className:"wgsa-card-subtitle"},a.a.createElement(d.a,{organismId:n.organismId})),n.description?a.a.createElement(c.a,{className:"wgsa-card-description",source:n.description}):a.a.createElement("p",null,"(no description)"),a.a.createElement("div",{className:"wgsa-card-footer wgsa-card-footer--fixed"},a.a.createElement(o.a,{className:"mdl-button mdl-button--primary wgsa-button--text",to:"/collection/".concat(n.token)},"View Collection"),r||("other"===(t=n).owner?a.a.createElement(m.a,{className:"mdl-button wgsa-button--text",pmid:t.pmid}):a.a.createElement(P,{collection:t}))))}},,function(e,t,n){"use strict";n(974);var r=n(22),a=n.n(r),o=n(23),i=n.n(o),c=n(19),l=n.n(c),s=n(21),u=n.n(s),d=n(24),m=n.n(d),p=n(0),f=n.n(p),h=n(5),g=n.n(h),v=n(221),b=n.n(v),y=function(e){function t(e){var n;return a()(this,t),(n=l()(this,u()(t).call(this,e))).onChange=function(e){n.props.textOnChange(e),n.textOnChangeEffect(e)},n.textOnChangeEffect=b()(e.textOnChangeEffect,250),n}return m()(t,e),i()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.active,r=t.children,a=t.clear,o=t.headerComponent,i=t.prefilter,c=t.summary,l=t.textValue,s=t.updateFilter;return f.a.createElement("aside",{className:g()("wgsa-filter",{"wgsa-filter--active":n})},f.a.createElement("header",{className:"wgsa-filter__header"},f.a.createElement("label",{className:"wgsa-filter__search"},f.a.createElement("i",{className:"material-icons"},"search"),f.a.createElement("input",{type:"text",placeholder:"Search",value:l,onChange:function(t){return e.onChange(t.target.value)}}))),f.a.createElement("div",{className:"wgsa-filter__content"},r.map((function(e){return e?f.a.cloneElement(e,{filterActive:n,headerComponent:o,isLoading:c.loading,summary:e.props.summary||c[e.props.filterKey],totalVisible:c.visible,updateFilter:e.props.updateFilter||s}):null})),"bin"===i&&f.a.createElement("p",{className:"pw-bin-notice"},"Binned items are removed after 30 days.")),f.a.createElement("footer",{className:"wgsa-filter__footer"},f.a.createElement("button",{className:"mdl-button mdl-js-button mdl-button--primary",onClick:a},"Clear Filters")))}}]),t}(f.a.Component);n.d(t,"a",(function(){return y}))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o="Candida auris",i=a.a.createElement("em",null,o),c=a.a.createElement("em",null,"C. auris");t.default={name:o,formattedName:i,shortName:"C. auris",formattedShortName:c,maxGenomeSize:4*Math.pow(10,6),desc:a.a.createElement("p",null,a.a.createElement("strong",null,i)," https://en.wikipedia.org/wiki/Candida_auris"),taxonomy:[{taxId:131567,scientificName:"Cellular organisms",rank:"no rank"},{taxId:2759,scientificName:"Eukaryota",rank:"superkingdom"},{taxId:4890,scientificName:"Ascomycota",rank:"phylum"},{taxId:4891,scientificName:"Saccharomycetes",rank:"class"},{taxId:4892,scientificName:"Saccharomycetales",rank:"order"},{taxId:27319,scientificName:"Metschnikowiaceae",rank:"family"},{taxId:36910,scientificName:"Clavispora",rank:"genus"},{taxId:498019,scientificName:"Candida auris",rank:"species"}],publicMetadataColumnNames:[],collections:[],uiOptions:{noMLST:!0}}},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o="Klebsiella pneumoniae",i=a.a.createElement("em",null,o),c=a.a.createElement("em",null,"K. pneumoniae");t.default={name:o,formattedName:i,shortName:"K. pneumoniae",formattedShortName:c,maxGenomeSize:4*Math.pow(10,6),desc:a.a.createElement("p",null,a.a.createElement("strong",null,i)," ","https://en.wikipedia.org/wiki/Klebsiella_pneumoniae"),taxonomy:[{taxId:131567,scientificName:"Cellular organisms",rank:"no rank"},{taxId:2,scientificName:"Bacteria",rank:"superkingdom"},{taxId:1224,scientificName:"Proteobacteria",rank:"phylum"},{taxId:1236,scientificName:"Gammaproteobacteria",rank:"class"},{taxId:91347,scientificName:"Enterobacteriales",rank:"order"},{taxId:543,scientificName:"Enterobacteriaceae",rank:"family"},{taxId:570,scientificName:"Klebsiella",rank:"genus"},{taxId:573,scientificName:"Klebsiella pneumoniae",rank:"species"}],publicMetadataColumnNames:[],collections:[],uiOptions:{noPopulation:!0,noAMR:!0,kleborate:!0,inctyper:!0}}},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o="Neisseria gonorrhoeae",i=a.a.createElement("em",null,o),c=a.a.createElement("em",null,"N. gonorrhoeae");t.default={name:o,formattedName:i,shortName:"N. gonorrhoeae",formattedShortName:c,maxGenomeSize:4*Math.pow(10,6),desc:a.a.createElement("p",null,a.a.createElement("strong",null,i)," is a species of gram-negative coffee bean-shaped diplococci bacteria responsible for the sexually transmitted infection gonorrhea."),taxonomy:[{taxId:131567,scientificName:"Cellular organisms",rank:"no rank"},{taxId:2,scientificName:"Bacteria",rank:"superkingdom"},{taxId:1224,scientificName:"Proteobacteria",rank:"phylum"},{taxId:28216,scientificName:"Betaproteobacteria",rank:"class"},{taxId:206351,scientificName:"Neisseriales",rank:"order"},{taxId:481,scientificName:"Neisseriaceae",rank:"family"},{taxId:482,scientificName:"Neisseria",rank:"genus"},{taxId:485,scientificName:"Neisseria gonorrhoeae",rank:"species"}],publicMetadataColumnNames:[],collections:[],uiOptions:{ngMast:!0,noPopulation:!0}}},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o="Renibacterium salmoninarum",i=a.a.createElement("em",null,o),c=a.a.createElement("em",null,"R. salmoninarum");t.default={name:o,formattedName:i,shortName:"R. salmoninarum",formattedShortName:c,desc:a.a.createElement("p",null,i," is a member of the Micrococcaceae family. It is a Gram-positive, intracellular bacterium that causes disease in young salmonid fish."),taxonomy:[{taxId:131567,scientificName:"Cellular organisms",rank:"no rank"},{taxId:2,scientificName:"Bacteria",rank:"superkingdom"},{taxId:1783272,scientificName:"Terrabacteria group",rank:"no rank"},{taxId:201174,scientificName:"Actinobacteria",rank:"phylum"},{taxId:1760,scientificName:"Actinobacteria",rank:"class"},{taxId:85006,scientificName:"Micrococcales",rank:"order"},{taxId:1268,scientificName:"Micrococcaceae",rank:"family"},{taxId:1645,scientificName:"Renibacterium",rank:"genus"},{taxId:1646,scientificName:"Renibacterium salmoninarum",rank:"species"}],maxGenomeSize:4*Math.pow(10,6),publicMetadataColumnNames:[],collections:[],uiOptions:{noMLST:!0,noAMR:!0}}},function(e,t,n){"use strict";n.r(t);var r,a,o,i,c=n(6),l=n.n(c),s=n(0),u=n.n(s),d="Salmonella Typhi",m=(r=d.split(" "),a=l()(r,2),o=a[0],i=a[1],u.a.createElement("span",null,u.a.createElement("em",null,o)," ",i)),p=function(){var e=d.split(" "),t=l()(e,2),n=t[0],r=t[1];return u.a.createElement("span",null,u.a.createElement("em",null,n[0],".")," ",r)}();t.default={name:d,formattedName:m,shortName:"S. Typhi",formattedShortName:p,definitionText:u.a.createElement("span",null,"A common serovar of ",u.a.createElement("em",null,"Salmonella enterica")," subsp. ",u.a.createElement("em",null,"enterica"),"."),desc:u.a.createElement("span",null,u.a.createElement("p",null,u.a.createElement("strong",null,u.a.createElement("em",null,"Salmonella enterica")," subsp. ",u.a.createElement("em",null,"enterica")," serovar Typhi")," causes typhoid (enteric) fever, a disease that affects approximately 20-30 million of new patients every year,",u.a.createElement("sup",null,"[1,2]")," predominantly in Asia and sub-Saharan Africa. Mortality rates in patients who are not administered antibiotic treatment can be as high as 26%.",u.a.createElement("sup",null,"[1]")," The emergence of multi-drug resistant Salmonella Typhi and the shortage of local surveillance data from endemic regions both challenge the management of typhoid fever."),u.a.createElement("p",null,"For more information go to ",u.a.createElement("a",{href:"http://www.stoptyphoid.org",target:"_blank",rel:"noopener"},"www.stoptyphoid.org"),"."),u.a.createElement("ol",{className:"wgsa-species-citations"},u.a.createElement("li",null,u.a.createElement("cite",null,"Wain J., Hendriksen R.S., Mikoleit M.L., Keddy K.H. and Ochiai R.L. 2015. Typhoid Fever. Lancet 385:1136-1145.")),u.a.createElement("li",null,u.a.createElement("cite",null,"Crump J.A. and Mintz E.D. 2010. Global trends in typhoid and paratyphoid fever. Clinical Infectious Diseases 50:241-246.")))),imageCredit:"Dave Goulding",taxonomy:[{taxId:131567,scientificName:"Cellular organisms",rank:"no rank"},{taxId:2,scientificName:"Bacteria",rank:"superkingdom"},{taxId:1224,scientificName:"Proteobacteria",rank:"phylum"},{taxId:1236,scientificName:"Gammaproteobacteria",rank:"class"},{taxId:91347,scientificName:"Enterobacterales",rank:"order"},{taxId:543,scientificName:"Enterobacteriaceae",rank:"family"},{taxId:590,scientificName:"Salmonella",rank:"genus"},{taxId:28901,scientificName:"Salmonella enterica",rank:"species"},{taxId:59201,scientificName:"Salmonella enterica subsp. enterica",rank:"subspecies"},{taxId:90370,scientificName:"Salmonella enterica subsp. enterica serovar Typhi",rank:"no rank"}],publicMetadataColumnNames:[],collections:[],amrOptions:{customLabels:{SIL:"OTHER"},hiddenColumns:new Set(["SIL"]),paarOverrides:[{gene:"tetR(A)",from:"SIL",to:"TCY"},{gene:"tetR(B)",from:"SIL",to:"TCY"}]},uiOptions:{genotyphi:!0,inctyper:!0}}},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o="Staphylococcus aureus",i=a.a.createElement("em",null,o),c=a.a.createElement("em",null,"S. aureus");t.default={name:o,formattedName:i,shortName:"S. aureus",formattedShortName:c,desc:a.a.createElement("p",null,a.a.createElement("strong",null,i)," is a Gram-positive microorganism. While the nasal colonisation by ",a.a.createElement("em",null,"Staphylococcus aureus")," is fairly widespread and occurs asymptomatically, ",a.a.createElement("em",null,"Staphylococcus aureus")," can also transform into a pathogen causing a diverse infections ranging from mild skin infections to life-threatening conditions. ",a.a.createElement("em",null,"Staphylococcus aureus")," in its methicillin-sensitive (MSSA) form but especially in its methicillin-resistant (MRSA) or even multi-resistant form are threatening the community and healthcare system worldwide and it has reached the status of being one of the most common causative agents for infectious disease."),taxonomy:[{taxId:131567,scientificName:"Cellular organisms",rank:"no rank"},{taxId:2,scientificName:"Bacteria",rank:"superkingdom"},{taxId:1783272,scientificName:"Terrabacteria group",rank:"no rank"},{taxId:1239,scientificName:"Firmicutes",rank:"phylum"},{taxId:91061,scientificName:"Bacilli",rank:"class"},{taxId:1385,scientificName:"Bacillales",rank:"order"},{taxId:90964,scientificName:"Staphylococcaceae",rank:"family"},{taxId:1279,scientificName:"Staphylococcus",rank:"genus"},{taxId:1280,scientificName:"Staphylococcus aureus",rank:"species"}],maxGenomeSize:3.5*Math.pow(10,6),gcRange:{min:31,max:35},uiOptions:{inctyper:!0},publicMetadataColumnNames:["ena study","ena run","alternative isolate id","country","city","geo accuracy","host","mlst","mrsa"]}},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o="Streptococcus equi",i=a.a.createElement("em",null,o),c=a.a.createElement("em",null,"S. equi");t.default={name:o,formattedName:i,shortName:"S. equi",formattedShortName:c,desc:a.a.createElement("p",null,"The bacterium, ",a.a.createElement("strong",null,"Streptococcus equi"),", is what causes the disease in equine species (horses, donkeys, mules) called strangles. It got its name because historically, affected horses were sometimes suffocated from inflamed lymph nodes in their upper airway and trachea."),taxonomy:[{taxId:131567,scientificName:"Cellular organisms",rank:"no rank"},{taxId:2,scientificName:"Bacteria",rank:"superkingdom"},{taxId:1783272,scientificName:"Terrabacteria group",rank:"no rank"},{taxId:1239,scientificName:"Firmicutes",rank:"phylum"},{taxId:91061,scientificName:"Bacilli",rank:"class"},{taxId:148942,scientificName:"Lactobacillales",rank:"order"},{taxId:1300,scientificName:"Staphylococcaceae",rank:"family"},{taxId:1301,scientificName:"Staphylococcus",rank:"genus"},{taxId:119603,scientificName:"Staphylococcus",rank:"genus"},{taxId:1280,scientificName:"Streptococcus dysgalactiae group",rank:"species group"},{taxId:1336,scientificName:"Streptococcus equi",rank:"species"}],maxGenomeSize:15*Math.pow(10,3),publicMetadataColumnNames:[],uiOptions:{noPopulation:!0,noAMR:!0}}},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o="Streptococcus pneumoniae",i=a.a.createElement("em",null,o),c=a.a.createElement("em",null,"S. pneumoniae");t.default={name:o,formattedName:i,shortName:"S. pneumoniae",formattedShortName:c,desc:a.a.createElement("p",null,i,", or pneumococcus, is a Gram-positive, alpha-hemolytic, facultative anaerobic member of the genus ",a.a.createElement("em",null,"Streptococcus"),". A significant human pathogenic bacterium, ",c," was recognized as a major cause of pneumonia in the late 19th century, and is the subject of many humoral immunity studies."),taxonomy:[{taxId:131567,scientificName:"Cellular organisms",rank:"no rank"},{taxId:2,scientificName:"Bacteria",rank:"superkingdom"},{taxId:1783272,scientificName:"Terrabacteria group",rank:"no rank"},{taxId:1239,scientificName:"Firmicutes",rank:"phylum"},{taxId:91061,scientificName:"Bacilli",rank:"class"},{taxId:186826,scientificName:"Lactobacillales",rank:"order"},{taxId:1300,scientificName:"Streptococcaceae",rank:"family"},{taxId:1301,scientificName:"Streptococcus",rank:"genus"},{taxId:1313,scientificName:"Streptococcus pneumoniae",rank:"species"}],maxGenomeSize:3*Math.pow(10,6),publicMetadataColumnNames:[],collections:[],uiOptions:{}}},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o="Vibrio cholerae",i=a.a.createElement("em",null,o),c=a.a.createElement("em",null,"V. cholerae");t.default={name:o,formattedName:i,shortName:"V. cholerae",formattedShortName:c,desc:a.a.createElement("p",null,"TBD."),taxonomy:[{taxId:131567,scientificName:"Cellular organisms",rank:"no rank"},{taxId:2,scientificName:"Bacteria",rank:"superkingdom"},{taxId:1224,scientificName:"Proteobacteria",rank:"phylum"},{taxId:1236,scientificName:"Gammaproteobacteria",rank:"class"},{taxId:135623,scientificName:"Vibrionales",rank:"order"},{taxId:641,scientificName:"Vibrionaceae",rank:"family"},{taxId:662,scientificName:"Vibrio",rank:"genus"},{taxId:666,scientificName:"Vibrio cholerae",rank:"species"}],maxGenomeSize:7*Math.pow(10,6),publicMetadataColumnNames:[],collections:[],uiOptions:{}}},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=a.a.createElement("em",null,"Zika virus"),i=a.a.createElement("em",null,"Zika");t.default={name:"Zika virus",formattedName:o,shortName:"Zika",formattedShortName:i,desc:a.a.createElement("p",null,a.a.createElement("strong",null,"Zika virus (ZIKV)")," is a member of the virus family ",a.a.createElement("em",null,"Flaviviridae"),". It is spread by daytime-active ",a.a.createElement("em",null,"Aedes")," mosquitoes, such as ",a.a.createElement("em",null,"A. aegypti")," and ",a.a.createElement("em",null,"A. albopictus"),". Its name comes from the Zika Forest of Uganda, where the virus was first isolated in 1947."),taxonomy:[{taxId:10239,scientificName:"Viruses",rank:"superkingdom"},{taxId:439488,scientificName:"ssRNA viruses",rank:"no rank"},{taxId:35278,scientificName:"ssRNA positive-strand viruses, no DNA stage",rank:"no rank"},{taxId:11050,scientificName:"Flaviviridae",rank:"family"},{taxId:11051,scientificName:"Flavivirus",rank:"genus"},{taxId:64320,scientificName:"Zika virus",rank:"species"}],maxGenomeSize:15*Math.pow(10,3),publicMetadataColumnNames:[],uiOptions:{noPopulation:!0,noMLST:!0,noAMR:!0}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r;window,e.exports=(r=n(111),function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=1)}([function(e,t){e.exports=r},function(e,t,n){"use strict";n.r(t);var r=n(0);function a(e){e.contextMenu.el.classList.remove("visible"),e.contextMenu.isOpen=!1}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return e;var n=e.map((function(e){return Array.from(e)})),r=!0,a=!1,o=void 0;try{for(var i,c=function(){var e=i.value;n[e.section].splice(e.index,0,{text:e.text,handler:e.handler?e.handler:function(t,n){return t.trigger(e.method,[t,n])},isActive:e.isActive})},l=t[Symbol.iterator]();!(r=(i=l.next()).done);r=!0)c()}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}function i(e,t,n){var r=e.contextMenu.el,a=document.createElement("ul"),o=!0,i=!1,c=void 0;try{for(var l,s=t[Symbol.iterator]();!(o=(l=s.next()).done);o=!0){var u=l.value,d=null;if(u instanceof HTMLElement)(d=document.createElement("li")).appendChild(u);else if("function"==typeof u){var m=u(e,n);m&&(d=document.createElement("li")).appendChild(m)}else!function(){var t=u.text,r=u.handler,a=u.visible,o=u.isActive;if(!a||a(e)){d=document.createElement("li");var i="function"==typeof o,c=document.createElement("button");c.addEventListener("click",(function(){i&&(e.contextMenu.invalidate=!1),r(e,n)}));var l="function"==typeof t?t(e,n):t;if(c.appendChild(document.createTextNode(l)),i){var s=document.createElement("span");s.classList.add("phylocanvas-context-menu-toggle"),o(e,n)&&s.classList.add("is-active"),c.appendChild(s),c.classList.add("phylocanvas-context-menu-has-toggle"),d.addEventListener("click",(function(){o(e,n)?s.classList.add("is-active"):s.classList.remove("is-active")}))}d.appendChild(c)}}();d&&(u.isActive||d.addEventListener("click",(function(){return e.contextMenu.close()})),d.addEventListener("contextmenu",(function(e){return e.preventDefault(),!1})),a.appendChild(d))}}catch(e){i=!0,c=e}finally{try{o||null==s.return||s.return()}finally{if(i)throw c}}a.hasChildNodes()&&r.appendChild(a)}function c(e,t,n,r){return e+t<n+r?e:e-t>n?e-t:n}function l(e,t,n,r){var a=r?e.getNodeById(r):null;!function(e,t){for(var n=e.contextMenu.el;n.hasChildNodes();)n.removeChild(n.firstChild);var r=t&&!t.isLeaf?e.contextMenu.nodeMenuItems:e.contextMenu.treeMenuItems,a=!0,o=!1,c=void 0;try{for(var l,s=r[Symbol.iterator]();!(a=(l=s.next()).done);a=!0)i(e,l.value,t||void 0)}catch(e){o=!0,c=e}finally{try{a||null==s.return||s.return()}finally{if(o)throw c}}}(e,a),function(e,t,n){var r=e.el,a=e.parent;r.classList.remove("visible","top","bottom","left","right"),r.style.top=r.style.bottom=r.style.left=r.style.right=null;var o=r.offsetWidth,i=r.offsetHeight,l=c(n,i,window.scrollY,window.innerHeight),s=c(t,o,window.scrollX,window.innerWidth),u=l+i/2>n,d=s+o/2>t;r.style.left="".concat(s,"px"),r.style.top="".concat(l,"px"),r.style.transformOrigin="".concat(u?"top":"bottom"," ").concat(d?"left":"right"),a.removeChild(r),a.appendChild(r),r.offsetWidth,r.classList.add("visible")}(e.contextMenu,t,n),e.contextMenu.isOpen=!0}var s,u,d=[(s=document.createElement("a"),u=document.createElement("img"),u.src="data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20id%3D%22Micro%22%20viewBox%3D%220%200%20433.16%20103.04%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bisolation%3Aisolate%3B%7D.cls-2%7Bfill%3A%233b7383%3B%7D.cls-3%7Bopacity%3A0.53%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3ELOGOS%20OCT%202018%3C%2Ftitle%3E%3Cg%20class%3D%22cls-1%22%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M110.22%2C28.17H126c3.28%2C0%2C5.75.58%2C7.39%2C1.73a7.58%2C7.58%2C0%2C0%2C1%2C3.14%2C4.54%2C32.31%2C32.31%2C0%2C0%2C1%2C.67%2C7.3%2C31.25%2C31.25%2C0%2C0%2C1-.7%2C7.2%2C7.87%2C7.87%2C0%2C0%2C1-3.14%2C4.61c-1.62%2C1.17-4.08%2C1.76-7.36%2C1.76h-12.1V72.2h-3.71Zm15%2C23.81a10.15%2C10.15%2C0%2C0%2C0%2C5.47-1.15A5.25%2C5.25%2C0%2C0%2C0%2C133%2C47.6a26%2C26%2C0%2C0%2C0%2C.51-5.86%2C27.48%2C27.48%2C0%2C0%2C0-.48-5.89%2C5%2C5%2C0%2C0%2C0-2.27-3.17%2C10.71%2C10.71%2C0%2C0%2C0-5.51-1.12H113.93V52Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M165.45%2C52.75a29.42%2C29.42%2C0%2C0%2C0-.57-6.91A4%2C4%2C0%2C0%2C0%2C162.73%2C43a13.56%2C13.56%2C0%2C0%2C0-5.15-.7q-4%2C0-5.86%2C1.56a6.85%2C6.85%2C0%2C0%2C0-2.27%2C4.1%2C44.88%2C44.88%2C0%2C0%2C0-.45%2C7.33V72.2h-3.58V24.65H149V43.92h.26a7.06%2C7.06%2C0%2C0%2C1%2C3-3.52q2.17-1.35%2C6.59-1.35a13.48%2C13.48%2C0%2C0%2C1%2C6.53%2C1.25%2C6.16%2C6.16%2C0%2C0%2C1%2C2.91%2C3.87A29%2C29%2C0%2C0%2C1%2C169%2C51.6V72.2h-3.59Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M180.17%2C84.75V81.68q4.94.31%2C9%2C.32c3%2C0%2C5.24-.41%2C6.65-1.22A5.74%2C5.74%2C0%2C0%2C0%2C198.6%2C77a34.38%2C34.38%2C0%2C0%2C0%2C.64-7.71V67.72h-.32A6.69%2C6.69%2C0%2C0%2C1%2C196%2C71.31q-2.17%2C1.34-6.66%2C1.34c-2.9%2C0-5.06-.42-6.49-1.28a6.32%2C6.32%2C0%2C0%2C1-2.88-4%2C30.7%2C30.7%2C0%2C0%2C1-.74-7.68V39.56h3.59V59a29.12%2C29.12%2C0%2C0%2C0%2C.57%2C6.85%2C4%2C4%2C0%2C0%2C0%2C2.15%2C2.81%2C13.28%2C13.28%2C0%2C0%2C0%2C5.08.71q4%2C0%2C5.89-1.54a6.59%2C6.59%2C0%2C0%2C0%2C2.31-4.09%2C46.38%2C46.38%2C0%2C0%2C0%2C.44-7.3V39.56h3.59V67.85a43%2C43%2C0%2C0%2C1-1%2C10.4%2C8.37%2C8.37%2C0%2C0%2C1-3.71%2C5.28q-2.76%2C1.66-8.32%2C1.67A94.52%2C94.52%2C0%2C0%2C1%2C180.17%2C84.75Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M213.13%2C72.2V24.65h3.59V72.2Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M229.77%2C71.4a6.29%2C6.29%2C0%2C0%2C1-3.26-4.6A58.17%2C58.17%2C0%2C0%2C1%2C225.8%2C56%2C58.48%2C58.48%2C0%2C0%2C1%2C226.51%2C45a6.38%2C6.38%2C0%2C0%2C1%2C3.26-4.64c1.71-.9%2C4.52-1.35%2C8.45-1.35s6.79.45%2C8.48%2C1.35A6.52%2C6.52%2C0%2C0%2C1%2C250%2C45%2C56.15%2C56.15%2C0%2C0%2C1%2C250.7%2C56%2C55.85%2C55.85%2C0%2C0%2C1%2C250%2C66.8a6.42%2C6.42%2C0%2C0%2C1-3.26%2C4.6c-1.69.88-4.51%2C1.32-8.48%2C1.32S231.48%2C72.28%2C229.77%2C71.4Zm14.72-2.78a4.48%2C4.48%2C0%2C0%2C0%2C2.21-3.49%2C66%2C66%2C0%2C0%2C0%2C.42-9.18%2C67%2C67%2C0%2C0%2C0-.42-9.22%2C4.61%2C4.61%2C0%2C0%2C0-2.21-3.55c-1.19-.66-3.29-1-6.27-1s-5.07.33-6.24%2C1a4.61%2C4.61%2C0%2C0%2C0-2.18%2C3.52%2C69.07%2C69.07%2C0%2C0%2C0-.41%2C9.25%2C68.13%2C68.13%2C0%2C0%2C0%2C.41%2C9.18A4.5%2C4.5%2C0%2C0%2C0%2C232%2C68.62q1.76%2C1%2C6.24%2C1C241.2%2C69.58%2C243.3%2C69.26%2C244.49%2C68.62Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M274.28%2C72.46a38.71%2C38.71%2C0%2C0%2C1-4.32.26c-3.63%2C0-6.3-.58-8-1.73a7.86%2C7.86%2C0%2C0%2C1-3.33-5.12%2C50.73%2C50.73%2C0%2C0%2C1-.73-10%2C43.71%2C43.71%2C0%2C0%2C1%2C.86-10%2C8.36%2C8.36%2C0%2C0%2C1%2C3.42-5.18q2.57-1.7%2C7.68-1.7a37.92%2C37.92%2C0%2C0%2C1%2C4.29.26%2C26.45%2C26.45%2C0%2C0%2C1%2C3.71.64v4.93a35.76%2C35.76%2C0%2C0%2C0-6.46-.58%2C9.62%2C9.62%2C0%2C0%2C0-4.77.9%2C4.57%2C4.57%2C0%2C0%2C0-2%2C3.23%2C41%2C41%2C0%2C0%2C0-.48%2C7.45%2C39.8%2C39.8%2C0%2C0%2C0%2C.51%2C7.56%2C4.47%2C4.47%2C0%2C0%2C0%2C2%2C3.2%2C10.53%2C10.53%2C0%2C0%2C0%2C4.83.83%2C35.91%2C35.91%2C0%2C0%2C0%2C6.59-.58v4.93A28.78%2C28.78%2C0%2C0%2C1%2C274.28%2C72.46Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M285.48%2C70.54q-2.21-2.17-2.21-7.42a16.46%2C16.46%2C0%2C0%2C1%2C.84-5.89%2C5.51%2C5.51%2C0%2C0%2C1%2C2.81-3.07%2C13.06%2C13.06%2C0%2C0%2C1%2C5.57-1c2.18%2C0%2C5.31.08%2C9.41.25V51.72a15.23%2C15.23%2C0%2C0%2C0-.58-5%2C3.09%2C3.09%2C0%2C0%2C0-2.17-1.92%2C22.33%2C22.33%2C0%2C0%2C0-5.38-.45c-1.19%2C0-2.69.06-4.48.19s-3.18.28-4.16.45V40a57.8%2C57.8%2C0%2C0%2C1%2C10.62-.9q5.31%2C0%2C7.94%2C1.22a6.38%2C6.38%2C0%2C0%2C1%2C3.52%2C3.87%2C25.3%2C25.3%2C0%2C0%2C1%2C.9%2C7.71V72.2h-5.64L302.22%2C68h-.39a6.59%2C6.59%2C0%2C0%2C1-3.68%2C3.78%2C15.69%2C15.69%2C0%2C0%2C1-5.72%2C1Q287.69%2C72.72%2C285.48%2C70.54ZM298.7%2C67a4%2C4%2C0%2C0%2C0%2C2.17-1.92%2C13.75%2C13.75%2C0%2C0%2C0%2C1-6V57.55H294a9.3%2C9.3%2C0%2C0%2C0-2.95.35%2C2.19%2C2.19%2C0%2C0%2C0-1.34%2C1.41%2C10.18%2C10.18%2C0%2C0%2C0-.39%2C3.29%2C8.78%2C8.78%2C0%2C0%2C0%2C.42%2C3.14%2C2.44%2C2.44%2C0%2C0%2C0%2C1.6%2C1.41%2C13.17%2C13.17%2C0%2C0%2C0%2C3.68.38A10.93%2C10.93%2C0%2C0%2C0%2C298.7%2C67Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M335.62%2C54a33.45%2C33.45%2C0%2C0%2C0-.41-6.37%2C3.33%2C3.33%2C0%2C0%2C0-1.57-2.46%2C9.56%2C9.56%2C0%2C0%2C0-4-.58%2C6.79%2C6.79%2C0%2C0%2C0-4.35%2C1.15%2C5.33%2C5.33%2C0%2C0%2C0-1.79%2C3.33%2C37.72%2C37.72%2C0%2C0%2C0-.38%2C6.21V72.2h-6.21V39.56h5.63l.26%2C4.36h.44a7.45%2C7.45%2C0%2C0%2C1%2C3.2-3.62%2C11.88%2C11.88%2C0%2C0%2C1%2C5.89-1.25%2C11.25%2C11.25%2C0%2C0%2C1%2C6.05%2C1.31%2C6.53%2C6.53%2C0%2C0%2C1%2C2.72%2C3.94%2C29.52%2C29.52%2C0%2C0%2C1%2C.7%2C7.3V72.2h-6.21Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M357.32%2C72.2l-9.86-32.64h6.4l7.3%2C26.05h.51l7.23-26h6.34L365.38%2C72.2Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M380.71%2C70.54q-2.2-2.17-2.21-7.42a16.46%2C16.46%2C0%2C0%2C1%2C.84-5.89%2C5.51%2C5.51%2C0%2C0%2C1%2C2.81-3.07%2C13.06%2C13.06%2C0%2C0%2C1%2C5.57-1c2.18%2C0%2C5.31.08%2C9.41.25V51.72a15.23%2C15.23%2C0%2C0%2C0-.58-5%2C3.09%2C3.09%2C0%2C0%2C0-2.17-1.92A22.33%2C22.33%2C0%2C0%2C0%2C389%2C44.3c-1.19%2C0-2.69.06-4.48.19s-3.18.28-4.16.45V40a57.8%2C57.8%2C0%2C0%2C1%2C10.62-.9c3.55%2C0%2C6.19.41%2C7.94%2C1.22a6.38%2C6.38%2C0%2C0%2C1%2C3.52%2C3.87%2C25.3%2C25.3%2C0%2C0%2C1%2C.9%2C7.71V72.2H397.7L397.45%2C68h-.39a6.59%2C6.59%2C0%2C0%2C1-3.68%2C3.78%2C15.69%2C15.69%2C0%2C0%2C1-5.72%2C1Q382.92%2C72.72%2C380.71%2C70.54ZM393.93%2C67a4%2C4%2C0%2C0%2C0%2C2.17-1.92%2C13.75%2C13.75%2C0%2C0%2C0%2C1-6V57.55h-7.87a9.3%2C9.3%2C0%2C0%2C0-2.95.35A2.19%2C2.19%2C0%2C0%2C0%2C385%2C59.31a10.18%2C10.18%2C0%2C0%2C0-.39%2C3.29%2C8.78%2C8.78%2C0%2C0%2C0%2C.42%2C3.14%2C2.44%2C2.44%2C0%2C0%2C0%2C1.6%2C1.41%2C13.17%2C13.17%2C0%2C0%2C0%2C3.68.38A10.93%2C10.93%2C0%2C0%2C0%2C393.93%2C67Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M416.58%2C72.46c-2-.17-3.73-.36-5.18-.58v-5a77.88%2C77.88%2C0%2C0%2C0%2C9.79.58A12.66%2C12.66%2C0%2C0%2C0%2C425.1%2C67a2.63%2C2.63%2C0%2C0%2C0%2C1.66-1.34%2C6.93%2C6.93%2C0%2C0%2C0%2C.38-2.63%2C10.13%2C10.13%2C0%2C0%2C0-.25-2.72%2C1.7%2C1.7%2C0%2C0%2C0-.9-1.09%2C8.75%2C8.75%2C0%2C0%2C0-2.24-.48l-7-1c-2.43-.29-4.07-1.14-4.93-2.52s-1.28-3.58-1.28-6.56a10.91%2C10.91%2C0%2C0%2C1%2C1.41-6.08%2C6.88%2C6.88%2C0%2C0%2C1%2C3.87-2.85%2C22.85%2C22.85%2C0%2C0%2C1%2C6.37-.74c1.62%2C0%2C3.32.09%2C5.09.26a27%2C27%2C0%2C0%2C1%2C4.32.7v4.93a60.27%2C60.27%2C0%2C0%2C0-9-.64%2C10%2C10%2C0%2C0%2C0-4.74.8c-.89.53-1.34%2C1.7-1.34%2C3.49a9.81%2C9.81%2C0%2C0%2C0%2C.22%2C2.49%2C1.65%2C1.65%2C0%2C0%2C0%2C.87%2C1.09%2C6.53%2C6.53%2C0%2C0%2C0%2C2.05.51l7.23.9a9.89%2C9.89%2C0%2C0%2C1%2C3.61%2C1.09%2C4.77%2C4.77%2C0%2C0%2C1%2C2%2C2.65%2C17.4%2C17.4%2C0%2C0%2C1%2C.67%2C5.54A12.27%2C12.27%2C0%2C0%2C1%2C431.91%2C69a6.46%2C6.46%2C0%2C0%2C1-3.65%2C3%2C20.26%2C20.26%2C0%2C0%2C1-6.24.8C420.4%2C72.72%2C418.59%2C72.63%2C416.58%2C72.46Z%22%2F%3E%3C%2Fg%3E%3Cg%20class%3D%22cls-3%22%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M77.84.07h-.33a14.31%2C14.31%2C0%2C0%2C0-14%2C14.63v0h0v0a28.13%2C28.13%2C0%2C0%2C1-1.29%2C9.09%2C28.63%2C28.63%2C0%2C0%2C1-5.42%2C9.92%2C28.56%2C28.56%2C0%2C0%2C1-35.57%2C6.69h0A14.3%2C14.3%2C0%2C1%2C0%2C14.37%2C67.3a14.45%2C14.45%2C0%2C0%2C0%2C7-1.82c.15-.11.31-.21.47-.31h0l.48-.29A28.53%2C28.53%2C0%2C0%2C1%2C36.71%2C61a28%2C28%2C0%2C0%2C1%2C5%2C.45%2C28.45%2C28.45%2C0%2C0%2C1%2C7.65%2C2.49l0%2C0c.72.35%2C1.44.74%2C2.13%2C1.16h0a27.94%2C27.94%2C0%2C0%2C1%2C6.19%2C5.07%2C28.86%2C28.86%2C0%2C0%2C1%2C3.4%2C4.5%2C28.81%2C28.81%2C0%2C0%2C1%2C4.15%2C13.53c0%2C.22%2C0%2C.44%2C0%2C.66s0%2C.49%2C0%2C.74A14.3%2C14.3%2C0%2C1%2C0%2C86.46%2C76.09L86.34%2C76h0A28.6%2C28.6%2C0%2C0%2C1%2C72.86%2C42.53a29.14%2C29.14%2C0%2C0%2C1%2C2.23-5.24%2C28.57%2C28.57%2C0%2C0%2C1%2C3.19-4.68%2C28.25%2C28.25%2C0%2C0%2C1%2C6.92-6h0A14.3%2C14.3%2C0%2C0%2C0%2C77.84.07%22%2F%3E%3C%2Fg%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M14.37%2C38.56a14.39%2C14.39%2C0%2C1%2C0%2C12.3%2C6.9%2C14.28%2C14.28%2C0%2C0%2C0-12.3-6.9%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M79.58%2C74.27a14.39%2C14.39%2C0%2C1%2C0%2C12.3%2C6.9%2C14.36%2C14.36%2C0%2C0%2C0-12.3-6.9%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M77.87%2C0A14.39%2C14.39%2C0%2C1%2C0%2C90.16%2C6.9%2C14.37%2C14.37%2C0%2C0%2C0%2C77.87%2C0%22%2F%3E%3C%2Fsvg%3E",s.appendChild(u),s.title="About Phylocanvas...",s.href="http://phylocanvas.org/",s.target="_blank",s.className="phylocanvas-context-menu-about",s)],m=window.URL||window.webkitURL;function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text/plain;charset=utf-8",n=new Blob([e],{type:t});return m.createObjectURL(n)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file",n=arguments.length>2?arguments[2]:void 0,r=document.createElement("a");return r.appendChild(document.createTextNode(e)),r.download=t,r.addEventListener("click",(function(){r.href=n()})),r}function h(e,t,n){return f(n,e.contextMenu.filenames.leafLabels,(function(){return p(e.getLeafLabels(t).join("\n"))}))}function g(e,t,n){return f(n,e.contextMenu.filenames.newick,(function(){return p(e.getNewick(t))}))}var v=[[{text:"Show labels",handler:function(e){return e.toggleLeafLabels()},isActive:function(e){return e.state.renderLeafLabels}},{text:"Align labels",handler:function(e){return e.toggleAlignLeafLabels()},isActive:function(e){return e.state.alignLabels}}],[{text:"Fit in panel",handler:function(e){return e.fitInPanel()}},{text:"Expand collapsed subtrees",visible:function(e){return e.state.collapsedIds.length>0},handler:function(e){return e.resetCollapsedNodes({refit:!0})}},{text:"Redraw original tree",handler:function(e){return e.setSource(e.nodes.originalSource)}}],[function(e,t){return h(e,t,"Export leaf labels")},function(e,t){return function(e,t,n){var r=e.contextMenu,a=e.state.selectedIds,o=r.filenames;return 0===a.length?null:f("Export selected labels",o.leafLabels,(function(){return p(e.getNodeLabels(a).join("\n"))}))}(e)},function(e,t){return g(e,t,"Export as newick file")},function(e,t){return function(e,t,n){return f("Export as image",e.contextMenu.filenames.image,(function(){return e.ctx.canvas.toDataURL()}))}(e)}],d],b=[[{text:function(e,t){return-1===e.state.collapsedIds.indexOf(t.id)?"Collapse subtree":"Expand subtree"},handler:function(e,t){return e.collapseNode(t,{refit:!0})}},{text:"Rotate subtree",handler:function(e,t){return e.rotateNode(t,{refit:!1})}}],[{text:"View subtree",handler:function(e,t){return e.setRoot(t)}},{text:"Re-root tree",handler:function(e,t){return e.rerootNode(t)}}],[function(e,t){return h(e,t,"Export subtree leaf labels")},function(e,t){return g(e,t,"Export subtree as newick file")}],d],y={image:"phylocanvas.png",leafLabels:"phylocanvas-leaf-labels.txt",newick:"phylocanvas.nwk"};function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.default=function(e,t){function n(t){var n=r.utils.mapPoint(e,t.offsetX,t.offsetY),a=e.getNodeAtPoint(n.x,n.y);e.contextMenu.open(t.pageX,t.pageY,a?a.id:null)}t("init",(function(t,n){var r=t.apply(void 0,C(n)),i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(n,1)[0].contextMenu,c=void 0===i?{}:i;return e.contextMenu={},e.contextMenu.invalidate=!0,c&&"string"==typeof c.parent?e.contextMenu.parent=document.querySelector(c.parent):c&&(e.contextMenu.parent=c.parent),e.contextMenu.parent||(e.contextMenu.parent=document.body),e.contextMenu.el=document.createElement("ul"),e.contextMenu.el.className="phylocanvas-context-menu",e.contextMenu.parent.appendChild(e.contextMenu.el),e.contextMenu.treeMenuItems=o(v,c.treeMenuItems),e.contextMenu.nodeMenuItems=o(b,c.nodeMenuItems),e.contextMenu.filenames=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},y,{},c.filenames),e.contextMenu.open=l.bind(null,e),e.contextMenu.close=a.bind(null,e),r}));var i=function(){e.contextMenu.touching=!0};e.ctx.canvas.addEventListener("touchstart",i);var c=function(t){t.preventDefault(),e.contextMenu.touching&&(n(t),e.contextMenu.touching=!1)};e.ctx.canvas.addEventListener("contextmenu",c);var s=function(t){(e.contextMenu.isOpen||!e.contextMenu.isOpen&&2===t.button)&&t.stopImmediatePropagation()};e.ctx.canvas.addEventListener("mousedown",s);var u=function(t){2===t.button?(t.stopImmediatePropagation(),n(t)):e.contextMenu.isOpen&&(t.stopImmediatePropagation(),e.contextMenu.close())};e.ctx.canvas.addEventListener("mouseup",u),t("mergeState",(function(t,n){var r=e.contextMenu;r.isOpen&&r.invalidate&&r.close(),r.invalidate=!0,t.apply(void 0,C(n))})),t("destroy",(function(t,n){e.contextMenu.parent.removeChild(e.contextMenu.el),e.ctx.canvas.removeEventListener("touchstart",i),e.ctx.canvas.removeEventListener("contextmenu",c),e.ctx.canvas.removeEventListener("mousedown",s),e.ctx.canvas.removeEventListener("mouseup",u),t.apply(void 0,C(n))}))}}]))},function(e,t,n){var r;window,e.exports=(r=n(111),function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=12)}([function(e,t){e.exports=r},function(e,t,n){"use strict";var r,a="object"==typeof Reflect?Reflect:null,o=a&&"function"==typeof a.apply?a.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function c(){c.init.call(this)}e.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var l=10;function s(e){return void 0===e._maxListeners?c.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var a,o,i,c;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),i=o[t]),void 0===i)i=o[t]=n,++e._eventsCount;else if("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(a=s(e))>0&&i.length>a&&!i.warned){i.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=i.length,c=l,console&&console.warn&&console.warn(c)}return e}function d(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,e))}function m(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=d.bind(r);return a.listener=n,r.wrapFn=a,a}function p(e,t,n){var r=e._events;if(void 0===r)return[];var a=r[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):h(a,a.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},c.prototype.getMaxListeners=function(){return s(this)},c.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,a=this._events;if(void 0!==a)r=r&&void 0===a.error;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var c=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw c.context=i,c}var l=a[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var s=l.length,u=h(l,s);for(n=0;n<s;++n)o(u[n],this,t)}return!0},c.prototype.addListener=function(e,t){return u(this,e,t,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(e,t){return u(this,e,t,!0)},c.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,m(this,e,t)),this},c.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,m(this,e,t)),this},c.prototype.removeListener=function(e,t){var n,r,a,o,i;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){i=n[o].listener,a=o;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(a=o[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},c.prototype.listeners=function(e){return p(this,e,!0)},c.prototype.rawListeners=function(e){return p(this,e,!1)},c.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},c.prototype.listenerCount=f,c.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t){var n={left:0,top:0};e.exports=function(e,t,r){t=t||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var a,o=e.clientX||0,i=e.clientY||0,c=(a=t)===window||a===document||a===document.body?n:a.getBoundingClientRect();return r[0]=o-c.left,r[1]=i-c.top,r}},function(e,t,n){"use strict";const r=n(4),a=n(5),o=n(8),i=n(11);e.exports=function(e,t){if(!(e&&t instanceof Function))return!1;let n,c=i({element:e}),l=0,s=0;n=new r({source:e,update:(e,n)=>{let r={type:"mouse",dx:e-s,dy:n-l,dz:0,x:c[0],y:c[1]};s=e,l=n,t(r)},multiplier:1,friction:.75}),a(e,(e,n,r,a)=>{a.preventDefault(),t({type:"mouse",dx:0,dy:0,dz:n,x:c[0],y:c[1],event:a})});let u,d=o(e);d.on("start",e=>{n&&n.pause();let[t,r]=d.fingers;u=[.5*r.position[0]+.5*t.position[0],.5*r.position[1]+.5*t.position[1]]}),d.on("end",()=>{u=null,n&&n.resume()}),d.on("change",(e,n)=>{d.pinching&&u&&t({type:"touch",dx:0,dy:0,dz:2*-(e-n),x:u[0],y:u[1]})})}},function(e,t,n){var r,a;void 0===(a="function"==typeof(r=function(e,t){"use strict";window.addEventListener("touchmove",(function(){})),t.exports=function e(t){var a,o,i,c,l,s,u,d,m,p,f,h=t.source,g=void 0===h?document:h,v=t.update,b=t.multiplier,y=void 0===b?1:b,E=t.friction,O=void 0===E?.92:E,C=t.initialValues,w=t.boundX,S=t.boundY,j=t.bounce,N=void 0===j||j;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var P=0,k=0,x=.3*y,_=!1,I=!1,T=!1,L=!1,A=[];function D(){v.call(g,P,k)}function M(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var t=e.targetTouches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY,id:t.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function R(e){var t=M(e);I||T||(I=!0,L=!1,m=t.id,l=u=t.x,s=d=t.y,A=[],U(l,s),document.addEventListener("touchmove",F,!!r()&&{passive:!1}),document.addEventListener("touchend",z),document.addEventListener("touchcancel",G),document.addEventListener("mousemove",F,!!r()&&{passive:!1}),document.addEventListener("mouseup",z))}function F(e){e.preventDefault();var t=M(e);I&&t.id===m&&(u=t.x,d=t.y,U(l,s),_||n(B),_=!0)}function z(e){var t=M(e);I&&t.id===m&&G()}function G(){I=!1,U(l,s),function(){var e=A[0],t=A[A.length-1],r=t.x-e.x,a=t.y-e.y,o=(t.time-e.time)/15/y;p=r/o||0,f=a/o||0;var i=V();(Math.abs(p)>1||Math.abs(f)>1||!i.inBounds)&&(L=!0,n(K))}(),document.removeEventListener("touchmove",F),document.removeEventListener("touchend",z),document.removeEventListener("touchcancel",G),document.removeEventListener("mouseup",z),document.removeEventListener("mousemove",F)}function U(e,t){for(var n=Date.now();A.length>0&&!(n-A[0].time<=100);)A.shift();A.push({x:e,y:t,time:n})}function B(){var e=u-l,t=d-s;if(P+=e*y,k+=t*y,N){var n=V();0!==n.x&&(P-=e*H(n.x)*y),0!==n.y&&(k-=t*H(n.y)*y)}else V(!0);D(),l=u,s=d,_=!1}function H(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function V(e){var t=0,n=0;return void 0!==a&&P<a?t=a-P:void 0!==o&&P>o&&(t=o-P),void 0!==i&&k<i?n=i-k:void 0!==c&&k>c&&(n=c-k),e&&(0!==t&&(P=t>0?a:o),0!==n&&(k=n>0?i:c)),{x:t,y:n,inBounds:0===t&&0===n}}function K(){if(L){P+=p*=O,k+=f*=O;var e=V();if(Math.abs(p)>x||Math.abs(f)>x||!e.inBounds){if(N){if(0!==e.x)if(e.x*p<=0)p+=.04*e.x;else{var t=e.x>0?2.5:-2.5;p=.11*(e.x+t)}0!==e.y&&(e.y*f<=0?f+=.04*e.y:(t=e.y>0?2.5:-2.5,f=.11*(e.y+t)))}else 0!==e.x&&(P=e.x>0?a:o,p=0),0!==e.y&&(k=e.y>0?i:c,f=0);D(),n(K)}else L=!1}}!function(){if(!(g="string"==typeof g?document.querySelector(g):g))throw new Error("IMPETUS: source not found.");if(!v)throw new Error("IMPETUS: update function not defined.");C&&(C[0]&&(P=C[0]),C[1]&&(k=C[1]),D()),w&&(a=w[0],o=w[1]),S&&(i=S[0],c=S[1]),g.addEventListener("touchstart",R),g.addEventListener("mousedown",R)}(),this.destroy=function(){return g.removeEventListener("touchstart",R),g.removeEventListener("mousedown",R),null},this.pause=function(){I=!1,T=!0},this.resume=function(){T=!1},this.setValues=function(e,t){"number"==typeof e&&(P=e),"number"==typeof t&&(k=t)},this.setMultiplier=function(e){x=.3*(y=e)},this.setBoundX=function(e){a=e[0],o=e[1]},this.setBoundY=function(e){i=e[0],c=e[1]}};var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function r(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return r=function(){return e},e}})?r.apply(t,[t,e]):r)||(e.exports=a)},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var a=r("ex",e),o=function(e){n&&e.preventDefault();var r=e.deltaX||0,o=e.deltaY||0,i=e.deltaZ||0,c=1;switch(e.deltaMode){case 1:c=a;break;case 2:c=window.innerHeight}if(o*=c,i*=c,(r*=c)||o||i)return t(r,o,i,e)};return e.addEventListener("wheel",o),o}},function(e,t,n){"use strict";var r=n(7);function a(e,t){var n=r(getComputedStyle(e).getPropertyValue(t));return n[0]*o(n[1],e)}function o(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return function(e,t){var n=document.createElement("div");n.style["font-size"]="128"+e,t.appendChild(n);var r=a(n,"font-size")/128;return t.removeChild(n),r}(e,t);case"em":return a(t,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}e.exports=o},function(e,t){e.exports=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},function(e,t,n){var r=n(9),a=n(1).EventEmitter,o=n(10),i=n(2);function c(){this.position=[0,0],this.touch=null}e.exports=function(e){e=e||window;var t=new a,n=[null,null],l=0,s=0,u=!1,d=!1;return Object.defineProperties(t,{pinching:o((function(){return 2===l})),fingers:o((function(){return n}))}),p(),t.enable=p,t.disable=function(){d&&(d=!1,l=0,n[0]=null,n[1]=null,s=0,u=!1,e.removeEventListener("touchstart",f,!1),e.removeEventListener("touchmove",h,!1),e.removeEventListener("touchend",g,!1),e.removeEventListener("touchcancel",g,!1))},t.indexOfTouch=m,t;function m(e){for(var t=e.identifier,r=0;r<n.length;r++)if(n[r]&&n[r].touch&&n[r].touch.identifier===t)return r;return-1}function p(){d||(d=!0,e.addEventListener("touchstart",f,!1),e.addEventListener("touchmove",h,!1),e.addEventListener("touchend",g,!1),e.addEventListener("touchcancel",g,!1))}function f(r){for(var a=0;a<r.changedTouches.length;a++){var o=r.changedTouches[a];if(-1===m(o.identifier)&&l<2){var d=0===l,p=n[0]?1:0,f=n[0]?0:1,h=new c;n[p]=h,l++,h.touch=o,i(o,e,h.position);var g=n[f]?n[f].touch:void 0;if(t.emit("place",o,g),!d){var b=v();u=!1,t.emit("start",b),s=b}}}}function h(r){for(var a=!1,o=0;o<r.changedTouches.length;o++){var c=r.changedTouches[o],u=m(c);-1!==u&&(a=!0,n[u].touch=c,i(c,e,n[u].position))}if(2===l&&a){var d=v();t.emit("change",d,s),s=d}}function g(e){for(var r=0;r<e.changedTouches.length;r++){var a=e.changedTouches[r],o=m(a);if(-1!==o){n[o]=null,l--;var i=0===o?1:0,c=n[i]?n[i].touch:void 0;t.emit("lift",a,c)}}u||2===l||(u=!0,t.emit("end"))}function v(){return l<2?0:r(n[0].position,n[1].position)}}},function(e,t){e.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}},function(e,t){e.exports=function(e,t){return{configurable:!0,enumerable:!0,get:e,set:t}}},function(e,t,n){var r=n(2),a=n(1).EventEmitter;function o(e){var t=(e=e||{}).element||window,n=new a,o=e.position||[0,0];return!1!==e.touchstart&&(t.addEventListener("mousedown",c,!1),t.addEventListener("touchstart",i,!1)),t.addEventListener("mousemove",c,!1),t.addEventListener("touchmove",i,!1),n.position=o,n.dispose=function(){t.removeEventListener("mousemove",c,!1),t.removeEventListener("mousedown",c,!1),t.removeEventListener("touchmove",i,!1),t.removeEventListener("touchstart",i,!1)},n;function i(e){c(e.targetTouches[0])}function c(e){r(e,t,o),n.emit("move",e)}}e.exports=function(e){return o(e).position},e.exports.emitter=function(e){return o(e)}},function(e,t,n){"use strict";n.r(t);var r={highlight:!0,pan:!0,selection:!0,tooltip:!0,zoom:!0},a=n(3),o=n.n(a),i=n(0),c="phylocanvas-tooltip-visible";function l(e){e.classList.remove(c)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.default=function(e,t){var n,a={mousedown:!1,offsetX:void 0,offsetY:void 0},s={visible:!1,element:(n=document.createElement("div"),n.className="phylocanvas-tooltip",n.style.position="absolute",n.style.pointerEvents="none",n)};function d(t){1===t.button&&t.preventDefault(),a.mousedown=!0,a.offsetX=e.state.offsetX,a.offsetY=e.state.offsetY}function p(t){if(a.mousedown)e.state.interactions.tooltip&&s.visible&&(l(s.element),s.visible=!1);else{var n=i.utils.mapPoint(e,t.offsetX,t.offsetY),r=e.getNodeAtPoint(n.x,n.y);e.state.interactions.highlight&&e.highlightNode(r),e.state.interactions.tooltip&&(r&&!r.isLeaf?(function(e,t,n,r){e.innerHTML=r,e.style.left="".concat(t,"px"),e.style.top="".concat(n,"px"),e.classList.add(c)}(s.element,t.clientX,t.clientY,r.totalLeaves),s.visible=!0):s.visible&&(l(s.element),s.visible=!1))}}function f(t){a.mousedown=!1;var n=e.state.offsetX-a.offsetX,r=e.state.offsetY-a.offsetY,o=0!==n||0!==r;if(e.state.interactions.selection&&0===t.button&&!o){var c=i.utils.mapPoint(e,t.offsetX,t.offsetY),l=e.getNodeAtPoint(c.x,c.y);e.selectNode(l,t.metaKey||t.ctrlKey)}}t("mergeState",(function(t,n){s.visible&&(l(s.element),s.visible=!1),e.state.interactions.highlight&&e.highlightNode(null),t.apply(void 0,m(n))})),e.ctx.canvas.addEventListener("mousemove",p),e.ctx.canvas.addEventListener("mousedown",d),e.ctx.canvas.addEventListener("touchstart",d),e.ctx.canvas.addEventListener("mouseup",f),e.ctx.canvas.addEventListener("touchend",f),o()(e.ctx.canvas,(function(t){var n=t.dx,r=t.dy,a=t.dz,o=t.x,i=t.y,c=t.event;0!==a&&0===n&&0===r?e.state.interactions.zoom&&(c&&(c.metaKey||c.ctrlKey)?e.changeBranchScale(a<0?1:-1,{x:o,y:i}):c&&(c.altKey||c.shiftKey)?e.changeStepScale(a<0?1:-1,{x:o,y:i}):a>0&&e.state.scale>e.state.minScale*e.pixelRatio?e.transform(0,0,-1,{x:o,y:i}):a<0&&e.state.scale<e.state.maxScale*e.pixelRatio&&e.transform(0,0,1,{x:o,y:i})):e.state.interactions.pan&&e.transform(n,r,0,{x:o,y:i})})),e.ctx.canvas.onselectstart=function(){return!1},t("getInitialState",(function(e,t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(t,1)[0],a=n.interactions,o=void 0===a?{}:a;return("string"==typeof n.parent?document.querySelector(n.parent):n.parent||document.body).appendChild(s.element),u({},e.apply(void 0,m(t)),{interactions:u({},r,{},o)})})),t("destroy",(function(t,n){e.ctx.canvas.removeEventListener("mousemove",p),e.ctx.canvas.removeEventListener("mousedown",d),e.ctx.canvas.removeEventListener("touchstart",d),e.ctx.canvas.removeEventListener("mouseup",f),e.ctx.canvas.removeEventListener("touchend",f),l(s.element),t.apply(void 0,m(n))}))}}]))},function(e,t,n){var r;window,e.exports=(r=n(111),function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=1)}([function(e,t){e.exports=r},function(e,t,n){"use strict";n.r(t);var r=n(0),a={blockFontSize:null,blockLength:16,blockSize:null,blockPadding:0,columns:[],fillStyle:"black",headerFontWeight:"bold",showLabels:!0,showHeaders:!0,textPadding:4,values:{}};function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var u=r.utils.mapScalar,d=r.constants.Angles,m=r.constants.TreeTypes;function p(e,t){for(var n={},r=0,a=Object.keys(t);r<a.length;r++){var o=a[r];n[o]=t[o]/e.state.scale}return n}t.default=function(e,t){t("getInitialState",(function(e,t){var n=s(t,1)[0].metadata,r=void 0===n?{}:n;return c({},e.apply(void 0,o(t)),{metadata:c({},a,{},r)})})),t("layout",(function(t,n){var r=e.state,a=t.apply(void 0,o(n));if(a.metadata||(a.metadata={}),a.metadata.values!==r.metadata.values||a.metadata.columns!==r.metadata.columns||a.metadata.blockPadding!==r.metadata.blockPadding||a.metadata.blockLength!==r.metadata.blockLength||a.metadata.fontSize!==r.fontSize){a.metadata.columnWidths={},a.metadata.headerWidths={};var i=!0,c=!1,l=void 0;try{for(var s,u=r.metadata.columns[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var d=s.value,m="",p=!0,f=!1,h=void 0;try{for(var g,v=a.leafNodes[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var b=g.value;if(b.id in r.metadata.values){var y=r.metadata.values[b.id][d];y&&("string"==typeof y.label?y.label.length>m.length&&(m=y.label):console.error("Invalid metadata label for node ",b.id," column ",d))}}}catch(e){f=!0,h=e}finally{try{p||null==v.return||v.return()}finally{if(f)throw h}}m.length?a.metadata.columnWidths[d]=e.measureTextWidth(m):a.metadata.columnWidths[d]=0,a.metadata.headerWidths[d]=2*r.fontSize+e.measureTextWidth(d,r.metadata.headerFontWeight)}}catch(e){c=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(c)throw l}}}return a.metadata.blockLength=r.metadata.blockLength,a.metadata.blockPadding=r.metadata.blockPadding,a.metadata.columns=r.metadata.columns,a.metadata.values=r.metadata.values,a.metadata.fontSize=r.fontSize,a})),t("postRender",(function(t,n){var a=e.ctx,i=e.state,c=s(n,1)[0],l=u(e,i.metadata.blockLength),f=u(e,i.metadata.blockPadding),h=p(e,c.metadata.headerWidths),g=p(e,c.metadata.columnWidths),v=u(e,i.metadata.textPadding),b=new Set(Object.keys(i.metadata.values)),y=r.types[i.type],E=i.metadata.showHeaders&&y.mainAxis&&(!y.alignableLabels||y.alignableLabels&&e.state.alignLabels),O=i.metadata.showLabels,C=i.metadata.columns||[];a.save(),a.fillStyle=i.metadata.fillStyle;var w=v;if(i.showNodes&&(w+=e._.actualNodeSize),i.renderLeafLabels&&(w+=e._.actualMaxLabelWidth),E){a.textAlign="left",a.textBaseline="middle",a.font="".concat(i.metadata.headerFontWeight," ").concat(e._.actualFontSize,"px ").concat(i.fontFamily);var S=c.leafNodes[0];S.angle,i.metadata.showLabels||d.Degrees90,a.translate(S.x,S.y),a.rotate(S.angle);var j=w;y.alignableLabels&&(j+=e.state.branchScale*(c.rootNode.longestLeaf-S.distanceFromRoot));for(var N=-.5*i.stepScale,P=0;P<C.length;P++){var k=C[P],x=f;x+=O?Math.max(h[k],f+l+g[k]):l;var _=O?j+f+l+v:j+f+l/2,I=O?N-e._.actualFontSize/2:N-v;a.translate(_,I),O||a.rotate(-d.Degrees90),a.fillText(k,0,0),O||a.rotate(d.Degrees90),a.translate(-1*_,-1*I),j+=x}a.rotate(-S.angle),a.translate(-S.x,-S.y)}var T=i.stepScale,L=0;if(i.type===m.Circular&&e.state.alignLabels){var A=d.Degrees360/c.rootNode.totalLeaves;T=A*(c.rootNode.totalLeafLength*e.state.branchScale+e._.actualNodeSize+e._.actualMaxLabelWidth),L=A*(l+f)}else i.type===m.Radial&&(T=e._.actualNodeSize);var D=Math.min(T,i.blockSize||T);a.font="".concat(e._.actualFontSize,"px ").concat(i.fontFamily);var M=!0,R=!1,F=void 0;try{for(var z,G=c.leafNodes[Symbol.iterator]();!(M=(z=G.next()).done);M=!0){var U=z.value;if(b.has(U.id)){var B=i.metadata.values[U.id];a.translate(U.x,U.y),a.rotate(U.angle),a.beginPath();var H=w;y.alignableLabels&&e.state.alignLabels&&(H+=e.state.branchScale*(c.rootNode.longestLeaf-U.distanceFromRoot));for(var V=0;V<C.length;V++){var K=C[V];if(void 0!==B[K]&&!U.isHidden&&(a.fillStyle=B[K].colour||B[K],a.fillRect(H+f,0-D/2,l,D+V*L),a.fillStyle=i.metadata.fillStyle,e._.renderLabels&&O&&"string"==typeof B[K].label)){var q=U.angle>d.Degrees90&&U.angle<d.Degrees270;q&&a.rotate(d.Degrees180),a.textAlign=q?"right":"left",a.textBaseline="middle",a.fillText(B[K].label,(q?-1:1)*(H+f+l+v),0),q&&a.rotate(-d.Degrees180)}H+=f+Math.max(E&&O?h[K]:0,O?f+l+g[K]:l)}a.closePath(),a.rotate(-U.angle),a.translate(-U.x,-U.y)}}}catch(e){R=!0,F=e}finally{try{M||null==G.return||G.return()}finally{if(R)throw F}}a.restore(),t.apply(void 0,o(n))})),t("getDrawingArea",(function(t,n){var a=t.apply(void 0,o(n)),i=r.types[e.state.type],c=e.layout(),l=e.state.metadata.blockLength,s=e.state.metadata.blockPadding,u=c.metadata.headerWidths,d=c.metadata.columnWidths,p=e.state.metadata.showLabels,f=e.state.metadata.showHeaders&&i.mainAxis&&(!i.alignableLabels||i.alignableLabels&&e.state.alignLabels),h=0;e.state.renderLeafLabels&&(h+=c.maxLabelWidth);var g=!0,v=!1,b=void 0;try{for(var y,E=e.state.metadata.columns[Symbol.iterator]();!(g=(y=E.next()).done);g=!0){var O=y.value;h+=s+Math.max(f&&p?u[O]:0,p?s+l+d[O]:l)}}catch(e){v=!0,b=e}finally{try{g||null==E.return||E.return()}finally{if(v)throw b}}var C=0,w=0,S=0,j=0;switch(e.state.type){case m.Rectangular:case m.Diagonal:S=f?e.state.stepScale:0,w=h;break;case m.Hierarchical:C=f?e.state.stepScale:0,j=h;break;case m.Circular:case m.Radial:C=h,S=h,w=h,j=h}return{width:a.width,height:a.height,left:a.left+C,top:a.top+S,right:a.right-w,bottom:a.bottom-j}}))}}]))},function(e,t,n){var r;window,e.exports=(r=n(111),function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=1)}([function(e,t){e.exports=r},function(e,t,n){"use strict";n.r(t);var r={background:"rgba(255, 255, 255, 0.87)",digits:2,fillStyle:"#222",fontSize:13,height:16,lineWidth:1,padding:8,position:{left:8,bottom:8},strokeStyle:"#222",textAlign:"center",textBaseline:"bottom",textBaselineOffset:2,width:80},a=n(0);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e,t){t("getInitialState",(function(e,t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(t,1)[0].scalebar,a=void 0===n?{}:n;return c({},e.apply(void 0,o(t)),{scalebar:c({},r,{},a)})})),t("render",(function(t,n){t.apply(void 0,o(n)),function(e){var t=e.state.scalebar,n=t.position,r=e.ctx,o=a.utils.getPixelRatio(r),i=t.lineWidth,c=t.fontSize,l=t.padding,s=t.height,u=t.width,d=t.digits,m=u/e.state.branchScale/e.state.scale,p=0;if(Number.isInteger(m))p=m;else for(;0===p;)0===(p=parseFloat(m.toFixed(d),10))&&d++;var f=u*p/m;r.save(),r.scale(o,o);var h=r.canvas.width/o,g=r.canvas.height/o,v=0;void 0!==n.left?v=n.left:void 0!==n.centre?v=h/2-f/2-l+n.centre:void 0!==n.right?v=h-f-n.right-2*l:e.error("Invalid horizontal position specified. Supported values are `left`, `centre`, or `right`");var b=0;void 0!==n.top?b=n.top+l:void 0!==n.middle?b=g/2-s+n.middle+l:void 0!==n.bottom?b=g-s-n.bottom-l:e.error("Invalid vertical position specified. Supported values are `top`, `middle`, or `bottom`"),r.fillStyle=t.background,r.fillRect(v,b-l,f+2*l,s+2*l),r.font="".concat(c,"px ").concat(t.fontFamily||e.state.fontFamily),r.fillStyle=t.fillStyle,r.strokeStyle=t.strokeStyle,r.lineWidth=i,r.textBaseline=t.textBaseline,r.textAlign=t.textAlign,r.beginPath(),r.moveTo(v+l+i,b+i),r.lineTo(v+f+l-i,b+i),r.moveTo(v+l+i,b+i),r.lineTo(v+l+i,b+s),r.moveTo(v+f+l-i,b+i),r.lineTo(v+f+l-i,b+s),r.stroke(),r.closePath(),r.fillText(p,v+(f+2*l)/2,b+s+t.textBaselineOffset),r.restore()}(e)}))}}]))},function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=1)}([function(e,t,n){!function(){"use strict";var t,n,r,a,o;function i(e,t){var n,r=Object.keys(t);for(n=0;n<r.length;n++)e=e.replace(new RegExp("\\{"+r[n]+"\\}","gi"),t[r[n]]);return e}function c(e){var t,n,r;if(!e)throw new Error("cannot create a random attribute name for an undefined object");t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="";do{for(n="",r=0;r<12;r++)n+=t[Math.floor(Math.random()*t.length)]}while(e[n]);return n}function l(e){var t={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return t[e]||t.alphabetic}o=function(e,t){var n,r,a,o={};for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r="&"+e[n+1]+";",a=parseInt(e[n],t),o[r]="&#"+a+";";return o["\\xa0"]="&#160;",o}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),t={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"}},(r=function(e,t){this.__root=e,this.__ctx=t}).prototype.addColorStop=function(e,t){var n,r=this.__ctx.__createElement("stop");r.setAttribute("offset",e),-1!==t.indexOf("rgba")?(n=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(t),r.setAttribute("stop-color",i("rgb({r},{g},{b})",{r:n[1],g:n[2],b:n[3]})),r.setAttribute("stop-opacity",n[4])):r.setAttribute("stop-color",t),this.__root.appendChild(r)},a=function(e,t){this.__root=e,this.__ctx=t},(n=function(e){var t,r={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((t=r).width=arguments[0],t.height=arguments[1]):t=e||r,!(this instanceof n))return new n(t);this.width=t.width||r.width,this.height=t.height||r.height,this.enableMirroring=void 0!==t.enableMirroring?t.enableMirroring:r.enableMirroring,this.canvas=this,this.__document=t.document||document,this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d"),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(e,t,n){void 0===t&&(t={});var r,a,o=this.__document.createElementNS("http://www.w3.org/2000/svg",e),i=Object.keys(t);for(n&&(o.setAttribute("fill","none"),o.setAttribute("stroke","none")),r=0;r<i.length;r++)a=i[r],o.setAttribute(a,t[a]);return o},n.prototype.__setDefaultStyles=function(){var e,n,r=Object.keys(t);for(e=0;e<r.length;e++)this[n=r[e]]=t[n].canvas},n.prototype.__applyStyleState=function(e){var t,n,r=Object.keys(e);for(t=0;t<r.length;t++)this[n=r[t]]=e[n]},n.prototype.__getStyleState=function(){var e,n,r={},a=Object.keys(t);for(e=0;e<a.length;e++)r[n=a[e]]=this[n];return r},n.prototype.__applyStyleToCurrentElement=function(e){var n,o,c,l,s,u=Object.keys(t);for(n=0;n<u.length;n++)if(o=t[u[n]],c=this[u[n]],o.apply)if(-1!==o.apply.indexOf("fill")&&c instanceof a){if(c.__ctx)for(;c.__ctx.__defs.childNodes.length;)l=c.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[l]=l,this.__defs.appendChild(c.__ctx.__defs.childNodes[0]);this.__currentElement.setAttribute("fill",i("url(#{id})",{id:c.__root.getAttribute("id")}))}else-1!==o.apply.indexOf("fill")&&c instanceof r?this.__currentElement.setAttribute("fill",i("url(#{id})",{id:c.__root.getAttribute("id")})):-1!==o.apply.indexOf(e)&&o.svg!==c&&("stroke"!==o.svgAttr&&"fill"!==o.svgAttr||-1===c.indexOf("rgba")?this.__currentElement.setAttribute(o.svgAttr,c):(s=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(c),this.__currentElement.setAttribute(o.svgAttr,i("rgb({r},{g},{b})",{r:s[1],g:s[2],b:s[3]})),this.__currentElement.setAttribute(o.svgAttr+"-opacity",s[4])))},n.prototype.__closestGroupOrSvg=function(e){return"g"===(e=e||this.__currentElement).nodeName||"svg"===e.nodeName?e:this.__closestGroupOrSvg(e.parentNode)},n.prototype.getSerializedSvg=function(e){var t,n,r,a,i,c=(new XMLSerializer).serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(c)&&(c=c.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),e)for(t=Object.keys(o),n=0;n<t.length;n++)r=t[n],a=o[r],(i=new RegExp(r,"gi")).test(c)&&(c=c.replace(i,a));return c},n.prototype.getSvg=function(){return this.__root},n.prototype.save=function(){var e=this.__createElement("g"),t=this.__closestGroupOrSvg();this.__groupStack.push(t),t.appendChild(e),this.__currentElement=e,this.__stack.push(this.__getStyleState())},n.prototype.restore=function(){this.__currentElement=this.__groupStack.pop();var e=this.__stack.pop();this.__applyStyleState(e)},n.prototype.__addTransform=function(e){var t=this.__closestGroupOrSvg();if(t.childNodes.length>0){var n=this.__createElement("g");t.appendChild(n),this.__currentElement=n}var r=this.__currentElement.getAttribute("transform");r?r+=" ":r="",r+=e,this.__currentElement.setAttribute("transform",r)},n.prototype.scale=function(e,t){void 0===t&&(t=e),this.__addTransform(i("scale({x},{y})",{x:e,y:t}))},n.prototype.rotate=function(e){var t=180*e/Math.PI;this.__addTransform(i("rotate({angle},{cx},{cy})",{angle:t,cx:0,cy:0}))},n.prototype.translate=function(e,t){this.__addTransform(i("translate({x},{y})",{x:e,y:t}))},n.prototype.transform=function(e,t,n,r,a,o){this.__addTransform(i("matrix({a},{b},{c},{d},{e},{f})",{a:e,b:t,c:n,d:r,e:a,f:o}))},n.prototype.beginPath=function(){var e;this.__currentDefaultPath="",this.__currentPosition={},e=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(e),this.__currentElement=e},n.prototype.__applyCurrentDefaultPath=function(){if("path"!==this.__currentElement.nodeName)throw new Error("Attempted to apply path command to node "+this.__currentElement.nodeName);var e=this.__currentDefaultPath;this.__currentElement.setAttribute("d",e)},n.prototype.__addPathCommand=function(e){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=e},n.prototype.moveTo=function(e,t){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:e,y:t},this.__addPathCommand(i("M {x} {y}",{x:e,y:t}))},n.prototype.closePath=function(){this.__addPathCommand("Z")},n.prototype.lineTo=function(e,t){this.__currentPosition={x:e,y:t},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(i("L {x} {y}",{x:e,y:t})):this.__addPathCommand(i("M {x} {y}",{x:e,y:t}))},n.prototype.bezierCurveTo=function(e,t,n,r,a,o){this.__currentPosition={x:a,y:o},this.__addPathCommand(i("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:e,cp1y:t,cp2x:n,cp2y:r,x:a,y:o}))},n.prototype.quadraticCurveTo=function(e,t,n,r){this.__currentPosition={x:n,y:r},this.__addPathCommand(i("Q {cpx} {cpy} {x} {y}",{cpx:e,cpy:t,x:n,y:r}))};var s=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]};n.prototype.arcTo=function(e,t,n,r,a){var o=this.__currentPosition&&this.__currentPosition.x,i=this.__currentPosition&&this.__currentPosition.y;if(void 0!==o&&void 0!==i){if(a<0)throw new Error("IndexSizeError: The radius provided ("+a+") is negative.");if(o===e&&i===t||e===n&&t===r||0===a)this.lineTo(e,t);else{var c=s([o-e,i-t]),l=s([n-e,r-t]);if(c[0]*l[1]!=c[1]*l[0]){var u=c[0]*l[0]+c[1]*l[1],d=Math.acos(Math.abs(u)),m=s([c[0]+l[0],c[1]+l[1]]),p=a/Math.sin(d/2),f=e+p*m[0],h=t+p*m[1],g=[-c[1],c[0]],v=[l[1],-l[0]],b=function(e){var t=e[0];return e[1]>=0?Math.acos(t):-Math.acos(t)},y=b(g),E=b(v);this.lineTo(f+g[0]*a,h+g[1]*a),this.arc(f,h,a,y,E)}else this.lineTo(e,t)}}},n.prototype.stroke=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},n.prototype.fill=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},n.prototype.rect=function(e,t,n,r){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.closePath()},n.prototype.fillRect=function(e,t,n,r){var a;a=this.__createElement("rect",{x:e,y:t,width:n,height:r},!0),this.__closestGroupOrSvg().appendChild(a),this.__currentElement=a,this.__applyStyleToCurrentElement("fill")},n.prototype.strokeRect=function(e,t,n,r){var a;a=this.__createElement("rect",{x:e,y:t,width:n,height:r},!0),this.__closestGroupOrSvg().appendChild(a),this.__currentElement=a,this.__applyStyleToCurrentElement("stroke")},n.prototype.clearRect=function(e,t,n,r){var a,o=this.__closestGroupOrSvg();a=this.__createElement("rect",{x:e,y:t,width:n,height:r,fill:"#FFFFFF"},!0),o.appendChild(a)},n.prototype.createLinearGradient=function(e,t,n,a){var o=this.__createElement("linearGradient",{id:c(this.__ids),x1:e+"px",x2:n+"px",y1:t+"px",y2:a+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(o),new r(o,this)},n.prototype.createRadialGradient=function(e,t,n,a,o,i){var l=this.__createElement("radialGradient",{id:c(this.__ids),cx:a+"px",cy:o+"px",r:i+"px",fx:e+"px",fy:t+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(l),new r(l,this)},n.prototype.__parseFont=function(){var e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\"\sa-z]+?)\s*$/i.exec(this.font),t={style:e[1]||"normal",size:e[4]||"10px",family:e[6]||"sans-serif",weight:e[3]||"normal",decoration:e[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(t.decoration="underline"),this.__fontHref&&(t.href=this.__fontHref),t},n.prototype.__wrapTextLink=function(e,t){if(e.href){var n=this.__createElement("a");return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.href),n.appendChild(t),n}return t},n.prototype.__applyText=function(e,t,n,r){var a,o,i=this.__parseFont(),c=this.__closestGroupOrSvg(),s=this.__createElement("text",{"font-family":i.family,"font-size":i.size,"font-style":i.style,"font-weight":i.weight,"text-decoration":i.decoration,x:t,y:n,"text-anchor":(a=this.textAlign,o={left:"start",right:"end",center:"middle",start:"start",end:"end"},o[a]||o.start),"dominant-baseline":l(this.textBaseline)},!0);s.appendChild(this.__document.createTextNode(e)),this.__currentElement=s,this.__applyStyleToCurrentElement(r),c.appendChild(this.__wrapTextLink(i,s))},n.prototype.fillText=function(e,t,n){this.__applyText(e,t,n,"fill")},n.prototype.strokeText=function(e,t,n){this.__applyText(e,t,n,"stroke")},n.prototype.measureText=function(e){return this.__ctx.font=this.font,this.__ctx.measureText(e)},n.prototype.arc=function(e,t,n,r,a,o){if(r!==a){(r%=2*Math.PI)==(a%=2*Math.PI)&&(a=(a+2*Math.PI-.001*(o?-1:1))%(2*Math.PI));var c,l=e+n*Math.cos(a),s=t+n*Math.sin(a),u=e+n*Math.cos(r),d=t+n*Math.sin(r),m=o?0:1,p=a-r;p<0&&(p+=2*Math.PI),c=o?p>Math.PI?0:1:p>Math.PI?1:0,this.lineTo(u,d),this.__addPathCommand(i("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:n,ry:n,xAxisRotation:0,largeArcFlag:c,sweepFlag:m,endX:l,endY:s})),this.__currentPosition={x:l,y:s}}},n.prototype.clip=function(){var e=this.__closestGroupOrSvg(),t=this.__createElement("clipPath"),n=c(this.__ids),r=this.__createElement("g");e.removeChild(this.__currentElement),t.setAttribute("id",n),t.appendChild(this.__currentElement),this.__defs.appendChild(t),e.setAttribute("clip-path",i("url(#{id})",{id:n})),e.appendChild(r),this.__currentElement=r},n.prototype.drawImage=function(){var e,t,r,a,o,i,c,l,s,u,d,m,p,f,h=Array.prototype.slice.call(arguments),g=h[0],v=0,b=0;if(3===h.length)e=h[1],t=h[2],r=o=g.width,a=i=g.height;else if(5===h.length)e=h[1],t=h[2],r=h[3],a=h[4],o=g.width,i=g.height;else{if(9!==h.length)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);v=h[1],b=h[2],o=h[3],i=h[4],e=h[5],t=h[6],r=h[7],a=h[8]}if(c=this.__closestGroupOrSvg(),d=this.__currentElement,g instanceof n){for(s=(l=g.getSvg()).childNodes[0];s.childNodes.length;)f=s.childNodes[0].getAttribute("id"),this.__ids[f]=f,this.__defs.appendChild(s.childNodes[0]);u=l.childNodes[1],c.appendChild(u),this.__currentElement=u,this.translate(e,t),this.__currentElement=d}else"CANVAS"!==g.nodeName&&"IMG"!==g.nodeName||((m=this.__createElement("image")).setAttribute("width",r),m.setAttribute("height",a),m.setAttribute("preserveAspectRatio","none"),(v||b||o!==g.width||i!==g.height)&&((p=this.__document.createElement("canvas")).width=r,p.height=a,p.getContext("2d").drawImage(g,v,b,o,i,0,0,r,a),g=p),m.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===g.nodeName?g.toDataURL():g.getAttribute("src")),c.appendChild(m),this.__currentElement=m,this.translate(e,t),this.__currentElement=d)},n.prototype.createPattern=function(e,t){var r,o=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),i=c(this.__ids);return o.setAttribute("id",i),o.setAttribute("width",e.width),o.setAttribute("height",e.height),"CANVAS"===e.nodeName||"IMG"===e.nodeName?((r=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",e.width),r.setAttribute("height",e.height),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===e.nodeName?e.toDataURL():e.getAttribute("src")),o.appendChild(r),this.__defs.appendChild(o)):e instanceof n&&(o.appendChild(e.__root.childNodes[1]),this.__defs.appendChild(o)),new a(o,this)},n.prototype.drawFocusRing=function(){},n.prototype.createImageData=function(){},n.prototype.getImageData=function(){},n.prototype.putImageData=function(){},n.prototype.globalCompositeOperation=function(){},n.prototype.setTransform=function(){},"object"==typeof window&&(window.C2S=n),"object"==typeof e.exports&&(e.exports=n)}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e.ctx,o=r.canvas,i=o.width,c=o.height,l=new a.a(i,c);e.ctx=l,e.render();var s=l[t].apply(l,n);return e.ctx=r,e.render(),s}t.default=function(e){e.exportSVG=function(){return o(e,"getSvg")},e.exportSerialisedSVG=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o(e,"getSerializedSvg",[t])}}}])},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(393),a=n(394);if(void 0===r)throw Error("create-react-class could not find the React object. If you are using script tags, make sure that React is being loaded before create-react-class.");var o=(new r.Component).updater;e.exports=a(r.Component,r.isValidElement,o)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){var r={"./":136,"./FormattedName.react":287,"./FormattedName.react.js":287,"./canar":420,"./canar.js":420,"./index":136,"./index.js":136,"./klepn":421,"./klepn.js":421,"./neigo":422,"./neigo.js":422,"./rensm":423,"./rensm.js":423,"./salty":424,"./salty.js":424,"./saureus":425,"./saureus.js":425,"./sequi":426,"./sequi.js":426,"./strpn":427,"./strpn.js":427,"./vibcl":428,"./vibcl.js":428,"./zikv":429,"./zikv.js":429};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=650},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){L.FeatureGroup.LassoSelect=L.FeatureGroup.extend({options:{activeTooltip:"Click and release to place your first point.",startedTooltip:"Click on the map to draw an edge.",readyTooltip:"Continue placing points or click on the first point to finish shape.",finishedTooltip:"",polyline:{},initialPath:null},initialize:function(e){L.Util.setOptions(this,e)},onAdd:function(e){if(this.map=e,this.disable(),this.options.control&&(this.control=L.control.lassoSelect(this,this.options.control),this.control.addTo(e)),this.options.initialPath)for(var t=0;t<this.options.initialPath.length;t++)this.addPointToPath(this.options.initialPath[t]);this.options.noClickEvent||this.map.on("click",this.onClick,this)},onRemove:function(){this.map=null,this.off("click")},enable:function(){this.isActive=!0,this.reset(),this.bringToFront()},disable:function(){this.isActive=!1,this.reset()},toggle:function(){this.isActive?this.disable():this.enable()},reset:function(){if(this.polygon&&this.map.removeLayer(this.polygon),this.polygon=null,this.polyline&&this.map.removeLayer(this.polyline),this.polyline=null,this.markers)for(var e=0;e<this.markers.length;e++)this.map.removeLayer(this.markers[e]);this.markers=[],this.isStarted=!1,this.isFinished=!1,this.setMapTooltip()},getPath:function(){return this.isStarted?this.polyline.getLatLngs():null},getBounds:function(){return this.isFinished?this.polyline.getBounds():null},contains:function(e){for(var t=this.getPath(),n=e.lat,r=e.lng,a=!1,o=0,i=t.length-1;o<t.length;i=o++){var c=t[o].lat,l=t[o].lng,s=t[i].lat,u=t[i].lng;l>r!=u>r&&n<(s-c)*(r-l)/(u-l)+c&&(a=!a)}return a},setMapTooltip:function(){var e="",t="";this.isActive&&(this.isFinished?e=this.options.finishedTooltip:this.isStarted?this.getPath().length<3?(t="crosshair",e=this.options.startedTooltip):(t="crosshair",e=this.options.readyTooltip):(t="crosshair",e=this.options.activeTooltip)),this.map._container.style.cursor=t,this.map._container.title=e},onClick:function(e){this.isActive&&(this.isFinished&&!1!==this.controlled||(this.addPointToPath(e.latlng),this.setMapTooltip()))},addPointToPath:function(e){this.isStarted||(this.polyline=L.polyline([],this.options.polyline).addTo(this.map),this.markers=[],this.isStarted=!0),this.polyline.addLatLng(e);var t=L.marker(e,{draggable:!0,icon:L.divIcon({html:""})}).addTo(this.map);0===this.markers.length&&t.on("click",this.completePath.bind(this)),t.on("dragend",this.fire.bind(this,"pathchange")),t.on("drag",this.updatePath.bind(this)),this.markers.push(t)},updatePath:function(){for(var e=[],t=0;t<this.markers.length;t++)e.push(this.markers[t].getLatLng());e.push(this.markers[0].getLatLng()),this.polyline.setLatLngs(e)},completePath:function(){this.isFinished||this.markers.length<3||(this.polyline.addLatLng(this.markers[0].getLatLng()),this.isFinished=!0,this.setMapTooltip(),this.fire("pathchange"))}}),L.featureGroup.lassoSelect=function(e){return new L.FeatureGroup.LassoSelect(e)},L.Control.LassoSelect=L.Control.extend({options:{content:"Lasso",className:"leaflet-lasso-select-control"},initialize:function(e,t){this.lasso=e,L.Util.setOptions(this,t)},onAdd:function(e){this.map=e;var t=L.DomUtil.create("button");return t.innerHTML=this.options.content,t.className=this.options.className,this._onClick=this.onClick.bind(this),t.addEventListener("click",this._onClick),this.button=t,t},onRemove:function(){this.map=null,button.removeEventListener("click",this._onClick)},onClick:function(e){e.stopPropagation(),this.lasso.toggle(),this.button.classList.toggle("active")}}),L.control.lassoSelect=function(e,t){return new L.Control.LassoSelect(e,t)}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,function(e,t){},,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(28),i=(n(18),n(938),n(944),n(946),n(486)),c=n.n(i),l=n(240),s=n(117),u=n(114),d={primaryColour:"#673c90"};Object(u.a)(d);var m=function(){return a.a.createElement(c.a,{store:s.a},a.a.createElement(l.a,null))};Object(o.render)(a.a.createElement(m,null),document.getElementById("pathogenwatch"))},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,,,,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,,,,,,,,,,,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,,,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,,,function(e,t){},,,function(e,t){},,,function(e,t){},,function(e,t){},,function(e,t){},,,,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,,function(e,t){},,function(e,t){},,,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,,,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,,,,,,,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){},,function(e,t){}],[[911,1,2]]]);