(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{1001:function(e,t){},1013:function(e,t){L.FeatureGroup.LassoSelect=L.FeatureGroup.extend({options:{activeTooltip:"Click and release to place your first point.",startedTooltip:"Click on the map to draw an edge.",readyTooltip:"Continue placing points or click on the first point to finish shape.",finishedTooltip:"",polyline:{},initialPath:null},initialize:function(e){L.Util.setOptions(this,e)},onAdd:function(e){if(this.map=e,this.disable(),this.options.control&&(this.control=L.control.lassoSelect(this,this.options.control),this.control.addTo(e)),this.options.initialPath)for(var t=0;t<this.options.initialPath.length;t++)this.addPointToPath(this.options.initialPath[t]);this.options.noClickEvent||this.map.on("click",this.onClick,this)},onRemove:function(){this.map=null,this.off("click")},enable:function(){this.isActive=!0,this.reset(),this.bringToFront()},disable:function(){this.isActive=!1,this.reset()},toggle:function(){this.isActive?this.disable():this.enable()},reset:function(){if(this.polygon&&this.map.removeLayer(this.polygon),this.polygon=null,this.polyline&&this.map.removeLayer(this.polyline),this.polyline=null,this.markers)for(var e=0;e<this.markers.length;e++)this.map.removeLayer(this.markers[e]);this.markers=[],this.isStarted=!1,this.isFinished=!1,this.setMapTooltip()},getPath:function(){return this.isStarted?this.polyline.getLatLngs():null},getBounds:function(){return this.isFinished?this.polyline.getBounds():null},contains:function(e){for(var t=this.getPath(),n=e.lat,r=e.lng,a=!1,o=0,i=t.length-1;o<t.length;i=o++){var s=t[o].lat,l=t[o].lng,c=t[i].lat,u=t[i].lng;l>r!=u>r&&n<(c-s)*(r-l)/(u-l)+s&&(a=!a)}return a},setMapTooltip:function(){var e="",t="";this.isActive&&(this.isFinished?e=this.options.finishedTooltip:this.isStarted?this.getPath().length<3?(t="crosshair",e=this.options.startedTooltip):(t="crosshair",e=this.options.readyTooltip):(t="crosshair",e=this.options.activeTooltip)),this.map._container.style.cursor=t,this.map._container.title=e},onClick:function(e){this.isActive&&(this.isFinished&&!1!==this.controlled||(this.addPointToPath(e.latlng),this.setMapTooltip()))},addPointToPath:function(e){this.isStarted||(this.polyline=L.polyline([],this.options.polyline).addTo(this.map),this.markers=[],this.isStarted=!0),this.polyline.addLatLng(e);var t=L.marker(e,{draggable:!0,icon:L.divIcon({html:""})}).addTo(this.map);0===this.markers.length&&t.on("click",this.completePath.bind(this)),t.on("dragend",this.fire.bind(this,"pathchange")),t.on("drag",this.updatePath.bind(this)),this.markers.push(t)},updatePath:function(){for(var e=[],t=0;t<this.markers.length;t++)e.push(this.markers[t].getLatLng());e.push(this.markers[0].getLatLng()),this.polyline.setLatLngs(e)},completePath:function(){this.isFinished||this.markers.length<3||(this.polyline.addLatLng(this.markers[0].getLatLng()),this.isFinished=!0,this.setMapTooltip(),this.fire("pathchange"))}}),L.featureGroup.lassoSelect=function(e){return new L.FeatureGroup.LassoSelect(e)},L.Control.LassoSelect=L.Control.extend({options:{content:"Lasso",className:"leaflet-lasso-select-control"},initialize:function(e,t){this.lasso=e,L.Util.setOptions(this,t)},onAdd:function(e){this.map=e;var t=L.DomUtil.create("button");return t.innerHTML=this.options.content,t.className=this.options.className,this._onClick=this.onClick.bind(this),t.addEventListener("click",this._onClick),this.button=t,t},onRemove:function(){this.map=null,button.removeEventListener("click",this._onClick)},onClick:function(e){e.stopPropagation(),this.lasso.toggle(),this.button.classList.toggle("active")}}),L.control.lassoSelect=function(e,t){return new L.Control.LassoSelect(e,t)}},1017:function(e,t){},102:function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=3)}([function(e,t,n){e.exports=n(1),e.exports.parse_nhx=n(2)},function(e,t){e.exports.parse_newick=function(e){for(var t=[],n={},r=e.split(/\s*(;|\(|\)|,|:)\s*/),a=0;a<r.length;a++){var o=r[a];switch(o){case"(":var i={};n.children=[i],t.push(n),n=i;break;case",":i={},t[t.length-1].children.push(i),n=i;break;case")":n=t.pop();break;case":":break;default:var s=r[a-1];")"==s||"("==s||","==s?n.name=o:":"==s&&(n.branch_length=parseFloat(o))}}return n},e.exports.parse_json=function(e){return function e(t){var n="";if(t.hasOwnProperty("children")){var r=[];t.children.forEach((function(t){var n=e(t);r.push(n)}));var a=r.join();t.hasOwnProperty("name")&&(n="("+a+")"+t.name),t.hasOwnProperty("branch_length")&&(n=n+":"+t.branch_length)}else{var o="";t.hasOwnProperty("name")&&(o=t.name),t.hasOwnProperty("branch_length")&&(o=o+":"+t.branch_length),n+=o}return n}(e)+";"}},function(e,t){e.exports=parse_nhx=function(e){for(var t=[],n={},r=e.split(/\s*(;|\(|\)|\[|\]|,|:|=)\s*/),a=0;a<r.length;a++){var o=r[a];switch(o){case"(":var i={};n.children=[i],t.push(n),n=i;break;case",":i={},t[t.length-1].children.push(i),n=i;break;case")":n=t.pop();break;case":":break;default:var s=r[a-1];if(")"==s||"("==s||","==s)n.name=o;else if(":"==s)isNaN(o)||(n.branch_length=parseFloat(o));else if("="==s)switch(r[a-2]){case"D":n.duplication=o;break;case"G":n.gene_id=o;break;case"T":n.taxon_id=o}}}return n}},function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"Angles",(function(){return a})),n.d(r,"TreeTypes",(function(){return o})),n.d(r,"EmptyArray",(function(){return i}));var a={Degrees0:0,Degrees45:.25*Math.PI,Degrees90:.5*Math.PI,Degrees180:Math.PI,Degrees270:1.5*Math.PI,Degrees360:2*Math.PI},o={Radial:"rd",Rectangular:"rc",Circular:"cr",Diagonal:"dg",Hierarchical:"hr"},i=[],s={alignLabels:!1,branchScale:null,collapsedIds:i,fillStyle:"#222",fontFamily:"serif",fontSize:16,fontWeight:"normal",haloRadius:12,haloStyle:"#3C7383",haloWidth:4,highlightedId:null,highlightedStyle:"#3C7383",internalNodeStyle:{shape:"none"},labelThreshold:8,leafNodeStyle:{shape:"circle"},lineWidth:1,nodeSize:14,nodesPowRatio:.5,padding:32,renderInternalLabels:!1,renderLabels:!0,renderLeafLabels:!0,rootId:null,rotatedIds:i,selectableInternalNodes:!0,selectableLeafNodes:!0,selectedIds:i,showLabels:!1,showNodes:!0,stepScale:8,strokeStyle:"#222",styleLeafLabels:!1,styleNodeLines:!1,styles:{},type:o.Rectangular,zoomFactor:3};function l(e,t){var n=this[e];this[e]=function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return t.call(this,n.bind(this),r)}}var c=function(e,t){var n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;if("function"!=typeof s)throw new Error("Invalid plugin provided.");s.call(e,e,l.bind(e),s.options)}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}},u=function(e,t,n){var r=e.state.zoomFactor;return 0===n?t:Math.pow(10,Math.log(t)/Math.log(10)+n*r*.01)},d=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(n){var r=e.indexOf(t);if(-1===r)return e.concat(t);var a=e.concat();return a.splice(r,1),a}return[t]},h={rd:{alignableLabels:!1,branchScalingAxis:"xy",drawLine:function(e,t,n){e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(n.parent.x,n.parent.y),e.ctx.stroke(),e.ctx.closePath()},getBranchScale:function(e){var t=function(e){return Math.min(e.ctx.canvas.width,e.ctx.canvas.height)}(e)/2,n=e.getVirtualTree(),r=n.rootNode.totalLeafLength-n.rootNode.branchLength;return r>0?t/r:r<0?t*r:0},getNodeAtPoint:function(e,t,n,r){for(var a=e.layout(),o=a.rootNode,i=a.postorderTraversal,s=o.postIndex-o.totalNodes+1;s<=o.postIndex;s++){var l=i[s];if(l.parent&&(l.x>l.parent.x?t<l.x&&t>l.parent.x:t<l.parent.x&&t>l.x))if(isNaN(l.slope)){if(l.y>l.parent.y?n<l.y&&n>l.parent.y:n<l.parent.y&&n>l.y)return l}else if(n>l.slope*t+l.intercept-r&&n<l.slope*t+l.intercept+r)return l}return null},layoutNodes:function(e,t){for(var n=0,r=t.rootNode,o=r.postIndex-r.totalNodes+1;o<=r.postIndex;o++){var i=t.postorderTraversal[o];if(i.isLeaf)i.angle=n*(a.Degrees360/r.visibleLeaves);else{var s=0,l=!0,c=!1,u=void 0;try{for(var d,h=i.children[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value;s+=p.angle*p.totalLeaves}}catch(e){c=!0,u=e}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}i.angle=s/i.totalLeaves}(i.isLeaf&&!i.isHidden||i.isCollapsed&&!i.isHidden)&&(n+=1)}for(var f=r.preIndex;f<r.preIndex+r.totalNodes;f++){var m=t.preorderTraversal[f],g=m.branchLength*e.state.branchScale;m.x=(m!==r?m.parent.x:0)+g*Math.cos(m.angle),m.y=(m!==r?m.parent.y:0)+g*Math.sin(m.angle),m!==r&&(m.slope=(m.parent.y-m.y)/(m.parent.x-m.x),m.intercept=m.y-m.slope*m.x)}}},rc:{alignableLabels:!0,branchScalingAxis:"x",drawLine:function(e,t,n){n!==t.rootNode&&(e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(n.parent.x,n.y),e.ctx.lineTo(n.parent.x,n.parent.y),e.ctx.stroke(),e.ctx.closePath())},getBranchScale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.state.stepScale,n=e.getVirtualTree(),r=n.rootNode.totalLeaves*t,a=e.ctx.canvas.width/e.ctx.canvas.height*r,o=n.rootNode.totalLeafLength-n.rootNode.branchLength;return 0===o&&e.error(501),a/o},getNodeAtPoint:function(e,t,n,r){for(var a=e.layout(),o=a.rootNode,i=a.postorderTraversal,s=o.postIndex-o.totalNodes+1;s<=o.postIndex;s++){var l=i[s];if(l.parent&&(t<l.x+r&&t>l.parent.x-r&&n<l.y+r&&n>l.y-r||t<l.parent.x+r&&t>l.parent.x-r&&(n<l.parent.y?n>l.y-r:n<l.y+r)))return l}return null},mainAxis:"x",layoutNodes:function(e,t){for(var n=0,r=t.rootNode,o=r.postIndex-r.totalNodes+1;o<=r.postIndex;o++){var i=t.postorderTraversal[o];if(i.angle=a.Degrees0,i.x=i.distanceFromRoot*e.state.branchScale,i.isLeaf)i.y=n*e.state.stepScale;else if(i.isCollapsed)i.y=n*e.state.stepScale;else{var s=i.children[0].y,l=i.children[i.children.length-1].y;i.y=(l+s)/2}(i.isLeaf&&!i.isHidden||i.isCollapsed&&!i.isHidden)&&(n+=1)}},stepScalingAxis:"y"},cr:{alignableLabels:!0,branchScalingAxis:"xy",drawLine:function(e,t,n){var r=t.rootNode,a=n.parent.distanceFromRoot-r.distanceFromRoot;if(e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(a*e.state.branchScale*Math.cos(n.angle),a*e.state.branchScale*Math.sin(n.angle)),e.ctx.stroke(),e.ctx.closePath(),n.children&&n.children.length&&!n.isCollapsed){var o=n.children[0].angle,i=n.children[n.children.length-1].angle,s=Math.abs(n.distanceFromRoot-r.distanceFromRoot);e.ctx.beginPath(),e.ctx.arc(0,0,s*e.state.branchScale,o,i,i<o),e.ctx.stroke(),e.ctx.closePath()}},getBranchScale:function(e){var t=function(e){return Math.min(e.ctx.canvas.width,e.ctx.canvas.height)}(e)/2,n=e.getVirtualTree().rootNode;return n.totalLeafLength>0?t/n.totalLeafLength:n.totalLeafLength<0?t*n.totalLeafLength:0},getNodeAtPoint:function(e,t,n,r){for(var a=e.layout(),o=a.rootNode,i=a.postorderTraversal,s=o.postIndex-o.totalNodes+1;s<=o.postIndex;s++){var l=i[s];if(l.parent){var c=l.parent.distanceFromRoot-o.distanceFromRoot,u=c*e.state.branchScale*Math.cos(l.angle);if(l.x>u?t<l.x&&t>u:t<u&&t>l.x)if(isNaN(l.slope)){var d=c*e.state.branchScale*Math.sin(l.angle);if(l.y>d?n<l.y&&n>d:n<d&&n>l.y)return l}else if(n>l.slope*t+l.intercept-r&&n<l.slope*t+l.intercept+r)return l}}return null},layoutNodes:function(e,t){for(var n=0,r=t.rootNode,o=r.postIndex-r.totalNodes+1;o<=r.postIndex;o++){var i=t.postorderTraversal[o];if(i.isLeaf)i.angle=n*(a.Degrees360/t.rootNode.visibleLeaves);else{var s=i.children[0].angle,l=i.children[i.children.length-1].angle;i.angle=(l+s)/2}var c=(i.distanceFromRoot-t.rootNode.distanceFromRoot)*e.state.branchScale;i.x=c*Math.cos(i.angle),i.y=c*Math.sin(i.angle),(i.isLeaf&&!i.isHidden||i.isCollapsed&&!i.isHidden)&&(n+=1),i.parent&&(i.slope=Math.tan(i.angle),i.intercept=i.y-i.slope*i.x)}}},dg:{alignableLabels:!1,getBranchScale:function(e){var t=e.getVirtualTree().rootNode,n=e.ctx.canvas.width-2*e.state.padding;return t.totalLeafLength>0?n/t.totalLeafLength:t.totalLeafLength<0?n*t.totalLeafLength:0},getNodeAtPoint:function(e,t,n,r){for(var a=e.getVirtualTree(),o=a.rootNode,i=a.postorderTraversal,s=o.postIndex-o.totalNodes+1;s<=o.postIndex;s++){var l=i[s];if(l&&l.parent&&t<l.x&&t>l.parent.x&&n>l.slope*t+l.intercept-r&&n<l.slope*t+l.intercept+r)return l}return null},drawLine:function(e,t,n){n!==t.rootNode&&(e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(n.parent.x,n.parent.y),e.ctx.stroke(),e.ctx.closePath())},layoutNodes:function(e,t){for(var n=0,r=t.rootNode,o=r.postIndex-r.totalNodes+1;o<=r.postIndex;o++){var i=t.postorderTraversal[o];if(i.angle=a.Degrees0,i.x=(t.rootNode.visibleLeaves-i.visibleLeaves)*e.state.stepScale/2,i.isLeaf)i.y=n*e.state.stepScale;else if(i.isCollapsed)i.y=n*e.state.stepScale;else{var s=i.children[0].y,l=(i.visibleLeaves-i.children[0].visibleLeaves)*e.state.stepScale;i.y=s+l/2}i.isLeaf&&n++}for(var c=r.preIndex;c<r.preIndex+r.totalNodes;c++){var u=t.preorderTraversal[c];u.parent&&(u.slope=(u.parent.y-u.y)/(u.parent.x-u.x),u.intercept=u.y-u.slope*u.x)}},mainAxis:"x",stepScalingAxis:"y"},hr:{alignableLabels:!0,drawLine:function(e,t,n){n!==t.rootNode&&(e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(n.x,n.parent.y),e.ctx.lineTo(n.parent.x,n.parent.y),e.ctx.stroke(),e.ctx.closePath())},branchScalingAxis:"y",getBranchScale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.state.stepScale,n=e.getVirtualTree(),r=n.rootNode.totalLeaves*t,a=e.ctx.canvas.height/e.ctx.canvas.width*r,o=n.rootNode.totalLeafLength-n.rootNode.branchLength;return 0===o&&e.error(501),a/o},getNodeAtPoint:function(e,t,n,r){for(var a=e.layout(),o=a.rootNode,i=a.preorderTraversal,s=o.preIndex;s<o.preIndex+o.totalNodes;s++){var l=i[s];if(l.parent&&(t<l.x+r&&t>l.x-r&&n<l.y+r&&n>l.parent.y-r||n<l.parent.y+r&&n>l.parent.y-r&&(t<l.parent.x?t>l.x-r:t<l.x+r)))return l}return null},mainAxis:"y",layoutNodes:function(e,t){for(var n=0,r=t.rootNode,o=r.postIndex-r.totalNodes+1;o<=r.postIndex;o++){var i=t.postorderTraversal[o];if(i.angle=a.Degrees90,i.y=i.distanceFromRoot*e.state.branchScale,i.isLeaf)i.x=-1*n*e.state.stepScale;else if(i.isCollapsed)i.x=n*e.state.stepScale;else{var s=i.children[0].x,l=i.children[i.children.length-1].x;i.x=(l+s)/2}(i.isLeaf&&!i.isHidden||i.isCollapsed&&!i.isHidden)&&(n+=1)}},stepScalingAxis:"x"}},p=function(e){return{minScale:e/2,maxScale:Math.max(e,16)}},f=function(e){var t=e.getBounds(!1),n=e.getDrawingArea(),r=t.maxX-t.minX,a=t.maxY-t.minY,o=Math.max(.333*n.width,n.right-n.left-e.state.nodeSize),i=Math.max(.333*n.height,n.bottom-n.top-e.state.nodeSize),s=o/r,l=i/a,c=Math.min(s,l),u=e.state.padding+Math.max(e.state.nodeSize,e.state.fontSize)/2,d=-1*t.minX*c,f=-1*t.minY*c;s>l?(d+=u+(o-r*c)/2,f+=u):s<l?(d+=u,f+=u+(i-a*c)/2):(d+=u,f+=u),void 0===h[e.state.type].mainAxis&&(d+=(n.width-o)/2-u,f+=(n.height-i)/2-u);var m=p(c);return{offsetX:d,offsetY:f,scale:c,minScale:m.minScale,maxScale:m.maxScale}},m=function(e,t,n){var r=d(e.state.collapsedIds,t);return e.chain((function(){return{collapsedIds:r}}),n?f:null)},g=function(e,t){return t/e.state.scale},v={},y=function(e){e.setState(f(e))};function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function S(e){for(var t=[],n=[e];n.length;){var r=n.shift();t.push(r),Array.isArray(r.children)&&n.unshift.apply(n,x(r.children))}return t}function w(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function L(e){for(var t=[],n=[e];n.length;){var r=n.pop();Array.isArray(r.children)&&n.push.apply(n,w(r.children)),t.push(r)}return t.reverse()}var k=n(0),N=function(e){var t=e;"string"==typeof e&&(t={type:"newick",data:e});var n=t,r=n.type,a=n.data,o=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(n,["type","data"]),i=null;if("newick"===r||void 0===r)i=k.parse_newick(a);else{if("biojs"!==r)throw new Error("Source type is not supported: ".concat(r));i=a}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.trimQuotes,r=void 0===n||n,a=L(e),o=S(e),i=a.every((function(e){return 0===(e.branchLength||e.branch_length||0)}));if(i){e.branchLength=0;for(var s=0;s<o.length;s++){var l=o[s];if(l.children){var c=!0,u=!1,d=void 0;try{for(var h,p=l.children[Symbol.iterator]();!(c=(h=p.next()).done);c=!0){var f=h.value;f.branchLength=l.branchLength+1}}catch(e){u=!0,d=e}finally{try{c||null==p.return||p.return()}finally{if(u)throw d}}}}}for(var m=0;m<a.length;m++){var g=a[m];if(g.postIndex=m,g.isLeaf=!Array.isArray(g.children),g.branchLength=Math.abs(g.branchLength||g.branch_length||0),delete g.branch_length,g.isLeaf&&"string"==typeof g.name&&(g.id=r?g.name.trim().replace(/^['"]|['"]$/g,""):g.name,delete g.name),g.totalNodes=1,g.totalLeaves=1,g.totalLeafLength=g.branchLength,!g.isLeaf){g.totalNodes=1,g.totalLeaves=0;var v=0,y=!0,b=!1,C=void 0;try{for(var x,w=g.children[Symbol.iterator]();!(y=(x=w.next()).done);y=!0){var k=x.value;g.totalNodes+=k.totalNodes,g.totalLeaves+=k.totalLeaves,k.totalLeafLength>v&&(v=k.totalLeafLength),k.parent=g}}catch(e){b=!0,C=e}finally{try{y||null==w.return||w.return()}finally{if(b)throw C}}g.totalLeafLength=g.branchLength+v,g.longestLeaf=v}}for(var N={},E=[],O=0;O<o.length;O++){var P=o[O];P.preIndex=O,P.id||(P.id=O.toString()),N[P.id]=P,P.distanceFromRoot=(P.parent?P.parent.distanceFromRoot:0)+P.branchLength,P.isLeaf&&E.push(P),P.visibleLeaves=P.totalLeaves}return{nodeById:N,rootNode:e,leafNodes:E,postorderTraversal:a,preorderTraversal:o}}(i,o)};function E(e){var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||1;return(window.devicePixelRatio||1)/t}function O(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function P(e,t,n){var r=[],a=!0,o=!1,i=void 0;try{for(var s,l=n.children[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value,u=e.splice(t,c.totalNodes);r.push(u)}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}for(var d=0,h=r;d<h.length;d++){var p=h[d];e.splice.apply(e,[t,0].concat(O(p)))}}var I=function(e,t,n){var r=t.preorderTraversal,a=t.postorderTraversal;P(r,r.indexOf(n)+1,n);for(var o=0;o<r.length;o++)r[o].preIndex=o;P(a,a.indexOf(n)-n.totalNodes+1,n);for(var i=0;i<a.length;i++)a[i].postIndex=i;n.children.reverse()};function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e){var t=L(e),n=[],r=!0,a=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var l=i.value;if(l.isLeaf)n.push("".concat(l.id,":").concat(l.branchLength));else if(l!==e){var c=n.splice(n.length-l.children.length,l.children.length);n.push("(".concat(c.join(","),"):").concat(l.branchLength))}}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return"(".concat(n.join(","),");")}var j=function(e){return{branchScale:h[e.state.type].getBranchScale(e,s.stepScale)}},A=function(e){return{stepScale:s.stepScale}},z=function(e){return e.chain(A,j,f)},R=function(e){return{collapsedIds:i}},D=function(e,t,n){return e.pixelRatio=E(e.ctx),{size:{width:t,height:n}}},B=function(e,t,n){var r=d(e.state.rotatedIds,t);return e.chain((function(){return{rotatedIds:r}}),n?f:null)},F=function(e){return{minScale:f(e).minScale}},q=function(e,t,n){var r=n.x,a=n.y,o=e.state.offsetX,i=e.state.offsetY;if(n){var s=h[e.state.type].branchScalingAxis,l=t/e.state.branchScale;if("x"===s||"xy"===s){var c=e.state.offsetX;o=c+(r-((r-c)*l+c))}if("y"===s||"xy"===s){var u=e.state.offsetY;i=u+(a-((a-u)*l+u))}}return e.chain((function(){return{branchScale:t,offsetX:o,offsetY:i}}),F)};function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var W=function(e){return{rootId:s.rootId}},Z=function(e){return{rotatedIds:i}},Y=function(e,t,n){var r=n.x,a=n.y,o=e.state.offsetX,i=e.state.offsetY,s=t/e.state.stepScale;if(n){var l=h[e.state.type].stepScalingAxis;if("x"===l||"xy"===l){var c=e.state.offsetX;o=c+(r-((r-c)*s+c))}if("y"===l||"xy"===l){var u=e.state.offsetY;i=u+(a-((a-u)*s+u))}}return e.chain((function(){return{stepScale:t,offsetX:o,offsetY:i}}),F)};function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var X=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4?arguments[4]:void 0,o=a.x,i=a.y,s=e.state.offsetX+t,l=e.state.offsetY+n;if(0===r)return{offsetX:s,offsetY:l};var c=u(e,e.state.scale,r),d=e.state.scale;return{offsetX:-1*((-1*s+o)/d*c-o),offsetY:-1*((-1*l+i)/d*c-i),scale:c}},G={cache:function(e,t){return e._.cache[t]||(e._.cache[t]=new Map)},chain:function(e){for(var t={},n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var o=0,i=r;o<i.length;o++){var s=i[o];if("function"==typeof s){var l=s(e);Object.assign(t,l),Object.assign(e.state,l)}}return t},changeBranchScale:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getCentrePoint();e.setBranchScale(u(e,e.state.branchScale,t),n)},changeScale:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getCentrePoint();e.transform(0,0,t,n)},changeStepScale:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getCentrePoint();e.setStepScale(u(e,e.state.stepScale,t),n)},collapseNode:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.refit,a=void 0!==r&&r,o=e.getNodeById(t);o&&e.setState(m(e,o.id,a))},destroy:function(e){},drawHighlight:function(e,t){var n=e.ctx,r=e.state,o=e._,i=o.actualNodeSize,l=o.actualHaloWidth;n.lineWidth=l,n.strokeWidth=l,n.strokeStyle=r.haloStyle;var c=i/2,u=g(e,s.nodeSize/2),d=t.isLeaf?r.leafNodeStyle:r.internalNodeStyle,h=(r.styles[t.id]||d).shape,p="none"===(void 0===h?d.shape:h)?1.5*l:c+u+Math.floor(c/u/2);n.beginPath(),n.arc(t.x,t.y,p,0,a.Degrees360,!1),n.closePath(),n.stroke()},drawNode:function(e,t,n){var r=e.ctx,o=e.state;r.translate(n.x,n.y),r.rotate(n.angle);var i=(o.styles?o.styles[n.id]:void 0)||v,s=n.isLeaf?o.leafNodeStyle:o.internalNodeStyle;r.fillStyle=i.fillStyle||o.fillStyle||s.fillStyle,r.strokeStyle=e.state.strokeStyle;var l=e._.actualNodeSize,c=e._.actualNodeSize/2;if(e._.renderShapes){var u=(i?i.shape:void 0)||s.shape;e.drawNodeShape(n,u,l)}if((e.state.showLabels||e._.renderLabels)&&(n.isLeaf&&o.renderLeafLabels||!n.isLeaf&&o.renderInternalLabels)){var d=n.isLeaf&&o.alignLabels&&!1!==h[o.type].alignableLabels?o.branchScale*(t.rootNode.longestLeaf-n.distanceFromRoot):0;if(d>0&&e.state.lineWidth*e.state.scale>1){var p=e.ctx.lineWidth;e.ctx.lineWidth=e.ctx.lineWidth/4,e.ctx.strokeWidth=e.ctx.lineWidth,r.beginPath(),r.moveTo(c,0),r.lineTo(c+d,0),r.stroke(),r.closePath(),e.ctx.lineWidth=p,e.ctx.strokeWidth=e.ctx.lineWidth}var f=(n.isLeaf?2:0)*c+d,m=n.angle>a.Degrees90&&n.angle<a.Degrees270;m&&r.rotate(a.Degrees180),r.textAlign=m?"right":"left";var g=r.font;i.fontStyle&&(r.font="".concat(i.fontStyle," ").concat(e._.actualFontSize,"px ").concat(e.state.fontFamily)),!1===o.styleLeafLabels&&(r.fillStyle=i.labelFillStyle||o.fillStyle||s.fillStyle),r.fillText(e.getLabel(n),m?-f:f,0),r.font=g,m&&r.rotate(-a.Degrees180)}r.rotate(-n.angle),r.translate(-n.x,-n.y)},drawNodeShape:function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r/2,i=e.ctx;if(i.beginPath(),"dot"===n)i.arc(0,0,2*i.lineWidth,a.Degrees0,a.Degrees360);else if("circle"===n)i.arc(0,0,o,a.Degrees0,a.Degrees360);else if("square"===n)i.rect(-o,-o,r,r);else if("triangle"===n)i.moveTo(0,-o),i.lineTo(o,o),i.lineTo(-o,o),i.lineTo(0,-o);else if("star"===n){var s=Math.PI/5,l=Math.PI/2*3;i.moveTo(0,-o);for(var c=0;c<5;c++)i.lineTo(Math.cos(l)*o,Math.sin(l)*o),l+=s,i.lineTo(Math.cos(l)*o*.5,Math.sin(l)*o*.5),l+=s;i.lineTo(0,-o)}i.fill(),i.stroke(),i.closePath()},exportPNG:function(e){return e.ctx.canvas.toDataURL()},fitInPanel:y,getBounds:function(e){for(var t=e.state,n=e.layout(),r=Number.MAX_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER,l=t.type===o.Circular&&t.alignLabels,c=n.rootNode,u=c.preIndex;u<c.preIndex+c.totalNodes;u++){var d=n.preorderTraversal[u],h=d.x,p=d.x,f=d.y,m=d.y;if(d.isLeaf){var g=0;l&&(g+=t.branchScale*(n.rootNode.totalLeafLength-d.distanceFromRoot)),p+=g*Math.cos(d.angle),m+=g*Math.sin(d.angle)}h<r&&(r=h),p<r&&(r=p),h>i&&(i=h),p>i&&(i=p),f<a&&(a=f),m<a&&(a=m),f>s&&(s=f),m>s&&(s=m),d.isCollapsed&&(u+=d.totalNodes-1)}return{minX:r,maxX:i,minY:a,maxY:s}},getCentrePoint:function(e){return{x:e.ctx.canvas.width/2/e.pixelRatio,y:e.ctx.canvas.height/2/e.pixelRatio}},getDrawingArea:function(e){var t=e.state.size.width,n=e.state.size.height,r=e.state.padding;return{width:t,height:n,left:r,top:r,right:t-r,bottom:n-r}},getInitialState:function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},s,{},t)},getLabel:function(e,t){var n=e.state.styles;return t.id in n&&n[t.id].label||t.label||t.id},getLeafIds:function(e,t){for(var n=e.getVirtualTree(),r=e.getNodeById(t||n.rootNode),a=[],o=r.preIndex;o<r.preIndex+r.totalNodes;o++)n.preorderTraversal[o].isLeaf&&a.push(n.preorderTraversal[o].id);return a},getLeafLabels:function(e,t){for(var n=e.getVirtualTree(),r=e.getNodeById(t||n.rootNode),a=[],o=r.preIndex;o<r.preIndex+r.totalNodes;o++){var i=n.preorderTraversal[o];i.isLeaf&&a.push(e.getLabel(i))}return a},getNewick:function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.layout(),a=t?e.getNodeById(t):r.rootNode,o=n.excludeCollapsed,i=void 0===o||o,s=[],l=a.postIndex-a.totalNodes+1;l<a.postIndex;l++){var c=r.postorderTraversal[l];if(c.isLeaf)s.push("".concat(e.getLabel(c),":").concat(c.branchLength));else{var u=s.splice(s.length-c.children.length,c.children.length);i&&c.isCollapsed?s.push("[".concat(c.totalLeaves," hidden ").concat(1===c.totalLeaves?"leaf":"leaves","]:").concat(c.branchLength)):s.push("(".concat(u.join(","),"):").concat(c.branchLength))}}return"(".concat(s.join(","),");")},getNodeAtPoint:function(e,t,n){for(var r=e._.actualNodeSize/2+g(e,3),a=e.layout(),o=a.rootNode,i=o.preIndex;i<o.preIndex+o.totalNodes;i++){var s=a.preorderTraversal[i];if(!s.isHidden&&t>s.x-r&&t<s.x+r&&n>s.y-r&&n<s.y+r)return s}var l=h[e.state.type];return l.getNodeAtPoint?l.getNodeAtPoint(e,t,n,r):null},getNodeById:function(e,t){var n=e.getVirtualTree();if("string"==typeof t){var r=n.nodeById[t];return r||e.error("Cannot find node of ID=",t),r}var a=n.nodeById[t.id];return a&&a===t||e.error("Node not found",t),a},getNodeLabels:function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var l=i.value,c=e.getNodeById(l);c&&c.isLeaf&&n.push(e.getLabel(c))}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n},getVirtualTree:function(e){var t=e.state,n=void 0===t?{}:t,r=e.cache("virtual");if(r.get("source")!==n.source){var a=performance.now(),o=N(n.source),i=o.nodeById,s=o.rootNode,l=o.leafNodes,c=o.postorderTraversal,u=o.preorderTraversal;e.nodes={nodeById:i,rootNode:s,leafNodes:l,postorderTraversal:c,preorderTraversal:u,source:n.source,originalSource:n.source.original||n.source};var d=performance.now();e.log("parsing virtual tree took ",d-a," milliseconds."),e._.cache={},r=e.cache("virtual")}if((r.get("rootId")||null)!==e.state.rootId){var h=e.nodes.nodeById[e.state.rootId]||e.nodes.preorderTraversal[0],p=[];h.distanceFromRoot=0;for(var f=h.preIndex+1;f<h.preIndex+h.totalNodes;f++){var m=e.nodes.preorderTraversal[f];m.distanceFromRoot=m.parent.distanceFromRoot+m.branchLength,m.isLeaf&&p.push(m)}e.nodes.leafNodes=p,e.nodes.rootNode=h}return r.set("source",n.source),r.set("rootId",e.state.rootId),e.nodes},highlightNode:function(e,t){var n="string"==typeof t?e.getNodeById(t):t,r=n&&!n.isHidden?n.id:null;e._.highlightedId!==r&&(e._.highlightedId=r,e.render())},init:function(e,t){e.state=e.getInitialState(t),e.pixelRatio=E(e.ctx)},layout:function(e){var t=e.state,n=e.getVirtualTree(),r=e.cache("layout");if(isNaN(n.maxLabelWidth)||r.get("styles")!==t.styles){var a="",o=!0,i=!1,s=void 0;try{for(var l,c=n.leafNodes[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value,d=e.getLabel(u);d.length>a.length&&(a=d)}}catch(e){i=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw s}}n.maxLabelWidth=e.measureTextWidth(a)}if(r.get("rotatedIds")!==t.rotatedIds){var p=new Set(t.rotatedIds);if(r.get("rotatedIds")){var f=!0,m=!1,g=void 0;try{for(var v,y=r.get("rotatedIds")[Symbol.iterator]();!(f=(v=y.next()).done);f=!0){var b=v.value,C=n.nodeById[b];p.has(C.id)||(I(0,n,C),C.isInverted=!1)}}catch(e){m=!0,g=e}finally{try{f||null==y.return||y.return()}finally{if(m)throw g}}}var x=!0,S=!1,w=void 0;try{for(var L,k=t.rotatedIds[Symbol.iterator]();!(x=(L=k.next()).done);x=!0){var N=L.value,E=n.nodeById[N];E.isInverted||(I(0,n,E),E.isInverted=!0)}}catch(e){S=!0,w=e}finally{try{x||null==k.return||k.return()}finally{if(S)throw w}}}if(r.get("collapsedIds")!==t.collapsedIds){for(var O=new Set(t.collapsedIds),P=0;P<n.postorderTraversal.length;P++){var _=n.preorderTraversal[P];_.isCollapsed=O.has(_.id),_.parent&&(_.parent.isCollapsed||_.parent.isHidden)?_.isHidden=!0:_.isHidden=!1}for(var T=0;T<n.postorderTraversal.length;T++){var M=n.postorderTraversal[T];if(M.isLeaf)M.visibleLeaves=1;else if(M.isCollapsed)M.visibleLeaves=1;else{M.visibleLeaves=0;var j=!0,A=!1,z=void 0;try{for(var R,D=M.children[Symbol.iterator]();!(j=(R=D.next()).done);j=!0){var B=R.value;M.visibleLeaves+=B.visibleLeaves}}catch(e){A=!0,z=e}finally{try{j||null==D.return||D.return()}finally{if(A)throw z}}}}}if(r.get("branchScale")!==t.branchScale||r.get("collapsedIds")!==t.collapsedIds||r.get("rootId")!==t.rootId||r.get("rotatedIds")!==t.rotatedIds||r.get("stepScale")!==t.stepScale||r.get("type")!==t.type){var F=performance.now();h[t.type].layoutNodes(e,n);var q=performance.now();e.log("layout nodes took ",q-F," milliseconds.")}return r.set("branchScale",t.branchScale),r.set("collapsedIds",t.collapsedIds),r.set("rootId",t.rootId),r.set("rotatedIds",t.rotatedIds),r.set("stepScale",t.stepScale),r.set("type",t.type),r.set("styles",t.styles),n},measureTextWidth:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.state.fontWeight,r=e.ctx.font;e.ctx.font="".concat(n," ").concat(e.state.fontSize,"px ").concat(e.state.fontFamily);var a=e.ctx.measureText(t);return e.ctx.font=r,Math.ceil(a.width+e.state.fontSize)},mergeState:function(e,t){e.state=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.state,{},t)},postRender:function(e,t){for(var n=e.state,r=t.rootNode.preIndex;r<t.rootNode.preIndex+t.rootNode.totalNodes;r++){var a=t.preorderTraversal[r];-1===n.selectedIds.indexOf(a.id)&&a.id!==e._.highlightedId||e.drawHighlight(a),a.isCollapsed&&(r+=a.totalNodes-1)}e.ctx.restore(),e.ctx.canvas.title="",e.ctx.canvas.style&&(e.ctx.canvas.style.cursor=e._.highlightedId?"pointer":"")},preRender:function(e,t){e.ctx.save(),e.ctx.clearRect(0,0,e.ctx.canvas.width,e.ctx.canvas.height),e._.actualMaxLabelWidth=g(e,t.maxLabelWidth),e._.actualFontSize=g(e,e.state.fontSize),e._.actualNodeSize=g(e,e.state.nodeSize),e._.actualHaloRadius=g(e,Math.max(.75*e.state.nodeSize,e.state.haloRadius)),e._.actualHaloWidth=g(e,e.state.haloWidth),e._.renderShapes=e.state.showNodes,e._.renderLabels=e.state.showLabels||e.state.stepScale*e.state.scale>=e.state.labelThreshold,e.ctx.textBaseline="middle",e.ctx.font="".concat(e._.actualFontSize,"px ").concat(e.state.fontFamily),e.ctx.lineWidth=g(e,e.state.lineWidth),e.ctx.strokeWidth=e.ctx.lineWidth,e.ctx.translate(e.state.offsetX*e.pixelRatio,e.state.offsetY*e.pixelRatio),e.ctx.scale(e.state.scale*e.pixelRatio,e.state.scale*e.pixelRatio)},render:function(e){e.resizeCanvas();var t=e.layout(),n=performance.now();if(e.preRender(t),e.state.styleNodeLines){var r=!0,a=!1,o=void 0;try{for(var i,s=t.postorderTraversal[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var l=i.value;if(l.isLeaf){var c=e.state.styles?e.state.styles[l.id]:void 0;l.strokeStyle=(c?c.strokeStyle:void 0)||e.state.strokeStyle}else{l.strokeStyle=l.children[0].strokeStyle;var u=!0,d=!1,p=void 0;try{for(var f,m=l.children[Symbol.iterator]();!(u=(f=m.next()).done);u=!0)if(f.value.strokeStyle!==l.strokeStyle){l.strokeStyle=e.state.strokeStyle;break}}catch(e){d=!0,p=e}finally{try{u||null==m.return||m.return()}finally{if(d)throw p}}}}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}}for(var g=t.rootNode.preIndex,v=t.rootNode.preIndex+t.rootNode.totalNodes,y=g;y<v;y++){var b=t.preorderTraversal[y];b!==t.rootNode&&(b.id===e._.highlightedId?e.ctx.strokeStyle=e.state.highlightedStyle:e.state.styleNodeLines?e.ctx.strokeStyle=b.strokeStyle:e.ctx.strokeStyle=e.state.strokeStyle,h[e.state.type].drawLine(e,t,b),b.isCollapsed&&(y+=b.totalNodes-1))}for(var C=g;C<v;C++){var x=t.preorderTraversal[C];e.drawNode(t,x),x.isCollapsed&&(C+=x.totalNodes-1)}e.postRender(t);var S=performance.now();e.log("render took ",S-n," milliseconds.")},rerootNode:function(e,t){var n=e.getNodeById(t),r=e.layout();if(n.parent){var a={branchLength:0,children:[]};!function e(t,n,r,a){var o={branchLength:a.branchLength,children:[],parent:r};r.children.push(o);var i=!0,s=!1,l=void 0;try{for(var c,u=a.parent.children[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var d=c.value;d!==a&&o.children.push(d)}}catch(e){s=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw l}}a.parent.parent&&a.parent!==n.rootNode&&e(t,n,o,a.parent)}(e,r,a,n),a.children.push(n);var o={type:"newick",original:e.state.source,data:M(a)};e.setSource(o)}},reset:function(e,t){e.setState(z(e))},resetCollapsedNodes:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.refit,r=void 0!==n&&n;return e.setState(e.chain(R,r?y:null))},resize:function(e,t,n){e.setState(D(e,t,n))},resizeCanvas:function(e){var t=e.state.size,n=t.width,r=t.height;e.ctx.canvas.style&&(e.ctx.canvas.style.width="".concat(n,"px"),e.ctx.canvas.style.height="".concat(r,"px"),e.ctx.canvas.width=n*e.pixelRatio,e.ctx.canvas.height=r*e.pixelRatio)},rotateNode:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.refit,a=void 0!==r&&r,o=e.getNodeById(t);o&&e.setState(B(e,o.id,a))},selectLeafNodes:function(e,t,n){t&&Array.isArray(t)&&e.setState(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n){var r=new Set(e.state.selectedIds),a=!0,o=!1,s=void 0;try{for(var l,c=t[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;r.add(u)}}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}return{selectedIds:Array.from(r)}}return{selectedIds:t.length?t:i}}(e,t,n))},selectNode:function(e,t,n){var r=t?e.getNodeById(t):null;if(r&&r.isLeaf)e.setState(function(e,t,n){return{selectedIds:d(e.state.selectedIds,t,n)}}(e,r.id,n));else if(r){var a=r&&!r.isHidden?e.getLeafIds(r):i;e.setState(function(e,t,n){if(n){var r=new Set(e.state.selectedIds),a=!0,o=!1,i=void 0;try{for(var s,l=t[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value;r.add(c)}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}return{selectedIds:Array.from(r)}}return{selectedIds:t}}(e,a,n))}else e.setState({selectedIds:i})},setBranchScale:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getCentrePoint(),r=h[e.state.type].branchScalingAxis;r&&t>0&&e.setState(q(e,t,n))},setFontSize:function(e,t){"number"==typeof t?e.setState({fontSize:t}):e.error("Invalid font size value, expected number, got ",H(t))},setNodeSize:function(e,t){"number"==typeof t?e.setState({nodeSize:t}):e.error("Invalid node size value, expected number, got ",V(t))},setRoot:function(e,t){var n=null;null!==t&&(n=e.getNodeById(t)),e.setState(function(e,t){return e.chain((function(){return{rootId:t}}),z)}(e,n?n.id:null))},setScale:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getCentrePoint();if(!(t<=0)){if(n){var r=t/e.state.scale,a=e.state.offsetX;e.state.offsetX=a+(n.x-((n.x-a)*r+a));var o=e.state.offsetY;e.state.offsetY=o+(n.y-((n.y-o)*r+o))}e.state.scale=t,e.render()}},setSource:function(e,t){e.setState(function(e,t){return e.chain((function(){return{source:t}}),W,R,Z,z)}(e,t))},setState:function(e,t){t&&(e.mergeState(t),e.render())},setStepScale:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.getCentrePoint(),r=h[e.state.type].stepScalingAxis;r&&t>0&&e.setState(Y(e,t,n))},setStyles:function(e,t){"object"===U(t)?e.setState({styles:t}):e.error("Invalid node styles, expected object, got ",U(t))},setTreeType:function(e,t){e.setState(function(e,t){return e.chain((function(){return{type:t}}),z)}(e,t))},toggleAlignLeafLabels:function(e){e.setState({alignLabels:!e.state.alignLabels})},toggleLeafLabels:function(e){e.setState({renderLeafLabels:!e.state.renderLeafLabels})},transform:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e.getCentrePoint();0===t&&0===n&&0===r||e.setState(X(e,t,n,r,a))},trigger:function(e,t,n){var r=e["on".concat(t)];"function"==typeof r&&r.apply(e,n)}},K=function(e){e.error=console.error,e.log=function(){};for(var t=0,n=Object.keys(G);t<n.length;t++){var r=n[t];e[r]=G[r].bind(null,e)}};function J(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{x:(t-e.state.offsetX)/e.state.scale,y:(n-e.state.offsetY)/e.state.scale}}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee=function(e,t,n,r){var a=e.startPoint,o=e.centrePoint,i=e.endPoint,s=r-2*t,l=(n-2*t)/(i.x-a.x),c=s/(i.y-a.y),u=Math.min(l,c);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({offsetX:n/2-o.x*u,offsetY:r/2-o.y*u,scale:u},p(u))};function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=function(e,t,n){var r=e.state.size;if(r.width===t&&r.height===n)return{};var a=function(e){var t=e.getDrawingArea(),n=t.width,r=t.height,a=e.getBounds(),o=a.minX,i=a.maxX,s=a.minY,l=a.maxY,c=J(e,e.state.padding,e.state.padding),u=J(e,n-e.state.padding,r-e.state.padding),d=J(e,n/2,r/2);return{startPoint:{x:Math.max(c.x,o),y:Math.max(c.y,s)},endPoint:{x:Math.min(u.x,i),y:Math.min(u.y,l)},centrePoint:d}}(e);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},D(e,t,n),{},ee(a,e.state.padding,t,n))},ae=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={canvas:e,ctx:e.getContext("2d"),state:{},_:{cache:{}}};if(K(r),n.length&&c(r,n),r.init(t),t.source){var a=r.ctx.canvas,o=a.width,i=a.height;r.setState(r.chain((function(){return r.state.size?re(r,o,i):D(r,o,i)}),(function(){return{source:t.source}}),(function(){return r.state.rootId?{rootId:r.state.rootId}:W()}),(function(){return r.state.collapsedIds?{collapsedIds:r.state.collapsedIds}:R()}),(function(){return r.state.rotatedIds?{rotatedIds:r.state.rotatedIds}:Z()}),(function(){return r.state.stepScale?{stepScale:r.state.stepScale}:A()}),(function(){return r.state.branchScale?{branchScale:r.state.branchScale}:j(r)}),(function(){var e=f(r),t=e.offsetX,n=e.offsetY,a=e.scale,o=e.minScale,i=e.maxScale;return{offsetX:r.state.offsetX||t,offsetY:r.state.offsetY||n,scale:r.state.scale||a,minScale:r.state.minScale||o,maxScale:r.state.maxScale||i}})))}return r},oe={appendToArray:d,getPixelRatio:E,mapPoint:J,mapScalar:g,restoreViewport:ee,unmapPoint:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return{x:t*e.state.scale+e.state.offsetX,y:n*e.state.scale+e.state.offsetY}},unmapScalar:function(e,t){return t*e.state.scale}};n.d(t,"constants",(function(){return r})),n.d(t,"defaults",(function(){return s})),n.d(t,"createTree",(function(){return ae})),n.d(t,"methods",(function(){return G})),n.d(t,"types",(function(){return h})),n.d(t,"utils",(function(){return oe})),t.default={constants:r,defaults:s,createTree:ae,methods:G,types:h,utils:oe}}])},1022:function(e,t){},1026:function(e,t){},1029:function(e,t){},1031:function(e,t){},1037:function(e,t){},1047:function(e,t){},1049:function(e,t){},1051:function(e,t){},1054:function(e,t){},1058:function(e,t){},1060:function(e,t){},1062:function(e,t){},107:function(e,t,n){"use strict";n(984);var r=n(0),a=n.n(r),o=n(4),i=n.n(o),s=n(1),l=n.n(s),c=a.a.forwardRef((function(e,t){var n=e.children,r=e.className,o=e.onClick,s=e.title;return a.a.createElement("button",{className:i()("mdc-icon-button",r),onClick:o,ref:t,title:s},n)}));c.propTypes={children:l.a.node,className:l.a.string,onClick:l.a.func,title:l.a.string};var u=c;n.d(t,"a",(function(){return u}))},1110:function(e,t){},1112:function(e,t){},1114:function(e,t){},1138:function(e,t){},1140:function(e,t){},121:function(e,t,n){"use strict";var r=n(3),a=n.n(r),o=n(9),i=n.n(o),s=(n(981),n(0)),l=n.n(s),c=n(24),u=n.n(c),d=n(26),h=n.n(d),p=n(22),f=n.n(p),m=n(23),g=n.n(m),v=n(27),y=n.n(v),b=n(1),C=n.n(b),x=n(4),S=n.n(x),w=n(488),L=n.n(w),k=n(304),N={down:"top",up:"bottom"};function E(e,t,n){var r=e.top,a=void 0===r?0:r,o=e.height,i=void 0===o?0:o;return{maxHeight:"up"===n?"".concat(a-40,"px"):"calc(100vh - ".concat(a+i+40,"px)"),transformOrigin:"".concat(N[n]," ").concat(t)}}var O=function(e){function t(e){var n;return u()(this,t),(n=f()(this,g()(t).call(this,e))).handleOutClick=function(e){var t=n.buttonRef.current;t&&t.contains(e.target)||n.props.toggle()},n.handleKeyUp=function(e){27===e.keyCode&&n.props.toggle()},n.buttonRef=l.a.createRef(),n}return y()(t,e),h()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.align,r=void 0===n?"left":n,a=t.button,o=t.caret,i=void 0!==o&&o,s=t.children,c=t.className,u=t.direction,d=void 0===u?"down":u,h=t.header,p=t.open,f=void 0!==p&&p,m=t.style,g=t.toggle,v=t.toggleOnClick,y=void 0===v||v,b=this.el?this.el.getBoundingClientRect():{},C=b.height,x=void 0===C?0:C;return l.a.createElement("div",{className:S()("libmr-Menu",{open:f,caret:i},c),onKeyUp:f?function(t){return e.handleKeyUp(t)}:null,ref:function(t){e.el=t},style:m,tabIndex:"-1"},l.a.cloneElement(a,{ref:this.buttonRef,onClick:g,open:f}),l.a.createElement(L.a,{className:"libmr-RelativePortal",component:"div",right:"right"===r?0:void 0,bottom:"up"===d?x:void 0,onOutClick:f?function(t){return e.handleOutClick(t)}:null},l.a.createElement(k.a,{visible:f,removeOnLeave:!0,motionName:"libmr"},(function(e){return l.a.createElement("div",{className:S()("libmr-Menu-element",r,d,{caret:i},c,e.className),style:E(b,r,d),tabIndex:"-1"},h,l.a.createElement("div",{className:"libmr-Menu-content",onClick:y?g:null},s))}))))}}]),t}(l.a.Component);O.propTypes={active:C.a.bool,align:C.a.oneOf(["left","right"]),button:C.a.node,caret:C.a.bool,children:C.a.node,className:C.a.string,direction:C.a.oneOf(["up","down"]),header:C.a.node,open:C.a.bool,style:C.a.object,toggle:C.a.func,toggleOnClick:C.a.bool};var P=O;function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}n.d(t,"b",(function(){return _})),n.d(t,"a",(function(){return P}));var _=function(e){return function(t){var n=l.a.useState(!1),r=i()(n,2),o=r[0],s=r[1];return l.a.createElement(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{open:o,toggle:function(){return s(!o)}}))}}},126:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"b",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"e",(function(){return c})),n.d(t,"a",(function(){return u}));var r=n(87),a=n.n(r),o=function(e){return a()(e).format("YYYY-MM-DD")};function i(e){var t=[],n={},r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var l=i.value,c=l.date;n[c]=(n[c]||0)+1,t.push({x:c,y:n[c],id:l.id})}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return t}function s(e){if(e.length){var t=e[0].y,n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value.y;t=s>t?s:t}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}return t}return 0}function l(e,t){var n={},r=!0,i=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var u=l.value,d=a()(u.date),h=[d.year()];"quarter"===t?h.push(d.quarter()):"week"===t?h.push(d.week()):"month"===t?h.push(d.month()+1):"day"===t&&(h.push(d.month()+1),h.push(d.date()));var p=h.join("-");if(n[p])n[p].y++;else{var f=a()({year:d.year()});"quarter"===t?f.set("quarter",d.quarter()):"week"===t?f.set("week",d.week()):"month"===t?f.set("month",d.month()):"day"===t&&(f.set("month",d.month()),f.set("date",d.date())),n[p]={x:f.toDate(),y:1,label:o(f)}}}}catch(e){i=!0,s=e}finally{try{r||null==c.return||c.return()}finally{if(i)throw s}}return Object.values(n)}var c=function(e){return{min:0,max:e.length-1}},u=function(e,t){var n=e.min,r=e.max;return t.length?{min:a()(t[Math.ceil(n)].x),max:a()(t[Math.floor(r)].x)}:{}}},134:function(e,t,n){"use strict";var r=n(9),a=n.n(r);function o(e){if("#"===e[0])return function(e){var t=parseInt(e.slice(1),16);return{r:t>>16,g:t>>8&255,b:255&t}}(e);if(e.startsWith("rgba"))return function(e){var t=e.slice(5).slice(0,-1).split(","),n=a()(t,4),r=n[0],o=n[1],i=n[2],s=n[3];return{r:parseInt(r,10),g:parseInt(o,10),b:parseInt(i,10),a:parseInt(s,10)}}(e);throw new Error("Colour format not supported")}function i(e,t){var n=e;return(n+=t)>255?n=255:n<0&&(n=0),n}function s(e,t){var n=Math.round(2.55*t),r=o(e),a=r.r,s=r.g,l=r.b;a=i(a,n),s=i(s,n),l=i(l,n);var c=r.a;return void 0!==c?"rgba(".concat(a,", ").concat(s,", ").concat(l,", ").concat(c,")"):"#".concat((l|s<<8|a<<16).toString(16))}function l(e,t){var n=o(e),r=n.r,a=n.g,i=n.b;return"rgba(".concat(r,", ").concat(a,", ").concat(i,", ").concat(t,")")}n.d(t,"a",(function(){return u}));var c={primaryColour:"",primaryColourTint:"",primaryColourShade:"",primaryColourAlpha:"",primaryColourAlphaLight:"",primaryColourAlphaMedium:"",primaryColourAlphaDark:""};t.b=c;function u(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=a()(n[t],2),o=r[0],i=r[1];c[o]=i,"primaryColour"===o&&(c.primaryColourTint=s(i,10),c.primaryColourShade=s(i,-10),c.primaryColourAlpha=l(i,.14),c.primaryColourAlphaLight=l(i,.14),c.primaryColourAlphaMedium=l(i,.54),c.primaryColourAlphaDark=l(i,.87)),"primaryColourAlpha"===o&&(c.primaryColourAlphaLight=i),"primaryColourAlphaLight"===o&&(c.primaryColourAlpha=i)}var u=document.querySelector("#libmr-theme")||document.createElement("style");u.id="libmr-theme",u.type="text/css",u.innerHTML="\n  :root {\n    --libmr-primary-colour: ".concat(c.primaryColour,";\n    --libmr-primary-colour-tint: ").concat(c.primaryColourTint,";\n    --libmr-primary-colour-shade: ").concat(c.primaryColourShade,";\n    --libmr-primary-colour-alpha: ").concat(c.primaryColourAlphaLight,";\n    --libmr-primary-colour-alpha-light: ").concat(c.primaryColourAlphaLight,";\n    --libmr-primary-colour-alpha-medium: ").concat(c.primaryColourAlphaMedium,";\n    --libmr-primary-colour-alpha-dark: ").concat(c.primaryColourAlphaDark,";\n  }\n"),document.head.appendChild(u)}},149:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"d",(function(){return a})),n.d(t,"c",(function(){return o})),n.d(t,"e",(function(){return i})),n.d(t,"a",(function(){return s}));var r="LIBMR HISTORY SNAPSHOT";function a(e){return{type:r,payload:{image:e}}}var o="LIBMR HISTORY TRAVEL";function i(e){return{type:o,payload:{index:e}}}var s="LIBMR HISTORY REVERT"},150:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"f",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"g",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"h",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"i",(function(){return u})),n.d(t,"e",(function(){return d})),n.d(t,"j",(function(){return h}));var r="LIBMR TIMELINE BOUNDS",a=function(e){return{type:r,payload:e||null}},o="LIBMR TIMELINE NODE SIZE",i=function(e){return{type:o,payload:e}},s="LIBMR TIMELINE SPEED",l=function(e){return{type:s,payload:e}},c="LIBMR TIMELINE UNIT",u=function(e){return{type:c,payload:e}},d="LIBMR TIMELINE VIEWPORT",h=function(e){return{type:d,payload:e}}},152:function(e,t,n){"use strict";n(991);var r=n(28),a=n.n(r),o=n(0),i=n.n(o),s=n(1),l=n.n(s),c=n(4),u=n.n(c),d=n(180),h=n.n(d),p=n(489),f=n.n(p),m=function(e){var t=e.id,n=a()(e,["id"]);return i.a.createElement(h.a,{className:u()("libmr-ToggleSwitch",n.className,{"is-checked":n.isChecked}),id:t},i.a.createElement("label",null,n.label),i.a.createElement(f.a,{checked:n.isChecked,onChange:function(){return n.onChange(!n.isChecked)}}))};m.propTypes={className:l.a.string,id:l.a.string,isChecked:l.a.bool,label:l.a.node,onChange:l.a.func};var g=m;n.d(t,"a",(function(){return g}))},229:function(e,t,n){"use strict";n(977);var r=n(121),a=n(3),o=n.n(a),i=n(17),s=n.n(i),l=n(24),c=n.n(l),u=n(26),d=n.n(u),h=n(22),p=n.n(h),f=n(23),m=n.n(f),g=n(27),v=n.n(g),y=n(0),b=n.n(y),C=n(1),x=n.n(C),S=n(4),w=n.n(S),L=n(107),k=n(319),N=n(263),E=function(e){function t(){var e,n,r;c()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return p()(r,(n=r=p()(this,(e=m()(t)).call.apply(e,[this].concat(o))),r.state={isActive:!1},n))}return v()(t,e),d()(t,[{key:"componentDidUpdate",value:function(e,t){this.state.isActive!==t.isActive&&(this.state.isActive?this.searchInput.focus():this.props.value&&this.props.onChange())}},{key:"render",value:function(){var e=this;return b.a.createElement(b.a.Fragment,null,b.a.createElement(L.a,{onClick:function(){return e.setState({isActive:!e.state.isActive})}},b.a.createElement("i",{className:"material-icons"},"search")),b.a.createElement(N.a,{in:this.state.isActive},b.a.createElement("input",{className:"libmr-search-input",type:"text",placeholder:"Search",value:this.props.value,onChange:function(t){return e.props.onChange(t.target.value)},ref:function(t){e.searchInput=t}})))}}]),t}(b.a.Component);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}E.displayName="Search",E.propTypes={value:x.a.string,onChange:x.a.func};var P=function(e){function t(){var e,n,r;c()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return p()(r,(n=r=p()(this,(e=m()(t)).call.apply(e,[this].concat(o))),r.handleClear=function(e){r.props.open||e.stopPropagation(),r.props.clear()},n))}return v()(t,e),d()(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.active,a=t.className,o=t.header,i=void 0===o||o,l=t.open,c=t.search,u=t.size,d=void 0===u?"standard":u,h=t.summary,p=t.title,f=t.toggle,m=t.toggleOnClick,g=void 0!==m&&m,v="active"in this.props?n:!!h;return b.a.createElement(r.a,s()({},this.props,{active:v,className:w()("libmr-ControlsMenu",a,d,{active:v}),header:i&&b.a.createElement("header",null,b.a.createElement("h3",null,p),c&&b.a.createElement(E,c),b.a.createElement(L.a,{onClick:f},b.a.createElement("i",{className:"material-icons"},"close"))),button:b.a.createElement(k.a,{title:p,open:l,active:v,label:h||p,clear:v?function(t){return e.handleClear(t)}:null}),toggleOnClick:g}))}}]),t}(b.a.Component);P.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){o()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r.a.propTypes,{clear:x.a.func,header:x.a.bool,search:x.a.shape({value:x.a.string,onChange:x.a.func}),size:x.a.oneOf(["standard","narrow"]),summary:x.a.node,title:x.a.string});var I=P;t.a=Object(r.b)(I)},230:function(e,t,n){"use strict";n(995);var r=n(3),a=n.n(r),o=n(28),i=n.n(o),s=n(0),l=n.n(s),c=n(1),u=n.n(c),d=n(4),h=n.n(d);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t=e.id,n=i()(e,["id"]);return l.a.createElement("div",{className:h()("libmr-Slider",n.className),style:f({"--min":n.min,"--max":n.max,"--val":n.value},n.style)},l.a.createElement("label",{htmlFor:t},n.label,": ",n.displayValue||n.value,n.unit),l.a.createElement("input",{id:t,type:"range",min:n.min,max:n.max,value:n.value,onChange:function(e){return n.onChange(parseInt(e.target.value,10))}}),l.a.createElement("span",{className:"libmr-Slider-focus-ring"}))};m.propTypes={className:u.a.string,displayValue:u.a.number,id:u.a.string.isRequired,label:u.a.node.isRequired,max:u.a.number.isRequired,min:u.a.number.isRequired,onChange:u.a.func.isRequired,unit:u.a.string,style:u.a.object,value:u.a.number.isRequired};var g=m;n.d(t,"a",(function(){return g}))},234:function(e,t,n){"use strict";var r=n(50);n.d(t,"a",(function(){return a}));var a={Degrees0:0,Degrees90:.5*Math.PI,Degrees180:Math.PI,Degrees270:1.5*Math.PI,Degrees360:2*Math.PI},o=document.createElement("canvas");o.width=14,o.height=14;var i=o.getContext("2d");i.lineWidth=1,i.strokeStyle=r.a.COLOUR_DARK;var s=document.createElement("canvas");s.width=4,s.height=4;s.getContext("2d");var l=document.createElement("canvas").getContext("2d");l.font='14px "Roboto", "Helvetica", "Arial", sans-serif'},254:function(e,t,n){"use strict";var r=n(17),a=n.n(r),o=n(9),i=n.n(o),s=(n(997),n(0)),l=n.n(s),c=n(4),u=n.n(c),d=n(1),h=n.n(d),p=n(263),f=n(82),m=n(681),g=function(e){return l.a.createElement("div",{className:u()("libmr-Panel",e.className),style:e.style},e.children,l.a.createElement(f.a,{className:"libmr-Panel-controls-toggler",active:e.controlsVisible,title:e.controlsVisible?"Hide controls":"Show controls",onClick:function(){return e.onControlsVisibleChange(!e.controlsVisible)}},l.a.createElement("i",{className:"material-icons"},"tune")),l.a.createElement(p.a,{in:e.controlsVisible},l.a.createElement("div",{className:"libmr-Panel-primary-controls"},e.primaryControls)),l.a.createElement(p.a,{in:e.controlsVisible},l.a.createElement("div",{className:"libmr-Panel-secondary-controls"},e.secondaryControls)),!0===e.zoomControls&&l.a.createElement(p.a,{in:e.controlsVisible},l.a.createElement(m.a,{onZoomIn:function(){return e.onZoomChange(1)},onZoomOut:function(){return e.onZoomChange(-1)}})),l.a.isValidElement(e.zoomControls)&&l.a.createElement(p.a,{in:e.controlsVisible},e.zoomControls))};g.propTypes={className:h.a.string,controlsVisible:h.a.bool,style:h.a.object,children:h.a.node,primaryControls:h.a.node,secondaryControls:h.a.node,zoomControls:h.a.oneOfType([h.a.bool,h.a.node]),onZoomChange:h.a.func,onControlsVisibleChange:h.a.func},g.defaultProps={zoomControls:!0};var v=g;n.d(t,"a",(function(){return v}));t.b=function(e){var t=l.a.useState(!1),n=i()(t,2),r=n[0],o=n[1];return l.a.createElement(v,a()({},e,{controlsVisible:r,onControlsVisibleChange:o}))}},263:function(e,t,n){"use strict";n(989);var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(304),l=n(4),c=n.n(l),u=function(e){return a.a.createElement(s.a,{visible:e.in,removeOnLeave:!0,motionName:"libmr-Fade"},(function(t){return a.a.cloneElement(e.children,{className:c()(e.children.props.className,t.className)})}))};u.propTypes={children:i.a.element,in:i.a.bool},t.a=u},318:function(e,t,n){"use strict";n(1022);var r=n(3),a=n.n(r),o=n(17),i=n.n(o),s=n(0),l=n.n(s),c=n(4),u=n.n(c),d=n(121);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var p=function(e){return l.a.createElement(d.a,i()({},e,{className:u()("libmr-DropdownMenu",e.className)}))};p.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},d.a.propTypes);var f=p;t.a=Object(d.b)(f)},319:function(e,t,n){"use strict";n(987);var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(4),l=n.n(s),c=a.a.forwardRef((function(e,t){var n=e.active,r=e.children,o=e.className,i=e.clear,s=e.direction,c=void 0===s?"down":s,u=e.label,d=void 0===u?r:u,h=e.onClick,p=e.open,f=e.title;return a.a.createElement("span",{ref:t,role:"button",className:l()("libmr-MenuButton",{active:n,open:p},o),onClick:h,title:f},"string"==typeof d?a.a.createElement("span",null,d):d,n&&i?a.a.createElement("button",{className:"libmr-MenuButton-clear",onClick:i},a.a.createElement("i",{className:"material-icons",onClick:i},"cancel")):a.a.createElement("i",{className:"material-icons"},"arrow_drop_",c))}));c.propTypes={active:i.a.bool,children:i.a.node,className:i.a.string,clear:i.a.func,direction:i.a.oneOf(["down","up"]),label:i.a.node,onClick:i.a.func,open:i.a.bool,title:i.a.string};var u=c;n.d(t,"a",(function(){return u}))},320:function(e,t,n){"use strict";var r=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/,a={ad:"🇦🇩",ae:"🇦🇪",af:"🇦🇫",ag:"🇦🇬",ai:"🇦🇮",al:"🇦🇱",am:"🇦🇲",ao:"🇦🇴",aq:"🇦🇶",ar:"🇦🇷",as:"🇦🇸",at:"🇦🇹",au:"🇦🇺",aw:"🇦🇼",ax:"🇦🇽",az:"🇦🇿",ba:"🇧🇦",bb:"🇧🇧",bd:"🇧🇩",be:"🇧🇪",bf:"🇧🇫",bg:"🇧🇬",bh:"🇧🇭",bi:"🇧🇮",bj:"🇧🇯",bl:"🇧🇱",bm:"🇧🇲",bn:"🇧🇳",bo:"🇧🇴",bq:"🇧🇶",br:"🇧🇷",bs:"🇧🇸",bt:"🇧🇹",bv:"🇧🇻",bw:"🇧🇼",by:"🇧🇾",bz:"🇧🇿",ca:"🇨🇦",cc:"🇨🇨",cd:"🇨🇩",cf:"🇨🇫",cg:"🇨🇬",ch:"🇨🇭",ci:"🇨🇮",ck:"🇨🇰",cl:"🇨🇱",cm:"🇨🇲",cn:"🇨🇳",co:"🇨🇴",cr:"🇨🇷",cu:"🇨🇺",cv:"🇨🇻",cw:"🇨🇼",cx:"🇨🇽",cy:"🇨🇾",cz:"🇨🇿",de:"🇩🇪",dj:"🇩🇯",dk:"🇩🇰",dm:"🇩🇲",do:"🇩🇴",dz:"🇩🇿",ec:"🇪🇨",ee:"🇪🇪",eg:"🇪🇬",eh:"🇪🇭",er:"🇪🇷",es:"🇪🇸",et:"🇪🇹",eu:"🇪🇺",fi:"🇫🇮",fj:"🇫🇯",fk:"🇫🇰",fm:"🇫🇲",fo:"🇫🇴",fr:"🇫🇷",ga:"🇬🇦",gb:"🇬🇧",gd:"🇬🇩",ge:"🇬🇪",gf:"🇬🇫",gg:"🇬🇬",gh:"🇬🇭",gi:"🇬🇮",gl:"🇬🇱",gm:"🇬🇲",gn:"🇬🇳",gp:"🇬🇵",gq:"🇬🇶",gr:"🇬🇷",gs:"🇬🇸",gt:"🇬🇹",gu:"🇬🇺",gw:"🇬🇼",gy:"🇬🇾",hk:"🇭🇰",hm:"🇭🇲",hn:"🇭🇳",hr:"🇭🇷",ht:"🇭🇹",hu:"🇭🇺",id:"🇮🇩",ie:"🇮🇪",il:"🇮🇱",im:"🇮🇲",in:"🇮🇳",io:"🇮🇴",iq:"🇮🇶",ir:"🇮🇷",is:"🇮🇸",it:"🇮🇹",je:"🇯🇪",jm:"🇯🇲",jo:"🇯🇴",jp:"🇯🇵",ke:"🇰🇪",kg:"🇰🇬",kh:"🇰🇭",ki:"🇰🇮",km:"🇰🇲",kn:"🇰🇳",kp:"🇰🇵",kr:"🇰🇷",kw:"🇰🇼",ky:"🇰🇾",kz:"🇰🇿",la:"🇱🇦",lb:"🇱🇧",lc:"🇱🇨",li:"🇱🇮",lk:"🇱🇰",lr:"🇱🇷",ls:"🇱🇸",lt:"🇱🇹",lu:"🇱🇺",lv:"🇱🇻",ly:"🇱🇾",ma:"🇲🇦",mc:"🇲🇨",md:"🇲🇩",me:"🇲🇪",mf:"🇲🇫",mg:"🇲🇬",mh:"🇲🇭",mk:"🇲🇰",ml:"🇲🇱",mm:"🇲🇲",mn:"🇲🇳",mo:"🇲🇴",mp:"🇲🇵",mq:"🇲🇶",mr:"🇲🇷",ms:"🇲🇸",mt:"🇲🇹",mu:"🇲🇺",mv:"🇲🇻",mw:"🇲🇼",mx:"🇲🇽",my:"🇲🇾",mz:"🇲🇿",na:"🇳🇦",nc:"🇳🇨",ne:"🇳🇪",nf:"🇳🇫",ng:"🇳🇬",ni:"🇳🇮",nl:"🇳🇱",no:"🇳🇴",np:"🇳🇵",nr:"🇳🇷",nu:"🇳🇺",nz:"🇳🇿",om:"🇴🇲",pa:"🇵🇦",pe:"🇵🇪",pf:"🇵🇫",pg:"🇵🇬",ph:"🇵🇭",pk:"🇵🇰",pl:"🇵🇱",pm:"🇵🇲",pn:"🇵🇳",pr:"🇵🇷",ps:"🇵🇸",pt:"🇵🇹",pw:"🇵🇼",py:"🇵🇾",qa:"🇶🇦",re:"🇷🇪",ro:"🇷🇴",rs:"🇷🇸",ru:"🇷🇺",rw:"🇷🇼",sa:"🇸🇦",sb:"🇸🇧",sc:"🇸🇨",sd:"🇸🇩",se:"🇸🇪",sg:"🇸🇬",sh:"🇸🇭",si:"🇸🇮",sj:"🇸🇯",sk:"🇸🇰",sl:"🇸🇱",sm:"🇸🇲",sn:"🇸🇳",so:"🇸🇴",sr:"🇸🇷",ss:"🇸🇸",st:"🇸🇹",sv:"🇸🇻",sx:"🇸🇽",sy:"🇸🇾",sz:"🇸🇿",tc:"🇹🇨",td:"🇹🇩",tf:"🇹🇫",tg:"🇹🇬",th:"🇹🇭",tj:"🇹🇯",tk:"🇹🇰",tl:"🇹🇱",tm:"🇹🇲",tn:"🇹🇳",to:"🇹🇴",tr:"🇹🇷",tt:"🇹🇹",tv:"🇹🇻",tw:"🇹🇼",tz:"🇹🇿",ua:"🇺🇦",ug:"🇺🇬",um:"🇺🇲",us:"🇺🇸",uy:"🇺🇾",uz:"🇺🇿",va:"🇻🇦",vc:"🇻🇨",ve:"🇻🇪",vg:"🇻🇬",vi:"🇻🇮",vn:"🇻🇳",vu:"🇻🇺",wf:"🇼🇫",ws:"🇼🇸",ye:"🇾🇪",yt:"🇾🇹",za:"🇿🇦",zm:"🇿🇲",zw:"🇿🇼"},o=n(513),i=n(50),s=n(234);function l(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5,o=r,i=.5*o,s=Math.PI/a,l=Math.PI/2*3;e.moveTo(t,n-o);for(var c=0;c<a;c++)e.lineTo(t+Math.cos(l)*o,n+Math.sin(l)*o),l+=s,e.lineTo(t+Math.cos(l)*i,n+Math.sin(l)*i),l+=s;e.lineTo(t,n-o)}function c(e,t,n,r,a){e.moveTo(t+r*Math.cos(0),n+r*Math.sin(0));for(var o=1;o<=a;o+=1)e.lineTo(t+r*Math.cos(2*o*Math.PI/a),n+r*Math.sin(2*o*Math.PI/a))}t.a=function(e,t,n,u){var d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"circle",h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#bababa",p=arguments.length>6?arguments[6]:void 0,f=arguments.length>7&&void 0!==arguments[7]?arguments[7]:i.a.NODE_BORDER_WIDTH,m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:i.a.NODE_BORDER_STYLE;if(!(u<=0||"none"===d)){if(e.fillStyle=h,d in a){var g=e.font;e.font="".concat(2*u,"px Segoe UI Emoji"),e.textAlign="center",e.textBaseline="top",e.fillText(a[d],t,n-u/2),e.font=g}else r.test(d)?(e.font="".concat(2*u,"px Segoe UI Emoji"),e.textAlign="center",e.textBaseline="top",e.fillText(d,t,n-u/2)):(e.beginPath(),"dot"===d?e.arc(t,n,2*e.lineWidth,s.a.Degrees0,s.a.Degrees360):"circle"===d?e.arc(t,n,u,s.a.Degrees0,s.a.Degrees360):"square"===d?e.rect(t-u,n-u,2*u,2*u):"triangle"===d?(e.moveTo(t,n-u),e.lineTo(t+u,n+u),e.lineTo(t-u,n+u),e.lineTo(t,n-u)):"star"===d?l(e,t,n,u,5):"hexastar"===d?l(e,t,n,u,6):"heptastar"===d?l(e,t,n,u,7):"octastar"===d?l(e,t,n,u,8):"pentagon"===d?c(e,t,n,u,5):"hexagon"===d?c(e,t,n,u,6):"heptagon"===d?c(e,t,n,u,7):"octagon"===d?c(e,t,n,u,8):console.error("Invalid shape",d),e.fill(),f>0&&(e.strokeStyle=m,e.lineWidth=f,e.stroke()),e.closePath());p&&Object(o.a)(e,t,n,u,p)}}},50:function(e,t,n){"use strict";t.a={DELAY:64,FONT_SIZE:14,HALO_WIDTH:4,MAX_FONT_SIZE:64,MAX_NODE_SIZE:64,MIN_FONT_SIZE:1,MIN_NODE_SIZE:1,NODE_BORDER_STYLE:"rgba(0, 0, 0, 0.54)",NODE_BORDER_WIDTH:1,NODE_RADIUS:7,NODE_SIZE:14,FONT:'"Roboto", "Helvetica", "Arial", sans-serif'}},504:function(e,t,n){var r;window,e.exports=(r=n(102),function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=1)}([function(e,t){e.exports=r},function(e,t,n){"use strict";n.r(t);var r=n(0);function a(e){e.contextMenu.el.classList.remove("visible"),e.contextMenu.isOpen=!1}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)return e;var n=e.map((function(e){return Array.from(e)})),r=!0,a=!1,o=void 0;try{for(var i,s=function(){var e=i.value;n[e.section].splice(e.index,0,{text:e.text,handler:e.handler?e.handler:function(t,n){return t.trigger(e.method,[t,n])},isActive:e.isActive})},l=t[Symbol.iterator]();!(r=(i=l.next()).done);r=!0)s()}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}function i(e,t,n){var r=e.contextMenu.el,a=document.createElement("ul"),o=!0,i=!1,s=void 0;try{for(var l,c=t[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value,d=null;if(u instanceof HTMLElement)(d=document.createElement("li")).appendChild(u);else if("function"==typeof u){var h=u(e,n);h&&(d=document.createElement("li")).appendChild(h)}else!function(){var t=u.text,r=u.handler,a=u.visible,o=u.isActive;if(!a||a(e)){d=document.createElement("li");var i="function"==typeof o,s=document.createElement("button");s.addEventListener("click",(function(){i&&(e.contextMenu.invalidate=!1),r(e,n)}));var l="function"==typeof t?t(e,n):t;if(s.appendChild(document.createTextNode(l)),i){var c=document.createElement("span");c.classList.add("phylocanvas-context-menu-toggle"),o(e,n)&&c.classList.add("is-active"),s.appendChild(c),s.classList.add("phylocanvas-context-menu-has-toggle"),d.addEventListener("click",(function(){o(e,n)?c.classList.add("is-active"):c.classList.remove("is-active")}))}d.appendChild(s)}}();d&&(u.isActive||d.addEventListener("click",(function(){return e.contextMenu.close()})),d.addEventListener("contextmenu",(function(e){return e.preventDefault(),!1})),a.appendChild(d))}}catch(e){i=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw s}}a.hasChildNodes()&&r.appendChild(a)}function s(e,t,n,r){return e+t<n+r?e:e-t>n?e-t:n}function l(e,t,n,r){var a=r?e.getNodeById(r):null;!function(e,t){for(var n=e.contextMenu.el;n.hasChildNodes();)n.removeChild(n.firstChild);var r=t&&!t.isLeaf?e.contextMenu.nodeMenuItems:e.contextMenu.treeMenuItems,a=!0,o=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0)i(e,l.value,t||void 0)}catch(e){o=!0,s=e}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}}(e,a),function(e,t,n){var r=e.el,a=e.parent;r.classList.remove("visible","top","bottom","left","right"),r.style.top=r.style.bottom=r.style.left=r.style.right=null;var o=r.offsetWidth,i=r.offsetHeight,l=s(n,i,window.scrollY,window.innerHeight),c=s(t,o,window.scrollX,window.innerWidth),u=l+i/2>n,d=c+o/2>t;r.style.left="".concat(c,"px"),r.style.top="".concat(l,"px"),r.style.transformOrigin="".concat(u?"top":"bottom"," ").concat(d?"left":"right"),a.removeChild(r),a.appendChild(r),r.offsetWidth,r.classList.add("visible")}(e.contextMenu,t,n),e.contextMenu.isOpen=!0}var c,u,d=[(c=document.createElement("a"),u=document.createElement("img"),u.src="data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20id%3D%22Micro%22%20viewBox%3D%220%200%20433.16%20103.04%22%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bisolation%3Aisolate%3B%7D.cls-2%7Bfill%3A%233b7383%3B%7D.cls-3%7Bopacity%3A0.53%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3ELOGOS%20OCT%202018%3C%2Ftitle%3E%3Cg%20class%3D%22cls-1%22%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M110.22%2C28.17H126c3.28%2C0%2C5.75.58%2C7.39%2C1.73a7.58%2C7.58%2C0%2C0%2C1%2C3.14%2C4.54%2C32.31%2C32.31%2C0%2C0%2C1%2C.67%2C7.3%2C31.25%2C31.25%2C0%2C0%2C1-.7%2C7.2%2C7.87%2C7.87%2C0%2C0%2C1-3.14%2C4.61c-1.62%2C1.17-4.08%2C1.76-7.36%2C1.76h-12.1V72.2h-3.71Zm15%2C23.81a10.15%2C10.15%2C0%2C0%2C0%2C5.47-1.15A5.25%2C5.25%2C0%2C0%2C0%2C133%2C47.6a26%2C26%2C0%2C0%2C0%2C.51-5.86%2C27.48%2C27.48%2C0%2C0%2C0-.48-5.89%2C5%2C5%2C0%2C0%2C0-2.27-3.17%2C10.71%2C10.71%2C0%2C0%2C0-5.51-1.12H113.93V52Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M165.45%2C52.75a29.42%2C29.42%2C0%2C0%2C0-.57-6.91A4%2C4%2C0%2C0%2C0%2C162.73%2C43a13.56%2C13.56%2C0%2C0%2C0-5.15-.7q-4%2C0-5.86%2C1.56a6.85%2C6.85%2C0%2C0%2C0-2.27%2C4.1%2C44.88%2C44.88%2C0%2C0%2C0-.45%2C7.33V72.2h-3.58V24.65H149V43.92h.26a7.06%2C7.06%2C0%2C0%2C1%2C3-3.52q2.17-1.35%2C6.59-1.35a13.48%2C13.48%2C0%2C0%2C1%2C6.53%2C1.25%2C6.16%2C6.16%2C0%2C0%2C1%2C2.91%2C3.87A29%2C29%2C0%2C0%2C1%2C169%2C51.6V72.2h-3.59Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M180.17%2C84.75V81.68q4.94.31%2C9%2C.32c3%2C0%2C5.24-.41%2C6.65-1.22A5.74%2C5.74%2C0%2C0%2C0%2C198.6%2C77a34.38%2C34.38%2C0%2C0%2C0%2C.64-7.71V67.72h-.32A6.69%2C6.69%2C0%2C0%2C1%2C196%2C71.31q-2.17%2C1.34-6.66%2C1.34c-2.9%2C0-5.06-.42-6.49-1.28a6.32%2C6.32%2C0%2C0%2C1-2.88-4%2C30.7%2C30.7%2C0%2C0%2C1-.74-7.68V39.56h3.59V59a29.12%2C29.12%2C0%2C0%2C0%2C.57%2C6.85%2C4%2C4%2C0%2C0%2C0%2C2.15%2C2.81%2C13.28%2C13.28%2C0%2C0%2C0%2C5.08.71q4%2C0%2C5.89-1.54a6.59%2C6.59%2C0%2C0%2C0%2C2.31-4.09%2C46.38%2C46.38%2C0%2C0%2C0%2C.44-7.3V39.56h3.59V67.85a43%2C43%2C0%2C0%2C1-1%2C10.4%2C8.37%2C8.37%2C0%2C0%2C1-3.71%2C5.28q-2.76%2C1.66-8.32%2C1.67A94.52%2C94.52%2C0%2C0%2C1%2C180.17%2C84.75Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M213.13%2C72.2V24.65h3.59V72.2Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M229.77%2C71.4a6.29%2C6.29%2C0%2C0%2C1-3.26-4.6A58.17%2C58.17%2C0%2C0%2C1%2C225.8%2C56%2C58.48%2C58.48%2C0%2C0%2C1%2C226.51%2C45a6.38%2C6.38%2C0%2C0%2C1%2C3.26-4.64c1.71-.9%2C4.52-1.35%2C8.45-1.35s6.79.45%2C8.48%2C1.35A6.52%2C6.52%2C0%2C0%2C1%2C250%2C45%2C56.15%2C56.15%2C0%2C0%2C1%2C250.7%2C56%2C55.85%2C55.85%2C0%2C0%2C1%2C250%2C66.8a6.42%2C6.42%2C0%2C0%2C1-3.26%2C4.6c-1.69.88-4.51%2C1.32-8.48%2C1.32S231.48%2C72.28%2C229.77%2C71.4Zm14.72-2.78a4.48%2C4.48%2C0%2C0%2C0%2C2.21-3.49%2C66%2C66%2C0%2C0%2C0%2C.42-9.18%2C67%2C67%2C0%2C0%2C0-.42-9.22%2C4.61%2C4.61%2C0%2C0%2C0-2.21-3.55c-1.19-.66-3.29-1-6.27-1s-5.07.33-6.24%2C1a4.61%2C4.61%2C0%2C0%2C0-2.18%2C3.52%2C69.07%2C69.07%2C0%2C0%2C0-.41%2C9.25%2C68.13%2C68.13%2C0%2C0%2C0%2C.41%2C9.18A4.5%2C4.5%2C0%2C0%2C0%2C232%2C68.62q1.76%2C1%2C6.24%2C1C241.2%2C69.58%2C243.3%2C69.26%2C244.49%2C68.62Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M274.28%2C72.46a38.71%2C38.71%2C0%2C0%2C1-4.32.26c-3.63%2C0-6.3-.58-8-1.73a7.86%2C7.86%2C0%2C0%2C1-3.33-5.12%2C50.73%2C50.73%2C0%2C0%2C1-.73-10%2C43.71%2C43.71%2C0%2C0%2C1%2C.86-10%2C8.36%2C8.36%2C0%2C0%2C1%2C3.42-5.18q2.57-1.7%2C7.68-1.7a37.92%2C37.92%2C0%2C0%2C1%2C4.29.26%2C26.45%2C26.45%2C0%2C0%2C1%2C3.71.64v4.93a35.76%2C35.76%2C0%2C0%2C0-6.46-.58%2C9.62%2C9.62%2C0%2C0%2C0-4.77.9%2C4.57%2C4.57%2C0%2C0%2C0-2%2C3.23%2C41%2C41%2C0%2C0%2C0-.48%2C7.45%2C39.8%2C39.8%2C0%2C0%2C0%2C.51%2C7.56%2C4.47%2C4.47%2C0%2C0%2C0%2C2%2C3.2%2C10.53%2C10.53%2C0%2C0%2C0%2C4.83.83%2C35.91%2C35.91%2C0%2C0%2C0%2C6.59-.58v4.93A28.78%2C28.78%2C0%2C0%2C1%2C274.28%2C72.46Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M285.48%2C70.54q-2.21-2.17-2.21-7.42a16.46%2C16.46%2C0%2C0%2C1%2C.84-5.89%2C5.51%2C5.51%2C0%2C0%2C1%2C2.81-3.07%2C13.06%2C13.06%2C0%2C0%2C1%2C5.57-1c2.18%2C0%2C5.31.08%2C9.41.25V51.72a15.23%2C15.23%2C0%2C0%2C0-.58-5%2C3.09%2C3.09%2C0%2C0%2C0-2.17-1.92%2C22.33%2C22.33%2C0%2C0%2C0-5.38-.45c-1.19%2C0-2.69.06-4.48.19s-3.18.28-4.16.45V40a57.8%2C57.8%2C0%2C0%2C1%2C10.62-.9q5.31%2C0%2C7.94%2C1.22a6.38%2C6.38%2C0%2C0%2C1%2C3.52%2C3.87%2C25.3%2C25.3%2C0%2C0%2C1%2C.9%2C7.71V72.2h-5.64L302.22%2C68h-.39a6.59%2C6.59%2C0%2C0%2C1-3.68%2C3.78%2C15.69%2C15.69%2C0%2C0%2C1-5.72%2C1Q287.69%2C72.72%2C285.48%2C70.54ZM298.7%2C67a4%2C4%2C0%2C0%2C0%2C2.17-1.92%2C13.75%2C13.75%2C0%2C0%2C0%2C1-6V57.55H294a9.3%2C9.3%2C0%2C0%2C0-2.95.35%2C2.19%2C2.19%2C0%2C0%2C0-1.34%2C1.41%2C10.18%2C10.18%2C0%2C0%2C0-.39%2C3.29%2C8.78%2C8.78%2C0%2C0%2C0%2C.42%2C3.14%2C2.44%2C2.44%2C0%2C0%2C0%2C1.6%2C1.41%2C13.17%2C13.17%2C0%2C0%2C0%2C3.68.38A10.93%2C10.93%2C0%2C0%2C0%2C298.7%2C67Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M335.62%2C54a33.45%2C33.45%2C0%2C0%2C0-.41-6.37%2C3.33%2C3.33%2C0%2C0%2C0-1.57-2.46%2C9.56%2C9.56%2C0%2C0%2C0-4-.58%2C6.79%2C6.79%2C0%2C0%2C0-4.35%2C1.15%2C5.33%2C5.33%2C0%2C0%2C0-1.79%2C3.33%2C37.72%2C37.72%2C0%2C0%2C0-.38%2C6.21V72.2h-6.21V39.56h5.63l.26%2C4.36h.44a7.45%2C7.45%2C0%2C0%2C1%2C3.2-3.62%2C11.88%2C11.88%2C0%2C0%2C1%2C5.89-1.25%2C11.25%2C11.25%2C0%2C0%2C1%2C6.05%2C1.31%2C6.53%2C6.53%2C0%2C0%2C1%2C2.72%2C3.94%2C29.52%2C29.52%2C0%2C0%2C1%2C.7%2C7.3V72.2h-6.21Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M357.32%2C72.2l-9.86-32.64h6.4l7.3%2C26.05h.51l7.23-26h6.34L365.38%2C72.2Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M380.71%2C70.54q-2.2-2.17-2.21-7.42a16.46%2C16.46%2C0%2C0%2C1%2C.84-5.89%2C5.51%2C5.51%2C0%2C0%2C1%2C2.81-3.07%2C13.06%2C13.06%2C0%2C0%2C1%2C5.57-1c2.18%2C0%2C5.31.08%2C9.41.25V51.72a15.23%2C15.23%2C0%2C0%2C0-.58-5%2C3.09%2C3.09%2C0%2C0%2C0-2.17-1.92A22.33%2C22.33%2C0%2C0%2C0%2C389%2C44.3c-1.19%2C0-2.69.06-4.48.19s-3.18.28-4.16.45V40a57.8%2C57.8%2C0%2C0%2C1%2C10.62-.9c3.55%2C0%2C6.19.41%2C7.94%2C1.22a6.38%2C6.38%2C0%2C0%2C1%2C3.52%2C3.87%2C25.3%2C25.3%2C0%2C0%2C1%2C.9%2C7.71V72.2H397.7L397.45%2C68h-.39a6.59%2C6.59%2C0%2C0%2C1-3.68%2C3.78%2C15.69%2C15.69%2C0%2C0%2C1-5.72%2C1Q382.92%2C72.72%2C380.71%2C70.54ZM393.93%2C67a4%2C4%2C0%2C0%2C0%2C2.17-1.92%2C13.75%2C13.75%2C0%2C0%2C0%2C1-6V57.55h-7.87a9.3%2C9.3%2C0%2C0%2C0-2.95.35A2.19%2C2.19%2C0%2C0%2C0%2C385%2C59.31a10.18%2C10.18%2C0%2C0%2C0-.39%2C3.29%2C8.78%2C8.78%2C0%2C0%2C0%2C.42%2C3.14%2C2.44%2C2.44%2C0%2C0%2C0%2C1.6%2C1.41%2C13.17%2C13.17%2C0%2C0%2C0%2C3.68.38A10.93%2C10.93%2C0%2C0%2C0%2C393.93%2C67Z%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M416.58%2C72.46c-2-.17-3.73-.36-5.18-.58v-5a77.88%2C77.88%2C0%2C0%2C0%2C9.79.58A12.66%2C12.66%2C0%2C0%2C0%2C425.1%2C67a2.63%2C2.63%2C0%2C0%2C0%2C1.66-1.34%2C6.93%2C6.93%2C0%2C0%2C0%2C.38-2.63%2C10.13%2C10.13%2C0%2C0%2C0-.25-2.72%2C1.7%2C1.7%2C0%2C0%2C0-.9-1.09%2C8.75%2C8.75%2C0%2C0%2C0-2.24-.48l-7-1c-2.43-.29-4.07-1.14-4.93-2.52s-1.28-3.58-1.28-6.56a10.91%2C10.91%2C0%2C0%2C1%2C1.41-6.08%2C6.88%2C6.88%2C0%2C0%2C1%2C3.87-2.85%2C22.85%2C22.85%2C0%2C0%2C1%2C6.37-.74c1.62%2C0%2C3.32.09%2C5.09.26a27%2C27%2C0%2C0%2C1%2C4.32.7v4.93a60.27%2C60.27%2C0%2C0%2C0-9-.64%2C10%2C10%2C0%2C0%2C0-4.74.8c-.89.53-1.34%2C1.7-1.34%2C3.49a9.81%2C9.81%2C0%2C0%2C0%2C.22%2C2.49%2C1.65%2C1.65%2C0%2C0%2C0%2C.87%2C1.09%2C6.53%2C6.53%2C0%2C0%2C0%2C2.05.51l7.23.9a9.89%2C9.89%2C0%2C0%2C1%2C3.61%2C1.09%2C4.77%2C4.77%2C0%2C0%2C1%2C2%2C2.65%2C17.4%2C17.4%2C0%2C0%2C1%2C.67%2C5.54A12.27%2C12.27%2C0%2C0%2C1%2C431.91%2C69a6.46%2C6.46%2C0%2C0%2C1-3.65%2C3%2C20.26%2C20.26%2C0%2C0%2C1-6.24.8C420.4%2C72.72%2C418.59%2C72.63%2C416.58%2C72.46Z%22%2F%3E%3C%2Fg%3E%3Cg%20class%3D%22cls-3%22%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M77.84.07h-.33a14.31%2C14.31%2C0%2C0%2C0-14%2C14.63v0h0v0a28.13%2C28.13%2C0%2C0%2C1-1.29%2C9.09%2C28.63%2C28.63%2C0%2C0%2C1-5.42%2C9.92%2C28.56%2C28.56%2C0%2C0%2C1-35.57%2C6.69h0A14.3%2C14.3%2C0%2C1%2C0%2C14.37%2C67.3a14.45%2C14.45%2C0%2C0%2C0%2C7-1.82c.15-.11.31-.21.47-.31h0l.48-.29A28.53%2C28.53%2C0%2C0%2C1%2C36.71%2C61a28%2C28%2C0%2C0%2C1%2C5%2C.45%2C28.45%2C28.45%2C0%2C0%2C1%2C7.65%2C2.49l0%2C0c.72.35%2C1.44.74%2C2.13%2C1.16h0a27.94%2C27.94%2C0%2C0%2C1%2C6.19%2C5.07%2C28.86%2C28.86%2C0%2C0%2C1%2C3.4%2C4.5%2C28.81%2C28.81%2C0%2C0%2C1%2C4.15%2C13.53c0%2C.22%2C0%2C.44%2C0%2C.66s0%2C.49%2C0%2C.74A14.3%2C14.3%2C0%2C1%2C0%2C86.46%2C76.09L86.34%2C76h0A28.6%2C28.6%2C0%2C0%2C1%2C72.86%2C42.53a29.14%2C29.14%2C0%2C0%2C1%2C2.23-5.24%2C28.57%2C28.57%2C0%2C0%2C1%2C3.19-4.68%2C28.25%2C28.25%2C0%2C0%2C1%2C6.92-6h0A14.3%2C14.3%2C0%2C0%2C0%2C77.84.07%22%2F%3E%3C%2Fg%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M14.37%2C38.56a14.39%2C14.39%2C0%2C1%2C0%2C12.3%2C6.9%2C14.28%2C14.28%2C0%2C0%2C0-12.3-6.9%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M79.58%2C74.27a14.39%2C14.39%2C0%2C1%2C0%2C12.3%2C6.9%2C14.36%2C14.36%2C0%2C0%2C0-12.3-6.9%22%2F%3E%3Cpath%20class%3D%22cls-2%22%20d%3D%22M77.87%2C0A14.39%2C14.39%2C0%2C1%2C0%2C90.16%2C6.9%2C14.37%2C14.37%2C0%2C0%2C0%2C77.87%2C0%22%2F%3E%3C%2Fsvg%3E",c.appendChild(u),c.title="About Phylocanvas...",c.href="http://phylocanvas.org/",c.target="_blank",c.className="phylocanvas-context-menu-about",c)],h=window.URL||window.webkitURL;function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text/plain;charset=utf-8",n=new Blob([e],{type:t});return h.createObjectURL(n)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"file",n=arguments.length>2?arguments[2]:void 0,r=document.createElement("a");return r.appendChild(document.createTextNode(e)),r.download=t,r.addEventListener("click",(function(){r.href=n()})),r}function m(e,t,n){return f(n,e.contextMenu.filenames.leafLabels,(function(){return p(e.getLeafLabels(t).join("\n"))}))}function g(e,t,n){return f(n,e.contextMenu.filenames.newick,(function(){return p(e.getNewick(t))}))}var v=[[{text:"Show labels",handler:function(e){return e.toggleLeafLabels()},isActive:function(e){return e.state.renderLeafLabels}},{text:"Align labels",handler:function(e){return e.toggleAlignLeafLabels()},isActive:function(e){return e.state.alignLabels}}],[{text:"Fit in panel",handler:function(e){return e.fitInPanel()}},{text:"Expand collapsed subtrees",visible:function(e){return e.state.collapsedIds.length>0},handler:function(e){return e.resetCollapsedNodes({refit:!0})}},{text:"Redraw original tree",handler:function(e){return e.setSource(e.nodes.originalSource)}}],[function(e,t){return m(e,t,"Export leaf labels")},function(e,t){return function(e,t,n){var r=e.contextMenu,a=e.state.selectedIds,o=r.filenames;return 0===a.length?null:f("Export selected labels",o.leafLabels,(function(){return p(e.getNodeLabels(a).join("\n"))}))}(e)},function(e,t){return g(e,t,"Export as newick file")},function(e,t){return function(e,t,n){return f("Export as image",e.contextMenu.filenames.image,(function(){return e.ctx.canvas.toDataURL()}))}(e)}],d],y=[[{text:function(e,t){return-1===e.state.collapsedIds.indexOf(t.id)?"Collapse subtree":"Expand subtree"},handler:function(e,t){return e.collapseNode(t,{refit:!0})}},{text:"Rotate subtree",handler:function(e,t){return e.rotateNode(t,{refit:!1})}}],[{text:"View subtree",handler:function(e,t){return e.setRoot(t)}},{text:"Re-root tree",handler:function(e,t){return e.rerootNode(t)}}],[function(e,t){return m(e,t,"Export subtree leaf labels")},function(e,t){return g(e,t,"Export subtree as newick file")}],d],b={image:"phylocanvas.png",leafLabels:"phylocanvas-leaf-labels.txt",newick:"phylocanvas.nwk"};function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.default=function(e,t){function n(t){var n=r.utils.mapPoint(e,t.offsetX,t.offsetY),a=e.getNodeAtPoint(n.x,n.y);e.contextMenu.open(t.pageX,t.pageY,a?a.id:null)}t("init",(function(t,n){var r=t.apply(void 0,S(n)),i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(n,1)[0].contextMenu,s=void 0===i?{}:i;return e.contextMenu={},e.contextMenu.invalidate=!0,s&&"string"==typeof s.parent?e.contextMenu.parent=document.querySelector(s.parent):s&&(e.contextMenu.parent=s.parent),e.contextMenu.parent||(e.contextMenu.parent=document.body),e.contextMenu.el=document.createElement("ul"),e.contextMenu.el.className="phylocanvas-context-menu",e.contextMenu.parent.appendChild(e.contextMenu.el),e.contextMenu.treeMenuItems=o(v,s.treeMenuItems),e.contextMenu.nodeMenuItems=o(y,s.nodeMenuItems),e.contextMenu.filenames=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},b,{},s.filenames),e.contextMenu.open=l.bind(null,e),e.contextMenu.close=a.bind(null,e),r}));var i=function(){e.contextMenu.touching=!0};e.ctx.canvas.addEventListener("touchstart",i);var s=function(t){t.preventDefault(),e.contextMenu.touching&&(n(t),e.contextMenu.touching=!1)};e.ctx.canvas.addEventListener("contextmenu",s);var c=function(t){(e.contextMenu.isOpen||!e.contextMenu.isOpen&&2===t.button)&&t.stopImmediatePropagation()};e.ctx.canvas.addEventListener("mousedown",c);var u=function(t){2===t.button?(t.stopImmediatePropagation(),n(t)):e.contextMenu.isOpen&&(t.stopImmediatePropagation(),e.contextMenu.close())};e.ctx.canvas.addEventListener("mouseup",u),t("mergeState",(function(t,n){var r=e.contextMenu;r.isOpen&&r.invalidate&&r.close(),r.invalidate=!0,t.apply(void 0,S(n))})),t("destroy",(function(t,n){e.contextMenu.parent.removeChild(e.contextMenu.el),e.ctx.canvas.removeEventListener("touchstart",i),e.ctx.canvas.removeEventListener("contextmenu",s),e.ctx.canvas.removeEventListener("mousedown",c),e.ctx.canvas.removeEventListener("mouseup",u),t.apply(void 0,S(n))}))}}]))},505:function(e,t,n){var r;window,e.exports=(r=n(102),function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=12)}([function(e,t){e.exports=r},function(e,t,n){"use strict";var r,a="object"==typeof Reflect?Reflect:null,o=a&&"function"==typeof a.apply?a.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=a&&"function"==typeof a.ownKeys?a.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var l=10;function c(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function u(e,t,n,r){var a,o,i,s;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),i=o[t]),void 0===i)i=o[t]=n,++e._eventsCount;else if("function"==typeof i?i=o[t]=r?[n,i]:[i,n]:r?i.unshift(n):i.push(n),(a=c(e))>0&&i.length>a&&!i.warned){i.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=i.length,s=l,console&&console.warn&&console.warn(s)}return e}function d(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,e))}function h(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},a=d.bind(r);return a.listener=n,r.wrapFn=a,a}function p(e,t,n){var r=e._events;if(void 0===r)return[];var a=r[t];return void 0===a?[]:"function"==typeof a?n?[a.listener||a]:[a]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(a):m(a,a.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function m(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");l=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return c(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,a=this._events;if(void 0!==a)r=r&&void 0===a.error;else if(!r)return!1;if(r){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var l=a[e];if(void 0===l)return!1;if("function"==typeof l)o(l,this,t);else{var c=l.length,u=m(l,c);for(n=0;n<c;++n)o(u[n],this,t)}return!0},s.prototype.addListener=function(e,t){return u(this,e,t,!1)},s.prototype.on=s.prototype.addListener,s.prototype.prependListener=function(e,t){return u(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,h(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,h(this,e,t)),this},s.prototype.removeListener=function(e,t){var n,r,a,o,i;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(a=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){i=n[o].listener,a=o;break}if(a<0)return this;0===a?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,a),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,i||t)}return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var a,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(a=o[r])&&this.removeAllListeners(a);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return p(this,e,!0)},s.prototype.rawListeners=function(e){return p(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},s.prototype.listenerCount=f,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},function(e,t){var n={left:0,top:0};e.exports=function(e,t,r){t=t||e.currentTarget||e.srcElement,Array.isArray(r)||(r=[0,0]);var a,o=e.clientX||0,i=e.clientY||0,s=(a=t)===window||a===document||a===document.body?n:a.getBoundingClientRect();return r[0]=o-s.left,r[1]=i-s.top,r}},function(e,t,n){"use strict";const r=n(4),a=n(5),o=n(8),i=n(11);e.exports=function(e,t){if(!(e&&t instanceof Function))return!1;let n,s=i({element:e}),l=0,c=0;n=new r({source:e,update:(e,n)=>{let r={type:"mouse",dx:e-c,dy:n-l,dz:0,x:s[0],y:s[1]};c=e,l=n,t(r)},multiplier:1,friction:.75}),a(e,(e,n,r,a)=>{a.preventDefault(),t({type:"mouse",dx:0,dy:0,dz:n,x:s[0],y:s[1],event:a})});let u,d=o(e);d.on("start",e=>{n&&n.pause();let[t,r]=d.fingers;u=[.5*r.position[0]+.5*t.position[0],.5*r.position[1]+.5*t.position[1]]}),d.on("end",()=>{u=null,n&&n.resume()}),d.on("change",(e,n)=>{d.pinching&&u&&t({type:"touch",dx:0,dy:0,dz:2*-(e-n),x:u[0],y:u[1]})})}},function(e,t,n){var r,a;void 0===(a="function"==typeof(r=function(e,t){"use strict";window.addEventListener("touchmove",(function(){})),t.exports=function e(t){var a,o,i,s,l,c,u,d,h,p,f,m=t.source,g=void 0===m?document:m,v=t.update,y=t.multiplier,b=void 0===y?1:y,C=t.friction,x=void 0===C?.92:C,S=t.initialValues,w=t.boundX,L=t.boundY,k=t.bounce,N=void 0===k||k;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var E=0,O=0,P=.3*b,I=!1,_=!1,T=!1,M=!1,j=[];function A(){v.call(g,E,O)}function z(e){if("touchmove"===e.type||"touchstart"===e.type||"touchend"===e.type){var t=e.targetTouches[0]||e.changedTouches[0];return{x:t.clientX,y:t.clientY,id:t.identifier}}return{x:e.clientX,y:e.clientY,id:null}}function R(e){var t=z(e);_||T||(_=!0,M=!1,h=t.id,l=u=t.x,c=d=t.y,j=[],q(l,c),document.addEventListener("touchmove",D,!!r()&&{passive:!1}),document.addEventListener("touchend",B),document.addEventListener("touchcancel",F),document.addEventListener("mousemove",D,!!r()&&{passive:!1}),document.addEventListener("mouseup",B))}function D(e){e.preventDefault();var t=z(e);_&&t.id===h&&(u=t.x,d=t.y,q(l,c),I||n(H),I=!0)}function B(e){var t=z(e);_&&t.id===h&&F()}function F(){_=!1,q(l,c),function(){var e=j[0],t=j[j.length-1],r=t.x-e.x,a=t.y-e.y,o=(t.time-e.time)/15/b;p=r/o||0,f=a/o||0;var i=W();(Math.abs(p)>1||Math.abs(f)>1||!i.inBounds)&&(M=!0,n(Z))}(),document.removeEventListener("touchmove",D),document.removeEventListener("touchend",B),document.removeEventListener("touchcancel",F),document.removeEventListener("mouseup",B),document.removeEventListener("mousemove",D)}function q(e,t){for(var n=Date.now();j.length>0&&!(n-j[0].time<=100);)j.shift();j.push({x:e,y:t,time:n})}function H(){var e=u-l,t=d-c;if(E+=e*b,O+=t*b,N){var n=W();0!==n.x&&(E-=e*V(n.x)*b),0!==n.y&&(O-=t*V(n.y)*b)}else W(!0);A(),l=u,c=d,I=!1}function V(e){return 5e-6*Math.pow(e,2)+1e-4*e+.55}function W(e){var t=0,n=0;return void 0!==a&&E<a?t=a-E:void 0!==o&&E>o&&(t=o-E),void 0!==i&&O<i?n=i-O:void 0!==s&&O>s&&(n=s-O),e&&(0!==t&&(E=t>0?a:o),0!==n&&(O=n>0?i:s)),{x:t,y:n,inBounds:0===t&&0===n}}function Z(){if(M){E+=p*=x,O+=f*=x;var e=W();if(Math.abs(p)>P||Math.abs(f)>P||!e.inBounds){if(N){if(0!==e.x)if(e.x*p<=0)p+=.04*e.x;else{var t=e.x>0?2.5:-2.5;p=.11*(e.x+t)}0!==e.y&&(e.y*f<=0?f+=.04*e.y:(t=e.y>0?2.5:-2.5,f=.11*(e.y+t)))}else 0!==e.x&&(E=e.x>0?a:o,p=0),0!==e.y&&(O=e.y>0?i:s,f=0);A(),n(Z)}else M=!1}}!function(){if(!(g="string"==typeof g?document.querySelector(g):g))throw new Error("IMPETUS: source not found.");if(!v)throw new Error("IMPETUS: update function not defined.");S&&(S[0]&&(E=S[0]),S[1]&&(O=S[1]),A()),w&&(a=w[0],o=w[1]),L&&(i=L[0],s=L[1]),g.addEventListener("touchstart",R),g.addEventListener("mousedown",R)}(),this.destroy=function(){return g.removeEventListener("touchstart",R),g.removeEventListener("mousedown",R),null},this.pause=function(){_=!1,T=!0},this.resume=function(){T=!1},this.setValues=function(e,t){"number"==typeof e&&(E=e),"number"==typeof t&&(O=t)},this.setMultiplier=function(e){P=.3*(b=e)},this.setBoundX=function(e){a=e[0],o=e[1]},this.setBoundY=function(e){i=e[0],s=e[1]}};var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)};function r(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return r=function(){return e},e}})?r.apply(t,[t,e]):r)||(e.exports=a)},function(e,t,n){"use strict";var r=n(6);e.exports=function(e,t,n){"function"==typeof e&&(n=!!t,t=e,e=window);var a=r("ex",e),o=function(e){n&&e.preventDefault();var r=e.deltaX||0,o=e.deltaY||0,i=e.deltaZ||0,s=1;switch(e.deltaMode){case 1:s=a;break;case 2:s=window.innerHeight}if(o*=s,i*=s,(r*=s)||o||i)return t(r,o,i,e)};return e.addEventListener("wheel",o),o}},function(e,t,n){"use strict";var r=n(7);function a(e,t){var n=r(getComputedStyle(e).getPropertyValue(t));return n[0]*o(n[1],e)}function o(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return function(e,t){var n=document.createElement("div");n.style["font-size"]="128"+e,t.appendChild(n);var r=a(n,"font-size")/128;return t.removeChild(n),r}(e,t);case"em":return a(t,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}e.exports=o},function(e,t){e.exports=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t}},function(e,t,n){var r=n(9),a=n(1).EventEmitter,o=n(10),i=n(2);function s(){this.position=[0,0],this.touch=null}e.exports=function(e){e=e||window;var t=new a,n=[null,null],l=0,c=0,u=!1,d=!1;return Object.defineProperties(t,{pinching:o((function(){return 2===l})),fingers:o((function(){return n}))}),p(),t.enable=p,t.disable=function(){d&&(d=!1,l=0,n[0]=null,n[1]=null,c=0,u=!1,e.removeEventListener("touchstart",f,!1),e.removeEventListener("touchmove",m,!1),e.removeEventListener("touchend",g,!1),e.removeEventListener("touchcancel",g,!1))},t.indexOfTouch=h,t;function h(e){for(var t=e.identifier,r=0;r<n.length;r++)if(n[r]&&n[r].touch&&n[r].touch.identifier===t)return r;return-1}function p(){d||(d=!0,e.addEventListener("touchstart",f,!1),e.addEventListener("touchmove",m,!1),e.addEventListener("touchend",g,!1),e.addEventListener("touchcancel",g,!1))}function f(r){for(var a=0;a<r.changedTouches.length;a++){var o=r.changedTouches[a];if(-1===h(o.identifier)&&l<2){var d=0===l,p=n[0]?1:0,f=n[0]?0:1,m=new s;n[p]=m,l++,m.touch=o,i(o,e,m.position);var g=n[f]?n[f].touch:void 0;if(t.emit("place",o,g),!d){var y=v();u=!1,t.emit("start",y),c=y}}}}function m(r){for(var a=!1,o=0;o<r.changedTouches.length;o++){var s=r.changedTouches[o],u=h(s);-1!==u&&(a=!0,n[u].touch=s,i(s,e,n[u].position))}if(2===l&&a){var d=v();t.emit("change",d,c),c=d}}function g(e){for(var r=0;r<e.changedTouches.length;r++){var a=e.changedTouches[r],o=h(a);if(-1!==o){n[o]=null,l--;var i=0===o?1:0,s=n[i]?n[i].touch:void 0;t.emit("lift",a,s)}}u||2===l||(u=!0,t.emit("end"))}function v(){return l<2?0:r(n[0].position,n[1].position)}}},function(e,t){e.exports=function(e,t){var n=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(n*n+r*r)}},function(e,t){e.exports=function(e,t){return{configurable:!0,enumerable:!0,get:e,set:t}}},function(e,t,n){var r=n(2),a=n(1).EventEmitter;function o(e){var t=(e=e||{}).element||window,n=new a,o=e.position||[0,0];return!1!==e.touchstart&&(t.addEventListener("mousedown",s,!1),t.addEventListener("touchstart",i,!1)),t.addEventListener("mousemove",s,!1),t.addEventListener("touchmove",i,!1),n.position=o,n.dispose=function(){t.removeEventListener("mousemove",s,!1),t.removeEventListener("mousedown",s,!1),t.removeEventListener("touchmove",i,!1),t.removeEventListener("touchstart",i,!1)},n;function i(e){s(e.targetTouches[0])}function s(e){r(e,t,o),n.emit("move",e)}}e.exports=function(e){return o(e).position},e.exports.emitter=function(e){return o(e)}},function(e,t,n){"use strict";n.r(t);var r={highlight:!0,pan:!0,selection:!0,tooltip:!0,zoom:!0},a=n(3),o=n.n(a),i=n(0),s="phylocanvas-tooltip-visible";function l(e){e.classList.remove(s)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.default=function(e,t){var n,a={mousedown:!1,offsetX:void 0,offsetY:void 0},c={visible:!1,element:(n=document.createElement("div"),n.className="phylocanvas-tooltip",n.style.position="absolute",n.style.pointerEvents="none",n)};function d(t){1===t.button&&t.preventDefault(),a.mousedown=!0,a.offsetX=e.state.offsetX,a.offsetY=e.state.offsetY}function p(t){if(a.mousedown)e.state.interactions.tooltip&&c.visible&&(l(c.element),c.visible=!1);else{var n=i.utils.mapPoint(e,t.offsetX,t.offsetY),r=e.getNodeAtPoint(n.x,n.y);e.state.interactions.highlight&&e.highlightNode(r),e.state.interactions.tooltip&&(r&&!r.isLeaf?(function(e,t,n,r){e.innerHTML=r,e.style.left="".concat(t,"px"),e.style.top="".concat(n,"px"),e.classList.add(s)}(c.element,t.clientX,t.clientY,r.totalLeaves),c.visible=!0):c.visible&&(l(c.element),c.visible=!1))}}function f(t){a.mousedown=!1;var n=e.state.offsetX-a.offsetX,r=e.state.offsetY-a.offsetY,o=0!==n||0!==r;if(e.state.interactions.selection&&0===t.button&&!o){var s=i.utils.mapPoint(e,t.offsetX,t.offsetY),l=e.getNodeAtPoint(s.x,s.y);e.selectNode(l,t.metaKey||t.ctrlKey)}}t("mergeState",(function(t,n){c.visible&&(l(c.element),c.visible=!1),e.state.interactions.highlight&&e.highlightNode(null),t.apply(void 0,h(n))})),e.ctx.canvas.addEventListener("mousemove",p),e.ctx.canvas.addEventListener("mousedown",d),e.ctx.canvas.addEventListener("touchstart",d),e.ctx.canvas.addEventListener("mouseup",f),e.ctx.canvas.addEventListener("touchend",f),o()(e.ctx.canvas,(function(t){var n=t.dx,r=t.dy,a=t.dz,o=t.x,i=t.y,s=t.event;0!==a&&0===n&&0===r?e.state.interactions.zoom&&(s&&(s.metaKey||s.ctrlKey)?e.changeBranchScale(a<0?1:-1,{x:o,y:i}):s&&(s.altKey||s.shiftKey)?e.changeStepScale(a<0?1:-1,{x:o,y:i}):a>0&&e.state.scale>e.state.minScale*e.pixelRatio?e.transform(0,0,-1,{x:o,y:i}):a<0&&e.state.scale<e.state.maxScale*e.pixelRatio&&e.transform(0,0,1,{x:o,y:i})):e.state.interactions.pan&&e.transform(n,r,0,{x:o,y:i})})),e.ctx.canvas.onselectstart=function(){return!1},t("getInitialState",(function(e,t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(t,1)[0],a=n.interactions,o=void 0===a?{}:a;return("string"==typeof n.parent?document.querySelector(n.parent):n.parent||document.body).appendChild(c.element),u({},e.apply(void 0,h(t)),{interactions:u({},r,{},o)})})),t("destroy",(function(t,n){e.ctx.canvas.removeEventListener("mousemove",p),e.ctx.canvas.removeEventListener("mousedown",d),e.ctx.canvas.removeEventListener("touchstart",d),e.ctx.canvas.removeEventListener("mouseup",f),e.ctx.canvas.removeEventListener("touchend",f),l(c.element),t.apply(void 0,h(n))}))}}]))},506:function(e,t,n){var r;window,e.exports=(r=n(102),function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=1)}([function(e,t){e.exports=r},function(e,t,n){"use strict";n.r(t);var r=n(0),a={blockFontSize:null,blockLength:16,blockSize:null,blockPadding:0,columns:[],fillStyle:"black",headerFontWeight:"bold",showLabels:!0,showHeaders:!0,textPadding:4,values:{}};function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var u=r.utils.mapScalar,d=r.constants.Angles,h=r.constants.TreeTypes;function p(e,t){for(var n={},r=0,a=Object.keys(t);r<a.length;r++){var o=a[r];n[o]=t[o]/e.state.scale}return n}t.default=function(e,t){t("getInitialState",(function(e,t){var n=c(t,1)[0].metadata,r=void 0===n?{}:n;return s({},e.apply(void 0,o(t)),{metadata:s({},a,{},r)})})),t("layout",(function(t,n){var r=e.state,a=t.apply(void 0,o(n));if(a.metadata||(a.metadata={}),a.metadata.values!==r.metadata.values||a.metadata.columns!==r.metadata.columns||a.metadata.blockPadding!==r.metadata.blockPadding||a.metadata.blockLength!==r.metadata.blockLength||a.metadata.fontSize!==r.fontSize){a.metadata.columnWidths={},a.metadata.headerWidths={};var i=!0,s=!1,l=void 0;try{for(var c,u=r.metadata.columns[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var d=c.value,h="",p=!0,f=!1,m=void 0;try{for(var g,v=a.leafNodes[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var y=g.value;if(y.id in r.metadata.values){var b=r.metadata.values[y.id][d];b&&("string"==typeof b.label?b.label.length>h.length&&(h=b.label):console.error("Invalid metadata label for node ",y.id," column ",d))}}}catch(e){f=!0,m=e}finally{try{p||null==v.return||v.return()}finally{if(f)throw m}}h.length?a.metadata.columnWidths[d]=e.measureTextWidth(h):a.metadata.columnWidths[d]=0,a.metadata.headerWidths[d]=2*r.fontSize+e.measureTextWidth(d,r.metadata.headerFontWeight)}}catch(e){s=!0,l=e}finally{try{i||null==u.return||u.return()}finally{if(s)throw l}}}return a.metadata.blockLength=r.metadata.blockLength,a.metadata.blockPadding=r.metadata.blockPadding,a.metadata.columns=r.metadata.columns,a.metadata.values=r.metadata.values,a.metadata.fontSize=r.fontSize,a})),t("postRender",(function(t,n){var a=e.ctx,i=e.state,s=c(n,1)[0],l=u(e,i.metadata.blockLength),f=u(e,i.metadata.blockPadding),m=p(e,s.metadata.headerWidths),g=p(e,s.metadata.columnWidths),v=u(e,i.metadata.textPadding),y=new Set(Object.keys(i.metadata.values)),b=r.types[i.type],C=i.metadata.showHeaders&&b.mainAxis&&(!b.alignableLabels||b.alignableLabels&&e.state.alignLabels),x=i.metadata.showLabels,S=i.metadata.columns||[];a.save(),a.fillStyle=i.metadata.fillStyle;var w=v;if(i.showNodes&&(w+=e._.actualNodeSize),i.renderLeafLabels&&(w+=e._.actualMaxLabelWidth),C){a.textAlign="left",a.textBaseline="middle",a.font="".concat(i.metadata.headerFontWeight," ").concat(e._.actualFontSize,"px ").concat(i.fontFamily);var L=s.leafNodes[0];L.angle,i.metadata.showLabels||d.Degrees90,a.translate(L.x,L.y),a.rotate(L.angle);var k=w;b.alignableLabels&&(k+=e.state.branchScale*(s.rootNode.longestLeaf-L.distanceFromRoot));for(var N=-.5*i.stepScale,E=0;E<S.length;E++){var O=S[E],P=f;P+=x?Math.max(m[O],f+l+g[O]):l;var I=x?k+f+l+v:k+f+l/2,_=x?N-e._.actualFontSize/2:N-v;a.translate(I,_),x||a.rotate(-d.Degrees90),a.fillText(O,0,0),x||a.rotate(d.Degrees90),a.translate(-1*I,-1*_),k+=P}a.rotate(-L.angle),a.translate(-L.x,-L.y)}var T=i.stepScale,M=0;if(i.type===h.Circular&&e.state.alignLabels){var j=d.Degrees360/s.rootNode.totalLeaves;T=j*(s.rootNode.totalLeafLength*e.state.branchScale+e._.actualNodeSize+e._.actualMaxLabelWidth),M=j*(l+f)}else i.type===h.Radial&&(T=e._.actualNodeSize);var A=Math.min(T,i.blockSize||T);a.font="".concat(e._.actualFontSize,"px ").concat(i.fontFamily);var z=!0,R=!1,D=void 0;try{for(var B,F=s.leafNodes[Symbol.iterator]();!(z=(B=F.next()).done);z=!0){var q=B.value;if(y.has(q.id)){var H=i.metadata.values[q.id];a.translate(q.x,q.y),a.rotate(q.angle),a.beginPath();var V=w;b.alignableLabels&&e.state.alignLabels&&(V+=e.state.branchScale*(s.rootNode.longestLeaf-q.distanceFromRoot));for(var W=0;W<S.length;W++){var Z=S[W];if(void 0!==H[Z]&&!q.isHidden&&(a.fillStyle=H[Z].colour||H[Z],a.fillRect(V+f,0-A/2,l,A+W*M),a.fillStyle=i.metadata.fillStyle,e._.renderLabels&&x&&"string"==typeof H[Z].label)){var Y=q.angle>d.Degrees90&&q.angle<d.Degrees270;Y&&a.rotate(d.Degrees180),a.textAlign=Y?"right":"left",a.textBaseline="middle",a.fillText(H[Z].label,(Y?-1:1)*(V+f+l+v),0),Y&&a.rotate(-d.Degrees180)}V+=f+Math.max(C&&x?m[Z]:0,x?f+l+g[Z]:l)}a.closePath(),a.rotate(-q.angle),a.translate(-q.x,-q.y)}}}catch(e){R=!0,D=e}finally{try{z||null==F.return||F.return()}finally{if(R)throw D}}a.restore(),t.apply(void 0,o(n))})),t("getDrawingArea",(function(t,n){var a=t.apply(void 0,o(n)),i=r.types[e.state.type],s=e.layout(),l=e.state.metadata.blockLength,c=e.state.metadata.blockPadding,u=s.metadata.headerWidths,d=s.metadata.columnWidths,p=e.state.metadata.showLabels,f=e.state.metadata.showHeaders&&i.mainAxis&&(!i.alignableLabels||i.alignableLabels&&e.state.alignLabels),m=0;e.state.renderLeafLabels&&(m+=s.maxLabelWidth);var g=!0,v=!1,y=void 0;try{for(var b,C=e.state.metadata.columns[Symbol.iterator]();!(g=(b=C.next()).done);g=!0){var x=b.value;m+=c+Math.max(f&&p?u[x]:0,p?c+l+d[x]:l)}}catch(e){v=!0,y=e}finally{try{g||null==C.return||C.return()}finally{if(v)throw y}}var S=0,w=0,L=0,k=0;switch(e.state.type){case h.Rectangular:case h.Diagonal:L=f?e.state.stepScale:0,w=m;break;case h.Hierarchical:S=f?e.state.stepScale:0,k=m;break;case h.Circular:case h.Radial:S=m,L=m,w=m,k=m}return{width:a.width,height:a.height,left:a.left+S,top:a.top+L,right:a.right-w,bottom:a.bottom-k}}))}}]))},507:function(e,t,n){var r;window,e.exports=(r=n(102),function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=1)}([function(e,t){e.exports=r},function(e,t,n){"use strict";n.r(t);var r={background:"rgba(255, 255, 255, 0.87)",digits:2,fillStyle:"#222",fontSize:13,height:16,lineWidth:1,padding:8,position:{left:8,bottom:8},strokeStyle:"#222",textAlign:"center",textBaseline:"bottom",textBaselineOffset:2,width:80},a=n(0);function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e,t){t("getInitialState",(function(e,t){var n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}return n}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(t,1)[0].scalebar,a=void 0===n?{}:n;return s({},e.apply(void 0,o(t)),{scalebar:s({},r,{},a)})})),t("render",(function(t,n){t.apply(void 0,o(n)),function(e){var t=e.state.scalebar,n=t.position,r=e.ctx,o=a.utils.getPixelRatio(r),i=t.lineWidth,s=t.fontSize,l=t.padding,c=t.height,u=t.width,d=t.digits,h=u/e.state.branchScale/e.state.scale,p=0;if(Number.isInteger(h))p=h;else for(;0===p;)0===(p=parseFloat(h.toFixed(d),10))&&d++;var f=u*p/h;r.save(),r.scale(o,o);var m=r.canvas.width/o,g=r.canvas.height/o,v=0;void 0!==n.left?v=n.left:void 0!==n.centre?v=m/2-f/2-l+n.centre:void 0!==n.right?v=m-f-n.right-2*l:e.error("Invalid horizontal position specified. Supported values are `left`, `centre`, or `right`");var y=0;void 0!==n.top?y=n.top+l:void 0!==n.middle?y=g/2-c+n.middle+l:void 0!==n.bottom?y=g-c-n.bottom-l:e.error("Invalid vertical position specified. Supported values are `top`, `middle`, or `bottom`"),r.fillStyle=t.background,r.fillRect(v,y-l,f+2*l,c+2*l),r.font="".concat(s,"px ").concat(t.fontFamily||e.state.fontFamily),r.fillStyle=t.fillStyle,r.strokeStyle=t.strokeStyle,r.lineWidth=i,r.textBaseline=t.textBaseline,r.textAlign=t.textAlign,r.beginPath(),r.moveTo(v+l+i,y+i),r.lineTo(v+f+l-i,y+i),r.moveTo(v+l+i,y+i),r.lineTo(v+l+i,y+c),r.moveTo(v+f+l-i,y+i),r.lineTo(v+f+l-i,y+c),r.stroke(),r.closePath(),r.fillText(p,v+(f+2*l)/2,y+c+t.textBaselineOffset),r.restore()}(e)}))}}]))},508:function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/dist/",n(n.s=1)}([function(e,t,n){!function(){"use strict";var t,n,r,a,o;function i(e,t){var n,r=Object.keys(t);for(n=0;n<r.length;n++)e=e.replace(new RegExp("\\{"+r[n]+"\\}","gi"),t[r[n]]);return e}function s(e){var t,n,r;if(!e)throw new Error("cannot create a random attribute name for an undefined object");t="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",n="";do{for(n="",r=0;r<12;r++)n+=t[Math.floor(Math.random()*t.length)]}while(e[n]);return n}function l(e){var t={alphabetic:"alphabetic",hanging:"hanging",top:"text-before-edge",bottom:"text-after-edge",middle:"central"};return t[e]||t.alphabetic}o=function(e,t){var n,r,a,o={};for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)r="&"+e[n+1]+";",a=parseInt(e[n],t),o[r]="&#"+a+";";return o["\\xa0"]="&#160;",o}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),t={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"}},(r=function(e,t){this.__root=e,this.__ctx=t}).prototype.addColorStop=function(e,t){var n,r=this.__ctx.__createElement("stop");r.setAttribute("offset",e),-1!==t.indexOf("rgba")?(n=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(t),r.setAttribute("stop-color",i("rgb({r},{g},{b})",{r:n[1],g:n[2],b:n[3]})),r.setAttribute("stop-opacity",n[4])):r.setAttribute("stop-color",t),this.__root.appendChild(r)},a=function(e,t){this.__root=e,this.__ctx=t},(n=function(e){var t,r={width:500,height:500,enableMirroring:!1};if(arguments.length>1?((t=r).width=arguments[0],t.height=arguments[1]):t=e||r,!(this instanceof n))return new n(t);this.width=t.width||r.width,this.height=t.height||r.height,this.enableMirroring=void 0!==t.enableMirroring?t.enableMirroring:r.enableMirroring,this.canvas=this,this.__document=t.document||document,this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d"),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(e,t,n){void 0===t&&(t={});var r,a,o=this.__document.createElementNS("http://www.w3.org/2000/svg",e),i=Object.keys(t);for(n&&(o.setAttribute("fill","none"),o.setAttribute("stroke","none")),r=0;r<i.length;r++)a=i[r],o.setAttribute(a,t[a]);return o},n.prototype.__setDefaultStyles=function(){var e,n,r=Object.keys(t);for(e=0;e<r.length;e++)this[n=r[e]]=t[n].canvas},n.prototype.__applyStyleState=function(e){var t,n,r=Object.keys(e);for(t=0;t<r.length;t++)this[n=r[t]]=e[n]},n.prototype.__getStyleState=function(){var e,n,r={},a=Object.keys(t);for(e=0;e<a.length;e++)r[n=a[e]]=this[n];return r},n.prototype.__applyStyleToCurrentElement=function(e){var n,o,s,l,c,u=Object.keys(t);for(n=0;n<u.length;n++)if(o=t[u[n]],s=this[u[n]],o.apply)if(-1!==o.apply.indexOf("fill")&&s instanceof a){if(s.__ctx)for(;s.__ctx.__defs.childNodes.length;)l=s.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[l]=l,this.__defs.appendChild(s.__ctx.__defs.childNodes[0]);this.__currentElement.setAttribute("fill",i("url(#{id})",{id:s.__root.getAttribute("id")}))}else-1!==o.apply.indexOf("fill")&&s instanceof r?this.__currentElement.setAttribute("fill",i("url(#{id})",{id:s.__root.getAttribute("id")})):-1!==o.apply.indexOf(e)&&o.svg!==s&&("stroke"!==o.svgAttr&&"fill"!==o.svgAttr||-1===s.indexOf("rgba")?this.__currentElement.setAttribute(o.svgAttr,s):(c=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(s),this.__currentElement.setAttribute(o.svgAttr,i("rgb({r},{g},{b})",{r:c[1],g:c[2],b:c[3]})),this.__currentElement.setAttribute(o.svgAttr+"-opacity",c[4])))},n.prototype.__closestGroupOrSvg=function(e){return"g"===(e=e||this.__currentElement).nodeName||"svg"===e.nodeName?e:this.__closestGroupOrSvg(e.parentNode)},n.prototype.getSerializedSvg=function(e){var t,n,r,a,i,s=(new XMLSerializer).serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(s)&&(s=s.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),e)for(t=Object.keys(o),n=0;n<t.length;n++)r=t[n],a=o[r],(i=new RegExp(r,"gi")).test(s)&&(s=s.replace(i,a));return s},n.prototype.getSvg=function(){return this.__root},n.prototype.save=function(){var e=this.__createElement("g"),t=this.__closestGroupOrSvg();this.__groupStack.push(t),t.appendChild(e),this.__currentElement=e,this.__stack.push(this.__getStyleState())},n.prototype.restore=function(){this.__currentElement=this.__groupStack.pop();var e=this.__stack.pop();this.__applyStyleState(e)},n.prototype.__addTransform=function(e){var t=this.__closestGroupOrSvg();if(t.childNodes.length>0){var n=this.__createElement("g");t.appendChild(n),this.__currentElement=n}var r=this.__currentElement.getAttribute("transform");r?r+=" ":r="",r+=e,this.__currentElement.setAttribute("transform",r)},n.prototype.scale=function(e,t){void 0===t&&(t=e),this.__addTransform(i("scale({x},{y})",{x:e,y:t}))},n.prototype.rotate=function(e){var t=180*e/Math.PI;this.__addTransform(i("rotate({angle},{cx},{cy})",{angle:t,cx:0,cy:0}))},n.prototype.translate=function(e,t){this.__addTransform(i("translate({x},{y})",{x:e,y:t}))},n.prototype.transform=function(e,t,n,r,a,o){this.__addTransform(i("matrix({a},{b},{c},{d},{e},{f})",{a:e,b:t,c:n,d:r,e:a,f:o}))},n.prototype.beginPath=function(){var e;this.__currentDefaultPath="",this.__currentPosition={},e=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(e),this.__currentElement=e},n.prototype.__applyCurrentDefaultPath=function(){if("path"!==this.__currentElement.nodeName)throw new Error("Attempted to apply path command to node "+this.__currentElement.nodeName);var e=this.__currentDefaultPath;this.__currentElement.setAttribute("d",e)},n.prototype.__addPathCommand=function(e){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=e},n.prototype.moveTo=function(e,t){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:e,y:t},this.__addPathCommand(i("M {x} {y}",{x:e,y:t}))},n.prototype.closePath=function(){this.__addPathCommand("Z")},n.prototype.lineTo=function(e,t){this.__currentPosition={x:e,y:t},this.__currentDefaultPath.indexOf("M")>-1?this.__addPathCommand(i("L {x} {y}",{x:e,y:t})):this.__addPathCommand(i("M {x} {y}",{x:e,y:t}))},n.prototype.bezierCurveTo=function(e,t,n,r,a,o){this.__currentPosition={x:a,y:o},this.__addPathCommand(i("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:e,cp1y:t,cp2x:n,cp2y:r,x:a,y:o}))},n.prototype.quadraticCurveTo=function(e,t,n,r){this.__currentPosition={x:n,y:r},this.__addPathCommand(i("Q {cpx} {cpy} {x} {y}",{cpx:e,cpy:t,x:n,y:r}))};var c=function(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]};n.prototype.arcTo=function(e,t,n,r,a){var o=this.__currentPosition&&this.__currentPosition.x,i=this.__currentPosition&&this.__currentPosition.y;if(void 0!==o&&void 0!==i){if(a<0)throw new Error("IndexSizeError: The radius provided ("+a+") is negative.");if(o===e&&i===t||e===n&&t===r||0===a)this.lineTo(e,t);else{var s=c([o-e,i-t]),l=c([n-e,r-t]);if(s[0]*l[1]!=s[1]*l[0]){var u=s[0]*l[0]+s[1]*l[1],d=Math.acos(Math.abs(u)),h=c([s[0]+l[0],s[1]+l[1]]),p=a/Math.sin(d/2),f=e+p*h[0],m=t+p*h[1],g=[-s[1],s[0]],v=[l[1],-l[0]],y=function(e){var t=e[0];return e[1]>=0?Math.acos(t):-Math.acos(t)},b=y(g),C=y(v);this.lineTo(f+g[0]*a,m+g[1]*a),this.arc(f,m,a,b,C)}else this.lineTo(e,t)}}},n.prototype.stroke=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},n.prototype.fill=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},n.prototype.rect=function(e,t,n,r){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(e,t),this.lineTo(e+n,t),this.lineTo(e+n,t+r),this.lineTo(e,t+r),this.lineTo(e,t),this.closePath()},n.prototype.fillRect=function(e,t,n,r){var a;a=this.__createElement("rect",{x:e,y:t,width:n,height:r},!0),this.__closestGroupOrSvg().appendChild(a),this.__currentElement=a,this.__applyStyleToCurrentElement("fill")},n.prototype.strokeRect=function(e,t,n,r){var a;a=this.__createElement("rect",{x:e,y:t,width:n,height:r},!0),this.__closestGroupOrSvg().appendChild(a),this.__currentElement=a,this.__applyStyleToCurrentElement("stroke")},n.prototype.clearRect=function(e,t,n,r){var a,o=this.__closestGroupOrSvg();a=this.__createElement("rect",{x:e,y:t,width:n,height:r,fill:"#FFFFFF"},!0),o.appendChild(a)},n.prototype.createLinearGradient=function(e,t,n,a){var o=this.__createElement("linearGradient",{id:s(this.__ids),x1:e+"px",x2:n+"px",y1:t+"px",y2:a+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(o),new r(o,this)},n.prototype.createRadialGradient=function(e,t,n,a,o,i){var l=this.__createElement("radialGradient",{id:s(this.__ids),cx:a+"px",cy:o+"px",r:i+"px",fx:e+"px",fy:t+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(l),new r(l,this)},n.prototype.__parseFont=function(){var e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\"\sa-z]+?)\s*$/i.exec(this.font),t={style:e[1]||"normal",size:e[4]||"10px",family:e[6]||"sans-serif",weight:e[3]||"normal",decoration:e[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(t.decoration="underline"),this.__fontHref&&(t.href=this.__fontHref),t},n.prototype.__wrapTextLink=function(e,t){if(e.href){var n=this.__createElement("a");return n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.href),n.appendChild(t),n}return t},n.prototype.__applyText=function(e,t,n,r){var a,o,i=this.__parseFont(),s=this.__closestGroupOrSvg(),c=this.__createElement("text",{"font-family":i.family,"font-size":i.size,"font-style":i.style,"font-weight":i.weight,"text-decoration":i.decoration,x:t,y:n,"text-anchor":(a=this.textAlign,o={left:"start",right:"end",center:"middle",start:"start",end:"end"},o[a]||o.start),"dominant-baseline":l(this.textBaseline)},!0);c.appendChild(this.__document.createTextNode(e)),this.__currentElement=c,this.__applyStyleToCurrentElement(r),s.appendChild(this.__wrapTextLink(i,c))},n.prototype.fillText=function(e,t,n){this.__applyText(e,t,n,"fill")},n.prototype.strokeText=function(e,t,n){this.__applyText(e,t,n,"stroke")},n.prototype.measureText=function(e){return this.__ctx.font=this.font,this.__ctx.measureText(e)},n.prototype.arc=function(e,t,n,r,a,o){if(r!==a){(r%=2*Math.PI)==(a%=2*Math.PI)&&(a=(a+2*Math.PI-.001*(o?-1:1))%(2*Math.PI));var s,l=e+n*Math.cos(a),c=t+n*Math.sin(a),u=e+n*Math.cos(r),d=t+n*Math.sin(r),h=o?0:1,p=a-r;p<0&&(p+=2*Math.PI),s=o?p>Math.PI?0:1:p>Math.PI?1:0,this.lineTo(u,d),this.__addPathCommand(i("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:n,ry:n,xAxisRotation:0,largeArcFlag:s,sweepFlag:h,endX:l,endY:c})),this.__currentPosition={x:l,y:c}}},n.prototype.clip=function(){var e=this.__closestGroupOrSvg(),t=this.__createElement("clipPath"),n=s(this.__ids),r=this.__createElement("g");e.removeChild(this.__currentElement),t.setAttribute("id",n),t.appendChild(this.__currentElement),this.__defs.appendChild(t),e.setAttribute("clip-path",i("url(#{id})",{id:n})),e.appendChild(r),this.__currentElement=r},n.prototype.drawImage=function(){var e,t,r,a,o,i,s,l,c,u,d,h,p,f,m=Array.prototype.slice.call(arguments),g=m[0],v=0,y=0;if(3===m.length)e=m[1],t=m[2],r=o=g.width,a=i=g.height;else if(5===m.length)e=m[1],t=m[2],r=m[3],a=m[4],o=g.width,i=g.height;else{if(9!==m.length)throw new Error("Inavlid number of arguments passed to drawImage: "+arguments.length);v=m[1],y=m[2],o=m[3],i=m[4],e=m[5],t=m[6],r=m[7],a=m[8]}if(s=this.__closestGroupOrSvg(),d=this.__currentElement,g instanceof n){for(c=(l=g.getSvg()).childNodes[0];c.childNodes.length;)f=c.childNodes[0].getAttribute("id"),this.__ids[f]=f,this.__defs.appendChild(c.childNodes[0]);u=l.childNodes[1],s.appendChild(u),this.__currentElement=u,this.translate(e,t),this.__currentElement=d}else"CANVAS"!==g.nodeName&&"IMG"!==g.nodeName||((h=this.__createElement("image")).setAttribute("width",r),h.setAttribute("height",a),h.setAttribute("preserveAspectRatio","none"),(v||y||o!==g.width||i!==g.height)&&((p=this.__document.createElement("canvas")).width=r,p.height=a,p.getContext("2d").drawImage(g,v,y,o,i,0,0,r,a),g=p),h.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===g.nodeName?g.toDataURL():g.getAttribute("src")),s.appendChild(h),this.__currentElement=h,this.translate(e,t),this.__currentElement=d)},n.prototype.createPattern=function(e,t){var r,o=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),i=s(this.__ids);return o.setAttribute("id",i),o.setAttribute("width",e.width),o.setAttribute("height",e.height),"CANVAS"===e.nodeName||"IMG"===e.nodeName?((r=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",e.width),r.setAttribute("height",e.height),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===e.nodeName?e.toDataURL():e.getAttribute("src")),o.appendChild(r),this.__defs.appendChild(o)):e instanceof n&&(o.appendChild(e.__root.childNodes[1]),this.__defs.appendChild(o)),new a(o,this)},n.prototype.drawFocusRing=function(){},n.prototype.createImageData=function(){},n.prototype.getImageData=function(){},n.prototype.putImageData=function(){},n.prototype.globalCompositeOperation=function(){},n.prototype.setTransform=function(){},"object"==typeof window&&(window.C2S=n),"object"==typeof e.exports&&(e.exports=n)}()},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r);function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=e.ctx,o=r.canvas,i=o.width,s=o.height,l=new a.a(i,s);e.ctx=l,e.render();var c=l[t].apply(l,n);return e.ctx=r,e.render(),c}t.default=function(e){e.exportSVG=function(){return o(e,"getSvg")},e.exportSerialisedSVG=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o(e,"getSerializedSvg",[t])}}}])},510:function(e,t,n){"use strict";var r=n(3),a=n.n(r),o=n(102),i=n.n(o),s=n(50);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={ids:null,lasso:!1,maxBlockLength:160,maxFontSize:64,maxNodeSize:64,minBlockLength:1,minFontSize:1,minNodeSize:1,path:null,subtreeIds:null,phylocanvas:c({},i.a.defaults,{fontSize:s.a.FONT_SIZE,fontFamily:s.a.FONT,metadata:{blockLength:14,headerFontWeight:"500",showLabels:!1,showHeaders:!1},nodeSize:s.a.NODE_SIZE,padding:32,renderInternalLabels:!1,renderLeafBorders:!0,renderLeafLabels:!1,styleInternalNodes:!1,styleLeafNodes:!0,styleNodeLines:!1,type:"rc"})};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:u,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LIBMR PHYLOCANVAS STATE":var n=e.ids,r=e.subtreeIds;return t.payload.rootId&&t.payload.rootId!==e.phylocanvas.rootId?(r=t.payload.ids,n=null):Array.isArray(t.payload.ids)&&(n=t.payload.ids),null===t.payload.rootId&&e.phylocanvas.rootId&&(n=null,r=null),c({},e,{ids:n,subtreeIds:r,phylocanvas:c({},e.phylocanvas,{},t.payload,{metadata:c({},e.phylocanvas.metadata,{},t.payload.metadata||{})})});case"LIBMR TREE FILTER":return c({},e,{ids:t.payload.ids||null,path:t.payload&&void 0!==t.payload.path?t.payload.path:e.path});case"LIBMR TREE LASSO":return c({},e,{lasso:t.payload.lasso,ids:!1===t.payload.lasso?null:e.ids,path:!1===t.payload.lasso?null:e.path});default:return e}}},513:function(e,t,n){"use strict";var r=n(50);t.a=function(e,t,n,a,o){e.strokeStyle=o;var i=e.lineWidth;e.lineWidth=r.a.HALO_WIDTH,e.beginPath(),e.arc(t,n,a+r.a.NODE_RADIUS+Math.floor(a/r.a.NODE_RADIUS/2),0,2*Math.PI,!1),e.closePath(),e.stroke(),e.lineWidth=i}},536:function(e,t,n){"use strict";n.d(t,"a",(function(){return D}));var r=n(17),a=n.n(r),o=n(24),i=n.n(o),s=n(26),l=n.n(s),c=n(22),u=n.n(c),d=n(23),h=n.n(d),p=n(27),f=n.n(p),m=n(0),g=n.n(m),v=n(19),y=n.n(v),b=n(1),C=n.n(b),x=n(333),S=n.n(x),w=n(496),L=n.n(w),k=n(377),N=n.n(k),E=n(378),O=n.n(E),P=n(497),I=n.n(P),_=n(379),T=n.n(_),M=n(37),j=n.n(M);function A(e){return!I()(e)&&!e}function z(e){return!A(e)}function R(e){return A(e.lng)||A(e.lat)}var D=function(e){function t(e,n){var r;return i()(this,t),(r=u()(this,h()(t).call(this,e,n))).map=void 0!==e.map?e.map:n.map,r.markers={},r}return f()(t,e),l()(t,[{key:"createLeafletElement",value:function(){return null}},{key:"componentWillReceiveProps",value:function(){}},{key:"componentDidMount",value:function(){this.leafletElement=y.a.findDOMNode(this.container),this.map.getPanes().overlayPane.appendChild(this.leafletElement),this.props.fitBoundsOnLoad&&this.fitBounds(),this.attachEvents(),this.updatePosition()}},{key:"componentWillUnmount",value:function(){var e=this.map.getPanes();"overlayPane"in e&&e.overlayPane.removeChild(this.leafletElement)}},{key:"fitBounds",value:function(){var e=this.props.markers,t=T()(S()(e,this.props.longitudeExtractor),z),n=T()(S()(e,this.props.latitudeExtractor),z),r={lng:O()(t),lat:O()(n)},a={lng:N()(t),lat:N()(n)};R(r)||R(a)||this.map.fitBounds(j.a.latLngBounds(j.a.latLng(a),j.a.latLng(r)))}},{key:"markersOrPositionExtractorsChanged",value:function(e){return this.props.markers!==e.markers||this.props.longitudeExtractor!==e.longitudeExtractor||this.props.latitudeExtractor!==e.latitudeExtractor}},{key:"componentDidUpdate",value:function(e){this.map.invalidateSize(),this.props.fitBoundsOnUpdate&&this.markersOrPositionExtractorsChanged(e)&&this.fitBounds(),this.updatePosition()}},{key:"attachEvents",value:function(){this.map.on("zoomend",this.updatePosition.bind(this)),this.map.on("viewreset",this.updatePosition.bind(this))}},{key:"getLocationForMarker",value:function(e){return{lat:this.props.latitudeExtractor(e),lng:this.props.longitudeExtractor(e)}}},{key:"updatePosition",value:function(){var e=this;L()(this.props.markers,(function(t,n){var r=e.getLocationForMarker(t);if(!R(r)){var a=e.markers[e.getMarkerRefName(n)];if(!a||!a.ref)throw new Error("Missing reference: Please add a reference to your Marker element, by adding 'ref={(c) => this.ref = c}' to your marker's root tag");var o=y.a.findDOMNode(a.ref);if(o){var i=e.map.latLngToLayerPoint(j.a.latLng(r));j.a.DomUtil.setPosition(o,i)}}}))}},{key:"render",value:function(){var e=this;return g.a.createElement("div",{ref:function(t){e.container=t},className:"leaflet-objects-pane leaflet-marker-pane leaflet-zoom-hide react-leaflet-marker-layer"},this.renderMarkers())}},{key:"renderMarkers",value:function(){var e=this,t={position:"absolute"},n=this.props.markerComponent;return S()(this.props.markers,(function(r,o){return R(e.getLocationForMarker(r))?null:g.a.createElement(n,a()({},e.props.propsForMarkers,{key:o,style:t,map:e.map,ref:function(t){e.markers[e.getMarkerRefName(o)]=t},marker:r}))}))}},{key:"getMarkerRefName",value:function(e){return"marker-".concat(e)}}]),t}(n(203).a);D.prototype.createLeafletElement=function(){},D.propTypes={markers:C.a.array,longitudeExtractor:C.a.func.isRequired,latitudeExtractor:C.a.func.isRequired,markerComponent:C.a.func.isRequired,propsForMarkers:C.a.object,fitBoundsOnLoad:C.a.bool,fitBoundsOnUpdate:C.a.bool}},628:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n(24),a=n.n(r),o=n(26),i=n.n(o),s=n(22),l=n.n(s),c=n(23),u=n.n(c),d=n(27),h=n.n(d),p=n(0),f=n.n(p),m=(f.a.PropTypes,2*Math.PI);var g=function(e){function t(){return a()(this,t),l()(this,u()(t).apply(this,arguments))}return h()(t,e),i()(t,[{key:"render",value:function(){var e,t,n,r,a,o,i,s=this.props,l=s.borderWidth,c=void 0===l?7.5:l,u=s.borderColour,d=void 0===u?"#555":u,h=s.donutFill,p=void 0===h?"#fff":h;return f.a.createElement("svg",{viewBox:"0 0 ".concat(100," ").concat(100),className:this.props.className},f.a.createElement("g",{transform:"rotate(-90 ".concat(50," ").concat(50,")")},(e=this.props,t=e.slices,n=e.onSliceClick,r=t.reduce((function(e,t){return e+t.value}),0),a=0,o=49,i=0,t.map((function(e,t){var s=e.colour,l=e.value;if(l===r)return f.a.createElement("circle",{r:49,cx:50,cy:50,fill:s,key:t,"data-count":l,onClick:function(t){return n&&n(e,t)}});if(0===l)return null;var c=l/r,u=c<=.5?0:1;a+=c*m;var d=49*Math.cos(a),h=49*Math.sin(a),p=["M ".concat(50,",").concat(50),"l ".concat(o,",").concat(-i),"a".concat(49,",").concat(49),"0","".concat(u,",0"),"".concat(d-o,",").concat(-(h-i)),"z"].join(" ");return o=d,i=h,f.a.createElement("path",{d:p,fill:s,key:t,"data-count":l,onClick:function(t){n&&n(e,t)}})})))),c>0&&f.a.createElement("circle",{cx:50,cy:50,r:50-c/2,fill:"none",strokeWidth:c,stroke:d}),this.props.donut&&f.a.createElement("circle",{cx:50,cy:50,r:(50-c)/2,fill:p,strokeWidth:c,stroke:d}),"}",f.a.createElement("text",{x:"50",y:"50"}))}}]),t}(f.a.Component);g.propTypes={className:f.a.PropTypes.string,borderWidth:f.a.PropTypes.number,borderColour:f.a.PropTypes.string,donut:f.a.PropTypes.bool,slices:f.a.PropTypes.arrayOf(f.a.PropTypes.shape({colour:f.a.PropTypes.string.isRequired,value:f.a.PropTypes.number.isRequired})).isRequired,onSliceClick:f.a.PropTypes.func}},663:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(16),a=n.n(r),o=n(3),i=n.n(o),s=n(149);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e(void 0,{});return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{snapshots:[],current:t},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(r.type){case s.b:return c({},n,{snapshots:[n.current].concat(a()(n.snapshots))});case s.c:return c({},n,{current:n.snapshots[r.payload.index]});case s.a:return c({},n,{current:n.snapshots[n.snapshots.length-1]});default:return c({},n,{current:e(n.current,r)})}}}var d={entries:[],current:null};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case s.b:return c({},e,{entries:[t.payload.image].concat(a()(e.entries)),current:0});case s.c:return c({},e,{current:t.payload.index});case s.a:return c({},e,{current:e.entries.length-1});default:return e}}},677:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(82),i=function(e){return a.a.createElement(o.a,{active:e.active,title:e.title||(e.active?"Disable lasso filter":"Activate lasso filter"),onClick:e.onClick},a.a.createElement("svg",{width:"22",height:"22",viewBox:"0 0 22 22",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.a.createElement("g",{opacity:"0.375"},a.a.createElement("path",{d:"M3.67997 3.667L3.80397 2.67472L2.32031 2.48932L2.71554 3.93133L3.67997 3.667ZM7.69982 18.3337L6.73539 18.598L6.9941 19.5419L7.94335 19.3036L7.69982 18.3337ZM18.3202 15.667L18.5637 16.6369L19.1078 16.5003L19.2748 15.9647L18.3202 15.667ZM14.474 4.00805L3.80397 2.67472L3.55598 4.65928L14.226 5.99262L14.474 4.00805ZM2.71554 3.93133L6.73539 18.598L8.66425 18.0693L4.6444 3.40267L2.71554 3.93133ZM7.94335 19.3036L18.5637 16.6369L18.0767 14.6971L7.45629 17.3638L7.94335 19.3036ZM19.2748 15.9647L21.9547 7.37215L20.0454 6.77667L17.3656 15.3693L19.2748 15.9647Z",fill:"black"})),a.a.createElement("path",{d:"M3.6799 6.33333C5.15997 6.33333 6.3598 5.13943 6.3598 3.66667C6.3598 2.19391 5.15997 1 3.6799 1C2.19983 1 1 2.19391 1 3.66667C1 5.13943 2.19983 6.33333 3.6799 6.33333Z",fill:"black"}),a.a.createElement("path",{d:"M14.3499 7.66634C15.83 7.66634 17.0298 6.47244 17.0298 4.99968C17.0298 3.52692 15.83 2.33301 14.3499 2.33301C12.8698 2.33301 11.67 3.52692 11.67 4.99968C11.67 6.47244 12.8698 7.66634 14.3499 7.66634Z",fill:"black"}),a.a.createElement("path",{d:"M7.69992 21.0003C9.17999 21.0003 10.3798 19.8064 10.3798 18.3337C10.3798 16.8609 9.17999 15.667 7.69992 15.667C6.21985 15.667 5.02002 16.8609 5.02002 18.3337C5.02002 19.8064 6.21985 21.0003 7.69992 21.0003Z",fill:"black"}),a.a.createElement("path",{d:"M18.3199 18.3333C19.8 18.3333 20.9998 17.1394 20.9998 15.6667C20.9998 14.1939 19.8 13 18.3199 13C16.8398 13 15.64 14.1939 15.64 15.6667C15.64 17.1394 16.8398 18.3333 18.3199 18.3333Z",fill:"black"})))};i.propTypes=o.a.propTypes;var s=i;n.d(t,"a",(function(){return s}))},679:function(e,t,n){"use strict";var r=n(134),a=function(e,t){for(var n=e.x,r=e.y,a=!1,o=0,i=t.length-1;o<t.length;i=o++){var s=t[o].x,l=t[o].y,c=t[i].x,u=t[i].y;l>r!=u>r&&n<(c-s)*(r-l)/(u-l)+s&&(a=!a)}return a};function o(e,t,n){var o=Object.assign({clearBeforeDraw:!1,dotsStyle:"#383838",isActive:!1,lineWidth:2,path:null,pointFillStyle:"#ffffff",pointSize:14,pointStrokeStyle:"#000000",strokeStyle:r.b.primaryColour,draw:function(){var e=t.getContext("2d");o.clearBeforeDraw&&e.clearRect(0,0,t.width,t.height);var n=o.internalPath||o.path;if(o.isActive&&Array.isArray(n)&&n.length>0){e.strokeStyle=o.strokeStyle,e.lineWidth=1*o.lineWidth,e.beginPath();var r=o.translateToCanvas(n);!function(e,t){e.moveTo(t[0].x,t[0].y);for(var n=1;n<t.length;n++)e.lineTo(t[n].x,t[n].y);e.stroke()}(e,r),e.lineWidth=1,e.fillStyle=o.pointFillStyle,e.strokeStyle=o.pointStrokeStyle,function(e,t,n,r){for(var a=0;a<t.length-(r?1:0);a++)e.fillRect(t[a].x-n,t[a].y-n,2*n,2*n),e.strokeRect(t[a].x-n+e.lineWidth,t[a].y-n+e.lineWidth,2*n-e.lineWidth,2*n-e.lineWidth)}(e,r,1*o.pointSize/2,!!o.path),e.closePath()}},destroy:function(){e.removeEventListener("mousedown",l),e.removeEventListener("mouseup",c)},isPointInside:function(e,t){return a(e,t||o.path)},onPathChange:function(e){o.setPath(e),o.draw()},onRedrawRequested:function(){o.draw(),o.updateCanvas()},setActive:function(e){o.isActive=e,o.updateCanvas()},setPath:function(e){o.path=e,o.internalPath=null,o.updateCanvas()},translateToCanvas:function(e){return e},translateFromCanvas:function(e,t){return{x:e,y:t}},updateCanvas:function(){o.isActive?Array.isArray(o.path)?(e.style.cursor=null,e.title="Click outside the path to clear"):(e.style.cursor="crosshair",e.title="Click to draw points"):(e.style.cursor=null,e.title="",o.internalPath&&(o.internalPath=null))}},n),i=null,s=null,l=function(e){i=e.offsetX,s=e.offsetY},c=function(e){Math.abs(i-e.offsetX)<5&&Math.abs(s-e.offsetY)<5&&function(e){if(o.isActive){var t=o.translateFromCanvas(e.offsetX,e.offsetY);if(Array.isArray(o.path))a(t,o.path)||o.onPathChange(null);else{if(o.internalPath||(o.internalPath=[]),o.internalPath.length>0){var n=o.pointSize,r=o.translateFromCanvas(e.offsetX-n,e.offsetY-n),i=o.translateFromCanvas(e.offsetX+n,e.offsetY+n);if(i.x>=o.internalPath[0].x&&r.x<=o.internalPath[0].x&&i.y>=o.internalPath[0].y&&r.y<=o.internalPath[0].y){var s=o.internalPath;return s.push(s[0]),o.internalPath=null,void o.onPathChange(s)}}o.internalPath.push(t),o.onRedrawRequested&&o.onRedrawRequested()}}}(e),i=null,s=null};return e.addEventListener("mousedown",l,!1),e.addEventListener("mouseup",c,!1),o.updateCanvas(),o}n.d(t,"a",(function(){return o}))},681:function(e,t,n){"use strict";n(1001);var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(4),l=n.n(s),c=function(e){var t=e.children,n=e.className,r=e.onZoomIn,o=e.onZoomOut;return a.a.createElement("div",{className:l()("libmr-ZoomControls",n),draggable:"false"},a.a.createElement("div",{className:"libmr-ZoomControls-button",title:"Zoom in",onClick:r},a.a.createElement("i",{className:"libmr-ZoomControls-icon material-icons"},"zoom_in")),a.a.createElement("div",{className:"libmr-ZoomControls-divider"}),t?a.a.createElement(a.a.Fragment,null,t,a.a.createElement("div",{className:"libmr-ZoomControls-divider"})):null,a.a.createElement("div",{className:"libmr-ZoomControls-button",title:"Zoom out",onClick:o},a.a.createElement("i",{className:"libmr-ZoomControls-icon material-icons"},"zoom_out")))};c.propTypes={className:i.a.string,children:i.a.node,onZoomIn:i.a.func.isRequired,onZoomOut:i.a.func.isRequired};var u=c;n.d(t,"a",(function(){return u}))},682:function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return o}));var r=function(e){return{type:"LIBMR PHYLOCANVAS STATE",payload:e}},a=function(e){return{type:"LIBMR TREE LASSO",payload:{lasso:e}}},o=function(e,t){return{type:"LIBMR TREE FILTER",payload:{ids:e,path:t}}}},684:function(e,t,n){"use strict";var r=n(28),a=n.n(r),o=n(16),i=n.n(o);function s(e){for(var t=[],n=[e];n.length;){var r=n.shift();t.push(r),Array.isArray(r.children)&&n.unshift.apply(n,i()(r.children))}return t}function l(e){for(var t=[],n=[e];n.length;){var r=n.pop();Array.isArray(r.children)&&n.push.apply(n,i()(r.children)),t.push(r)}return t.reverse()}var c=n(1007);t.a=function(e){var t=e;"string"==typeof e&&(t={type:"newick",data:e});var n=t,r=n.type,o=n.data,i=a()(n,["type","data"]),u=null;if("newick"===r||void 0===r)u=c.parse_newick(o);else{if("biojs"!==r)throw new Error("Source type is not supported: ".concat(r));u=o}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.trimQuotes,r=void 0===n||n,a=l(e),o=s(e),i=a.every((function(e){return 0===(e.branchLength||e.branch_length||0)}));if(i){e.branchLength=0;for(var c=0;c<o.length;c++){var u=o[c];if(u.children){var d=!0,h=!1,p=void 0;try{for(var f,m=u.children[Symbol.iterator]();!(d=(f=m.next()).done);d=!0){var g=f.value;g.branchLength=u.branchLength+1}}catch(e){h=!0,p=e}finally{try{d||null==m.return||m.return()}finally{if(h)throw p}}}}}for(var v=0;v<a.length;v++){var y=a[v];if(y.postIndex=v,y.isLeaf=!Array.isArray(y.children),y.branchLength=Math.abs(y.branchLength||y.branch_length||0),delete y.branch_length,y.isLeaf&&"string"==typeof y.name&&(y.id=r?y.name.trim().replace(/^['"]|['"]$/g,""):y.name,delete y.name),y.totalNodes=1,y.totalLeaves=1,y.totalLeafLength=y.branchLength,!y.isLeaf){y.totalNodes=1,y.totalLeaves=0;var b=0,C=!0,x=!1,S=void 0;try{for(var w,L=y.children[Symbol.iterator]();!(C=(w=L.next()).done);C=!0){var k=w.value;y.totalNodes+=k.totalNodes,y.totalLeaves+=k.totalLeaves,k.totalLeafLength>b&&(b=k.totalLeafLength),k.parent=y}}catch(e){x=!0,S=e}finally{try{C||null==L.return||L.return()}finally{if(x)throw S}}y.totalLeafLength=y.branchLength+b,y.longestLeaf=b}}for(var N={},E=[],O=0;O<o.length;O++){var P=o[O];P.preIndex=O,P.id||(P.id=O.toString()),N[P.id]=P,P.distanceFromRoot=(P.parent?P.parent.distanceFromRoot:0)+P.branchLength,P.isLeaf&&E.push(P),P.visibleLeaves=P.totalLeaves}return{nodeById:N,rootNode:e,leafNodes:E,postorderTraversal:a,preorderTraversal:o}}(u,i)}},685:function(e,t,n){"use strict";n(1029);var r=n(17),a=n.n(r),o=n(28),i=n.n(o),s=n(3),l=n.n(s),c=n(24),u=n.n(c),d=n(26),h=n.n(d),p=n(22),f=n.n(p),m=n(23),g=n.n(m),v=n(27),y=n.n(v),b=n(209),C=n.n(b),x=n(0),S=n.n(x),w=n(1),L=n.n(w),k=n(99);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var E=function(e){function t(){var e,n,r;u()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return f()(r,(n=r=f()(this,(e=g()(t)).call.apply(e,[this].concat(o))),r.state={height:0,width:0},n))}return y()(t,e),h()(t,[{key:"renderComponent",value:function(e,t){var n=this.state,r=n.width,a=n.height;return a&&r?S.a.createElement(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){l()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({width:r,height:a},t)):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.component,o=void 0===r?n:r,s=t.minWidth,l=t.minHeight,c=i()(t,["children","component","minWidth","minHeight"]);return S.a.createElement(k.a,a()({},c,{onResize:C()((function(t){var n=t.width,r=t.height;return e.setState({width:Math.max(s,n),height:Math.max(l,r)})}),64)}),(function(){return e.renderComponent(o,c)}))}}]),t}(S.a.Component);E.displayName="AutoSizer",E.propTypes={children:L.a.elementType,component:L.a.elementType,minHeight:L.a.number,minWidth:L.a.number},E.defaultProps={minHeight:160,minWidth:240},n.d(t,"a",(function(){return E}))},686:function(e,t,n){"use strict";var r=n(9),a=n.n(r),o=n(0),i=n.n(o),s=n(4),l=n.n(s),c=function(e){var t=e.colour,n=void 0===t?"black":t;return i.a.createElement("svg",{viewBox:"0 0 ".concat(100," ").concat(100),style:{width:"200%",transform:"translate(-25%, -25%)"}},i.a.createElement("circle",{cx:"50",cy:"50",r:42,fill:"none",stroke:n,strokeWidth:8}))},u=n(628);n.d(t,"b",(function(){return d}));function d(e){return e.ownerSVGElement&&e.ownerSVGElement.parentNode&&e.ownerSVGElement.parentNode.classList.contains("leaflet-marker-icon")}t.a=i.a.createClass({displayName:"LeafletPieChartMarker",shouldComponentUpdate:function(e){var t=this.props.marker;if(t.id.length!==e.marker.id.length)return!0;var n=!0,r=!1,o=void 0;try{for(var i,s=t.id[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var l=i.value;if(-1===e.marker.id.indexOf(l))return!0}}catch(e){r=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw o}}if(t.highlighted!==e.marker.highlighted)return!0;if(t.slices.size!==e.marker.slices.size)return!0;for(var c=t.slices.entries(),u=e.marker.slices.entries(),d=0;d<t.slices.size;d++){var h=a()(c.next().value,2),p=h[0],f=h[1],m=a()(u.next().value,2),g=m[0],v=m[1];if(p!==g||f!==v)return!0}return!1},render:function(){var e=this,t=this.props,n=t.marker,r=t.style,o=t.onClick,s=t.highlightedColour,d=Array.from(n.slices.entries()).map((function(e){var t=a()(e,2);return{colour:t[0],value:t[1]}}));return i.a.createElement("div",{ref:function(t){e.ref=t},style:r,className:l()("leaflet-marker-icon",{highlighted:n.highlighted}),onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),o({event:e,marker:n})}},n.highlighted&&i.a.createElement(c,{colour:s}),i.a.createElement(u.a,{slices:d,borderColour:this.props.borderColour,borderWidth:this.props.botderWidth}))}})},687:function(e,t){e.exports=[{id:"485",speciesId:"485",genusId:"482",nickname:"ngonorrhoeae"},{id:"666",speciesId:"666",genusId:"662",nickname:"vibcl"},{id:"1280",speciesId:"1280",genusId:"1279",nickname:"saureus"},{id:"1313",speciesId:"1313",genusId:"1301",nickname:"strpn"},{id:"1336",speciesId:"1336",genusId:"1301",nickname:"sequi"},{id:"1646",speciesId:"1646",genusId:"1645",nickname:"rensm"},{id:"573",speciesId:"573",genusId:"570",nickname:"klepn"},{id:"498019",speciesId:"498019",genusId:"36910",nickname:"canar"},{id:"64320",speciesId:"64320",genusId:"11051",nickname:"zikv",simple:!0},{id:"90370",speciesId:"28901",genusId:"590",nickname:"styphi"}]},703:function(e,t,n){"use strict";var r='14px "Roboto", "Helvetica", "Arial", sans-serif';t.a=function(e){e.pluginService.register({beforeDatasetsDraw:function(e){var t=e.scales["y-axis-0"],n=e.scales["x-axis-0"],a=e.chart.ctx;if(e.options.horizontalLine)for(var o=0;o<e.options.horizontalLine.length;o++){a.save();var i=e.options.horizontalLine[o],s=i.y?t.getPixelForValue(i.y):0;s&&(a.beginPath(),a.moveTo(n.getPixelForValue(n.min),s),a.lineTo(n.getPixelForValue(n.max),s),a.lineWidth=i.lineWidth||2,a.strokeStyle=i.style||"rgba(0,0,0,.54)",i.dash&&a.setLineDash([8,8]),a.stroke()),i.text&&(a.fillStyle=i.textStyle||i.style||"rgba(0,0,0,.54)",a.textBaseline="top",a.textAlign="right",a.font=i.font||r,a.fillText(i.text,n.getPixelForValue(n.max),s+4)),a.restore()}}}),e.pluginService.register({beforeDatasetsDraw:function(e){var t=e.scales["x-axis-0"],n=e.scales["y-axis-0"],a=e.chart.ctx;if(e.options.verticalLine)for(var o=0;o<e.options.verticalLine.length;o++){a.save();var i=e.options.verticalLine[o],s=i.x?t.getPixelForValue(i.x):0;s&&(a.beginPath(),a.moveTo(s,n.getPixelForValue(n.min)),a.lineTo(s,n.getPixelForValue(n.max)),a.lineWidth=i.lineWidth||2,a.strokeStyle=i.style||"rgba(0,0,0,.54)",i.dash&&a.setLineDash([8,8]),a.stroke()),i.text&&(a.fillStyle=i.textStyle||i.style||"rgba(0,0,0,.54)",a.font=i.font||r,a.textBaseline="top",a.fillText(i.text,s+8,n.getPixelForValue(n.max))),a.restore()}}})}},704:function(e,t){e.exports=function(e){const{name:t="",year:n=null,month:r=null,day:a=null,latitude:o=null,longitude:i=null,pmid:s="",userDefined:l={}}=e;let c;if(t&&"string"!=typeof t)c="name is wrong type";else if(t&&t.length>256)c="name is too long";else if(s&&"string"!=typeof s)c="pmid is wrong type";else if(s&&s.length>16)c="pmid is too long";else if(null===o||!isNaN(o)&&"object"!=typeof o)if(null===i||!isNaN(i)&&"object"!=typeof i)if(null!==o&&null===i)c="latitude without longitude";else if(null===o&&null!==i)c="longitude without latitude";else if(null===n||!isNaN(n)&&"object"!=typeof n)if(null===r||!isNaN(r)&&"object"!=typeof r)if(null===a||!isNaN(a)&&"object"!=typeof a)if(null!==a&&null===r)c="day provided without month";else if(null!==a&&null===n)c="day provided without year";else if(null!==r&&null===n)c="month provided without year";else if(Object.keys(l).length>64)c="more than 64 user-defined columns";else for(const[e,t]of Object.entries(l)){if("object"==typeof t){c="user-defined value is wrong type";break}if(t.length>256){c="user-defined value is too long";break}if(e.length>256){c="user-defined column heading is too long";break}}else c="day is not a number";else c="month is not a number";else c="year is not a number";else c="longitude is not a number";else c="latitude is not a number";if(c)throw new Error(`Invalid metadata: ${c}`)}},705:function(e,t,n){"use strict";var r=n(16),a=n.n(r);function o(e,t,n){var r=[],o=!0,i=!1,s=void 0;try{for(var l,c=n.children[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value,d=e.splice(t,u.totalNodes);r.push(d)}}catch(e){i=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw s}}for(var h=0,p=r;h<p.length;h++){var f=p[h];e.splice.apply(e,[t,0].concat(a()(f)))}}t.a=function(e,t,n){var r=t.preorderTraversal,a=t.postorderTraversal;o(r,r.indexOf(n)+1,n);for(var i=0;i<r.length;i++)r[i].preIndex=i;o(a,a.indexOf(n)-n.totalNodes+1,n);for(var s=0;s<a.length;s++)a[s].postIndex=s;n.children.reverse()}},706:function(e,t,n){"use strict";var r=n(3),a=n.n(r),o=n(0),i=n.n(o),s=n(4),l=n.n(s);t.a=i.a.createClass({displayName:"LeafletMarkerControls",propTypes:{className:i.a.PropTypes.string,activeClassName:i.a.PropTypes.string,markerSize:i.a.PropTypes.number,onMarkerSizeChange:i.a.PropTypes.func,onViewByCountryChange:i.a.PropTypes.func},getDefaultProps:function(){return{activeClassName:"is-active"}},getInitialState:function(){return{isActive:!1}},componentDidUpdate:function(){if(this.state.isActive){var e=this.refs,t=e.slider,n=e.countrySwitch;componentHandler.upgradeElements([t,n])}},render:function(){var e=this,t=this.props,n=t.className,r=t.activeClassName,o=t.markerSize,s=t.onMarkerSizeChange,c=t.onViewByCountryChange,u=this.state.isActive;return i.a.createElement("div",{onClick:function(e){return e.stopPropagation()}},i.a.createElement("button",{key:"button",className:l()("leaflet-marker-controls-button",n,a()({},r,u)),title:u?"Hide map controls":"Show map controls",onClick:function(){return e.setState({isActive:!u})}},i.a.createElement("i",{className:"material-icons"},"tune")),i.a.createElement("div",{className:l()("wgsa-pane-controls wgsa-pane-controls--top",{"wgsa-pane-controls--visible":u})},i.a.createElement("div",{className:"wgsa-pane-controls__row wgsa-pane-overlay"},i.a.createElement("div",{className:"wgsa-pane-slider"},i.a.createElement("label",null,"Marker Size",i.a.createElement("input",{ref:"slider",type:"range",onChange:function(e){return s(parseInt(e.target.value,10))},min:"1",max:"10",step:"1",value:o,className:"mdl-slider mdl-js-slider",tabIndex:"0"}))),i.a.createElement("label",{ref:"countrySwitch",className:"mdl-icon-toggle mdl-js-icon-toggle mdl-js-ripple-effect",htmlFor:"group-markers-switch",title:"View by Country"},i.a.createElement("input",{type:"checkbox",id:"group-markers-switch",className:"mdl-icon-toggle__input",onChange:function(e){return c(e.target.checked)}}),i.a.createElement("i",{className:"mdl-icon-toggle__label material-icons"},"flag")))))}})},707:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(4),i=n.n(o);t.a=function(e){var t=e.active,n=e.text,r=e.contact,o=e.contactStyle,s=e.className,l=e.onClick;return a.a.createElement("button",{title:name,className:i()(s,"mdl-chip mdl-chip--contact",{"mdl-chip--active":t}),onClick:function(e){return l(e)}},r&&a.a.createElement("span",{className:"mdl-chip__contact",style:o},r),a.a.createElement("span",{className:"mdl-chip__text"},n))}},708:function(e,t,n){"use strict";var r=n(3),a=n.n(r),o=n(150);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={bounds:null,nodeSize:14,speed:"1",unit:"day",viewport:null};t.a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case o.a:return s({},e,{bounds:t.payload});case o.b:return s({},e,{nodeSize:t.payload});case o.c:return s({},e,{speed:t.payload});case o.d:return s({},e,{unit:t.payload,bounds:l.bounds});case o.e:return s({},e,{viewport:t.payload});default:return e}}},816:function(e,t,n){"use strict";t.a={primaryColour:"#673c90"}},82:function(e,t,n){"use strict";n(999);var r=n(3),a=n.n(r),o=n(17),i=n.n(o),s=n(28),l=n.n(s),c=n(0),u=n.n(c),d=n(4),h=n.n(d),p=n(1),f=n.n(p),m=n(107);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var v=function(e){var t=e.className,n=e.active,r=l()(e,["className","active"]);return u.a.createElement(m.a,i()({},r,{className:h()("libmr-ControlsButton",{active:n},t)}))};v.propTypes=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},m.a.props,{active:f.a.bool});var y=v;n.d(t,"a",(function(){return y}))},856:function(e,t,n){"use strict";n(1058),n(1060),n(1062);var r=n(3),a=n.n(r),o=n(24),i=n.n(o),s=n(26),l=n.n(s),c=n(22),u=n.n(c),d=n(23),h=n.n(d),p=n(27),f=n.n(p),m=n(0),g=n.n(m),v=n(1),y=n.n(v),b=n(102),C=n.n(b),x=n(504),S=n.n(x),w=n(505),L=n.n(w),k=n(506),N=n.n(k),E=n(507),O=n.n(E),P=n(508),I=n.n(P),_=n(254),T=n(82);function M(){return(M=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var j=g.a.createElement("path",{d:"M3 15.813V6v9.813zM14 19v-6 6zM9 9V3v6zM9 3h8-8zM9 9h8-8zM3 6h5-5zM3 15.813h11H3zM14 13h6-6zM14 19h6-6z"}),A=g.a.createElement("path",{d:"M3 15.813v1H2v-1h1zM3 6H2V5h1v1zm11 13v1h-1v-1h1zm0-6h-1v-1h1v1zM9 9v1H8V9h1zm0-6H8V2h1v1zM2 15.813V6h2v9.813H2zM13 19v-6h2v6h-2zM8 9V3h2v6H8zm1-7h8v2H9V2zm0 6h8v2H9V8zM3 5h5v2H3V5zm0 9.813h11v2H3v-2zM14 12h6v2h-6v-2zm0 6h6v2h-6v-2z",fill:"#FFF"}),z=function(e){return g.a.createElement("svg",M({width:"1em",height:"1em",viewBox:"0 0 22 22"},e),j,A)};function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var D=g.a.createElement("path",{d:"M14.53 7.462l-.707-.707-.707.707.707.707.707-.707zm-8.485 2.829l.98.196.203-1.014-1.02-.169-.163.987zm-4.95-.707L.1 9.474l.994.11zm2.828 8.485l.707-.707-.015-.016-.017-.015-.675.738zm6.364-6.364l3.536 3.535 1.414-1.414-3.536-3.535-1.414 1.414zm4.95 3.535c1.008-1.007 1.556-2.064 1.765-3.107.207-1.036.065-1.989-.198-2.777a7.143 7.143 0 00-.963-1.867 7.13 7.13 0 00-.583-.712 2.323 2.323 0 00-.013-.014l-.005-.004-.001-.002-.001-.001-.708.706-.708.707-.001-.002h-.001l.001.001.017.018a5.142 5.142 0 01.375.465c.238.333.514.796.694 1.337.179.537.258 1.131.134 1.753-.123.614-.458 1.325-1.218 2.085l1.414 1.414zm-1.414-1.414c-.76.76-1.472 1.095-2.086 1.218-.621.125-1.215.046-1.752-.133a5.148 5.148 0 01-1.337-.694 5.157 5.157 0 01-.466-.375l-.017-.017-.002-.002v.001l.002.001-.706.708-.707.708.001.001.002.002.005.005.013.013.043.04a7.111 7.111 0 00.669.542c.44.315 1.083.702 1.867.964.789.263 1.742.405 2.778.198 1.043-.21 2.1-.758 3.107-1.766l-1.414-1.414zm1.414-5.657l3.535-3.535-1.414-1.414-3.535 3.535 1.414 1.414zm2.828-4.242a96.673 96.673 0 01-.626.78v-.001l-.002-.002v.001l.016.013.083.075c.076.07.19.182.33.336.279.307.652.778 1.007 1.41.706 1.254 1.352 3.162 1.028 5.749l1.985.248c.384-3.07-.384-5.404-1.27-6.978a9.814 9.814 0 00-1.268-1.772 7.484 7.484 0 00-.591-.585 3.164 3.164 0 00-.063-.052l-.002-.002h-.001l-.626.78zm0 0l.707-.708-.002-.002a2.277 2.277 0 00-.06-.057 11.74 11.74 0 00-.701-.606c-.47-.376-1.15-.864-1.986-1.318-1.658-.9-4.038-1.719-6.668-1.112l.45 1.949c1.967-.454 3.83.142 5.264.92a11.717 11.717 0 012.15 1.51 5.87 5.87 0 01.136.128l.005.004h-.001l.706-.708zm-9.9 9.9c-.897-.898-1.41-1.99-1.14-3.34l-1.961-.392c-.437 2.185.464 3.922 1.688 5.145l1.414-1.414zm-2.12-3.536l.163-.987h-.003l-.007-.002-.03-.004-.112-.019A142.258 142.258 0 004.29 9c-1.045-.159-2.31-.34-3.105-.412l-.18 1.991c.724.066 1.933.239 2.984.399a170.72 170.72 0 011.744.275l.11.018.029.005h.007l.001.001.165-.986zm-3.956-.597c.153-1.376.773-2.639 1.39-3.586a11.308 11.308 0 011.071-1.39 4.7 4.7 0 01.08-.083c0-.002.002-.002.002-.003l-.001.001-.708-.706-.707-.707-.002.002a2.275 2.275 0 00-.039.04 10.443 10.443 0 00-.409.457c-.258.306-.604.748-.962 1.297C1.096 6.1.302 7.667.101 9.473l1.988.221zM.1 9.474c-.325 2.92.448 5.244 1.304 6.834.427.794.876 1.406 1.222 1.825a8.644 8.644 0 00.6.655.842.842 0 01.018.016l.002.001v.001l.676-.737.676-.738v.001H4.6l.001.002-.002-.002-.017-.017a6.654 6.654 0 01-.414-.456 9.257 9.257 0 01-1.002-1.499c-.707-1.313-1.348-3.232-1.077-5.666L.1 9.474zm3.115 9.302c4.28 4.28 11.277 4.28 15.557 0l-1.415-1.414c-3.498 3.498-9.23 3.498-12.728 0l-1.414 1.414z"}),B=function(e){return g.a.createElement("svg",R({width:"1em",height:"1em",viewBox:"0 0 22 22"},e),D)};function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var q=g.a.createElement("path",{d:"M11.536 1.267l1.5 5.417 1.928-.534-1.5-5.417-1.928.534zm2.955 6.02l6.5-3.666-.982-1.742-6.5 3.667.982 1.742zm-1.369-1.35l-3 5.5 1.756.959 3-5.5-1.756-.958zm-1.826 5.024l-10-3.099-.592 1.91 10 3.1.592-1.91zm-1.174 1.434l2.5 4.584 1.756-.958-2.5-4.583-1.756.957zm2.464 3.699l-2 4.5 1.828.812 2-4.5-1.828-.812zm.622 1.362l6 1.834.584-1.913-6-1.833-.584 1.912z"}),H=function(e){return g.a.createElement("svg",F({width:"1em",height:"1em",viewBox:"0 0 22 22"},e),q)};function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var W=g.a.createElement("path",{d:"M1 11l-.447.894v-1.788L1 11zm2.25-1.125l-.447-.894.447.894zm4.5-2.25l-.447-.894.447.894zM10 6.5l.447.894L10 6.5zm4.5-2.25l-.447-.894.447.894zm2.25-1.125l-.447-.894.447.894zm-15.303 6.98l18 9-.894 1.79-18-9 .894-1.79zm-.894 0l2.25-1.124.894 1.788-2.25 1.125-.894-1.788zm2.25-1.124l4.5-2.25.894 1.788-4.5 2.25-.894-1.788zm4.5-2.25l2.25-1.125.894 1.788-2.25 1.125-.894-1.788zm2.25-1.125l4.5-2.25.894 1.788-4.5 2.25-.894-1.788zm4.5-2.25l2.25-1.125.894 1.788-2.25 1.125-.894-1.788zm2.25-1.125l2.25-1.125.894 1.788-2.25 1.125-.894-1.788z"}),Z=g.a.createElement("path",{d:"M5.553 13.106l6-3 .894 1.788-6 3-.894-1.788zm6-3l7-3.5.894 1.788-7 3.5-.894-1.788zm.894 0l7 3.5-.894 1.788-7-3.5.894-1.788z"}),Y=function(e){return g.a.createElement("svg",V({width:"1em",height:"1em",viewBox:"0 0 22 22"},e),W,Z)};function U(){return(U=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var X=g.a.createElement("path",{d:"M6.188 3H16 6.187zM3 14h6-6zM13 9h6-6zM19 9v8-8zM13 9v8-8zM16 3v5-5zM6.188 3v11V3zM9 14v6-6zM3 14v6-6z",fill:"#C4C4C4"}),G=g.a.createElement("path",{d:"M6.188 3h-1V2h1v1zM16 3V2h1v1h-1zM3 14H2v-1h1v1zm6 0v-1h1v1H9zm4-5h-1V8h1v1zm6 0V8h1v1h-1zM6.187 2H16v2H6.187V2zM3 13h6v2H3v-2zm10-5h6v2h-6V8zm7 1v8h-2V9h2zm-6 0v8h-2V9h2zm3-6v5h-2V3h2zM7.187 3v11h-2V3h2zM10 14v6H8v-6h2zm-6 0v6H2v-6h2z",fill:"#FFF"}),K={rc:z,cr:B,rd:H,dg:Y,hr:function(e){return g.a.createElement("svg",U({width:"1em",height:"1em",viewBox:"0 0 22 22"},e),X,G)}},J={rc:"Rectangular",cr:"Circular",rd:"Radial",dg:"Diagonal",hr:"Hierarchical"},Q=function(e){var t=e.treeType.toLowerCase(),n=t===e.selectedTreeType,r=K[t];return g.a.createElement(T.a,{active:n,title:J[e.treeType],onClick:function(){return e.handleClick(e.treeType.toLowerCase())}},g.a.createElement(r,null))};Q.displayName="TreeTypeButton",Q.propTypes={treeType:y.a.string.isRequired,selectedTreeType:y.a.string.isRequired,handleClick:y.a.func.isRequired};var $=Q,ee=n(677);const te={Degrees0:0,Degrees45:.25*Math.PI,Degrees90:.5*Math.PI,Degrees180:Math.PI,Degrees270:1.5*Math.PI,Degrees360:2*Math.PI},ne=[];var re={alignLabels:!1,branchScale:null,collapsedIds:ne,fillStyle:"#222",fontFamily:"serif",fontSize:16,fontWeight:"normal",haloRadius:12,haloStyle:"#3C7383",haloWidth:4,highlightedId:null,highlightedStyle:"#3C7383",internalNodeStyle:{shape:"none"},labelThreshold:8,leafNodeStyle:{shape:"circle"},lineWidth:1,nodeSize:14,nodesPowRatio:.5,padding:32,renderInternalLabels:!1,renderLabels:!0,renderLeafLabels:!0,rootId:null,rotatedIds:ne,selectableInternalNodes:!0,selectableLeafNodes:!0,selectedIds:ne,showLabels:!1,showNodes:!0,stepScale:8,strokeStyle:"#222",styleLeafLabels:!1,styleNodeLines:!1,styles:{},type:"rc",zoomFactor:3},ae=function(e){return g.a.createElement(g.a.Fragment,null,g.a.createElement(ee.a,{active:e.lasso,onClick:function(){return e.onLassoChange(!e.lasso)}}),g.a.createElement("div",{className:"libmr-Panel-control-group"},g.a.createElement($,{treeType:"hr",selectedTreeType:e.type,handleClick:e.onTypeChange}),g.a.createElement($,{treeType:"dg",selectedTreeType:e.type,handleClick:e.onTypeChange}),g.a.createElement($,{treeType:"rd",selectedTreeType:e.type,handleClick:e.onTypeChange}),g.a.createElement($,{treeType:"cr",selectedTreeType:e.type,handleClick:e.onTypeChange}),g.a.createElement($,{treeType:"rc",selectedTreeType:e.type,handleClick:e.onTypeChange})))};ae.displayName="TreeControls",ae.propTypes={lasso:y.a.bool.isRequired,type:y.a.string.isRequired,onLassoChange:y.a.func.isRequired,onTypeChange:y.a.func.isRequired},ae.defaultProps={type:re.type};var oe=ae,ie=n(152),se=n(230),le=n(229),ce=n(50),ue=function(e){return g.a.createElement(le.a,{className:"scrollable-content",title:"Nodes & labels"},g.a.createElement(se.a,{id:"tree-nodeSize",label:"Node size",onChange:e.onNodeSizeChange,min:e.minNodeSize,max:e.maxNodeSize,value:e.nodeSize,unit:"px"}),g.a.createElement(se.a,{id:"tree-fontSize",label:"Label size",onChange:e.onFontSizeChange,min:e.minFontSize,max:e.maxFontSize,value:e.fontSize,unit:"px"}),g.a.createElement("hr",null),g.a.createElement(ie.a,{className:"mr-toggle-switch",label:"Show leaf nodes",id:"tree-styleLeafNodes",isChecked:e.styleLeafNodes,onChange:function(t){return e.onStyleLeafNodesChange(t)}}),g.a.createElement(ie.a,{className:"mr-toggle-switch",label:"Show leaf borders",id:"tree-renderLeafBorders",isChecked:e.renderLeafBorders,onChange:function(t){return e.onRenderLeafBordersChange(t)}}),g.a.createElement("hr",null),g.a.createElement(ie.a,{className:"mr-toggle-switch",label:"Show leaf labels",id:"tree-renderLeafLabels",isChecked:e.renderLeafLabels,onChange:function(t){return e.onRenderLeafLabelsChange(t)}}),g.a.createElement(ie.a,{className:"mr-toggle-switch",label:"Align leaf labels",id:"tree-alignLabels",isChecked:e.alignLabels,onChange:function(t){return e.onAlignLabelsChange(t)}}),g.a.createElement(ie.a,{className:"mr-toggle-switch",label:"Colour leaf labels",id:"tree-styleLeafLabels",isChecked:e.styleLeafLabels,onChange:function(t){return e.onStyleLeafLabelsChange(t)}}),g.a.createElement("hr",null),g.a.createElement(ie.a,{className:"mr-toggle-switch",label:"Show internal nodes",id:"tree-styleInternalNodes",isChecked:e.styleInternalNodes,onChange:function(t){return e.onStyleInternalNodesChange(t)}}),g.a.createElement(ie.a,{className:"mr-toggle-switch",label:"Show internal labels",id:"tree-renderInternalLabels",isChecked:e.renderInternalLabels,onChange:function(t){return e.onRenderInternalLabelsChange(t)}}),g.a.createElement(ie.a,{className:"mr-toggle-switch",label:"Colour internal edges",id:"tree-styleNodeLines",isChecked:e.styleNodeLines,onChange:function(t){return e.onStyleNodeLinesChange(t)}}))};ue.propTypes={alignLabels:y.a.bool,fontSize:y.a.number.isRequired,maxFontSize:y.a.number.isRequired,maxNodeSize:y.a.number.isRequired,minFontSize:y.a.number.isRequired,minNodeSize:y.a.number.isRequired,nodeSize:y.a.number.isRequired,onAlignLabelsChange:y.a.func.isRequired,onFontSizeChange:y.a.func.isRequired,onNodeSizeChange:y.a.func.isRequired,onRenderInternalLabelsChange:y.a.func.isRequired,onRenderLeafBordersChange:y.a.func.isRequired,onRenderLeafLabelsChange:y.a.func.isRequired,onStyleInternalNodesChange:y.a.func.isRequired,onStyleLeafLabelsChange:y.a.func.isRequired,onStyleLeafNodesChange:y.a.func.isRequired,onStyleNodeLinesChange:y.a.func.isRequired,renderInternalLabels:y.a.bool,renderLeafBorders:y.a.bool,renderLeafLabels:y.a.bool,styleInternalNodes:y.a.bool,styleLeafLabels:y.a.bool,styleLeafNodes:y.a.bool,styleNodeLines:y.a.bool},ue.defaultProps={fontSize:ce.a.FONT_SIZE,maxFontSize:ce.a.MAX_FONT_SIZE,maxNodeSize:ce.a.MAX_NODE_SIZE,minFontSize:ce.a.MIN_FONT_SIZE,minNodeSize:ce.a.MIN_NODE_SIZE,nodeSize:ce.a.NODE_SIZE};var de=ue,he=n(681),pe={x:["fullscreen","swap_horiz","swap_vert"],y:["fullscreen","swap_vert","swap_horiz"]},fe=function(e){function t(){var e,n,r;i()(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return u()(r,(n=r=u()(this,(e=h()(t)).call.apply(e,[this].concat(o))),r.state={mode:0},r.toggleMode=function(){r.setState({mode:2===r.state.mode?0:r.state.mode+1})},n))}return f()(t,e),l()(t,[{key:"render",value:function(){var e=[this.props.onZoomIn,this.props.onHorizZoomIn,this.props.onVertZoomIn],t=[this.props.onZoomOut,this.props.onHorizZoomOut,this.props.onVertZoomOut],n=this.props.mainAxis,r=void 0===n?"x":n;return g.a.createElement(he.a,{className:this.props.className,onZoomIn:e[this.state.mode],onZoomOut:t[this.state.mode]},g.a.createElement("div",{className:"libmr-ZoomControls-button",title:"Toogle zoom mode",onClick:this.toggleMode},g.a.createElement("i",{className:"libmr-ZoomControls-icon material-icons"},pe[r][this.state.mode])))}}]),t}(g.a.Component);fe.displayName="TreeZoomControls",fe.propTypes={className:y.a.string,mainAxis:y.a.string,onZoomIn:y.a.func.isRequired,onZoomOut:y.a.func.isRequired,onHorizZoomIn:y.a.func.isRequired,onHorizZoomOut:y.a.func.isRequired,onVertZoomIn:y.a.func.isRequired,onVertZoomOut:y.a.func.isRequired};var me=n(9),ge=n.n(me),ve=n(16),ye=n.n(ve);var be={rd:{alignableLabels:!1,branchScalingAxis:"xy",drawLine:function(e,t,n){e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(n.parent.x,n.parent.y),e.ctx.stroke(),e.ctx.closePath()},getBranchScale:function(e){const t=function(e){return Math.min(e.ctx.canvas.width,e.ctx.canvas.height)}(e)/2,n=e.getVirtualTree(),r=n.rootNode.totalLeafLength-n.rootNode.branchLength;return r>0?t/r:r<0?t*r:0},getNodeAtPoint:function(e,t,n,r){const{rootNode:a,postorderTraversal:o}=e.layout();for(let e=a.postIndex-a.totalNodes+1;e<=a.postIndex;e++){const a=o[e];if(a.parent&&(a.x>a.parent.x?t<a.x&&t>a.parent.x:t<a.parent.x&&t>a.x))if(isNaN(a.slope)){if(a.y>a.parent.y?n<a.y&&n>a.parent.y:n<a.parent.y&&n>a.y)return a}else if(n>a.slope*t+a.intercept-r&&n<a.slope*t+a.intercept+r)return a}return null},layoutNodes:function(e,t){let n=0;const{rootNode:r}=t;for(let e=r.postIndex-r.totalNodes+1;e<=r.postIndex;e++){const a=t.postorderTraversal[e];if(a.isLeaf)a.angle=n*(te.Degrees360/r.visibleLeaves);else{let e=0;for(const t of a.children)e+=t.angle*t.totalLeaves;a.angle=e/a.totalLeaves}(a.isLeaf&&!a.isHidden||a.isCollapsed&&!a.isHidden)&&(n+=1)}for(let n=r.preIndex;n<r.preIndex+r.totalNodes;n++){const a=t.preorderTraversal[n],o=a.branchLength*e.state.branchScale;a.x=(a!==r?a.parent.x:0)+o*Math.cos(a.angle),a.y=(a!==r?a.parent.y:0)+o*Math.sin(a.angle),a!==r&&(a.slope=(a.parent.y-a.y)/(a.parent.x-a.x),a.intercept=a.y-a.slope*a.x)}}},rc:{alignableLabels:!0,branchScalingAxis:"x",drawLine:function(e,t,n){n!==t.rootNode&&(e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(n.parent.x,n.y),e.ctx.lineTo(n.parent.x,n.parent.y),e.ctx.stroke(),e.ctx.closePath())},getBranchScale:function(e,t=e.state.stepScale){const n=e.getVirtualTree(),r=n.rootNode.totalLeaves*t,a=e.ctx.canvas.width/e.ctx.canvas.height*r,o=n.rootNode.totalLeafLength-n.rootNode.branchLength;return 0===o&&e.error(501),a/o},getNodeAtPoint:function(e,t,n,r){const{rootNode:a,postorderTraversal:o}=e.layout();for(let e=a.postIndex-a.totalNodes+1;e<=a.postIndex;e++){const a=o[e];if(a.parent&&(t<a.x+r&&t>a.parent.x-r&&n<a.y+r&&n>a.y-r||t<a.parent.x+r&&t>a.parent.x-r&&(n<a.parent.y?n>a.y-r:n<a.y+r)))return a}return null},mainAxis:"x",layoutNodes:function(e,t){let n=0;const{rootNode:r}=t;for(let a=r.postIndex-r.totalNodes+1;a<=r.postIndex;a++){const r=t.postorderTraversal[a];if(r.angle=te.Degrees0,r.x=r.distanceFromRoot*e.state.branchScale,r.isLeaf)r.y=n*e.state.stepScale;else if(r.isCollapsed)r.y=n*e.state.stepScale;else{const e=r.children[0].y,t=r.children[r.children.length-1].y;r.y=(t+e)/2}(r.isLeaf&&!r.isHidden||r.isCollapsed&&!r.isHidden)&&(n+=1)}},stepScalingAxis:"y"},cr:{alignableLabels:!0,branchScalingAxis:"xy",drawLine:function(e,t,n){const{rootNode:r}=t,a=n.parent.distanceFromRoot-r.distanceFromRoot;if(e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(a*e.state.branchScale*Math.cos(n.angle),a*e.state.branchScale*Math.sin(n.angle)),e.ctx.stroke(),e.ctx.closePath(),n.children&&n.children.length&&!n.isCollapsed){const t=n.children[0].angle,a=n.children[n.children.length-1].angle,o=Math.abs(n.distanceFromRoot-r.distanceFromRoot);e.ctx.beginPath(),e.ctx.arc(0,0,o*e.state.branchScale,t,a,a<t),e.ctx.stroke(),e.ctx.closePath()}},getBranchScale:function(e){const t=function(e){return Math.min(e.ctx.canvas.width,e.ctx.canvas.height)}(e)/2,{rootNode:n}=e.getVirtualTree();return n.totalLeafLength>0?t/n.totalLeafLength:n.totalLeafLength<0?t*n.totalLeafLength:0},getNodeAtPoint:function(e,t,n,r){const{rootNode:a,postorderTraversal:o}=e.layout();for(let i=a.postIndex-a.totalNodes+1;i<=a.postIndex;i++){const s=o[i];if(!s.parent)continue;const l=s.parent.distanceFromRoot-a.distanceFromRoot,c=l*e.state.branchScale*Math.cos(s.angle);if(s.x>c?t<s.x&&t>c:t<c&&t>s.x)if(isNaN(s.slope)){const t=l*e.state.branchScale*Math.sin(s.angle);if(s.y>t?n<s.y&&n>t:n<t&&n>s.y)return s}else if(n>s.slope*t+s.intercept-r&&n<s.slope*t+s.intercept+r)return s}return null},layoutNodes:function(e,t){let n=0;const{rootNode:r}=t;for(let a=r.postIndex-r.totalNodes+1;a<=r.postIndex;a++){const r=t.postorderTraversal[a];if(r.isLeaf)r.angle=n*(te.Degrees360/t.rootNode.visibleLeaves);else{const e=r.children[0].angle,t=r.children[r.children.length-1].angle;r.angle=(t+e)/2}const o=(r.distanceFromRoot-t.rootNode.distanceFromRoot)*e.state.branchScale;r.x=o*Math.cos(r.angle),r.y=o*Math.sin(r.angle),(r.isLeaf&&!r.isHidden||r.isCollapsed&&!r.isHidden)&&(n+=1),r.parent&&(r.slope=Math.tan(r.angle),r.intercept=r.y-r.slope*r.x)}}},dg:{alignableLabels:!1,getBranchScale:function(e){const{rootNode:t}=e.getVirtualTree(),n=e.ctx.canvas.width-2*e.state.padding;return t.totalLeafLength>0?n/t.totalLeafLength:t.totalLeafLength<0?n*t.totalLeafLength:0},getNodeAtPoint:function(e,t,n,r){const{rootNode:a,postorderTraversal:o}=e.getVirtualTree();for(let e=a.postIndex-a.totalNodes+1;e<=a.postIndex;e++){const a=o[e];if(a&&a.parent&&t<a.x&&t>a.parent.x&&n>a.slope*t+a.intercept-r&&n<a.slope*t+a.intercept+r)return a}return null},drawLine:function(e,t,n){n!==t.rootNode&&(e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(n.parent.x,n.parent.y),e.ctx.stroke(),e.ctx.closePath())},layoutNodes:function(e,t){let n=0;const{rootNode:r}=t;for(let a=r.postIndex-r.totalNodes+1;a<=r.postIndex;a++){const r=t.postorderTraversal[a];if(r.angle=te.Degrees0,r.x=(t.rootNode.visibleLeaves-r.visibleLeaves)*e.state.stepScale/2,r.isLeaf)r.y=n*e.state.stepScale;else if(r.isCollapsed)r.y=n*e.state.stepScale;else{const t=r.children[0].y,n=(r.visibleLeaves-r.children[0].visibleLeaves)*e.state.stepScale;r.y=t+n/2}r.isLeaf&&n++}for(let e=r.preIndex;e<r.preIndex+r.totalNodes;e++){const n=t.preorderTraversal[e];n.parent&&(n.slope=(n.parent.y-n.y)/(n.parent.x-n.x),n.intercept=n.y-n.slope*n.x)}},mainAxis:"x",stepScalingAxis:"y"},hr:{alignableLabels:!0,drawLine:function(e,t,n){n!==t.rootNode&&(e.ctx.beginPath(),e.ctx.moveTo(n.x,n.y),e.ctx.lineTo(n.x,n.parent.y),e.ctx.lineTo(n.parent.x,n.parent.y),e.ctx.stroke(),e.ctx.closePath())},branchScalingAxis:"y",getBranchScale:function(e,t=e.state.stepScale){const n=e.getVirtualTree(),r=n.rootNode.totalLeaves*t,a=e.ctx.canvas.height/e.ctx.canvas.width*r,o=n.rootNode.totalLeafLength-n.rootNode.branchLength;return 0===o&&e.error(501),a/o},getNodeAtPoint:function(e,t,n,r){const{rootNode:a,preorderTraversal:o}=e.layout();for(let e=a.preIndex;e<a.preIndex+a.totalNodes;e++){const a=o[e];if(a.parent&&(t<a.x+r&&t>a.x-r&&n<a.y+r&&n>a.parent.y-r||n<a.parent.y+r&&n>a.parent.y-r&&(t<a.parent.x?t>a.x-r:t<a.x+r)))return a}return null},mainAxis:"y",layoutNodes:function(e,t){let n=0;const{rootNode:r}=t;for(let a=r.postIndex-r.totalNodes+1;a<=r.postIndex;a++){const r=t.postorderTraversal[a];if(r.angle=te.Degrees90,r.y=r.distanceFromRoot*e.state.branchScale,r.isLeaf)r.x=-1*n*e.state.stepScale;else if(r.isCollapsed)r.x=n*e.state.stepScale;else{const e=r.children[0].x,t=r.children[r.children.length-1].x;r.x=(t+e)/2}(r.isLeaf&&!r.isHidden||r.isCollapsed&&!r.isHidden)&&(n+=1)}},stepScalingAxis:"x"}},Ce=function(e){const t=e.getBounds(!1),n=e.getDrawingArea(),r=t.maxX-t.minX,a=t.maxY-t.minY,o=Math.max(.333*n.width,n.right-n.left-e.state.nodeSize),i=Math.max(.333*n.height,n.bottom-n.top-e.state.nodeSize),s=o/r,l=i/a,c=Math.min(s,l),u=e.state.padding+Math.max(e.state.nodeSize,e.state.fontSize)/2;let d=-1*t.minX*c,h=-1*t.minY*c;s>l?(d+=u+(o-r*c)/2,h+=u):s<l?(d+=u,h+=u+(i-a*c)/2):(d+=u,h+=u),void 0===be[e.state.type].mainAxis&&(d+=(n.width-o)/2-u,h+=(n.height-i)/2-u);const{minScale:p,maxScale:f}=function(e){return{minScale:e/2,maxScale:Math.max(e,16)}}(c);return{offsetX:d,offsetY:h,scale:c,minScale:p,maxScale:f}},xe=function(e){return{branchScale:be[e.state.type].getBranchScale(e,re.stepScale)}},Se=function(e){return{stepScale:re.stepScale}},we=function(e){return e.chain(Se,xe,Ce)},Le=n(679),ke=n(320),Ne=n(513),Ee=n(234),Oe=function(e,t,n,r){for(var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:ce.a.NODE_BORDER_WIDTH,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:ce.a.NODE_BORDER_STYLE,l=0,c=0,u=Object.keys(a);c<u.length;c++){var d=u[c];e.fillStyle=d,e.beginPath(),e.moveTo(t,n);var h=l+2*Math.PI*a[d];e.arc(t,n,r,l,h,!1),e.fill(),e.closePath(),l=h}i>0&&(e.beginPath(),e.arc(t,n,r,Ee.a.Degrees0,Ee.a.Degrees360),e.strokeStyle=s,e.strokeWidth=i,e.stroke(),e.closePath()),o&&Object(Ne.a)(e,t,n,r,o)},Pe=n(134);function Ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Te=function(e){return function(t,n){t.lasso=Object(Le.a)(t.ctx.canvas,t.ctx.canvas,{isActive:e.props.lasso,path:e.props.path,onPathChange:function(n){if(null!==n||!e.props.highlightedIds.length){var r=null;if(n){r=[];var a=t.layout(),o=!0,i=!1,s=void 0;try{for(var l,c=a.leafNodes[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;t.lasso.isPointInside(u,n)&&r.push(u.id)}}catch(e){i=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw s}}}e.props.onFilterChange(r,n)}},onRedrawRequested:function(){return t.render()},translateToCanvas:function(e){return e.map((function(e){return C.a.utils.unmapPoint(t,e.x,e.y)}))},translateFromCanvas:function(e,n){return C.a.utils.mapPoint(t,e,n)}});var r=function(){setTimeout((function(){return e.props.onAddHistoryEntry(t.ctx.canvas.toDataURL())}),0)};t.drawNodeShape=function(e,t,n,r){var a=e.state,o=e.ctx,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:r/2;t.isLeaf?a.styleLeafNodes&&Object(ke.a)(o,0,0,i,n,o.fillStyle,null,a.renderLeafBorders?o.lineWidth:0):(t.isCollapsed&&a.styleLeafNodes||a.styleInternalNodes)&&t.piechartSlices&&Oe(o,0,0,i,t.piechartSlices,null,a.renderLeafBorders?o.lineWidth:0)}.bind(null,t),n("collapseNode",(function(e,t){e.apply(void 0,ye()(t)),r()})),n("layout",(function(e,n){var r=e.apply(void 0,ye()(n));if(t._.piechart=t._.piechart||{},(!0===t.state.styleInternalNodes||t.state.collapsedIds.length)&&t._.piechart.styles!==t.state.styles){var a=_e({fillStyle:t.state.fillStyle},t.state.leafNodeStyle),o=!0,i=!1,s=void 0;try{for(var l,c=r.postorderTraversal[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;if(u.isLeaf){var d=t.state.styles?t.state.styles[u.id]:void 0;u.strokeStyle=(d?d.strokeStyle:void 0)||t.state.strokeStyle}else{var h={},p=!0,f=!1,m=void 0;try{for(var g,v=u.children[Symbol.iterator]();!(p=(g=v.next()).done);p=!0){var y=g.value;if(y.isLeaf){var b=t.state.styles[y.id]||a;h[b.fillStyle]=(h[b.fillStyle]||0)+1}else for(var C=0,x=Object.keys(y.piechartSlices);C<x.length;C++){var S=x[C];h[S]=(h[S]||0)+y.piechartSlices[S]}}}catch(e){f=!0,m=e}finally{try{p||null==v.return||v.return()}finally{if(f)throw m}}u.piechartSlices=h}}}catch(e){i=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw s}}var w=!0,L=!1,k=void 0;try{for(var N,E=r.postorderTraversal[Symbol.iterator]();!(w=(N=E.next()).done);w=!0){var O=N.value;if(!O.isLeaf)for(var P=0,I=Object.keys(O.piechartSlices);P<I.length;P++){var _=I[P];O.piechartSlices[_]=O.piechartSlices[_]/O.totalLeaves}}}catch(e){L=!0,k=e}finally{try{w||null==E.return||E.return()}finally{if(L)throw k}}t._.piechart.styles=t.state.styles}return r})),n("mergeState",(function(n,r){var a=ge()(r,1)[0];n(),t.state=_e({},t.state,{},a,{size:{width:e.props.width,height:e.props.height},highlightedStyle:Pe.b.primaryColour,haloStyle:Pe.b.primaryColour,metadata:_e({},t.state.metadata,{},a.metadata),scalebar:_e({},t.state.scalebar,{},a.metadata)})})),n("postRender",(function(e,n){e.apply(void 0,ye()(n)),t.lasso.isActive&&(t.ctx.save(),t.ctx.scale(t.pixelRatio,t.pixelRatio),t.lasso.draw(),t.ctx.restore(),t.lasso.updateCanvas())})),n("rerootNode",(function(e,t){e.apply(void 0,ye()(t)),r()})),t.selectNode=function(n,r){if(t._.selectedNodeId=null,n&&n.isLeaf)e.props.setHighlightedIds([n.id],r);else{if(e.props.path)return void(e.props.highlightedIds.length&&e.props.setHighlightedIds());n&&!n.isHidden?(t._.selectedNodeId=n.id,e.props.onFilterChange(t.getLeafIds(n))):r||(e.props.highlightedIds.length?e.props.setHighlightedIds():e.props.onFilterChange(null))}},t.setRoot=function(e){t._.selectedNodeId=null;var n=null;null!==e&&(n=t.getNodeById(e)),t.setState(_e({},function(e,t){return e.chain(()=>({rootId:t}),we)}(t,n?n.id:null),{ids:t.getLeafIds(e)})),r()},e.props.onPhylocanvasStateChange&&n("setState",(function(t,n){var r=ge()(n,1)[0];t(),e.props.onPhylocanvasStateChange(r)})),n("setTreeType",(function(e,t){e.apply(void 0,ye()(t)),r()})),t.isUninitialised=function(){return null===t.state.branchScale},e.props.onRedrawOriginalTree&&n("setSource",(function(n,r){r[0]===t.nodes.originalSource?e.props.onRedrawOriginalTree():n.apply(void 0,ye()(r))}))}},Me=(y.a.shape({index:y.a.number.isRequired,field:y.a.string.isRequired,label:y.a.string.isRequired}),y.a.shape({index:y.a.number.isRequired,image:y.a.string.isRequired}),y.a.shape({x:y.a.number.isRequired,y:y.a.number.isRequired}));y.a.oneOfType([y.a.arrayOf(y.a.number.isRequired),y.a.shape({lat:y.a.number.isRequired,lng:y.a.number.isRequired})]);function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ze=function(){},Re=function(e){function t(){var e,n,r;i()(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return u()(r,(n=r=u()(this,(e=h()(t)).call.apply(e,[this].concat(o))),r.state={controlsVisible:!1},n))}return f()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.phylocanvasState;t.viewPort&&!t.size&&(t=Ae({},t,{},C.a.utils.restoreViewport(t.viewPort,t.padding,this.props.width,this.props.height))),this.tree=C.a.createTree(this.canvasRef,t,[S.a,N.a,O.a,I.a,Te(this),L.a]),this.onInitialise();var n=this.props.addExportCallback;n&&(n("tree-png",(function(){return e.tree.exportPNG()})),n("tree-svg",(function(){return e.tree.exportSerialisedSVG()})),n("tree-nwk",(function(){return e.tree.getNewick()})))}},{key:"componentDidUpdate",value:function(e){e.width===this.props.width&&e.height===this.props.height||this.resizeTree(),e.lasso!==this.props.lasso&&this.tree.lasso.setActive(this.props.lasso),e.path!==this.props.path&&this.tree.lasso.setPath(this.props.path),e.filenames!==this.props.filenames&&(this.tree.contextMenu.filenames=this.props.filenames);var t=!1;if(e.phylocanvasState!==this.props.phylocanvasState&&(this.tree.mergeState(this.props.phylocanvasState),this.tree.isUninitialised())){var n=this.props.phylocanvasState.source;this.tree.setSource(n),t=!0}this.tree.render(),t&&this.onInitialise()}},{key:"componentWillUnmount",value:function(){this.tree.lasso&&this.tree.lasso.destroy(),this.tree&&this.tree.destroy();var e=this.props.removeExportCallback;e&&(e("tree-png"),e("tree-svg"))}},{key:"onInitialise",value:function(){var e=this;this.props.onPhylocanvasInitialise&&setTimeout((function(){return e.props.onPhylocanvasInitialise(e.tree.ctx.canvas.toDataURL())}),0)}},{key:"getMainAxis",value:function(){if(this.tree){var e=C.a.types[this.tree.state.type];return e?e.mainAxis:void 0}}},{key:"resizeTree",value:function(){this.tree.resize(this.props.width,this.props.height)}},{key:"toggleStyleInternalNodes",value:function(e){this.tree.setState({styleInternalNodes:e,internalNodeStyle:{shape:e?"circle":"none"}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height,a=t.phylocanvasState,o=this.state.controlsVisible;return g.a.createElement(_.a,{controlsVisible:o,onControlsVisibleChange:function(){return e.setState({controlsVisible:!o})},primaryControls:g.a.createElement("div",{className:"libmr-ControlsMenu-group"},g.a.createElement(de,{alignLabels:a.alignLabels,fontSize:a.fontSize,maxFontSize:this.props.maxFontSize,maxNodeSize:this.props.maxNodeSize,minFontSize:this.props.minFontSize,minNodeSize:this.props.minNodeSize,nodeSize:a.nodeSize,onAlignLabelsChange:function(t){return e.tree.setState({alignLabels:t})},onFontSizeChange:function(t){return e.tree.setState({fontSize:t})},onNodeSizeChange:function(t){return e.tree.setState({nodeSize:t})},onRenderInternalLabelsChange:function(t){return e.tree.setState({renderInternalLabels:t})},onRenderLeafBordersChange:function(t){return e.tree.setState({renderLeafBorders:t})},onRenderLeafLabelsChange:function(t){return e.tree.setState({renderLeafLabels:t})},onStyleInternalNodesChange:function(t){return e.toggleStyleInternalNodes(t)},onStyleLeafLabelsChange:function(t){return e.tree.setState({styleLeafLabels:t})},onStyleLeafNodesChange:function(t){return e.tree.setState({styleLeafNodes:t})},onStyleNodeLinesChange:function(t){return e.tree.setState({styleNodeLines:t})},renderInternalLabels:a.renderInternalLabels,renderLeafBorders:a.renderLeafBorders,renderLeafLabels:a.renderLeafLabels,styleInternalNodes:a.styleInternalNodes,styleLeafLabels:a.styleLeafLabels,styleLeafNodes:a.styleLeafNodes,styleNodeLines:a.styleNodeLines,theme:this.props.theme}),this.props.primaryControls),secondaryControls:g.a.createElement(oe,{lasso:this.props.lasso,onLassoChange:this.props.onLassoChange,onTypeChange:function(t){return e.tree.setTreeType(t)},type:a.type}),style:Ae({width:n,height:r},this.props.style),theme:this.props.theme,zoomControls:g.a.createElement(fe,{mainAxis:this.getMainAxis(),onZoomIn:function(){return e.tree.transform(0,0,1)},onZoomOut:function(){return e.tree.transform(0,0,-1)},onHorizZoomIn:function(){return e.tree.changeBranchScale(1)},onHorizZoomOut:function(){return e.tree.changeBranchScale(-1)},onVertZoomIn:function(){return e.tree.changeStepScale(1)},onVertZoomOut:function(){return e.tree.changeStepScale(-1)},theme:this.props.theme})},g.a.createElement("div",{className:"libmr-Tree",style:{width:n,height:r}},g.a.Children.map(this.props.children,(function(e){return g.a.isValidElement(e)?g.a.cloneElement(e,{controlsVisible:o}):e})),g.a.createElement("canvas",{ref:function(t){e.canvasRef=t},width:n,height:r})))}}]),t}(g.a.Component);Re.displayName="Tree",Re.propTypes=Ae({},_.a.panelProps,{addExportCallback:y.a.func,filenames:y.a.object,height:y.a.number.isRequired,highlightedIds:y.a.array,lasso:y.a.bool,newickString:y.a.string,onAddHistoryEntry:y.a.func,onFilterChange:y.a.func,onLassoChange:y.a.func,onPhylocanvasInitialise:y.a.func,onPhylocanvasStateChange:y.a.func,onRedrawOriginalTree:y.a.func,path:y.a.arrayOf(Me),phylocanvasState:y.a.object,removeExportCallback:y.a.func,setHighlightedIds:y.a.func,width:y.a.number.isRequired}),Re.defaultProps={highlightedIds:[],lasso:!1,onAddHistoryEntry:ze,onControlsVisibleChange:ze,onFilterChange:ze,onLassoChange:ze,onPhylocanvasInitialise:ze,onPhylocanvasStateChange:ze,onZoomModeChange:ze,setHighlightedIds:ze},n.d(t,"a",(function(){return Re}))},858:function(e,t,n){"use strict";var r=n(17),a=n.n(r),o=(n(1047),n(0)),i=n.n(o),s=n(1),l=n.n(s),c=n(9),u=n.n(c),d=n(28),h=n.n(d),p=n(87),f=n.n(p),m=n(24),g=n.n(m),v=n(26),y=n.n(v),b=n(22),C=n.n(b),x=n(23),S=n.n(x),w=n(27),L=n.n(w),k=n(89),N=n.n(k),E=(n(846),n(847),n(320)),O=n(134);N.a.defaults.timeline=N.a.defaults.scatter;var P={};N.a.controllers.timeline=N.a.controllers.scatter.extend({dataElementType:N.a.elements.Point.extend({draw:function(){var e=this._view;if(!e.skip){var t=this._chart.ctx,n=e.radius,r=this._chart.config.data.datasets[this._datasetIndex],a=r.data[this._index].id,o=r.styles[a]||P,i=r.highlightedIds.has(a);Object(E.a)(t,e.x,e.y,n,o.shape,o.colour,i&&O.b.primaryColour)}}})});var I={day:1,week:7,month:30,quarter:90,year:365},_=function(e){function t(){return g()(this,t),C()(this,S()(t).apply(this,arguments))}return L()(t,e),y()(t,[{key:"componentDidMount",value:function(){var e=this;this.createChart(),this.props.addExportCallback&&this.props.addExportCallback("timeline-png",(function(){return e.domRef.toDataURL()}))}},{key:"componentDidUpdate",value:function(e){var t=e.width!==this.props.width||e.height!==this.props.height,n=e.bounds!==this.props.bounds||e.chartData!==this.props.chartData||e.unit!==this.props.unit,r=e.highlightedIds!==this.props.highlightedIds||e.nodeSize!==this.props.nodeSize||e.styles!==this.props.styles;t&&this.resizeChart(),(n||r)&&this.updateChart(n),(t||n)&&this.resetChartRanges(),this.props.viewport!==e.viewport&&this.props.viewport&&this.restoreViewport(),this.chart.update()}},{key:"componentWillUnmount",value:function(){this.props.removeExportCallback&&this.props.removeExportCallback("timeline-png"),this.destroyChart()}},{key:"getYTicks",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=2*this.props.nodeSize+2,n=this.props.height-40,r=n/t;return{min:e,max:r+e}}},{key:"getPanZoomRanges",value:function(e){var t={pan:{},zoom:{}},n=2*this.props.nodeSize+2;t.pan.rangeMin={x:e.min.toDate(),y:0},t.pan.rangeMax={x:e.max.toDate(),y:this.props.maxStackSize+1};var r=(this.props.width-40)/n,a=(this.props.height-40)/n;return t.zoom.rangeMin={x:r*I[this.props.unit]*864e5,y:a},t.zoom.rangeMax={x:this.props.bounds.max.diff(this.props.bounds.min),y:this.props.maxStackSize},t}},{key:"getChartBounds",value:function(){var e=Math.max(1,this.props.bounds.max.diff(this.props.bounds.min,"days")),t=Math.ceil((this.props.nodeSize+2)*e/(this.props.width-40));return{min:f()(this.props.bounds.min).subtract(t,"day"),max:f()(this.props.bounds.max).add(t,"day")}}},{key:"createDatasets",value:function(){return{labels:[],datasets:[{label:"Dataset",pointRadius:this.props.nodeSize/2,pointHoverRadius:this.props.nodeSize/2+1,data:this.props.chartData,highlightedIds:this.props.highlightedIds,styles:this.props.styles}]}}},{key:"createChart",value:function(){var e=this,t=this.domRef.getContext("2d");this.domRef.height=this.props.height,this.domRef.width=this.props.width;var n=this.getChartBounds(),r=this.getPanZoomRanges(n),a=this.props.viewport;this.chart=new N.a(t,{type:"timeline",data:this.createDatasets(),options:{animation:!1,layout:{padding:{left:0,right:0,top:-24,bottom:0}},legend:{display:!1},maintainAspectRatio:!1,onClick:function(t,n){var r=u()(n,1)[0],a=t.metaKey||t.ctrlKey;if(r){var o=r._chart.config.data.datasets[r._datasetIndex].data[r._index];e.props.setHighlightedIds([o.id],a)}else e.props.highlightedIds.size&&!a&&e.props.setHighlightedIds()},pan:{enabled:!0,mode:"xy",rangeMin:r.pan.rangeMin,rangeMax:r.pan.rangeMax,onPan:function(){return e.saveViewport()}},responsive:!1,responsiveAnimationDuration:0,scales:{xAxes:[{position:"bottom",time:{unit:this.props.unit,min:a?a.minx:n.min,max:a?a.maxx:n.max},ticks:{maxRotation:0,autoSkip:!0,autoSkipPadding:16},type:"time"}],yAxes:[{display:!1,ticks:a?{min:a.miny,max:a.maxy}:this.getYTicks()}]},title:{display:!0,text:""},tooltips:{displayColors:!1,callbacks:{title:function(e,t){return e.map((function(e){return t.datasets[e.datasetIndex].data[e.index].x.toLocaleDateString()})).join(", ")},label:function(t,n){var r=n.datasets[t.datasetIndex].data[t.index];return e.props.getTooltip(r)}}},zoom:{enabled:!0,drag:!1,mode:"xy",rangeMin:r.zoom.rangeMin,rangeMax:r.zoom.rangeMax,onZoom:function(){return e.saveViewport()}}}}),window.cgps_microreact_timelineChart=this.chart}},{key:"updateChart",value:function(e){if(e){var t=this.getChartBounds();this.chart.scales["x-axis-1"].options.time.min=t.min,this.chart.scales["x-axis-1"].options.time.max=t.max,this.chart.scales["x-axis-1"].options.time.unit=this.props.unit;var n=2*this.props.nodeSize+2,r=(this.chart.chartArea.bottom-this.chart.chartArea.top)/n;this.chart.scales["y-axis-1"].options.ticks.min=0,this.chart.scales["y-axis-1"].options.ticks.max=r}this.chart.config.data=this.createDatasets(),this.chart.clear()}},{key:"resizeChart",value:function(){var e=this.chart.scales["y-axis-1"].options.ticks.min||0;this.chart.resize(),Object.assign(this.chart.scales["y-axis-1"].options.ticks,this.getYTicks(e))}},{key:"resetChartRanges",value:function(){var e=this.getChartBounds(),t=this.getPanZoomRanges(e);Object.assign(this.chart.config.options.pan,t.pan),Object.assign(this.chart.config.options.zoom,t.zoom)}},{key:"destroyChart",value:function(){this.chart&&(this.chart.destroy(),this.chart=null)}},{key:"saveViewport",value:function(){this.props.onViewportChange({minx:this.chart.scales["x-axis-1"].options.time.min.valueOf(),maxx:this.chart.scales["x-axis-1"].options.time.max.valueOf(),miny:this.chart.scales["y-axis-1"].options.ticks.min,maxy:this.chart.scales["y-axis-1"].options.ticks.max})}},{key:"restoreViewport",value:function(){this.chart.scales["x-axis-1"].options.time.min=this.props.viewport.minx,this.chart.scales["x-axis-1"].options.time.max=this.props.viewport.maxx,this.chart.scales["y-axis-1"].options.ticks.min=this.props.viewport.miny,this.chart.scales["y-axis-1"].options.ticks.max=this.props.viewport.maxy}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height;return i.a.createElement("div",{className:"libmr-Timeline-plot",style:{width:n,height:r}},i.a.createElement("canvas",{ref:function(t){e.domRef=t}}))}}]),t}(i.a.Component);_.displayName="TimelineChart",_.propTypes={addExportCallback:l.a.func,bounds:l.a.shape({min:l.a.instanceOf(f.a).isRequired,max:l.a.instanceOf(f.a).isRequired}),chartData:l.a.arrayOf(l.a.shape({x:l.a.instanceOf(Date).isRequired,y:l.a.number.isRequired,id:l.a.string.isRequired})).isRequired,getTooltip:l.a.func.isRequired,height:l.a.number.isRequired,highlightedIds:l.a.instanceOf(Set).isRequired,maxStackSize:l.a.number.isRequired,nodeSize:l.a.number.isRequired,onViewportChange:l.a.func.isRequired,removeExportCallback:l.a.func,setHighlightedIds:l.a.func.isRequired,styles:l.a.object.isRequired,unit:l.a.string.isRequired,width:l.a.number.isRequired,viewport:l.a.shape({minx:l.a.number.isRequired,maxx:l.a.number.isRequired,miny:l.a.number.isRequired,maxy:l.a.number.isRequired})};var T=n(230),M=n(82),j=(n(1049),n(4)),A=n.n(j),z=(n(1051),n(180)),R=n.n(z),D=n(501),B=function(e){return i.a.createElement(R.a,{id:e.id,className:"libmr-RadioButton"},i.a.createElement(D.Radio,{onChange:e.onChange,checked:e.checked}),i.a.createElement("label",null,e.label))};B.propTypes={checked:l.a.bool,id:l.a.string,label:l.a.string,onChange:l.a.func};var F=B,q=function(e){return i.a.createElement("div",{className:A()("libmr-RadioSelect",e.className)},i.a.createElement("ul",null,e.items.map((function(t){return i.a.createElement("li",{key:t.value},i.a.createElement(F,{id:t.value,onChange:e.onChange?function(){return e.onChange(t.value)}:null,label:t.label,checked:e.value===t.value||t.selected||!1}))})),e.children))};q.propTypes={children:l.a.node,className:l.a.string,items:l.a.arrayOf(l.a.shape({label:l.a.string,value:l.a.string,selected:l.a.bool})),onChange:l.a.func,value:l.a.string};var H=q,V=n(229),W=n(50),Z={year:"Year",quarter:"Quarter",month:"Month",week:"Week",day:"Day"},Y={1:"1 second",3:"3 seconds",10:"10 seconds",20:"20 seconds",30:"30 seconds",60:"60 seconds"},U=Object.keys(Z).map((function(e){return{value:e,label:Z[e]}})),X=function(e){function t(){var e,n,r;g()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return C()(r,(n=r=C()(this,(e=S()(t)).call.apply(e,[this].concat(o))),r.state={isPlaying:!1,isMovingWindow:!1},n))}return L()(t,e),y()(t,[{key:"componentDidUpdate",value:function(e,t){t.isPlaying!==this.state.isPlaying&&(this.state.isPlaying?this.startTimelinePlay():this.stopTimelinePlay())}},{key:"componentWillUnmount",value:function(){this.stopTimelinePlay()}},{key:"moveBounds",value:function(e,t){var n=this.props.bounds.min+e,r=this.props.bounds.max+t;return n>=0&&r<=this.props.timelineMax&&this.props.onBoundsChange({min:n,max:r}),r>=this.props.timelineMax}},{key:"togglePlayTimeline",value:function(e){this.setState({isPlaying:!this.state.isPlaying,isMovingWindow:e.metaKey||e.ctrlKey})}},{key:"startTimelinePlay",value:function(){this.timerTick(!0)}},{key:"stopTimelinePlay",value:function(){this.timeoutID&&clearTimeout(this.timeoutID),this.timeoutID=null}},{key:"timerTick",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.moveBounds(this.state.isMovingWindow?1:0,1),r=1e3*parseInt(this.props.speed,10);n?t?(this.props.onBoundsChange({min:0,max:1}),this.timeoutID=setTimeout((function(){return e.timerTick()}),r)):this.setState({isPlaying:!1}):this.timeoutID=setTimeout((function(){return e.timerTick()}),r)}},{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement(M.a,{title:"Reset zoom",onClick:function(){return e.props.onBoundsChange({min:e.props.bounds.min,max:e.props.bounds.max})}},i.a.createElement("i",{className:"material-icons"},"zoom_out_map")),i.a.createElement("div",{className:"libmr-Panel-control-group"},i.a.createElement(M.a,{title:"Skip to end",onClick:function(){return e.props.onBoundsChange({min:e.props.timelineMax-(e.props.bounds.max-e.props.bounds.min),max:e.props.timelineMax})}},i.a.createElement("i",{className:"material-icons"},"skip_next")),i.a.createElement(M.a,{title:"Fast-forward",onClick:function(){return e.moveBounds(1,1)}},i.a.createElement("i",{className:"material-icons"},"fast_forward")),i.a.createElement(M.a,{active:this.state.isPlaying,onClick:function(t){return e.togglePlayTimeline(t)},title:this.state.isPlaying?"Pause":"Play timeline. Hold Ctrl/Cmd + click for moving window."},i.a.createElement("i",{className:"material-icons"},this.state.isPlaying?"pause":"play_arrow")),i.a.createElement(M.a,{title:"Rewind",onClick:function(){return e.moveBounds(-1,-1)}},i.a.createElement("i",{className:"material-icons"},"fast_rewind")),i.a.createElement(M.a,{title:"Back to start",onClick:function(){return e.props.onBoundsChange({min:0,max:e.props.bounds.max-e.props.bounds.min})}},i.a.createElement("i",{className:"material-icons"},"skip_previous"))),i.a.createElement("div",{className:"libmr-Panel-control-group"},i.a.createElement(V.a,{active:!1,align:"right",size:"narrow",summary:i.a.createElement("strong",null,Y[this.props.speed]),title:"Speed"},i.a.createElement(H,{items:Object.keys(Y).map((function(t){return{value:t,label:"1 ".concat(e.props.unit,"/").concat(Y[t])}})),onChange:this.props.onSpeedChange,value:this.props.speed})),i.a.createElement(V.a,{active:!1,align:"right",size:"narrow",summary:i.a.createElement("strong",null,Z[this.props.unit]),title:"Group by"},i.a.createElement(H,{items:U,onChange:this.props.onUnitChange,value:this.props.unit})),i.a.createElement(V.a,{align:"right",title:"Nodes"},i.a.createElement(T.a,{label:"Node size",onChange:this.props.onNodeSizeChange,min:this.props.minNodeSize,max:this.props.maxNodeSize,unit:"px",value:this.props.nodeSize}))))}}]),t}(i.a.Component);X.displayName="TimelineControls",X.propTypes={bounds:l.a.shape({min:l.a.number.isRequired,max:l.a.number.isRequired}).isRequired,maxNodeSize:l.a.number,minNodeSize:l.a.number,nodeSize:l.a.number.isRequired,onBoundsChange:l.a.func.isRequired,onNodeSizeChange:l.a.func.isRequired,onSpeedChange:l.a.func.isRequired,onUnitChange:l.a.func.isRequired,speed:l.a.string.isRequired,timelineMax:l.a.number.isRequired,unit:l.a.string.isRequired},X.defaultProps={maxNodeSize:W.a.MAX_NODE_SIZE,minNodeSize:W.a.MIN_NODE_SIZE,nodeSize:W.a.NODE_SIZE};n(1054);var G=n(209),K=n.n(G),J=n(502);function Q(e){var t=0,n=Number.MAX_VALUE,r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var l=i.value;l.y>t&&(t=l.y),l.y<n&&(n=l.y)}}catch(e){a=!0,o=e}finally{try{r||null==s.return||s.return()}finally{if(a)throw o}}var c=.1*(t-n);return{min:n>c?n-c:0,max:t+c}}var $=function(e){function t(){var e,n,r;g()(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return C()(r,(n=r=C()(this,(e=S()(t)).call.apply(e,[this].concat(o))),r.state={isDragging:!1,bounds:null},n))}return L()(t,e),y()(t,[{key:"componentDidMount",value:function(){var e=this;this.createChart(),this.debouncedChangeBounds=K()((function(t){e.state.isDragging&&e.props.onBoundsChange(t)}),W.a.DELAY)}},{key:"componentDidUpdate",value:function(e){e.width===this.props.width&&e.height===this.props.height||this.resizeChart(),e.chartData!==this.props.chartData&&this.updateChart()}},{key:"componentWillUnmount",value:function(){this.chart.destroy()}},{key:"createDatasets",value:function(){return{labels:this.props.chartData.map((function(e){return e.label})),datasets:[{data:this.props.chartData,get backgroundColor(){return O.b.primaryColourAlphaMedium},lineTension:0,label:"Histogram"}]}}},{key:"createChart",value:function(){var e=this;this.domRef.height=this.props.height,this.domRef.width=this.props.width;var t=this.domRef.getContext("2d");this.chart=new N.a(t,{type:"line",data:this.createDatasets(),options:{animation:!1,layout:{padding:{left:0,right:0,top:-40,bottom:0}},legend:{display:!1},maintainAspectRatio:!1,responsive:!1,scales:{xAxes:[{display:!1}],yAxes:[{display:!1,ticks:Q(this.props.chartData)}]},title:{display:!0,text:""},tooltips:{callbacks:{title:function(t){var n=t.map((function(t){return e.props.chartData[t.index].label}));return"".concat(n.join(" "),": ").concat(t.length," point").concat(1===t.length?"":"s")},label:function(){return""}},displayColors:!1,yAlign:"bottom"}}})}},{key:"updateChart",value:function(){this.chart.config.data=this.createDatasets();var e=Q(this.props.chartData);this.chart.config.options.scales.yAxes[0].ticks.min=e.min,this.chart.config.options.scales.yAxes[0].ticks.max=e.max,this.chart.clear(),this.chart.update()}},{key:"resizeChart",value:function(){this.chart.resize()}},{key:"destroyChart",value:function(){this.chart.destroy(),this.chart=null}},{key:"sliderPositionToBounds",value:function(e,t){var n=this.props.chartData.length-1;return{min:e*n/this.props.width,max:(e+t)*n/this.props.width}}},{key:"render",value:function(){var e=this,t=this.state.bounds||this.props.bounds,n=this.props.width/Math.max(1,this.props.chartData.length-1),r=t.min*n,a=Math.max(1,t.max-t.min)*n,o=a<128,s=r>this.props.width-64+7,l=r+a<71;return i.a.createElement("div",{className:"libmr-AreaChart",style:{width:this.props.width,height:this.props.height}},i.a.createElement("canvas",{ref:function(t){e.domRef=t}}),i.a.createElement(J.a,{bounds:"parent",minWidth:24,position:{x:r,y:0},size:{width:a,height:this.props.height},onDragStart:function(){return e.setState({isDragging:!0})},onDrag:function(t,n){var r=e.sliderPositionToBounds(n.x>0?n.x:0,a);e.setState({bounds:r}),e.debouncedChangeBounds(r)},onDragStop:function(t,n){e.setState({isDragging:!1,bounds:null});var r=e.sliderPositionToBounds(n.x>0?n.x:0,a);e.props.onBoundsChange(r)},onResizeStart:function(){return e.setState({isDragging:!0})},onResize:function(t,n,r,a,o){var i=e.sliderPositionToBounds(o.x>0?o.x:0,r.offsetWidth);e.setState({bounds:i}),e.debouncedChangeBounds(i)},onResizeStop:function(t,n,r,a,o){e.setState({isDragging:!1,bounds:null});var i=e.sliderPositionToBounds(o.x>0?o.x:0,r.offsetWidth);e.props.onBoundsChange(i)},className:A()("libmr-AreaChart-slider",{"has-labels":this.props.showLabels||this.state.isDragging,stacked:o,"stacked-left":s,"stacked-right":l}),enableResizing:{top:!1,right:!0,bottom:!1,left:!0,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},dragAxis:"x",resizeHandleClasses:{left:"libmr-AreaChart-resize-handler",right:"libmr-AreaChart-resize-handler"},resizeHandleStyles:{left:{top:-1,bottom:-1,height:"auto"},right:{top:-1,bottom:-1,height:"auto"}}},i.a.createElement("label",{className:"libmr-AreaChart-label-min"},this.props.formatLabel(this.props.chartData[Math.ceil(t.min)].x)),i.a.createElement("label",{className:"libmr-AreaChart-label-max"},this.props.formatLabel(this.props.chartData[Math.floor(t.max)].x))))}}]),t}(i.a.Component);$.displayName="AreaChart",$.propTypes={bounds:l.a.shape({min:l.a.number.isRequired,max:l.a.number.isRequired}).isRequired,chartData:l.a.arrayOf(l.a.shape({x:l.a.oneOfType([l.a.instanceOf(Date),l.a.number]).isRequired,y:l.a.number.isRequired,label:l.a.string.isRequired})).isRequired,formatLabel:l.a.func,height:l.a.number.isRequired,onBoundsChange:l.a.func.isRequired,showLabels:l.a.bool,width:l.a.number.isRequired},$.defaultProps={formatLabel:function(e){return e}};var ee=n(254),te=n(126),ne=function(e){var t=e.width,n=e.height,r=h()(e,["width","height"]),a=i.a.useState(!1),o=u()(a,2),s=o[0],l=o[1],c=i.a.useMemo((function(){return Object(te.f)(r.chartData)}),[r.chartData]);return i.a.createElement(ee.a,{className:"libmr-Timeline",controlsVisible:s,onControlsVisibleChange:l,secondaryControls:i.a.createElement(X,{bounds:r.bounds,nodeSize:r.nodeSize,onBoundsChange:r.onBoundsChange,onNodeSizeChange:r.onNodeSizeChange,onSpeedChange:r.onSpeedChange,onUnitChange:r.onUnitChange,speed:r.speed,timelineMax:r.histogram.length-1,unit:r.unit}),style:{width:t,height:n},zoomControls:!1},i.a.createElement(_,{addExportCallback:r.addExportCallback,bounds:r.momentBounds,chartData:r.chartData,getTooltip:r.getTooltip,height:n-56,highlightedIds:r.highlightedIds,maxStackSize:c,nodeSize:r.nodeSize,onViewportChange:r.onViewportChange,removeExportCallback:r.removeExportCallback,setHighlightedIds:r.setHighlightedIds,styles:r.styles,unit:r.unit,viewport:r.viewport,width:t-16}),i.a.createElement($,{bounds:r.bounds,chartData:r.histogram,formatLabel:te.d,height:48,onBoundsChange:r.onBoundsChange,width:t-16,showLabels:s}),r.children)};ne.displayName="Timeline",ne.propTypes={addExportCallback:l.a.func,bounds:l.a.shape({min:l.a.number.isRequired,max:l.a.number.isRequired}),chartData:l.a.arrayOf(l.a.shape({x:l.a.instanceOf(Date).isRequired,y:l.a.number.isRequired,id:l.a.string.isRequired})).isRequired,children:l.a.node,getTooltip:l.a.func,height:l.a.number.isRequired,highlightedIds:l.a.instanceOf(Set).isRequired,histogram:l.a.arrayOf(l.a.shape({x:l.a.instanceOf(Date).isRequired,y:l.a.number.isRequired,label:l.a.string.isRequired})).isRequired,maxNodeSize:l.a.number,minNodeSize:l.a.number,momentBounds:l.a.shape({min:l.a.instanceOf(f.a).isRequired,max:l.a.instanceOf(f.a).isRequired}).isRequired,nodeSize:l.a.number.isRequired,onBoundsChange:l.a.func.isRequired,onNodeSizeChange:l.a.func.isRequired,onSpeedChange:l.a.func.isRequired,onUnitChange:l.a.func.isRequired,onViewportChange:l.a.func.isRequired,removeExportCallback:l.a.func,setHighlightedIds:l.a.func.isRequired,speed:X.propTypes.speed,styles:l.a.object.isRequired,unit:X.propTypes.unit,viewport:l.a.shape({minx:l.a.number.isRequired,maxx:l.a.number.isRequired,miny:l.a.number.isRequired,maxy:l.a.number.isRequired}).isRequired,width:l.a.number.isRequired},ne.defaultProps={getTooltip:function(e){return e.id}};var re=ne;n.d(t,"a",(function(){return re}));var ae=function(e){var t=function(e){var t=e.points,n=e.unit,r=i.a.useMemo((function(){return Object(te.b)(t)}),[t]),a=i.a.useMemo((function(){return Object(te.c)(t,n)}),[t,n]),o=i.a.useMemo((function(){return e.bounds||Object(te.e)(a)}),[e.bounds,a]),s=i.a.useMemo((function(){return Object(te.a)(o,a)}),[o,a]);return{bounds:o,chartData:r,histogram:a,momentBounds:s}}(e);return i.a.createElement(re,a()({},e,t))};ae.propTypes={points:l.a.arrayOf(l.a.shape({date:l.a.instanceOf(Date).isRequired,id:l.a.string.isRequired})).isRequired,styles:l.a.object.isRequired}},874:function(e,t){},876:function(e,t){},888:function(e,t,n){"use strict";n(975);var r=n(24),a=n.n(r),o=n(26),i=n.n(o),s=n(22),l=n.n(s),c=n(23),u=n.n(c),d=n(27),h=n.n(d),p=n(0),f=n.n(p),m=n(1),g=n.n(m),v=n(229),y=n(152),b=n(230),C=function(e){function t(){var e,n,r;a()(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return l()(r,(n=r=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),r.state={isOpen:!1},n))}return h()(t,e),i()(t,[{key:"render",value:function(){var e=this,t=this.props;return f.a.createElement(v.a,{className:"mr-menu mr-tree-styles-menu",open:this.state.isOpen,title:"Nodes & Labels",toggle:function(){return e.setState({isOpen:!e.state.isOpen})}},f.a.createElement(b.a,{label:"Node Size",onChange:t.onNodeSizeChange,min:t.minNodeSize,max:t.maxNodeSize,value:t.nodeSize}),f.a.createElement(b.a,{label:"Label Size",onChange:t.onLabelSizeChange,min:t.minLabelSize,max:t.maxLabelSize,value:t.labelSize}),f.a.createElement("hr",null),f.a.createElement(y.a,{className:"mr-toggle-switch",label:"Show Nodes",isChecked:t.showNodes,onChange:function(e){return t.onShowNodesChange(e)}}),f.a.createElement(y.a,{className:"mr-toggle-switch",label:"Show Labels",isChecked:t.showLabels,onChange:function(e){return t.onShowLabelsChange(e)}}))}}]),t}(f.a.Component);C.displayName="NetworkControlsMenu",C.propTypes={labelSize:g.a.number.isRequired,maxLabelSize:g.a.number.isRequired,maxNodeSize:g.a.number.isRequired,minLabelSize:g.a.number.isRequired,minNodeSize:g.a.number.isRequired,nodeSize:g.a.number.isRequired,onLabelSizeChange:g.a.func.isRequired,onNodeSizeChange:g.a.func.isRequired,onShowLabelsChange:g.a.func,onShowNodesChange:g.a.func,showLabels:g.a.bool,showNodes:g.a.bool};var x=n(3),S=n.n(x),w=n(4),L=n.n(w),k=n(490),N=n.n(k),E=n(254),O=n(677),P=n(82),I=n(679);var _=function(e,t){var n=e.renderers[0],r=n.domElements.mouse;n.initDOM("canvas","lasso");var a=n.domElements.lasso;r.parentElement.insertBefore(a,r);var o=n.width,i=n.height;n.width=0,n.height=0,n.resize(o,i);var s=Object(I.a)(r,a,{clearBeforeDraw:!0,isActive:t.isActive,path:t.path,onPathChange:t.onPathChange,translateToCanvas:function(t){return function(e,t){var n=Math.cos(e.camera.angle)/e.camera.ratio,r=Math.sin(e.camera.angle)/e.camera.ratio,a=(e.renderers[0].width||0)/2-e.camera.x*n-e.camera.y*r,o=(e.renderers[0].height||0)/2-e.camera.y*n+e.camera.x*r,i=sigma.utils.getBoundaries(e.graph,"",!0),s=i.minX,l=i.minY,c=i.maxX,u=i.maxY,d=e.renderers[0].width,h=e.renderers[0].height,p="outside"===e.settings("scalingMode")?Math.max(d/Math.max(c-s,1),h/Math.max(u-l,1)):Math.min(d/Math.max(c-s,1),h/Math.max(u-l,1)),f=(e.settings("rescaleIgnoreSize")?0:(e.settings("maxNodeSize")||i.sizeMax)/p)+(e.settings("sideMargin")||0);return c+=f,s-=f,u+=f,l-=f,p="outside"===e.settings("scalingMode")?Math.max(d/Math.max(c-s,1),h/Math.max(u-l,1)):Math.min(d/Math.max(c-s,1),h/Math.max(u-l,1)),t.map((function(e){var t=(e.x-(c+s)/2)*p,i=(e.y-(u+l)/2)*p;return{x:t*n+i*r+a,y:i*n+t*r+o}}))}(e,t)},translateFromCanvas:function(t,n){return function(e,t,n){var r=Math.cos(e.camera.angle)/e.camera.ratio,a=Math.sin(e.camera.angle)/e.camera.ratio,o=(t-((e.renderers[0].width||0)/2-e.camera.x*r-e.camera.y*a))/r,i=(n-((e.renderers[0].height||0)/2-e.camera.y*r+e.camera.x*a))/r,s=sigma.utils.getBoundaries(e.graph,"",!0),l=s.minX,c=s.minY,u=s.maxX,d=s.maxY,h=e.renderers[0].width,p=e.renderers[0].height,f="outside"===e.settings("scalingMode")?Math.max(h/Math.max(u-l,1),p/Math.max(d-c,1)):Math.min(h/Math.max(u-l,1),p/Math.max(d-c,1)),m=(e.settings("rescaleIgnoreSize")?0:(e.settings("maxNodeSize")||s.sizeMax)/f)+(e.settings("sideMargin")||0);return u+=m,l-=m,d+=m,c-=m,{x:o/(f="outside"===e.settings("scalingMode")?Math.max(h/Math.max(u-l,1),p/Math.max(d-c,1)):Math.min(h/Math.max(u-l,1),p/Math.max(d-c,1)))+(u+l)/2,y:i/f+(d+c)/2}}(e,t,n)},onRedrawRequested:function(){s.draw(),s.updateCanvas()}});return e.renderers[0].bind("render",s.draw),s},T=n(491),M=n.n(T),j=["scene","mouse","lasso"];var A=n(320),z=n(134);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){S()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}sigma.canvas.nodes.def=function(e,t,n){var r=n("_camera");if(r&&!1!==e.isActive){var a=Math.pow(r.ratio,n("nodesPowRatio")),o=e[n("rendererSizeKey")]*a;o&&Object(A.a)(t,e[n("rendererXKey")],e[n("rendererYKey")],o,e.style.shape,e.style.colour,e.isHighlighted?z.b.primaryColour:null)}},sigma.canvas.edges.def=function(e,t,n,r,a){if(a("_camera")&&!1!==t.isActive&&!1!==n.isActive){switch(r.strokeStyle=e.style.colour||a("defaultEdgeColor"),r.lineWidth=e.style.width||1,e.style.line){case"dashed":r.setLineDash([4,8]);break;case"dotted":r.setLineDash([1,2]);break;case"solid":default:r.setLineDash([])}r.beginPath(),r.moveTo(t[a("rendererXKey")],t[a("rendererYKey")]),r.lineTo(n[a("rendererXKey")],n[a("rendererYKey")]),r.stroke(),r.setLineDash([]);var o=t[a("rendererSizeKey")];e.style.label&&o>=a("labelThreshold")&&(r.fillStyle=r.strokeStyle,r.textAlign="center",r.textBaseline="middle",r.fillText(e.style.label,Math.round((t[a("rendererXKey")]+n[a("rendererXKey")])/2),Math.round((t[a("rendererYKey")]+n[a("rendererYKey")])/2)),r.textAlign="start",r.textBaseline="alphabetic")}};var B=function(e){function t(){return a()(this,t),l()(this,u()(t).apply(this,arguments))}return h()(t,e),i()(t,[{key:"componentDidMount",value:function(){var e=this;this.sigmaInst=new sigma({graph:this.props.graph,renderer:{container:this.el,type:"canvas"},settings:D({defaultEdgeColor:this.props.edgeColour,defaultLabelSize:this.props.labelSize,defaultNodeColour:this.props.labelSize,drawLabels:this.props.showLabels,drawNodes:this.props.showNodes,font:this.props.fontFamily,maxNodeSize:this.props.nodeSize/2,minNodeSize:this.props.minNodeSize,nodeColor:this.props.nodeColour,sideMargin:1},this.props.settings)});var t=this.sigmaInst.renderers[0].camera.quadtree.area;this.sigmaInst.renderers[0].camera.quadtree.area=function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];var o=t.apply(e.sigmaInst.renderers[0].camera.quadtree,r);return o.sort((function(e,t){return e.isHighlighted&&!t.isHighlighted?1:!e.isHighlighted&&t.isHighlighted?-1:0}))},this.props.draggableNodes&&sigma.plugins.dragNodes(this.sigmaInst,this.sigmaInst.renderers[0]),this.sigmaInst.initalZoomRatio=this.sigmaInst.settings("zoomingRatio"),this.props.onViewportChange&&this.sigmaInst.camera.bind("coordinatesUpdated",N()((function(){return e.props.onViewportChange(e.saveViewport())}),200)),this.props.onNodeSelect&&(this.sigmaInst.bind("clickNodes",(function(t){return e.handleNodeClick(t)})),this.sigmaInst.bind("clickStage",(function(t){return e.handleStageClick(t)}))),this.sigmaInst.bind("overNode",(function(t){var n=t.data;n.node.hoverLabel&&!1!==n.node.isActive&&(n.node.label=n.node.hoverLabel,e.sigmaInst.refresh()),e.props.onNodeHover&&e.props.onNodeHover(t)})),this.sigmaInst.bind("outNode",(function(t){var n=t.data;n.node.hoverLabel&&n.node.label&&(n.node.label=void 0,e.sigmaInst.refresh()),e.props.onNodeLeave&&e.props.onNodeLeave(t)})),this.props.hasLasso&&(this.canvasLasso=_(this.sigmaInst,{isActive:this.props.lassoActive,path:this.props.lassoPath,onPathChange:function(t){return e.props.onLassoPathChange(t)}}),this.sigmaInst.canvasLasso=this.canvasLasso);var n=this.sigmaInst.renderers[0];this.sigmaInst.settings("rendererXKey","".concat(n.options.prefix,"x")),this.sigmaInst.settings("rendererYKey","".concat(n.options.prefix,"y")),this.sigmaInst.settings("rendererSizeKey","".concat(n.options.prefix,"size")),this.sigmaInst.settings("_camera",this.sigmaInst.camera),this.props.viewport&&this.restoreViewport(this.props.viewport),this.props.recomputeLayout?this.startLayout():this.sigmaInst.refresh();var r=this.props.addExportCallback;r&&(r("network-png",(function(){return function(e){var t=e.renderers[0],n=document.createElement("canvas");n.setAttribute("width","".concat(t.width,"px")),n.setAttribute("height","".concat(t.height,"px"));var r=n.getContext("2d"),a=!0,o=!1,i=void 0;try{for(var s,l=j[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var c=s.value;c in t.domElements&&r.drawImage(t.domElements[c],0,0)}}catch(e){o=!0,i=e}finally{try{a||null==l.return||l.return()}finally{if(o)throw i}}return n.toDataURL()}(e.sigmaInst)})),r("network-svg",(function(){return function(e){var t=e.renderers[0],n={},r=new M.a(t.width,t.height);r.clearRect=function(){};for(var a=0,o=Object.keys(t.contexts);a<o.length;a++){var i=o[a];n[i]=t.contexts[i],t.contexts[i]=r}e.refresh();for(var s=0,l=Object.keys(n);s<l.length;s++){var c=l[s];t.contexts[c]=n[c]}return r.getSerializedSvg(!1)}(e.sigmaInst)})))}},{key:"componentDidUpdate",value:function(e){e.showLabels!==this.props.showLabels&&this.sigmaInst.settings("drawLabels",this.props.showLabels),e.showNodes!==this.props.showNodes&&this.sigmaInst.settings("drawNodes",this.props.showNodes),e.nodeSize!==this.props.nodeSize&&this.sigmaInst.settings("maxNodeSize",this.props.nodeSize/2),this.props.graph!==e.graph&&(this.sigmaInst.graph.clear(),this.sigmaInst.graph.read(this.props.graph)),e.lassoActive!==this.props.lassoActive&&this.canvasLasso.setActive(this.props.lassoActive),e.lassoPath!==this.props.lassoPath&&this.canvasLasso.setPath(this.props.lassoPath),this.sigmaInst.refresh()}},{key:"componentWillUnmount",value:function(){this.timeoutID&&clearTimeout(this.timeoutID),this.canvasLasso&&this.canvasLasso.destroy(),this.sigmaInst&&this.sigmaInst.kill();var e=this.props.removeExportCallback;e&&(e("network-png"),e("network-svg"))}},{key:"getNodeNeighbours",value:function(e){var t=this,n=new Set,r=!0,a=!1,o=void 0;try{for(var i,s=function(){var e=i.value;n.add(e),t.props.graph.edges.forEach((function(t){t.source===e&&n.add(t.target),t.target===e&&n.add(t.source)}))},l=e[Symbol.iterator]();!(r=(i=l.next()).done);r=!0)s()}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return Array.from(n)}},{key:"getNodeComponent",value:function(e){for(var t=this,n=e,r=new Set,a=function(){var e=n.pop();r.add(e),t.props.graph.edges.forEach((function(t){t.source!==e||r.has(t.target)||n.push(t.target),t.target!==e||r.has(t.source)||n.push(t.source)}))};n.length;)a();return Array.from(r)}},{key:"startLayout",value:function(){var e=this;this.sigmaInst&&!this.sigmaInst.isForceAtlas2Running()&&(this.props.onLayoutStart&&this.props.onLayoutStart(),this.sigmaInst.renderers[0].settings("drawEdges",!1),this.sigmaInst.startForceAtlas2(D({worker:!0,barnesHutOptimize:!1},this.props.layoutSettings)),this.timeoutID=setTimeout((function(){return e.stopLayout()}),this.props.layoutDuration))}},{key:"stopLayout",value:function(){if(this.sigmaInst&&this.sigmaInst.isForceAtlas2Running()){this.sigmaInst.renderers[0].settings("drawEdges",!0),this.sigmaInst.stopForceAtlas2();var e=this.sigmaInst.graph.nodes(),t={},n=!0,r=!1,a=void 0;try{for(var o,i=e[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;t[s.id]={x:s.x,y:s.y}}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}this.props.onLayoutChange&&this.props.onLayoutChange(t)}}},{key:"handleNodeClick",value:function(e){var t=e.data.captor.metaKey||e.data.captor.ctrlKey,n=e.data.captor.altKey||e.data.captor.shiftKey,r=e.data.node.map((function(e){return e.id}));if(n&&t){var a=this.getNodeComponent(r);this.props.onNodeSelect(a)}else if(n){var o=this.getNodeNeighbours(r);this.props.onNodeSelect(o,t)}else this.props.onNodeSelect(r,t)}},{key:"handleStageClick",value:function(e){var t=e.data.captor,n=t.isDragging,r=t.metaKey,a=t.ctrlKey;n||(r||a)||this.props.onNodeSelect()}},{key:"handleZoomChange",value:function(e){var t=Math.pow(this.sigmaInst.settings("zoomingRatio"),-e),n={duration:this.sigmaInst.settings("mouseZoomDuration")};sigma.utils.zoomTo(this.sigmaInst.camera,0,0,t,n)}},{key:"handleZoomReset",value:function(){var e={duration:this.sigmaInst.settings("mouseZoomDuration")};sigma.utils.zoomTo(this.sigmaInst.camera,0,0,1/this.sigmaInst.camera.ratio,e)}},{key:"saveViewport",value:function(){return{x:this.sigmaInst.camera.x,y:this.sigmaInst.camera.y,ratio:this.sigmaInst.camera.ratio}}},{key:"restoreViewport",value:function(e){this.sigmaInst.camera.x=e.x,this.sigmaInst.camera.y=e.y,this.sigmaInst.camera.ratio=e.ratio}},{key:"renderSecondaryControls",value:function(){var e=this;return f.a.createElement(f.a.Fragment,null,this.props.hasLasso&&f.a.createElement(O.a,{active:this.props.lassoActive,onClick:function(){return e.props.onLassoActiveChange(!e.props.lassoActive)}}),f.a.createElement(P.a,{title:"Shuffle nodes",onClick:function(){return e.startLayout()}},f.a.createElement("i",{className:"material-icons"},"shuffle")),f.a.createElement(P.a,{title:"Reset zoom",onClick:function(){return e.handleZoomReset()}},f.a.createElement("i",{className:"material-icons"},"zoom_out_map")),this.props.secondaryControls)}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,r=t.height;return f.a.createElement(E.b,{primaryControls:this.props.primaryControls,onZoomChange:function(t){return e.handleZoomChange(t)},secondaryControls:this.renderSecondaryControls(),style:D({width:n,height:r},this.props.style)},f.a.createElement("div",{className:L()("libmr-Network",this.props.className),ref:function(t){e.el=t},style:D({width:n,height:r},this.props.style)},this.props.children))}}]),t}(f.a.Component);B.propTypes={addExportCallback:g.a.func,children:g.a.node,className:g.a.string,draggableNodes:g.a.bool,edgeColour:g.a.string,fontFamily:g.a.string,graph:g.a.shape({edges:g.a.array,nodes:g.a.array}),hasLasso:g.a.bool,height:g.a.number,labelColour:g.a.string,labelSize:g.a.number,lassoActive:g.a.bool,lassoPath:g.a.array,layoutDuration:g.a.number,layoutSettings:g.a.object,minNodeSize:g.a.number,nodeColour:g.a.string,nodeRenderer:g.a.func,nodeSize:g.a.number,onLassoActiveChange:g.a.func,onLassoPathChange:g.a.func,onLayoutChange:g.a.func,onLayoutStart:g.a.func,onNodeHover:g.a.func,onNodeLeave:g.a.func,onNodeSelect:g.a.func,onViewportChange:g.a.func,primaryControls:g.a.node,recomputeLayout:g.a.bool,removeExportCallback:g.a.func,secondaryControls:g.a.node,settings:g.a.object,showLabels:g.a.bool,showNodes:g.a.bool,style:g.a.object,viewport:g.a.object,width:g.a.number},B.defaultProps={draggableNodes:!1,edgeColour:"#ccc",fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',hasLasso:!1,labelColour:"#222",labelSize:14,layoutDuration:1e3,maxLabelSize:160,minNodeSize:1,nodeColour:"#ccc",nodeSize:16,secondaryControls:[],showLabels:!0,showNodes:!0};var F=B;n.d(t,"a",(function(){return F}))},893:function(e,t,n){"use strict";var r=n(3),a=n.n(r),o=n(0),i=n.n(o),s=n(4),l=n.n(s),c=n(37),u=n.n(c),d=n(330),h=n(444),p=n(702),f=n(445),m=n(446),g=n(536),v=n(24),y=n.n(v),b=n(26),C=n.n(b),x=n(22),S=n.n(x),w=n(23),k=n.n(w),N=n(683),E=n.n(N),O=n(27),P=n.n(O),I=n(203),_=(n(1012),u.a.divIcon({className:"material-icons",html:"place",iconSize:[40,40],iconAnchor:[20,37],popupAnchor:[0,-32]})),T={},M=function(e){function t(){return y()(this,t),S()(this,k()(t).apply(this,arguments))}return P()(t,e),C()(t,[{key:"componentWillMount",value:function(){E()(k()(t.prototype),"componentWillMount",this).call(this)}},{key:"componentDidMount",value:function(){E()(k()(t.prototype),"componentDidMount",this).call(this),this.addMarkers(this.props.markers)}},{key:"shouldComponentUpdate",value:function(e){return e.markers!==this.props.markers}},{key:"componentDidUpdate",value:function(){this.addMarkers(this.props.markers)}},{key:"createLeafletElement",value:function(){return this.leafletElement=u.a.markerClusterGroup(this.props.options),this.leafletElement}},{key:"addMarkers",value:function(e){var t=this.leafletElement.getLayers(),n=!0,r=!1,a=void 0;try{for(var o,i=t[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var s=o.value;s.options.layerId===T&&this.leafletElement.removeLayer(s)}}catch(e){r=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw a}}if(Array.isArray(e)&&0!==e.length){var l=[],c=!0,d=!1,h=void 0;try{for(var p,f=e[Symbol.iterator]();!(c=(p=f.next()).done);c=!0){var m=p.value,g=m.id,v=m.latitude,y=m.longitude,b=m.name,C=m.icon,x=void 0===C?_:C;v&&y&&l.push(u.a.marker([v,y],{id:g,icon:x,title:b,layerId:T}).on("click",this.props.onMarkerClick))}}catch(e){d=!0,h=e}finally{try{c||null==f.return||f.return()}finally{if(d)throw h}}this.leafletElement.addLayers(l)}}},{key:"render",value:function(){return null}}]),t}(I.a);M.propTypes={map:i.a.PropTypes.object,markers:i.a.PropTypes.array,onMarkerClick:i.a.PropTypes.func,options:i.a.PropTypes.object},M.defaultProps={markers:[],options:{}};var j=M,A=(n(1013),{width:"30px",height:"30px",margin:"-2px 0 0 -4px",backgroundImage:"url('data:image/svg+xml;charset=utf-8;base64,PHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJMYXllcl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCINCgkgdmlld0JveD0iMCAwIDU2LjcgNTYuNyIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgNTYuNyA1Ni43IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJQb2x5X3Rvb2xfZm91ciI+DQoJPHBvbHlsaW5lIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzAxMDEwMSIgc3Ryb2tlLXdpZHRoPSIxLjQiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgcG9pbnRzPSIzNC45LDE2LjIgMTMuNCwxMy41IDIxLjUsNDMuMiANCgkJNDIuOSwzNy44IDQ4LjMsMjAuNCAJIi8+DQoJPGVsbGlwc2UgZmlsbD0iI0ZGRkZGRiIgc3Ryb2tlPSIjMDEwMTAxIiBzdHJva2Utd2lkdGg9IjAuOCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBjeD0iMTMuNCIgY3k9IjEzLjUiIHJ4PSI1LjQiIHJ5PSI1LjQiLz4NCgk8ZWxsaXBzZSBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiMwMTAxMDEiIHN0cm9rZS13aWR0aD0iMC44IiBzdHJva2UtbWl0ZXJsaW1pdD0iMTAiIGN4PSIzNC45IiBjeT0iMTYuMiIgcng9IjUuNCIgcnk9IjUuNCIvPg0KCTxlbGxpcHNlIGZpbGw9IiNGRkZGRkYiIHN0cm9rZT0iIzAxMDEwMSIgc3Ryb2tlLXdpZHRoPSIwLjgiIHN0cm9rZS1taXRlcmxpbWl0PSIxMCIgY3g9IjIxLjUiIGN5PSI0My4yIiByeD0iNS40IiByeT0iNS40Ii8+DQoJPGVsbGlwc2UgZmlsbD0iI0ZGRkZGRiIgc3Ryb2tlPSIjMDEwMTAxIiBzdHJva2Utd2lkdGg9IjAuOCIgc3Ryb2tlLW1pdGVybGltaXQ9IjEwIiBjeD0iNDIuOSIgY3k9IjM3LjgiIHJ4PSI1LjQiIHJ5PSI1LjQiLz4NCgk8cmVjdCBmaWxsPSJub25lIiB3aWR0aD0iNTYuNCIgaGVpZ2h0PSI1Ni43Ii8+DQo8L2c+DQo8L3N2Zz4=')",backgroundRepeat:"no-repeat"}),z=i.a.createClass({displayName:"LeafletMapLasso",propTypes:{className:i.a.PropTypes.string,activeClassName:i.a.PropTypes.string,initialPath:i.a.PropTypes.array,onPathChange:i.a.PropTypes.func},contextTypes:{map:i.a.PropTypes.instanceOf(u.a.Map)},getDefaultProps:function(){return{activeClassName:"is-active"}},getInitialState:function(){return{isActive:null!==(this.props.initialPath||null)}},componentDidMount:function(){var e=this;this.lasso=L.featureGroup.lassoSelect({finishedTooltip:"Click outside the region to cancel the filter.",polyline:{color:"#673c90"},initialPath:this.props.initialPath}).addTo(this.context.map),this.context.map.lasso=this.lasso,this.lasso.on("pathchange",(function(){var t=e.props.onPathChange;t&&t(e.lasso.getPath())}))},componentWillReceiveProps:function(e){this.props.initialPath&&!e.initialPath&&this.setState({isActive:!1})},componentDidUpdate:function(e,t){null===this.props.initialPath&&this.lasso.reset(),t.isActive!==this.state.isActive&&(this.state.isActive?this.lasso.enable():(this.lasso.disable(),this.lasso.reset()))},onLassoToggleButtonClick:function(e){e.stopPropagation(),this.setState({isActive:!this.state.isActive})},render:function(){var e=this.props,t=e.className,n=e.activeClassName,r=this.state.isActive;return i.a.createElement("button",{className:l()("leaflet-map-lasso-button",t,a()({},n,r)),title:r?"Disable map region filter":"Activate map region filter",onClick:this.onLassoToggleButtonClick},i.a.createElement("i",{className:"material-icons mr-lasso-icon",style:A}))}});function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){a()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.a=i.a.createClass({displayName:"LeafletMap",propTypes:{height:i.a.PropTypes.number,width:i.a.PropTypes.number,className:i.a.PropTypes.string,markerIds:i.a.PropTypes.array,markers:i.a.PropTypes.arrayOf(i.a.PropTypes.object),markerComponent:i.a.PropTypes.func,markerSize:i.a.PropTypes.number,cluster:i.a.PropTypes.bool,clusterOptions:i.a.PropTypes.object,center:d.a.latlng,zoom:i.a.PropTypes.number,highlightedColour:i.a.PropTypes.string,lassoPath:i.a.PropTypes.array,mapboxStyle:i.a.PropTypes.string,mapboxKey:i.a.PropTypes.string,buttonClassname:i.a.PropTypes.string,onBoundsChange:i.a.PropTypes.func,onLassoPathChange:i.a.PropTypes.func,refitOnMarkerChange:i.a.PropTypes.bool},getDefaultProps:function(){return{cluster:!1,markers:[],markerIds:[],refitOnMarkerChange:!0}},componentDidMount:function(){this.refitMapBounds()},componentDidUpdate:function(e){0===e.markers.length&&this.props.markers.length?this.refitMapBounds():this.props.refitOnMarkerChange&&e.markerIds!==this.props.markerIds&&this.refitMapBounds()},componentWillUnmount:function(){var e=this.props.onBoundsChange;e&&this.map&&e({center:this.map.getCenter(),zoom:this.map.getZoom()})},onClusterMarkerClick:function(e){var t=e.target,n=e.event;this.props.onMarkerClick&&this.props.onMarkerClick(t.options,n)},onMarkerLayerClick:function(e){var t=e.marker,n=e.event;this.props.onMarkerClick&&this.props.onMarkerClick(t,n)},onClick:function(e){this.props.onClick&&this.props.onClick(e,this.map)},getBounds:function(){var e=this.props.markers;if(!e||0===e.length)return u.a.latLngBounds([-85,-180],[85,180]);var t=-1e3,n=-1e3,r=1e3,a=1e3,o=!0,i=!1,s=void 0;try{for(var l,c=e[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var d=l.value;if(d.position||d.latitude&&d.longitude){var h=d.latitude||d.position[0],p=d.longitude||d.position[1];h>t&&(t=h),h<r&&(r=h),p>n&&(n=p),p<a&&(a=p)}}}catch(e){i=!0,s=e}finally{try{o||null==c.return||c.return()}finally{if(i)throw s}}var f=u.a.latLng([r,a]),m=u.a.latLng([t,n]);return u.a.latLngBounds(f,m)},refitMapBounds:function(e){e?this.leafletMap.leafletElement.panTo(e):this.leafletMap.leafletElement.fitBounds(this.getBounds())},renderMarkers:function(){var e=this.props,t=e.markers,n=e.cluster,r=e.markerComponent,a=e.highlightedColour,o=e.markerProps,s=void 0===o?{}:o;return n?i.a.createElement(j,{markers:t||[],onMarkerClick:this.onClusterMarkerClick,options:this.props.clusterOptions}):r?i.a.createElement(g.a,{markers:t||[],latitudeExtractor:function(e){return e.position[0]},longitudeExtractor:function(e){return e.position[1]},markerComponent:r,propsForMarkers:D({},s,{onClick:this.onMarkerLayerClick,highlightedColour:a})}):t?t.map((function(e,t){var n=e.position,r=e.title,a=e.icon,o=void 0===a?_:a;return i.a.createElement(h.a,{key:t,position:n,title:r,icon:o})})):null},renderDefaultMarkers:function(){return this.props.markers?this.props.markers.map((function(e,t){var n=e.position;return i.a.createElement(h.a,{key:n.join("-"),position:n})})):null},render:function(){var e=this,t=this.props,n=t.center,r=t.zoom,a=t.mapboxStyle,o=t.mapboxKey;return i.a.createElement("div",{className:l()("cgps-leaflet-map","cgps-leaflet-map--marker-size-".concat(this.props.markerSize),this.props.className)},i.a.createElement(p.a,{onClick:this.onClick,animate:!1,center:n,zoom:r,zoomControl:!1,boundsOptions:{animate:!1},onMoveend:function(t){var n=t.target;e.map=n},ref:function(t){e.leafletMap=t},style:{width:"100%",height:"100%"}},i.a.createElement(f.a,{attribution:"\n  Map data &copy;\n  <a href='http://openstreetmap.org'>OpenStreetMap</a> contributors,\n  <a href='http://creativecommons.org/licenses/by-sa/2.0/'>CC-BY-SA</a>,\n  Imagery © <a href='http://mapbox.com'>Mapbox</a>\n",url:"https://api.mapbox.com/styles/v1/mapbox/".concat(a,"/tiles/{z}/{x}/{y}?access_token=").concat(o)}),this.renderMarkers(),i.a.createElement("div",{className:"cgps-leaflet-map-controls"},this.props.controls,i.a.createElement(z,{className:this.props.buttonClassname,initialPath:this.props.lassoPath,onPathChange:this.props.onLassoPathChange})),i.a.createElement(m.a,{position:"bottomright"})),this.props.children)}})},894:function(e,t,n){"use strict";n(1110);var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=(n(1112),function(e){var t=e.strategies,n=void 0===t?[]:t,r=e.children;return a.a.createElement("div",{className:"cgps-login-links"},n.filter((function(e){return"passwordless"!==e})).map((function(e){return a.a.createElement("a",{key:e,className:"cgps-login-button cgps-login-button--".concat(e),href:"/auth/".concat(e)},a.a.createElement("div",{className:"cgps-login-button__icon"}),a.a.createElement("div",{className:"cgps-login-button__text"},"Sign in with ",e))})),r)});s.propTypes={strategies:i.a.arrayOf(i.a.string),children:i.a.node,contactEmail:i.a.string};var l=s,c=function(e){var t=e.message,n=e.appName,r=void 0===n?"Microreact":n,o=e.strategies,i=e.additional,s=e.termsLink;return a.a.createElement("section",{className:"cgps-login"},a.a.createElement("h3",{className:"cgps-heading"},"Sign in to your ",r," account"),t&&a.a.createElement("p",{className:"cgps-login-message"},t),a.a.createElement(l,{strategies:o},i),s&&a.a.createElement("p",{className:"cgps-login-tos"},"By signing in, you are agreeing to our ",s,"."),a.a.createElement("h4",{className:"cgps-heading"},"Access to Information"),a.a.createElement("p",null,r," accesses your ",a.a.createElement("strong",null,"name"),", ",a.a.createElement("strong",null,"email"),", and ",a.a.createElement("strong",null,"profile photo")," when signing in with ",a.a.createElement("strong",null,"Google"),", ",a.a.createElement("strong",null,"Twitter"),", or ",a.a.createElement("strong",null,"Facebook"),"."),a.a.createElement("p",null,"Other information, such as ",a.a.createElement("strong",null,"tweets")," and ",a.a.createElement("strong",null,"Facebook friends"),", will not be accessed or stored by ",r,"."))};c.displayName="Login",c.propTypes={message:i.a.string,appName:i.a.string,strategies:i.a.arrayOf(i.a.string),additional:i.a.node,termsLink:i.a.node};var u=c;n.d(t,"a",(function(){return u}))},915:function(e,t,n){"use strict";n(1138);var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(4),l=n.n(s),c=n(304),u=function(e){var t=e.appName,n=void 0===t?"Microreact":t,r=e.visible,o=void 0===r||r,i=e.policyLink,s=e.onAccept,u=e.className;return a.a.createElement(c.a,{visible:o,transitionAppear:!0,removeOnLeave:!0,motionName:"libmr"},(function(e){return a.a.createElement("aside",{className:l()("libmr-CookieConsent",u,e.className)},a.a.createElement("div",{className:"libmr-CookieConsent-message"},a.a.createElement("h2",null,"We use cookies to give you the best online experience."),a.a.createElement("p",null,"By using ",n,", you agree to our use of cookies in accordance with our cookie policy."),a.a.createElement("div",{className:"libmr-CookieConsent-actions"},i,a.a.createElement("button",{onClick:s},"Accept"))))}))};u.propTypes={appName:i.a.string,className:i.a.string,onAccept:i.a.func,policyLink:i.a.node,visible:i.a.bool};var d=u;n.d(t,"a",(function(){return d}))},916:function(e,t,n){"use strict";n(1114);var r=n(24),a=n.n(r),o=n(26),i=n.n(o),s=n(22),l=n.n(s),c=n(23),u=n.n(c),d=n(27),h=n.n(d),p=n(0),f=n.n(p),m=function(e){function t(){var e,n,r;a()(this,t);for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return l()(r,(n=r=l()(this,(e=u()(t)).call.apply(e,[this].concat(i))),r.state={sending:!1,showControls:!1,email:""},r.showControls=function(e){e.stopPropagation(),r.setState({showControls:!0},(function(){return r.emailInput.focus()}))},r.emailInputChange=function(e){r.setState({email:e.target.value})},r.emailInputKeyUp=function(e){"Escape"===e.key&&(r.setState({showControls:!1}),e.stopPropagation())},r.submitForm=function(e){e.preventDefault();var t=r.state.email;if(t.length){var n=r.props,a=n.getPasswordlessToken,o=n.showMessage;r.setState({sending:!0}),a(t).then((function(){r.setState({showControls:!1,sending:!1}),o("Your sign-in link has been sent to ".concat(t,"."))})).catch((function(e){r.setState({sending:!1}),console.error(e),o("Something went wrong, please try again later.")}))}},n))}return h()(t,e),i()(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.showControls,r=t.email,a=this.props.spinner;return n?f.a.createElement("form",{className:"cgps-login-controls",onSubmit:this.submitForm},f.a.createElement("input",{type:"email",value:r,placeholder:"Email address",onChange:this.emailInputChange,onKeyUp:this.emailInputKeyUp,disabled:this.state.sending,ref:function(t){e.emailInput=t}}),f.a.createElement("button",{type:"submit"},this.state.sending?f.a.createElement(a,null):f.a.createElement("i",{className:"material-icons"},"send"))):f.a.createElement("a",{className:"cgps-login-button cgps-login-button--passwordless",onClick:this.showControls},f.a.createElement("span",{className:"cgps-login-button__icon"}),f.a.createElement("span",{className:"cgps-login-button__text"},"Sign in with an email"))}}]),t}(f.a.Component);m.displayName="SignInPasswordless";var g=m;n.d(t,"a",(function(){return g}))},918:function(e,t,n){"use strict";n(1031);var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=function(e){var t=e.entries,n=e.current,r=e.onTravel;return a.a.createElement("ul",{className:"libmr-History"},t.map((function(e,t){return a.a.createElement("li",{key:t,tabIndex:"0",onClick:function(){return r(t)},className:t===n?"is-selected":null},a.a.createElement("img",{src:e}))})))};s.propTypes={current:i.a.number,entries:i.a.arrayOf(i.a.string).isRequired,onTravel:i.a.func.isRequired};var l=s;n.d(t,"a",(function(){return l}))},921:function(e,t,n){"use strict";n(1037);var r=n(9),a=n.n(r),o=n(0),i=n.n(o),s=n(1),l=n.n(s),c=n(4),u=n.n(c),d=n(892),h=n(107),p=n(82),f={icon:l.a.node,component:l.a.elementType,title:l.a.string},m=function(e){var t=e.children,n=e.className,r=e.navStyle,o=e.panes,s=e.style,l=i.a.useState(null),c=a()(l,2),f=c[0],m=c[1],g=i.a.useState(!1),v=a()(g,2),y=v[0],b=v[1],C=null!==f;return i.a.createElement("div",{className:u()("libmr-SidePane",{active:C,open:y},n),style:s},i.a.createElement("div",{className:"libmr-SidePane-main"},t),i.a.createElement(d.a,{transitionName:"libmr-SidePane",onEnd:function(){return b(C)}},C&&i.a.createElement("aside",{key:"aside",className:"libmr-SidePane-aside"},i.a.createElement(h.a,{className:"libmr-SidePane-close",onClick:function(){return m(null)},title:"Close"},i.a.createElement("i",{className:"material-icons"},"close")),i.a.createElement("div",{className:"libmr-SidePane-contents"},o[f].title&&i.a.createElement("h3",{className:"libmr-SidePane-title"},o[f].title),i.a.createElement("div",{className:"libmr-SidePane-contents-overflow"},i.a.createElement(o[f].component))))),i.a.createElement("nav",{className:"libmr-SidePane-nav",style:r},o.map((function(e,t){var n=e.icon;return i.a.createElement(p.a,{key:t,active:f===t,onClick:function(){return m(f===t?null:t)}},n)}))))};m.propTypes={children:l.a.node,className:l.a.string,navStyle:l.a.object,panes:l.a.arrayOf(l.a.shape(f)),style:l.a.object};var g=m;n.d(t,"a",(function(){return g}))},922:function(e,t,n){"use strict";n(1017);var r=n(0),a=n.n(r),o=n(1),i=n.n(o),s=n(4),l=n.n(s),c=n(180),u=n.n(c),d=n(493),h=n.n(d),p=function(e){var t=e.className,n=e.id,r=e.onChange,o=e.checked,i=e.children,s=e.label,c=void 0===s?i:s;return a.a.createElement(u.a,{id:n,className:l()("libmr-Checkbox",t)},a.a.createElement(h.a,{onChange:r,checked:o}),a.a.createElement("label",null,c))};p.propTypes={checked:i.a.bool,children:i.a.node,className:i.a.string,id:i.a.string,label:i.a.node,onChange:i.a.func};var f=p;n.d(t,"a",(function(){return f}))},932:function(e,t,n){var r={"./":144,"./FormattedName.react":410,"./FormattedName.react.js":410,"./canar":689,"./canar.js":689,"./index":144,"./index.js":144,"./klepn":690,"./klepn.js":690,"./ngonorrhoeae":691,"./ngonorrhoeae.js":691,"./rensm":692,"./rensm.js":692,"./saureus":693,"./saureus.js":693,"./sequi":694,"./sequi.js":694,"./strpn":695,"./strpn.js":695,"./styphi":696,"./styphi.js":696,"./vibcl":697,"./vibcl.js":697,"./zikv":698,"./zikv.js":698};function a(e){var t=o(e);return n(t)}function o(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=932},96:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n(9),a=n.n(r),o=window.URL||window.webkitURL,i={};function s(e,t,n){var r=e;"svg"===n?r=o.createObjectURL(new Blob([e],{type:"image/svg+xml"})):"nwk"===n&&(r=o.createObjectURL(new Blob([e],{type:"text/plain"})));var a=document.createElement("a");void 0!==a.download?(a.download="".concat(t,".").concat(n),a.href=r,document.body.appendChild(a),a.click(),document.body.removeChild(a)):document.location.href="png"===n?r.replace("data:image/png","image/octet-stream"):r}function l(e,t){i[e]=t}function c(e){i[e]=void 0}function u(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if("function"==typeof i[e])return Promise.resolve(t).then(i[e]).then((function(r){if(n){var o=e.split("-"),i=a()(o,2)[1];s(r,t,i)}return r}));throw new Error("Invalid export type: ".concat(e))}},975:function(e,t){},977:function(e,t){},981:function(e,t){},984:function(e,t){},987:function(e,t){},989:function(e,t){},991:function(e,t){},995:function(e,t){},997:function(e,t){},999:function(e,t){}},[[1016,1,2]]]);